<div class="container-fluid bg-white p-5 rounded-lg" style="border-radius: 10px;">
  <!-- Tab Navigation -->
  <div class="row mb-5">
    <div class="col-12">
      <div class="filter-tabs-orders">
        <div class="nav nav-pills nav-pills-custom">
          <a class="nav-link" 
            [class.active]="activeTab === 'knowledge'"
            (click)="setActiveTab('knowledge')">
            <i class="ki-outline ki-book me-2"></i>
            {{ lang === 'ar' ? 'طلبات المعرفة' : 'Knowledge Orders' }}
          </a>
          <a class="nav-link" 
            [class.active]="activeTab === 'meeting'"
            (click)="setActiveTab('meeting')">
            <i class="ki-outline ki-calendar me-2"></i>
            {{ lang === 'ar' ? 'طلبات الاجتماعات' : 'Meeting Orders' }}
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Knowledge Orders Tab -->
  <div *ngIf="activeTab === 'knowledge'">
  <div class="row g-4">
    <!-- Loading State -->
    <div *ngIf="isLoading$ | async" class="col-12">
      <div class="d-flex justify-content-center align-items-center" style="min-height: 200px;">
        <div class="spinner-border text-info" role="status" style="width: 3rem; height: 3rem;">
          <span class="visually-hidden">{{ lang === 'ar' ? 'جاري التحميل...' : 'Loading...' }}</span>
        </div>
      </div>
    </div>

    <!-- Orders Cards -->
    <div *ngFor="let order of orders$ | async" class="col-12">
      <div class="card card-custom gutter-b">
        <div class="card-body p-6">
          <!-- Order Header -->
          <div class="d-flex justify-content-between align-items-start mb-4">
            <div class="d-flex align-items-center">
              <div class="symbol symbol-40px me-3">
                <div class="symbol-label bg-light-info">
                  <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5.51253 7.31246L9.81753 8.40746H9.87753C9.93463 8.40912 9.99059 8.39118 10.0361 8.35661C10.0816 8.32204 10.1138 8.27293 10.1275 8.21746C10.1358 8.18545 10.1375 8.15212 10.1328 8.1194C10.1281 8.08669 10.1169 8.05524 10.0999 8.02688C10.0829 7.99851 10.0605 7.9738 10.0339 7.95416C10.0073 7.93452 9.97713 7.92035 9.94503 7.91246L5.63503 6.82496C5.60302 6.81692 5.56974 6.81526 5.53708 6.82008C5.50443 6.82489 5.47305 6.8361 5.44473 6.85304C5.41641 6.86999 5.3917 6.89235 5.37202 6.91884C5.35234 6.94534 5.33807 6.97545 5.33003 7.00746C5.32198 7.03947 5.32032 7.07275 5.32514 7.1054C5.32996 7.13805 5.34116 7.16944 5.35811 7.19776C5.37506 7.22608 5.39741 7.25079 5.42391 7.27047C5.4504 7.29015 5.48052 7.30442 5.51253 7.31246Z" fill="#3799FF"/>
                    <path d="M9.94 9.12996L5.635 8.03496C5.60316 8.02692 5.57004 8.02522 5.53754 8.02998C5.50504 8.03473 5.4738 8.04585 5.44559 8.06268C5.41739 8.07951 5.39277 8.10173 5.37315 8.12807C5.35354 8.15441 5.3393 8.18436 5.33125 8.21621C5.32321 8.24806 5.32152 8.28117 5.32627 8.31367C5.33103 8.34617 5.34214 8.37742 5.35897 8.40562C5.3758 8.43383 5.39802 8.45844 5.42437 8.47806C5.45071 8.49768 5.48066 8.51192 5.5125 8.51996L9.8175 9.61496H9.8775C9.94381 9.62325 10.0107 9.60486 10.0634 9.56383C10.1162 9.52281 10.1505 9.46251 10.1588 9.39621C10.167 9.32991 10.1487 9.26302 10.1076 9.21028C10.0666 9.15754 10.0063 9.12325 9.94 9.11496V9.12996Z" fill="#3799FF"/>
                    <path d="M3.16751 14.9999H3.48501L4.34751 20.2499L3.54501 21.0499C3.32339 21.2739 3.18937 21.5699 3.16726 21.8842C3.14515 22.1985 3.23641 22.5103 3.42449 22.7631C3.61257 23.0159 3.88501 23.1929 4.19241 23.262C4.49981 23.3312 4.82181 23.2879 5.10001 23.1399C5.26829 23.3316 5.47554 23.4852 5.70791 23.5904C5.94029 23.6956 6.19244 23.75 6.44751 23.7499H18.5525C18.9782 23.7519 19.3906 23.6019 19.7155 23.3269C20.0404 23.052 20.2566 22.6701 20.325 22.2499L21.515 14.9999H21.8325C22.0838 14.9999 22.3248 14.9001 22.5025 14.7224C22.6802 14.5447 22.78 14.3037 22.78 14.0524V12.7499C22.78 12.4986 22.6802 12.2576 22.5025 12.08C22.3248 11.9023 22.0838 11.8024 21.8325 11.8024H21.25V4.73494C21.2501 4.54827 21.2075 4.36406 21.1255 4.19637C21.0435 4.02867 20.9242 3.88194 20.7769 3.76737C20.6295 3.6528 20.4579 3.57343 20.2752 3.53531C20.0924 3.49719 19.9034 3.50134 19.7225 3.54744L19.5 3.59994V2.82994C19.5007 2.6892 19.4649 2.55068 19.3962 2.42786C19.3275 2.30505 19.2281 2.20213 19.1078 2.12913C18.9874 2.05613 18.8503 2.01553 18.7096 2.01129C18.5689 2.00705 18.4295 2.03931 18.305 2.10494L17.555 2.50244V1.96744C17.5547 1.82744 17.5134 1.69061 17.4362 1.57379C17.3591 1.45697 17.2494 1.36528 17.1208 1.31C16.9922 1.25473 16.8502 1.23829 16.7124 1.26271C16.5745 1.28713 16.4468 1.35134 16.345 1.44744L12.5 5.06744L8.66751 1.44744C8.56571 1.35134 8.43802 1.28713 8.30017 1.26271C8.16232 1.23829 8.02034 1.25473 7.89172 1.31C7.7631 1.36528 7.65346 1.45697 7.5763 1.57379C7.49915 1.69061 7.45786 1.82744 7.45751 1.96744V2.49994L6.85251 2.18494C6.71192 2.11166 6.55485 2.07575 6.39639 2.08066C6.23792 2.08556 6.08338 2.13111 5.94758 2.21294C5.81179 2.29477 5.69931 2.41012 5.62093 2.54794C5.54256 2.68575 5.50092 2.8414 5.50001 2.99994V3.59994L5.28501 3.54744C5.10363 3.49999 4.91378 3.49481 4.73008 3.5323C4.54638 3.56978 4.37374 3.64893 4.22545 3.76365C4.07716 3.87837 3.95718 4.0256 3.87475 4.19399C3.79233 4.36239 3.74965 4.54745 3.75001 4.73494V11.7974H3.16751C3.04267 11.7974 2.91905 11.8221 2.80376 11.87C2.68848 11.918 2.58381 11.9882 2.49576 12.0767C2.40771 12.1652 2.33802 12.2703 2.2907 12.3858C2.24338 12.5013 2.21936 12.6251 2.22001 12.7499V14.0574C2.22134 14.3079 2.32174 14.5476 2.49929 14.7242C2.67684 14.9008 2.91709 14.9999 3.16751 14.9999ZM4.00001 14.9999H9.59501L7.96251 16.6349C7.91261 16.3975 7.7707 16.1895 7.56783 16.0565C7.36497 15.9234 7.11766 15.8761 6.88001 15.9249H6.84001C6.60371 15.9743 6.3964 16.1149 6.26302 16.3161C6.12965 16.5174 6.08096 16.7631 6.12751 16.9999L6.37751 18.2074L4.78001 19.8049L4.00001 14.9999ZM6.80251 17.7924L6.61751 16.9074C6.60576 16.8534 6.60479 16.7976 6.61464 16.7432C6.6245 16.6888 6.645 16.6369 6.67496 16.5905C6.70492 16.544 6.74376 16.504 6.78924 16.4725C6.83473 16.4411 6.88596 16.419 6.94001 16.4074H6.97751C7.03157 16.395 7.08757 16.3935 7.1422 16.4031C7.19684 16.4126 7.24901 16.433 7.29562 16.4631C7.34223 16.4932 7.38235 16.5323 7.41359 16.5781C7.44483 16.6239 7.46657 16.6756 7.47751 16.7299L7.54501 17.0574L6.80251 17.7924ZM3.90001 22.5599C3.82397 22.4842 3.76363 22.3942 3.72246 22.2951C3.68129 22.196 3.6601 22.0898 3.6601 21.9824C3.6601 21.8751 3.68129 21.7689 3.72246 21.6698C3.76363 21.5707 3.82397 21.4807 3.90001 21.4049L6.83001 18.4724L8.00001 17.3149L10.3875 14.9299L11.655 13.6599C11.7296 13.5785 11.8198 13.5131 11.9203 13.4675C12.0209 13.4219 12.1296 13.3971 12.24 13.3947C12.3503 13.3923 12.46 13.4122 12.5625 13.4533C12.6649 13.4945 12.758 13.5559 12.836 13.6339C12.9141 13.712 12.9755 13.805 13.0166 13.9075C13.0577 14.0099 13.0777 14.1196 13.0752 14.23C13.0728 14.3403 13.0481 14.4491 13.0025 14.5496C12.9569 14.6501 12.8914 14.7404 12.81 14.8149L8.16001 19.4649L7.00001 20.6174L5.06001 22.5599C4.98403 22.6364 4.89367 22.6971 4.79413 22.7386C4.69459 22.78 4.58783 22.8013 4.48001 22.8013C4.3722 22.8013 4.26544 22.78 4.1659 22.7386C4.06636 22.6971 3.976 22.6364 3.90001 22.5599ZM11.4425 21.1924C11.453 21.3018 11.4196 21.4109 11.3498 21.4957C11.28 21.5805 11.1794 21.6342 11.07 21.6449H11.03C10.976 21.6502 10.9215 21.6447 10.8695 21.6288C10.8176 21.613 10.7694 21.587 10.7275 21.5524C10.6428 21.4812 10.5891 21.38 10.5775 21.2699L10.275 18.0449L11.0725 17.2499L11.4425 21.1924ZM8.39001 21.1424C8.41178 21.2504 8.39023 21.3627 8.33001 21.4549C8.29994 21.5007 8.261 21.54 8.21548 21.5705C8.16997 21.601 8.1188 21.6221 8.06501 21.6324H8.03001C7.97612 21.6453 7.92019 21.6471 7.86556 21.6379C7.81094 21.6286 7.75873 21.6085 7.71207 21.5786C7.6654 21.5487 7.62523 21.5098 7.59396 21.464C7.56268 21.4183 7.54093 21.3668 7.53001 21.3124L7.43501 20.8674L8.17001 20.1324L8.39001 21.1424ZM19.83 22.1624C19.7817 22.4663 19.6264 22.7428 19.3922 22.9422C19.1579 23.1416 18.8601 23.2508 18.5525 23.2499H6.44751C6.26891 23.2491 6.09245 23.2111 5.92933 23.1383C5.76621 23.0656 5.62 22.9597 5.50001 22.8274L7.03001 21.2974L7.05501 21.4224C7.09857 21.6282 7.21149 21.8128 7.37488 21.9452C7.53827 22.0776 7.74219 22.1499 7.95251 22.1499C8.01641 22.1506 8.08016 22.1439 8.14251 22.1299H8.17751C8.29524 22.1055 8.40699 22.0582 8.5064 21.9905C8.6058 21.9229 8.69091 21.8364 8.75685 21.7358C8.82278 21.6353 8.86826 21.5228 8.89068 21.4046C8.9131 21.2865 8.91203 21.1651 8.88751 21.0474L8.61251 19.7249L9.81501 18.4999L10.08 21.3149C10.1001 21.5444 10.206 21.7577 10.3766 21.9125C10.5471 22.0673 10.7697 22.1521 11 22.1499H11.0875H11.1275C11.3694 22.1265 11.5922 22.0081 11.7469 21.8206C11.9015 21.6331 11.9755 21.3919 11.9525 21.1499L11.5325 16.7874L13.1575 15.1649C13.2067 15.1129 13.2527 15.0578 13.295 14.9999H21L19.83 22.1624ZM19.83 4.03244C19.9368 4.00518 20.0484 4.00273 20.1563 4.02526C20.2642 4.0478 20.3655 4.09472 20.4525 4.16244C20.5435 4.22787 20.6178 4.31378 20.6695 4.41322C20.7212 4.51267 20.7488 4.62287 20.75 4.73494V11.7974H13.5925V5.61994L14.25 5.45244V8.03494C14.2504 8.182 14.2923 8.32597 14.3709 8.45023C14.4496 8.5745 14.5618 8.67399 14.6946 8.73724C14.8273 8.80049 14.9753 8.82491 15.1213 8.8077C15.2674 8.79048 15.4056 8.73232 15.52 8.63994L15.8675 8.35994L16.215 8.63994C16.3288 8.73805 16.4686 8.80108 16.6175 8.82141C16.7664 8.84174 16.9179 8.81849 17.0539 8.75449C17.1898 8.69049 17.3043 8.58847 17.3835 8.46077C17.4626 8.33307 17.5031 8.18516 17.5 8.03494V4.62994L19.3075 4.16994L19.83 4.03244ZM11.9075 11.7974V5.67744H13.0925V11.7974H11.9075ZM14.75 5.32494L17 4.74994V8.03494C16.9999 8.08736 16.985 8.13869 16.957 8.18298C16.929 8.22728 16.889 8.26272 16.8416 8.28522C16.7943 8.30772 16.7415 8.31634 16.6895 8.3101C16.6374 8.30385 16.5882 8.28299 16.5475 8.24994L16.0475 7.84244C16.003 7.8063 15.9474 7.78659 15.89 7.78659C15.8327 7.78659 15.7771 7.8063 15.7325 7.84244L15.2325 8.24994C15.1921 8.28328 15.143 8.30439 15.091 8.31077C15.039 8.31715 14.9862 8.30854 14.9389 8.28595C14.8917 8.26336 14.8518 8.22773 14.8241 8.18326C14.7964 8.13879 14.782 8.08733 14.7825 8.03494L14.75 5.32494ZM18.525 2.54994C18.5736 2.52216 18.6287 2.50773 18.6847 2.50811C18.7407 2.50848 18.7955 2.52366 18.8438 2.55208C18.892 2.58051 18.9319 2.62119 18.9593 2.66998C18.9867 2.71878 19.0008 2.77396 19 2.82994V3.72994L13.6775 5.08244L18.525 2.54994ZM16.6775 1.81244C16.708 1.78371 16.7462 1.76451 16.7874 1.75718C16.8286 1.74985 16.8711 1.75471 16.9095 1.77117C16.948 1.78763 16.9809 1.81497 17.0041 1.84983C17.0272 1.8847 17.0397 1.92557 17.04 1.96744V2.76244L13.9825 4.35744L16.6775 1.81244ZM7.96001 1.96744C7.96029 1.92557 7.97278 1.8847 7.99596 1.84983C8.01914 1.81497 8.05199 1.78763 8.09048 1.77117C8.12898 1.75471 8.17144 1.74985 8.21266 1.75718C8.25387 1.76451 8.29206 1.78371 8.32251 1.81244L11.0175 4.35744L7.96001 2.76244V1.96744ZM6.00001 2.99994C5.99926 2.92706 6.01748 2.85523 6.0529 2.79153C6.08831 2.72783 6.13969 2.67443 6.20198 2.6366C6.26428 2.59877 6.33535 2.5778 6.4082 2.57576C6.48106 2.57371 6.55319 2.59066 6.61751 2.62494L11.32 5.07744L6.00001 3.72744V2.99994ZM4.25001 4.72994C4.24924 4.61936 4.27412 4.5101 4.3227 4.41076C4.37129 4.31143 4.44225 4.22471 4.53001 4.15744C4.61698 4.08972 4.7183 4.0428 4.82619 4.02026C4.93409 3.99773 5.04571 4.00019 5.15251 4.02744L5.69001 4.16494L11.395 5.61494V11.7974H4.25001V4.72994ZM2.72251 12.7499C2.72251 12.6317 2.76932 12.5182 2.8527 12.4344C2.93608 12.3505 3.04926 12.3031 3.16751 12.3024H21.8325C21.9508 12.3031 22.0639 12.3505 22.1473 12.4344C22.2307 12.5182 22.2775 12.6317 22.2775 12.7499V14.0574C22.2769 14.175 22.2297 14.2876 22.1463 14.3705C22.0629 14.4534 21.9501 14.4999 21.8325 14.4999H13.515C13.5543 14.3085 13.5506 14.1107 13.504 13.9209C13.4574 13.7311 13.3691 13.554 13.2456 13.4025C13.1221 13.251 12.9665 13.1289 12.79 13.045C12.6134 12.9611 12.4205 12.9175 12.225 12.9174C12.052 12.9168 11.8806 12.9507 11.7209 13.0172C11.5612 13.0838 11.4164 13.1816 11.295 13.3049L10.0975 14.4999H3.16751C3.04949 14.4999 2.93631 14.4531 2.85285 14.3696C2.7694 14.2861 2.72251 14.173 2.72251 14.0549V12.7499Z" fill="#3799FF"/>
                    <path d="M13.0575 21.1449C13.0345 21.3868 13.1085 21.628 13.2632 21.8155C13.4178 22.003 13.6406 22.1215 13.8825 22.1449H13.9225H14C14.2278 22.1446 14.4473 22.0594 14.6156 21.9059C14.7839 21.7524 14.8889 21.5417 14.91 21.3149L15.3325 16.8149C15.3555 16.5729 15.2815 16.3317 15.1269 16.1442C14.9722 15.9567 14.7494 15.8383 14.5075 15.8149H14.4675C14.3475 15.8035 14.2265 15.8159 14.1112 15.8513C13.996 15.8868 13.8889 15.9446 13.7961 16.0214C13.7032 16.0983 13.6264 16.1927 13.57 16.2992C13.5136 16.4058 13.4788 16.5224 13.4675 16.6424L13.0575 21.1449ZM13.5575 21.1924L13.98 16.6924C13.9894 16.5894 14.0368 16.4936 14.1131 16.4237C14.1895 16.3539 14.2891 16.3151 14.3925 16.3149H14.43H14.47C14.5242 16.3196 14.5769 16.335 14.625 16.3602C14.6732 16.3855 14.7158 16.42 14.7505 16.4619C14.7851 16.5038 14.8111 16.5521 14.8269 16.6041C14.8427 16.6562 14.848 16.7108 14.8425 16.7649L14.4225 21.2649C14.411 21.3749 14.3572 21.4762 14.2725 21.5474C14.2307 21.5819 14.1824 21.6079 14.1305 21.6238C14.0786 21.6397 14.024 21.6451 13.97 21.6399H13.93C13.8216 21.6291 13.7218 21.5761 13.6521 21.4924C13.5824 21.4087 13.5485 21.3009 13.5575 21.1924Z" fill="#3799FF"/>
                    <path d="M16.8275 22.1225H16.8675C16.9293 22.1342 16.9921 22.14 17.055 22.14C17.2653 22.1399 17.4693 22.0676 17.6326 21.9352C17.796 21.8028 17.909 21.6182 17.9525 21.4125L18.39 19.31L18.8725 17C18.9213 16.7623 18.874 16.515 18.741 16.3121C18.6079 16.1093 18.3999 15.9674 18.1625 15.9175H18.1225C17.8849 15.8686 17.6376 15.9159 17.4347 16.049C17.2318 16.182 17.0899 16.39 17.04 16.6275L16.12 21.04C16.0704 21.2773 16.1171 21.5246 16.2498 21.7276C16.3824 21.9306 16.5902 22.0726 16.8275 22.1225ZM16.61 21.1425L17.53 16.73C17.5496 16.6364 17.6008 16.5526 17.675 16.4924C17.7493 16.4323 17.842 16.3997 17.9375 16.4H18.0225H18.06C18.1141 16.4115 18.1653 16.4336 18.2108 16.4651C18.2563 16.4965 18.2951 16.5365 18.3251 16.583C18.355 16.6295 18.3755 16.6814 18.3854 16.7358C18.3952 16.7901 18.3943 16.8459 18.3825 16.9L17.9 19.2175L17.46 21.32C17.4491 21.3743 17.4273 21.4258 17.3961 21.4716C17.3648 21.5173 17.3246 21.5563 17.2779 21.5861C17.2313 21.616 17.1791 21.6361 17.1245 21.6454C17.0698 21.6546 17.0139 21.6528 16.96 21.64H16.92C16.817 21.6151 16.7274 21.5515 16.67 21.4625C16.6392 21.4158 16.618 21.3635 16.6077 21.3085C16.5974 21.2536 16.5982 21.1971 16.61 21.1425Z" fill="#3799FF"/>
                    </svg>
                    
                    
                      

                </div>
              </div>
              <div>
                <div class="d-flex align-items-center mb-1">
                  <h6 class="mb-0 fw-bold me-2">
                    {{ lang === 'ar' ? 'طلب رقم' : 'Order' }} {{ order.order_no }}
                  </h6>
                  <button 
                    type="button" 
                    class="btn btn-sm btn-light-info p-1"
                    (click)="copyOrderNo(order.order_no)"
                    [title]="lang === 'ar' ? 'نسخ رقم الطلب' : 'Copy Order Number'">
                    <i class="ki-outline ki-copy fs-6"></i>
                  </button>
                </div>
                <div class="text-muted fs-7">{{ order.amount === 0 ? (lang === 'ar' ? 'مجاني' : 'Free') : '$' + order.amount }}</div>
              </div>
            </div>
            <div class="d-flex gap-2">
              <button 
                type="button" 
                class="btn btn-info btn-sm"
                (click)="openOrderDetails(order)">
                {{ lang === 'ar' ? 'تفاصيل الطلب' : 'Order Details' }}
              </button>
              <button 
                type="button" 
                class="btn btn-light-info btn-sm"
                (click)="downloadInvoice(order)">
                <i class="ki-outline ki-file-down fs-6 me-1"></i>
                {{ lang === 'ar' ? 'تحميل الفاتورة' : 'Download Invoice' }}
              </button>
            </div>
          </div>

          <!-- Order Info Row -->
          <div class="mb-3 d-flex flex-wrap gap-3  ">
            <div>
              <span class="text-muted fs-7">{{ lang === 'ar' ? 'النوع:' : 'Type:' }}</span>
              <span class="ms-2 fw-semibold">{{ getServiceTypeDisplay(order.service) }}</span>
            </div>
        
            <div>
              <span class="text-muted fs-7">{{ lang === 'ar' ? 'الحالة:' : 'Status:' }}</span>
              <span [class]="getStatusBadgeClass(order.status)" class="ms-2 text-uppercase">
                {{ order.status }}
              </span>
            </div>
          </div>

          <!-- Knowledge Items -->
          <div *ngFor="let suborder of order.suborders; let suborderIndex = index" class="mb-3">
            <div *ngFor="let knowledge of suborder.knowledge" class="mb-2">
              <div class="d-flex align-items-center ">
                <div >
                  <a 
                  [pTooltip]="lang ==='ar' ? 'عرض في التحميلات' : 'View in downloads'"
                  (click)="navigateToDownloads(order, suborderIndex)"
                    target="_blank"
                    class="text-info text-decoration-none fw-bold fs-6 cursor-pointer">
                    {{ knowledge.title }}
                  </a>
                </div>
                <!-- <button 
                  type="button" 
                  class="btn btn-xs btn-light-info ms-2"
                  (click)="navigateToDownloads(knowledge.title)"
                  [title]="lang === 'ar' ? 'عرض في المعرفة' : 'View in Knowledge'">
                  <i class="ki-outline ki-eye fs-6"></i>
                  {{ lang === 'ar' ? 'عرض في المعرفة' : 'View in Knowledge' }}
                </button> -->
              </div>
              
              <!-- Documents Preview -->
              <div *ngIf="suborder.knowledge_documents && suborder.knowledge_documents.length > 0" class="mt-2">
                <div class="d-flex flex-wrap pt-2 gap-2">
                  <div *ngFor="let extension of getUniqueExtensions(suborder)" class="position-relative d-inline-block">
                    <img 
                      [src]="getFileIconByExtension(extension)" 
                      [alt]="extension"
                      class="file-icon"
                      style="width: 40px; height: 40px;"
                      onerror="this.style.display='none'">
                    <span 
                      class="position-absolute top-0 start-75 translate-middle badge rounded-pill text-white"
                      [style.background-color]="getBadgeColorByExtension(extension)">
                      {{ getDocumentCountByExtension(suborder, extension) }}
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Order Info -->
          <div class="border-top pt-3 mt-3">
            <div class="text-muted fs-7">
              {{ lang === 'ar' ? 'تاريخ الطلب' : 'Ordered' }} {{ order.date | date:'short' }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="(orders$ | async)?.length === 0 && !(isLoading$ | async)" class="col-12">
      <div class="card">
        <div class="text-center py-10">
          <div class="symbol symbol-100px mx-auto mb-4">
            <div class="symbol-label bg-light-info">
              <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5.51253 7.31246L9.81753 8.40746H9.87753C9.93463 8.40912 9.99059 8.39118 10.0361 8.35661C10.0816 8.32204 10.1138 8.27293 10.1275 8.21746C10.1358 8.18545 10.1375 8.15212 10.1328 8.1194C10.1281 8.08669 10.1169 8.05524 10.0999 8.02688C10.0829 7.99851 10.0605 7.9738 10.0339 7.95416C10.0073 7.93452 9.97713 7.92035 9.94503 7.91246L5.63503 6.82496C5.60302 6.81692 5.56974 6.81526 5.53708 6.82008C5.50443 6.82489 5.47305 6.8361 5.44473 6.85304C5.41641 6.86999 5.3917 6.89235 5.37202 6.91884C5.35234 6.94534 5.33807 6.97545 5.33003 7.00746C5.32198 7.03947 5.32032 7.07275 5.32514 7.1054C5.32996 7.13805 5.34116 7.16944 5.35811 7.19776C5.37506 7.22608 5.39741 7.25079 5.42391 7.27047C5.4504 7.29015 5.48052 7.30442 5.51253 7.31246Z" fill="#3799FF"/>
                <path d="M9.94 9.12996L5.635 8.03496C5.60316 8.02692 5.57004 8.02522 5.53754 8.02998C5.50504 8.03473 5.4738 8.04585 5.44559 8.06268C5.41739 8.07951 5.39277 8.10173 5.37315 8.12807C5.35354 8.15441 5.3393 8.18436 5.33125 8.21621C5.32321 8.24806 5.32152 8.28117 5.32627 8.31367C5.33103 8.34617 5.34214 8.37742 5.35897 8.40562C5.3758 8.43383 5.39802 8.45844 5.42437 8.47806C5.45071 8.49768 5.48066 8.51192 5.5125 8.51996L9.8175 9.61496H9.8775C9.94381 9.62325 10.0107 9.60486 10.0634 9.56383C10.1162 9.52281 10.1505 9.46251 10.1588 9.39621C10.167 9.32991 10.1487 9.26302 10.1076 9.21028C10.0666 9.15754 10.0063 9.12325 9.94 9.11496V9.12996Z" fill="#3799FF"/>
                <path d="M3.16751 14.9999H3.48501L4.34751 20.2499L3.54501 21.0499C3.32339 21.2739 3.18937 21.5699 3.16726 21.8842C3.14515 22.1985 3.23641 22.5103 3.42449 22.7631C3.61257 23.0159 3.88501 23.1929 4.19241 23.262C4.49981 23.3312 4.82181 23.2879 5.10001 23.1399C5.26829 23.3316 5.47554 23.4852 5.70791 23.5904C5.94029 23.6956 6.19244 23.75 6.44751 23.7499H18.5525C18.9782 23.7519 19.3906 23.6019 19.7155 23.3269C20.0404 23.052 20.2566 22.6701 20.325 22.2499L21.515 14.9999H21.8325C22.0838 14.9999 22.3248 14.9001 22.5025 14.7224C22.6802 14.5447 22.78 14.3037 22.78 14.0524V12.7499C22.78 12.4986 22.6802 12.2576 22.5025 12.08C22.3248 11.9023 22.0838 11.8024 21.8325 11.8024H21.25V4.73494C21.2501 4.54827 21.2075 4.36406 21.1255 4.19637C21.0435 4.02867 20.9242 3.88194 20.7769 3.76737C20.6295 3.6528 20.4579 3.57343 20.2752 3.53531C20.0924 3.49719 19.9034 3.50134 19.7225 3.54744L19.5 3.59994V2.82994C19.5007 2.6892 19.4649 2.55068 19.3962 2.42786C19.3275 2.30505 19.2281 2.20213 19.1078 2.12913C18.9874 2.05613 18.8503 2.01553 18.7096 2.01129C18.5689 2.00705 18.4295 2.03931 18.305 2.10494L17.555 2.50244V1.96744C17.5547 1.82744 17.5134 1.69061 17.4362 1.57379C17.3591 1.45697 17.2494 1.36528 17.1208 1.31C16.9922 1.25473 16.8502 1.23829 16.7124 1.26271C16.5745 1.28713 16.4468 1.35134 16.345 1.44744L12.5 5.06744L8.66751 1.44744C8.56571 1.35134 8.43802 1.28713 8.30017 1.26271C8.16232 1.23829 8.02034 1.25473 7.89172 1.31C7.7631 1.36528 7.65346 1.45697 7.5763 1.57379C7.49915 1.69061 7.45786 1.82744 7.45751 1.96744V2.49994L6.85251 2.18494C6.71192 2.11166 6.55485 2.07575 6.39639 2.08066C6.23792 2.08556 6.08338 2.13111 5.94758 2.21294C5.81179 2.29477 5.69931 2.41012 5.62093 2.54794C5.54256 2.68575 5.50092 2.8414 5.50001 2.99994V3.59994L5.28501 3.54744C5.10363 3.49999 4.91378 3.49481 4.73008 3.5323C4.54638 3.56978 4.37374 3.64893 4.22545 3.76365C4.07716 3.87837 3.95718 4.0256 3.87475 4.19399C3.79233 4.36239 3.74965 4.54745 3.75001 4.73494V11.7974H3.16751C3.04267 11.7974 2.91905 11.8221 2.80376 11.87C2.68848 11.918 2.58381 11.9882 2.49576 12.0767C2.40771 12.1652 2.33802 12.2703 2.2907 12.3858C2.24338 12.5013 2.21936 12.6251 2.22001 12.7499V14.0574C2.22134 14.3079 2.32174 14.5476 2.49929 14.7242C2.67684 14.9008 2.91709 14.9999 3.16751 14.9999ZM4.00001 14.9999H9.59501L7.96251 16.6349C7.91261 16.3975 7.7707 16.1895 7.56783 16.0565C7.36497 15.9234 7.11766 15.8761 6.88001 15.9249H6.84001C6.60371 15.9743 6.3964 16.1149 6.26302 16.3161C6.12965 16.5174 6.08096 16.7631 6.12751 16.9999L6.37751 18.2074L4.78001 19.8049L4.00001 14.9999ZM6.80251 17.7924L6.61751 16.9074C6.60576 16.8534 6.60479 16.7976 6.61464 16.7432C6.6245 16.6888 6.645 16.6369 6.67496 16.5905C6.70492 16.544 6.74376 16.504 6.78924 16.4725C6.83473 16.4411 6.88596 16.419 6.94001 16.4074H6.97751C7.03157 16.395 7.08757 16.3935 7.1422 16.4031C7.19684 16.4126 7.24901 16.433 7.29562 16.4631C7.34223 16.4932 7.38235 16.5323 7.41359 16.5781C7.44483 16.6239 7.46657 16.6756 7.47751 16.7299L7.54501 17.0574L6.80251 17.7924ZM3.90001 22.5599C3.82397 22.4842 3.76363 22.3942 3.72246 22.2951C3.68129 22.196 3.6601 22.0898 3.6601 21.9824C3.6601 21.8751 3.68129 21.7689 3.72246 21.6698C3.76363 21.5707 3.82397 21.4807 3.90001 21.4049L6.83001 18.4724L8.00001 17.3149L10.3875 14.9299L11.655 13.6599C11.7296 13.5785 11.8198 13.5131 11.9203 13.4675C12.0209 13.4219 12.1296 13.3971 12.24 13.3947C12.3503 13.3923 12.46 13.4122 12.5625 13.4533C12.6649 13.4945 12.758 13.5559 12.836 13.6339C12.9141 13.712 12.9755 13.805 13.0166 13.9075C13.0577 14.0099 13.0777 14.1196 13.0752 14.23C13.0728 14.3403 13.0481 14.4491 13.0025 14.5496C12.9569 14.6501 12.8914 14.7404 12.81 14.8149L8.16001 19.4649L7.00001 20.6174L5.06001 22.5599C4.98403 22.6364 4.89367 22.6971 4.79413 22.7386C4.69459 22.78 4.58783 22.8013 4.48001 22.8013C4.3722 22.8013 4.26544 22.78 4.1659 22.7386C4.06636 22.6971 3.976 22.6364 3.90001 22.5599ZM11.4425 21.1924C11.453 21.3018 11.4196 21.4109 11.3498 21.4957C11.28 21.5805 11.1794 21.6342 11.07 21.6449H11.03C10.976 21.6502 10.9215 21.6447 10.8695 21.6288C10.8176 21.613 10.7694 21.587 10.7275 21.5524C10.6428 21.4812 10.5891 21.38 10.5775 21.2699L10.275 18.0449L11.0725 17.2499L11.4425 21.1924ZM8.39001 21.1424C8.41178 21.2504 8.39023 21.3627 8.33001 21.4549C8.29994 21.5007 8.261 21.54 8.21548 21.5705C8.16997 21.601 8.1188 21.6221 8.06501 21.6324H8.03001C7.97612 21.6453 7.92019 21.6471 7.86556 21.6379C7.81094 21.6286 7.75873 21.6085 7.71207 21.5786C7.6654 21.5487 7.62523 21.5098 7.59396 21.464C7.56268 21.4183 7.54093 21.3668 7.53001 21.3124L7.43501 20.8674L8.17001 20.1324L8.39001 21.1424ZM19.83 22.1624C19.7817 22.4663 19.6264 22.7428 19.3922 22.9422C19.1579 23.1416 18.8601 23.2508 18.5525 23.2499H6.44751C6.26891 23.2491 6.09245 23.2111 5.92933 23.1383C5.76621 23.0656 5.62 22.9597 5.50001 22.8274L7.03001 21.2974L7.05501 21.4224C7.09857 21.6282 7.21149 21.8128 7.37488 21.9452C7.53827 22.0776 7.74219 22.1499 7.95251 22.1499C8.01641 22.1506 8.08016 22.1439 8.14251 22.1299H8.17751C8.29524 22.1055 8.40699 22.0582 8.5064 21.9905C8.6058 21.9229 8.69091 21.8364 8.75685 21.7358C8.82278 21.6353 8.86826 21.5228 8.89068 21.4046C8.9131 21.2865 8.91203 21.1651 8.88751 21.0474L8.61251 19.7249L9.81501 18.4999L10.08 21.3149C10.1001 21.5444 10.206 21.7577 10.3766 21.9125C10.5471 22.0673 10.7697 22.1521 11 22.1499H11.0875H11.1275C11.3694 22.1265 11.5922 22.0081 11.7469 21.8206C11.9015 21.6331 11.9755 21.3919 11.9525 21.1499L11.5325 16.7874L13.1575 15.1649C13.2067 15.1129 13.2527 15.0578 13.295 14.9999H21L19.83 22.1624ZM19.83 4.03244C19.9368 4.00518 20.0484 4.00273 20.1563 4.02526C20.2642 4.0478 20.3655 4.09472 20.4525 4.16244C20.5435 4.22787 20.6178 4.31378 20.6695 4.41322C20.7212 4.51267 20.7488 4.62287 20.75 4.73494V11.7974H13.5925V5.61994L14.25 5.45244V8.03494C14.2504 8.182 14.2923 8.32597 14.3709 8.45023C14.4496 8.5745 14.5618 8.67399 14.6946 8.73724C14.8273 8.80049 14.9753 8.82491 15.1213 8.8077C15.2674 8.79048 15.4056 8.73232 15.52 8.63994L15.8675 8.35994L16.215 8.63994C16.3288 8.73805 16.4686 8.80108 16.6175 8.82141C16.7664 8.84174 16.9179 8.81849 17.0539 8.75449C17.1898 8.69049 17.3043 8.58847 17.3835 8.46077C17.4626 8.33307 17.5031 8.18516 17.5 8.03494V4.62994L19.3075 4.16994L19.83 4.03244ZM11.9075 11.7974V5.67744H13.0925V11.7974H11.9075ZM14.75 5.32494L17 4.74994V8.03494C16.9999 8.08736 16.985 8.13869 16.957 8.18298C16.929 8.22728 16.889 8.26272 16.8416 8.28522C16.7943 8.30772 16.7415 8.31634 16.6895 8.3101C16.6374 8.30385 16.5882 8.28299 16.5475 8.24994L16.0475 7.84244C16.003 7.8063 15.9474 7.78659 15.89 7.78659C15.8327 7.78659 15.7771 7.8063 15.7325 7.84244L15.2325 8.24994C15.1921 8.28328 15.143 8.30439 15.091 8.31077C15.039 8.31715 14.9862 8.30854 14.9389 8.28595C14.8917 8.26336 14.8518 8.22773 14.8241 8.18326C14.7964 8.13879 14.782 8.08733 14.7825 8.03494L14.75 5.32494ZM18.525 2.54994C18.5736 2.52216 18.6287 2.50773 18.6847 2.50811C18.7407 2.50848 18.7955 2.52366 18.8438 2.55208C18.892 2.58051 18.9319 2.62119 18.9593 2.66998C18.9867 2.71878 19.0008 2.77396 19 2.82994V3.72994L13.6775 5.08244L18.525 2.54994ZM16.6775 1.81244C16.708 1.78371 16.7462 1.76451 16.7874 1.75718C16.8286 1.74985 16.8711 1.75471 16.9095 1.77117C16.948 1.78763 16.9809 1.81497 17.0041 1.84983C17.0272 1.8847 17.0397 1.92557 17.04 1.96744V2.76244L13.9825 4.35744L16.6775 1.81244ZM7.96001 1.96744C7.96029 1.92557 7.97278 1.8847 7.99596 1.84983C8.01914 1.81497 8.05199 1.78763 8.09048 1.77117C8.12898 1.75471 8.17144 1.74985 8.21266 1.75718C8.25387 1.76451 8.29206 1.78371 8.32251 1.81244L11.0175 4.35744L7.96001 2.76244V1.96744ZM6.00001 2.99994C5.99926 2.92706 6.01748 2.85523 6.0529 2.79153C6.08831 2.72783 6.13969 2.67443 6.20198 2.6366C6.26428 2.59877 6.33535 2.5778 6.4082 2.57576C6.48106 2.57371 6.55319 2.59066 6.61751 2.62494L11.32 5.07744L6.00001 3.72744V2.99994ZM4.25001 4.72994C4.24924 4.61936 4.27412 4.5101 4.3227 4.41076C4.37129 4.31143 4.44225 4.22471 4.53001 4.15744C4.61698 4.08972 4.7183 4.0428 4.82619 4.02026C4.93409 3.99773 5.04571 4.00019 5.15251 4.02744L5.69001 4.16494L11.395 5.61494V11.7974H4.25001V4.72994ZM2.72251 12.7499C2.72251 12.6317 2.76932 12.5182 2.8527 12.4344C2.93608 12.3505 3.04926 12.3031 3.16751 12.3024H21.8325C21.9508 12.3031 22.0639 12.3505 22.1473 12.4344C22.2307 12.5182 22.2775 12.6317 22.2775 12.7499V14.0574C22.2769 14.175 22.2297 14.2876 22.1463 14.3705C22.0629 14.4534 21.9501 14.4999 21.8325 14.4999H13.515C13.5543 14.3085 13.5506 14.1107 13.504 13.9209C13.4574 13.7311 13.3691 13.554 13.2456 13.4025C13.1221 13.251 12.9665 13.1289 12.79 13.045C12.6134 12.9611 12.4205 12.9175 12.225 12.9174C12.052 12.9168 11.8806 12.9507 11.7209 13.0172C11.5612 13.0838 11.4164 13.1816 11.295 13.3049L10.0975 14.4999H3.16751C3.04949 14.4999 2.93631 14.4531 2.85285 14.3696C2.7694 14.2861 2.72251 14.173 2.72251 14.0549V12.7499Z" fill="#3799FF"/>
                <path d="M13.0575 21.1449C13.0345 21.3868 13.1085 21.628 13.2632 21.8155C13.4178 22.003 13.6406 22.1215 13.8825 22.1449H13.9225H14C14.2278 22.1446 14.4473 22.0594 14.6156 21.9059C14.7839 21.7524 14.8889 21.5417 14.91 21.3149L15.3325 16.8149C15.3555 16.5729 15.2815 16.3317 15.1269 16.1442C14.9722 15.9567 14.7494 15.8383 14.5075 15.8149H14.4675C14.3475 15.8035 14.2265 15.8159 14.1112 15.8513C13.996 15.8868 13.8889 15.9446 13.7961 16.0214C13.7032 16.0983 13.6264 16.1927 13.57 16.2992C13.5136 16.4058 13.4788 16.5224 13.4675 16.6424L13.0575 21.1449ZM13.5575 21.1924L13.98 16.6924C13.9894 16.5894 14.0368 16.4936 14.1131 16.4237C14.1895 16.3539 14.2891 16.3151 14.3925 16.3149H14.43H14.47C14.5242 16.3196 14.5769 16.335 14.625 16.3602C14.6732 16.3855 14.7158 16.42 14.7505 16.4619C14.7851 16.5038 14.8111 16.5521 14.8269 16.6041C14.8427 16.6562 14.848 16.7108 14.8425 16.7649L14.4225 21.2649C14.411 21.3749 14.3572 21.4762 14.2725 21.5474C14.2307 21.5819 14.1824 21.6079 14.1305 21.6238C14.0786 21.6397 14.024 21.6451 13.97 21.6399H13.93C13.8216 21.6291 13.7218 21.5761 13.6521 21.4924C13.5824 21.4087 13.5485 21.3009 13.5575 21.1924Z" fill="#3799FF"/>
                <path d="M16.8275 22.1225H16.8675C16.9293 22.1342 16.9921 22.14 17.055 22.14C17.2653 22.1399 17.4693 22.0676 17.6326 21.9352C17.796 21.8028 17.909 21.6182 17.9525 21.4125L18.39 19.31L18.8725 17C18.9213 16.7623 18.874 16.515 18.741 16.3121C18.6079 16.1093 18.3999 15.9674 18.1625 15.9175H18.1225C17.8849 15.8686 17.6376 15.9159 17.4347 16.049C17.2318 16.182 17.0899 16.39 17.04 16.6275L16.12 21.04C16.0704 21.2773 16.1171 21.5246 16.2498 21.7276C16.3824 21.9306 16.5902 22.0726 16.8275 22.1225ZM16.61 21.1425L17.53 16.73C17.5496 16.6364 17.6008 16.5526 17.675 16.4924C17.7493 16.4323 17.842 16.3997 17.9375 16.4H18.0225H18.06C18.1141 16.4115 18.1653 16.4336 18.2108 16.4651C18.2563 16.4965 18.2951 16.5365 18.3251 16.583C18.355 16.6295 18.3755 16.6814 18.3854 16.7358C18.3952 16.7901 18.3943 16.8459 18.3825 16.9L17.9 19.2175L17.46 21.32C17.4491 21.3743 17.4273 21.4258 17.3961 21.4716C17.3648 21.5173 17.3246 21.5563 17.2779 21.5861C17.2313 21.616 17.1791 21.6361 17.1245 21.6454C17.0698 21.6546 17.0139 21.6528 16.96 21.64H16.92C16.817 21.6151 16.7274 21.5515 16.67 21.4625C16.6392 21.4158 16.618 21.3635 16.6077 21.3085C16.5974 21.2536 16.5982 21.1971 16.61 21.1425Z" fill="#3799FF"/>
                </svg>
                
                
            </div>
          </div>
          <h5 class="mb-3">{{ lang === 'ar' ? 'لا توجد طلبات' : 'No Orders Found' }}</h5>
          <p class="text-muted">
            {{ lang === 'ar' ? 'لم تقم بأي طلبات بعد' : 'You haven\'t placed any orders yet.' }}
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Pagination for Knowledge Orders -->
  <div *ngIf="(totalPages$ | async)! > 1" class="d-flex justify-content-center mt-6">
    <p-paginator 
      [rows]="10" 
      [totalRecords]="(totalPages$ | async)! * 10"
      [first]="(currentPage - 1) * 10"
      (onPageChange)="onPageChange(($event.page || 0) + 1)"
      [showCurrentPageReport]="true"
      [currentPageReportTemplate]="lang === 'ar' ? 'عرض {first} إلى {last} من {totalRecords} طلب' : 'Showing {first} to {last} of {totalRecords} orders'">
    </p-paginator>
  </div>
</div>

  <!-- Meeting Orders Tab -->
  <div *ngIf="activeTab === 'meeting'">
    <div class="row g-4">
      <!-- Loading State -->
      <div *ngIf="isMeetingLoading$ | async" class="col-12">
        <div class="d-flex justify-content-center align-items-center" style="min-height: 200px;">
          <div class="spinner-border text-info" role="status" style="width: 3rem; height: 3rem;">
            <span class="visually-hidden">{{ lang === 'ar' ? 'جاري التحميل...' : 'Loading...' }}</span>
          </div>
        </div>
      </div>

      <!-- Meeting Orders Cards -->
      <div *ngFor="let order of meetingOrders$ | async" class="col-12">
        <div class="card card-custom gutter-b">
          <div class="card-body p-6">
            <!-- Order Header -->
            <div class="d-flex justify-content-between align-items-start mb-4">
              <div class="d-flex align-items-center">
                <div class="symbol symbol-40px me-3">
                  <div class="symbol-label bg-light-info">
                    <i class="ki-outline ki-calendar fs-2x text-info"></i>
                  </div>
                </div>
                <div>
                  <div class="d-flex align-items-center mb-1">
                    <h6 class="mb-0 fw-bold me-2">
                      {{ lang === 'ar' ? 'طلب رقم' : 'Order' }} {{ order.order_no }}
                    </h6>
                    <button 
                      type="button" 
                      class="btn btn-sm btn-light-info p-1"
                      (click)="copyOrderNo(order.order_no)"
                      [title]="lang === 'ar' ? 'نسخ رقم الطلب' : 'Copy Order Number'">
                      <i class="ki-outline ki-copy fs-6"></i>
                    </button>
                  </div>
                  <div class="text-muted fs-7">{{ order.amount === 0 ? (lang === 'ar' ? 'مجاني' : 'Free') : '$' + order.amount }}</div>
                </div>
              </div>
              <div class="d-flex gap-2">
                <button 
                  type="button" 
                  class="btn btn-info btn-sm"
                  (click)="openMeetingOrderDetails(order)">
                  {{ lang === 'ar' ? 'تفاصيل الطلب' : 'Order Details' }}
                </button>
                <button 
                  type="button" 
                  class="btn btn-light-info btn-sm"
                  (click)="downloadInvoice(order)">
                  <i class="ki-outline ki-file-down fs-6 me-1"></i>
                  {{ lang === 'ar' ? 'تحميل الفاتورة' : 'Download Invoice' }}
                </button>
              </div>
            </div>

            <!-- Order Info Row -->
            <div class="mb-4 d-flex flex-wrap gap-3">
              <div>
                <span class="text-muted fs-7">{{ lang === 'ar' ? 'النوع:' : 'Type:' }}</span>
                <span class="ms-2 fw-semibold">{{ getServiceTypeDisplay(order.service) }}</span>
              </div>
           
              <div>
                <span class="text-muted fs-7">{{ lang === 'ar' ? 'الحالة:' : 'Status:' }}</span>
                <span [class]="getStatusBadgeClass(order.status)" class="ms-2 text-uppercase">
                  {{ order.status }}
                </span>
              </div>
            </div>

            <!-- Meeting Details -->
            <div *ngFor="let suborder of order.suborders">
              <div *ngIf="suborder.meeting_booking" class="bg-light-info rounded p-4">
                <div class="d-flex justify-content-between align-items-start mb-3">
                  <div>
                    <h6 class="mb-1 fw-bold text-dark">{{ suborder.meeting_booking.title }}</h6>
                    <p class="text-muted fs-7 mb-0">{{ suborder.meeting_booking.description }}</p>
                  </div>
                  <span [class]="'badge ' + getMeetingStatusBadgeClass(suborder.meeting_booking.status)">
                    {{ getMeetingStatusDisplay(suborder.meeting_booking.status) }}
                  </span>
                </div>
                
                <div class="row g-3 mt-2">
                  <div class="col-md-4">
                    <div class="d-flex align-items-center">
                      <i class="ki-outline ki-calendar fs-5 text-info me-2"></i>
                      <div>
                        <div class="fs-8 text-muted">{{ lang === 'ar' ? 'التاريخ' : 'Date' }}</div>
                        <div class="fw-semibold fs-7">{{ suborder.meeting_booking.date | date:'mediumDate' }}</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="d-flex align-items-center">
                      <i class="ki-outline ki-time fs-5 text-info me-2"></i>
                      <div>
                        <div class="fs-8 text-muted">{{ lang === 'ar' ? 'الوقت' : 'Time' }}</div>
                        <div class="fw-semibold fs-7">{{ suborder.meeting_booking.start_time }} - {{ suborder.meeting_booking.end_time }}</div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="d-flex align-items-center">
                      <i class="ki-outline ki-timer fs-5 text-info me-2"></i>
                      <div>
                        <div class="fs-8 text-muted">{{ lang === 'ar' ? 'المدة' : 'Duration' }}</div>
                        <div class="fw-semibold fs-7">{{ calculateDuration(suborder.meeting_booking.start_time, suborder.meeting_booking.end_time) }}</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Order Date -->
            <div class="border-top pt-3 mt-4">
              <div class="text-muted fs-7">
                {{ lang === 'ar' ? 'تاريخ الطلب' : 'Ordered' }} {{ order.date | date:'short' }}
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty State for Meeting Orders -->
      <div *ngIf="(meetingOrders$ | async)?.length === 0 && !(isMeetingLoading$ | async)" class="col-12">
        <div class="card">
          <div class="text-center py-10">
            <div class="symbol symbol-100px mx-auto mb-4">
              <div class="symbol-label bg-light-info">
                <i class="ki-outline ki-calendar fs-3x text-info"></i>
              </div>
            </div>
            <h5 class="mb-3">{{ lang === 'ar' ? 'لا توجد طلبات اجتماعات' : 'No Meeting Orders Found' }}</h5>
            <p class="text-muted">
              {{ lang === 'ar' ? 'لم تقم بأي طلبات اجتماعات بعد' : 'You haven\'t placed any meeting orders yet.' }}
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Pagination for Meeting Orders -->
    <div *ngIf="(meetingTotalPages$ | async)! > 1" class="d-flex justify-content-center mt-6">
      <p-paginator 
        [rows]="10" 
        [totalRecords]="(meetingTotalPages$ | async)! * 10"
        [first]="(currentMeetingPage - 1) * 10"
        (onPageChange)="onMeetingPageChange(($event.page || 0) + 1)"
        [showCurrentPageReport]="true"
        [currentPageReportTemplate]="lang === 'ar' ? 'عرض {first} إلى {last} من {totalRecords} طلب اجتماع' : 'Showing {first} to {last} of {totalRecords} meeting orders'">
      </p-paginator>
    </div>
  </div>
</div>

<!-- Order Details Dialog -->
<p-dialog 
  [(visible)]="showOrderDetails" 
  [header]="lang === 'ar' ? 'تفاصيل الطلب' : 'Order Details'"
  [modal]="true" 
  [draggable]="false"
  [resizable]="false"
  [style]="{ width: '50vw', minWidth: '300px' }"
  [contentStyle]="{ 'max-height': '70vh', 'overflow-y': 'auto' }"
  appendTo="body">
  
  <div *ngIf="selectedOrder" class="order-details">
    <!-- Order Header -->
    <div class="mb-4">
      <h6 class="fw-bold mb-2">
        {{ lang === 'ar' ? 'طلب رقم' : 'Order' }} {{ selectedOrder.order_no }}
      </h6>
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="text-muted">{{ lang === 'ar' ? 'المبلغ:' : 'Amount:' }}</span>
        <span class="fw-bold">{{ selectedOrder.amount === 0 ? (lang === 'ar' ? 'مجاني' : 'Free') : '$'+ selectedOrder.amount }}</span>
      </div>
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="text-muted">{{ lang === 'ar' ? 'الحالة:' : 'Status:' }}</span>
        <span [class]="getStatusBadgeClass(selectedOrder.status)" class="text-uppercase">{{ selectedOrder.status }}</span>
      </div>
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="text-muted">{{ lang === 'ar' ? 'التاريخ:' : 'Date:' }}</span>
        <span>{{ selectedOrder.date | date:'medium' }}</span>
      </div>
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="text-muted">{{ lang === 'ar' ? 'النوع:' : 'Type:' }}</span>
        <span class="fw-bold">{{ getServiceTypeDisplay(selectedOrder.service) }}</span>
      </div>
      <div class="d-flex justify-content-between align-items-center">
        <span class="text-muted">{{ lang === 'ar' ? 'طريقة الدفع:' : 'Payment:' }}</span>
        <div class="d-flex align-items-center">
          <div class="payment-method-display d-inline-flex align-items-center bg-light-info rounded px-2 py-1">
            <ng-container *ngIf="shouldShowCardLogo(selectedOrder.payment); else showIcon3">
              <div class="me-2" [innerHTML]="getCardLogoSvg(selectedOrder.payment)" style="width: 24px; height: 16px; display: flex; align-items: center;"></div>
            </ng-container>
            <ng-template #showIcon3>
              <i [class]="getPaymentMethodIcon(selectedOrder.payment)" class="fs-6 me-2 text-info"></i>
            </ng-template>
            <span class="fw-bold text-dark">{{ getPaymentMethodDisplay(selectedOrder.payment) }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Knowledge Items -->
    <div *ngFor="let suborder of selectedOrder.suborders" class="mb-4">
      <div *ngFor="let knowledge of suborder.knowledge" class="border rounded p-3 mb-3">
        <h6 class="mb-6 text-info">
          <div
            class="text-info text-decoration-none">
            {{ knowledge.title }}
          </div>
        </h6>
        
        <!-- Documents -->
        <div *ngIf="suborder.knowledge_documents && suborder.knowledge_documents.length > 0">
          <h6 class="fs-7 text-muted mb-2">{{ lang === 'ar' ? 'المستندات:' : 'Documents:' }}</h6>
          <div class="row g-2">
            <ng-container *ngFor="let docGroup of suborder.knowledge_documents">
              <div *ngFor="let doc of docGroup" class="col-md-12">
                <div class="card card-flush border border-gray-300">
                  <div class="card-body p-3">
                    <div class="d-flex align-items-center">
                      <img 
                        [src]="getFileIconByExtension(doc.file_extension)" 
                        [alt]="doc.file_extension"
                        class="me-3"
                        style="width: 40px; height: 40px;"
                        onerror="this.style.display='none'">
                      <div class="flex-grow-1">
                        <div class="fw-bold fs-6">{{ doc.file_name }}</div>
                        <div class="text-muted fs-7">{{ doc.file_extension.toUpperCase() }}</div>
                      </div>
                      <div class="text-end">
                        <div class="fw-bold text-info">{{ doc.price === 0 ? (lang === 'ar' ? 'مجاني' : 'Free') : '$' + doc.price }}</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>

  </div>
</p-dialog>

<!-- Meeting Order Details Dialog -->
<p-dialog 
  [(visible)]="showMeetingOrderDetails" 
  [header]="lang === 'ar' ? 'تفاصيل طلب الاجتماع' : 'Meeting Order Details'"
  [modal]="true" 
  [draggable]="false"
  [resizable]="false"
  [style]="{ width: '50vw', minWidth: '300px' }"
  [contentStyle]="{ 'max-height': '70vh', 'overflow-y': 'auto' }"
  appendTo="body">
  
  <div *ngIf="selectedMeetingOrder" class="order-details">
    <!-- Order Header -->
    <div class="mb-4">
      <h6 class="fw-bold mb-2">
        {{ lang === 'ar' ? 'طلب رقم' : 'Order' }} {{ selectedMeetingOrder.order_no }}
      </h6>
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="text-muted">{{ lang === 'ar' ? 'المبلغ:' : 'Amount:' }}</span>
        <span class="fw-bold">{{ selectedMeetingOrder.amount === 0 ? (lang === 'ar' ? 'مجاني' : 'Free') : '$'+ selectedMeetingOrder.amount }}</span>
      </div>
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="text-muted">{{ lang === 'ar' ? 'الحالة:' : 'Status:' }}</span>
        <span [class]="getStatusBadgeClass(selectedMeetingOrder.status)" class="text-uppercase">{{ selectedMeetingOrder.status }}</span>
      </div>
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="text-muted">{{ lang === 'ar' ? 'التاريخ:' : 'Date:' }}</span>
        <span>{{ selectedMeetingOrder.date | date:'medium' }}</span>
      </div>
      <div class="d-flex justify-content-between align-items-center mb-2">
        <span class="text-muted">{{ lang === 'ar' ? 'النوع:' : 'Type:' }}</span>
        <span class="fw-bold">{{ getServiceTypeDisplay(selectedMeetingOrder.service) }}</span>
      </div>
      <div class="d-flex justify-content-between align-items-center">
        <span class="text-muted">{{ lang === 'ar' ? 'طريقة الدفع:' : 'Payment:' }}</span>
        <div class="d-flex align-items-center">
          <div class="payment-method-display d-inline-flex align-items-center bg-light-info rounded px-2 py-1">
            <ng-container *ngIf="shouldShowCardLogo(selectedMeetingOrder.payment); else showIcon4">
              <div class="me-2" [innerHTML]="getCardLogoSvg(selectedMeetingOrder.payment)" style="width: 24px; height: 16px; display: flex; align-items: center;"></div>
            </ng-container>
            <ng-template #showIcon4>
              <i [class]="getPaymentMethodIcon(selectedMeetingOrder.payment)" class="fs-6 me-2 text-info"></i>
            </ng-template>
            <span class="fw-bold text-dark">{{ getPaymentMethodDisplay(selectedMeetingOrder.payment) }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Meeting Bookings Details -->
    <div *ngFor="let suborder of selectedMeetingOrder.suborders" class="mb-4">
      <div *ngIf="suborder.meeting_booking" class="border rounded p-4">
        <div class="d-flex justify-content-between align-items-start mb-3">
          <div>
            <h6 class="mb-2 fw-bold text-dark">{{ suborder.meeting_booking.title }}</h6>
            <p class="text-muted fs-7 mb-0">{{ suborder.meeting_booking.description }}</p>
          </div>
          <span [class]="'badge ' + getMeetingStatusBadgeClass(suborder.meeting_booking.status)">
            {{ getMeetingStatusDisplay(suborder.meeting_booking.status) }}
          </span>
        </div>
        
        <div class="row g-3">
          <div class="col-md-4">
            <div class="d-flex align-items-center">
              <i class="ki-outline ki-calendar fs-5 text-info me-2"></i>
              <div>
                <div class="fs-8 text-muted">{{ lang === 'ar' ? 'التاريخ' : 'Date' }}</div>
                <div class="fw-semibold">{{ suborder.meeting_booking.date | date:'mediumDate' }}</div>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="d-flex align-items-center">
              <i class="ki-outline ki-time fs-5 text-info me-2"></i>
              <div>
                <div class="fs-8 text-muted">{{ lang === 'ar' ? 'الوقت' : 'Time' }}</div>
                <div class="fw-semibold">{{ suborder.meeting_booking.start_time }} - {{ suborder.meeting_booking.end_time }}</div>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="d-flex align-items-center">
              <i class="ki-outline ki-timer fs-5 text-info me-2"></i>
              <div>
                <div class="fs-8 text-muted">{{ lang === 'ar' ? 'المدة' : 'Duration' }}</div>
                <div class="fw-semibold">{{ calculateDuration(suborder.meeting_booking.start_time, suborder.meeting_booking.end_time) }}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</p-dialog>