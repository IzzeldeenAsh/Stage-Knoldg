"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[9430],{8688:(L,S,o)=>{o.d(S,{M:()=>h});var e=o(1626),g=o(4412),T=o(8810),C=o(6354),p=o(9437),m=o(980),u=o(4438),f=o(779);let h=(()=>{class _{http;translationService;apiUrl="https://api.foresighta.co/api/common/setting/consulting-field/tree/list";apiList="https://api.foresighta.co/api/common/setting/consulting-field/list";isLoadingSubject=new g.t(!1);isLoading$=this.isLoadingSubject.asObservable();currentLang="en";constructor(l,s){this.http=l,this.translationService=s,this.translationService.onLanguageChange().subscribe(d=>{this.currentLang=d||"en"})}setLoading(l){this.isLoadingSubject.next(l)}handleError(l){return(0,T.$)(l)}transformToTreeNode(l){return l.map(s=>({key:s.key,label:s.names[this.currentLang],data:{key:s.key,code:s.code,label:s.label,status:s.status,nameEn:s.names.en,nameAr:s.names.ar},children:s.children?this.transformToTreeNode(s.children):[]}))}transformToTreeNodeParent(l){return l.map(s=>({key:s.key,label:s.label,data:{key:s.key,code:s.code,label:s.label},children:s.children?this.transformToTreeNodeParent(s.children):[]}))}getConsultingCodesTree(l){const s=new e.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":l});return this.setLoading(!0),this.http.get(this.apiUrl,{headers:s}).pipe((0,C.T)(d=>this.transformToTreeNode(d)),(0,p.W)(d=>this.handleError(d)),(0,m.j)(()=>this.setLoading(!1)))}getConsultingCodesTreeParent(l){const s=new e.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":l});return this.setLoading(!0),this.http.get("https://api.foresighta.co/api/common/setting/consulting-field/tree/parent",{headers:s}).pipe((0,C.T)(d=>this.transformToTreeNodeParent(d)),(0,p.W)(d=>this.handleError(d)),(0,m.j)(()=>this.setLoading(!1)))}getConsultingList(l){const s=new e.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":l});return this.setLoading(!0),this.http.get(this.apiList,{headers:s}).pipe((0,C.T)(d=>d.data),(0,p.W)(d=>this.handleError(d)),(0,m.j)(()=>this.setLoading(!1)))}createConsultingField(l,s){const d=new e.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":s});return this.setLoading(!0),this.http.post("https://api.foresighta.co/api/admin/setting/consulting-field",l,{headers:d}).pipe((0,p.W)(this.handleError),(0,m.j)(()=>this.setLoading(!1)))}updateConsultingField(l,s,d){const y=new e.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":d});return this.setLoading(!0),this.http.put(`https://api.foresighta.co/api/admin/setting/consulting-field/${l}`,s,{headers:y}).pipe((0,p.W)(this.handleError),(0,m.j)(()=>this.setLoading(!1)))}deleteIsicCode(l){const s=new e.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.delete(`https://api.foresighta.co/api/admin/setting/consulting-field/${l}`,{headers:s}).pipe((0,p.W)(this.handleError),(0,m.j)(()=>this.setLoading(!1)))}static \u0275fac=function(s){return new(s||_)(u.KVO(e.Qq),u.KVO(f.L))};static \u0275prov=u.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},7192:(L,S,o)=>{o.d(S,{Q:()=>h});var e=o(1626),g=o(4412),T=o(8810),C=o(6354),p=o(9437),m=o(980),u=o(4438),f=o(779);let h=(()=>{class _{http;translationService;apiUrl="https://api.foresighta.co/api/common/setting/insighter/document-type/list";isLoadingSubject=new g.t(!1);isLoading$=this.isLoadingSubject.asObservable();currentLang="en";documentTypes$;constructor(l,s){this.http=l,this.translationService=s,this.translationService.onLanguageChange().subscribe(d=>{this.currentLang=d||"en",this.documentTypes$=this.getDocumentsTypesFromApi()}),this.documentTypes$=this.getDocumentsTypesFromApi()}setLoading(l){this.isLoadingSubject.next(l)}handleError(l){return console.error("Error fetching document types:",l),(0,T.$)(l)}getDocumentsTypesFromApi(){const l=new e.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.get(this.apiUrl,{headers:l}).pipe((0,C.T)(s=>s.data),(0,p.W)(s=>this.handleError(s)),(0,m.j)(()=>this.setLoading(!1)))}getDocumentsTypes(){return this.documentTypes$}static \u0275fac=function(s){return new(s||_)(u.KVO(e.Qq),u.KVO(f.L))};static \u0275prov=u.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},5653:(L,S,o)=>{o.d(S,{o:()=>k});var e=o(4438),g=o(177),T=o(4412),C=o(3726),p=o(6354),m=o(9172),u=o(6781),f=o(7697),h=o(9417),_=o(2242),O=o(4827),l=o(3955),s=o(5779);const d=r=>({width:r,"max-height":"100vh",overflow:"hidden"}),y=()=>({"max-height":"calc(90vh - 100px)",overflow:"auto"}),A=()=>({"max-height":"100%",overflow:"auto"}),P=r=>({"flex-direction":r}),D=r=>({"text-align":r}),b=()=>({margin:"5px"});function v(r,E){if(1&r&&(e.qex(0),e.j41(1,"span"),e.EFF(2),e.k0s(),e.bVm()),2&r){const t=e.XpG().$implicit;e.R7$(2),e.JRh(t.label)}}function M(r,E){if(1&r){const t=e.RV6();e.qex(0),e.j41(1,"div",12)(2,"span",13),e.EFF(3),e.k0s(),e.j41(4,"div",14)(5,"input",15),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG().$implicit;return e.DH7(a.data.customInput,n)||(a.data.customInput=n),e.Njj(n)}),e.bIt("input",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG();return e.Njj(a.onOtherInput(n))})("keypress",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.onKeyPress(n))}),e.k0s(),e.j41(6,"small",16),e.EFF(7),e.k0s()()(),e.bVm()}if(2&r){const t=e.XpG().$implicit,i=e.XpG();e.R7$(),e.Y8G("ngStyle",e.eq3(11,P,"ar"===i.currentLang?"row-reverse":"row")),e.R7$(2),e.JRh("ar"===i.currentLang?"\u0623\u062e\u0631\u0649":"Other"),e.R7$(),e.xc7("margin-right","ar"===i.currentLang?10:0,"px")("margin-left","ar"!==i.currentLang?10:0,"px"),e.BMQ("dir","ar"===i.currentLang?"rtl":"ltr"),e.R7$(),e.R50("ngModel",t.data.customInput),e.Y8G("placeholder",i.otherFieldPlaceholder),e.R7$(),e.Y8G("ngStyle",e.eq3(13,D,"ar"===i.currentLang?"right":"left")),e.R7$(),e.SpI(" ","ar"===i.currentLang?"\u064a\u062c\u0628 \u0627\u0644\u0643\u062a\u0627\u0628\u0629 \u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0641\u0642\u0637":"Please write in English only"," ")}}function N(r,E){if(1&r&&e.DNE(0,v,3,1,"ng-container",10)(1,M,8,15,"ng-container",10),2&r){const t=E.$implicit;e.Y8G("ngIf",!t.isOther),e.R7$(),e.Y8G("ngIf",t.isOther)}}function I(r,E){if(1&r&&(e.j41(0,"label",17),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.AVh("required",t.isRequired),e.R7$(),e.SpI(" ",t.title," ")}}function j(r,E){if(1&r){const t=e.RV6();e.j41(0,"p-chip",19),e.bIt("onRemove",function(n){const a=e.eBV(t).$implicit;return e.XpG(2).onRemoveChip(a),e.Njj(n.stopPropagation())})("click",function(n){return e.eBV(t),e.Njj(n.stopPropagation())}),e.k0s()}if(2&r){const t=E.$implicit;e.Aen(e.lJ4(5,b)),e.Y8G("label",t.isOther&&t.data.customInput||t.label)("removable",!0)("styleClass","selection-chip")}}function R(r,E){if(1&r&&(e.qex(0),e.DNE(1,j,1,6,"p-chip",18),e.bVm()),2&r){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.getDisplayableSelectedNodes())}}function x(r,E){if(1&r&&(e.j41(0,"div",20),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.SpI(" ",t.placeholder," ")}}let k=(()=>{class r{translate;title="Select Items";placeholder="Select...";otherFieldPlaceholder="Specify Other...";selectAllLabel="Select All";isRequired=!1;fetchedData=[];cancelLabel="Cancel";okLabel="OK";currentLang="en";initialSelectedNodes=[];nodesSelected=new e.bkB;dialogVisible=!1;dialogWidth="50vw";isLoading$=new T.t(!1);nodes=[];selectedNodes;committedNodes=[];unsubscribe=[];isSelectAllProcessing=!1;constructor(t){this.translate=t}ngOnInit(){this.committedNodes=[...this.initialSelectedNodes||[]],this.loadData(),this.handleWindowResize(),this.currentLang=this.translate.currentLang,console.log(this.currentLang)}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}loadData(){this.fetchedData?(this.nodes=this.addOtherOption([{key:"selectAll",label:this.selectAllLabel,data:{key:"selectAll",label:this.selectAllLabel},children:this.fetchedData,expanded:!0}]),this.reApplySelection()):console.error("fetchedData not provided or empty.")}addOtherOption(t,i=0){return t?t.map(n=>(n.children&&n.children.length>0&&(n.children=this.addOtherOption(n.children,i+1)),(0===i||1===i)&&(n.children=[...n.children||[],{key:`${n.key}-other`,label:"Other",data:{key:`${n.key}-other`,label:"Other"},isOther:!0,selectable:!1,children:[]}]),n)):[]}reApplySelection(){if(!this.committedNodes||0===this.committedNodes.length)return void(this.selectedNodes=[]);const t=this.flattenTree(this.nodes[0]),i=[];for(const n of this.committedNodes){const a=t.find(c=>c.key===n.key);a&&(a.isOther&&n.data?.customInput&&(a.data.customInput=n.data.customInput),i.push(a))}this.selectedNodes=i,this.updateSelectAllState()}onKeyPress(t){const i=t.key;if(t.ctrlKey||t.metaKey||i.length>1)return!0;if("ar"===this.currentLang){if(!/[\u0600-\u06FF\s]/.test(i))return t.preventDefault(),!1}else if(!/[a-zA-Z\s]/.test(i))return t.preventDefault(),!1;return!0}onOtherInput(t){t.data.customInput&&""!==t.data.customInput.trim()?this.selectedNodes.some(i=>i.key===t.key)||(this.selectedNodes=[...this.selectedNodes,t]):this.selectedNodes=this.selectedNodes.filter(i=>i.key!==t.key),this.updateSelectAllState()}getDisplayableSelectedNodes(){return this.committedNodes&&0!==this.committedNodes.length?this.committedNodes.filter(t=>"selectAll"!==t.key):[]}onRemoveChip(t){this.committedNodes&&(this.committedNodes=this.committedNodes.filter(n=>n.key!==t.key),0===this.committedNodes.filter(n=>"selectAll"!==n.key).length&&(this.committedNodes=this.committedNodes.filter(n=>"selectAll"!==n.key)),this.nodesSelected.emit(this.committedNodes))}selectedNodesLabel(){return this.committedNodes&&this.committedNodes.length>0?this.committedNodes.filter(i=>"selectAll"!==i.key).map(i=>i.isOther&&i.data.customInput?i.data.customInput:i.label).join(", "):""}showDialog(){this.reApplySelection(),this.dialogVisible=!0}onOk(){this.dialogVisible=!1,this.committedNodes=[...this.selectedNodes||[]],this.nodesSelected.emit(this.committedNodes)}onCancel(){this.dialogVisible=!1,this.reApplySelection()}onNodeSelect(t){this.isSelectAllProcessing||("selectAll"===t.node.key?this.toggleSelectAll(!0):this.updateSelectAllState())}onNodeUnselect(t){this.isSelectAllProcessing||("selectAll"===t.node.key?this.toggleSelectAll(!1):this.updateSelectAllState())}toggleSelectAll(t){if(!this.isSelectAllProcessing){if(this.isSelectAllProcessing=!0,t&&this.nodes.length>0){const i=this.flattenTree(this.nodes[0]);this.selectedNodes=i}else this.selectedNodes=[];this.isSelectAllProcessing=!1}}updateSelectAllState(){if(!this.nodes||0===this.nodes.length)return;const t=this.getAllChildNodes(this.nodes),i=new Set(this.selectedNodes.map(c=>c.key)),n=t.every(c=>i.has(c.key)),a=this.nodes.find(c=>"selectAll"===c.key);n?a&&!i.has(a.key)&&(this.isSelectAllProcessing=!0,this.selectedNodes=[a,...this.selectedNodes],this.isSelectAllProcessing=!1):a&&i.has(a.key)&&(this.isSelectAllProcessing=!0,this.selectedNodes=this.selectedNodes.filter(c=>"selectAll"!==c.key),this.isSelectAllProcessing=!1)}flattenTree(t,i=[]){return i.push(t),t.children&&t.children.forEach(n=>this.flattenTree(n,i)),i}getAllChildNodes(t){let i=[];return t.forEach(n=>{"selectAll"!==n.key&&(i.push(n),n.children&&n.children.length>0&&(i=i.concat(this.getAllChildNodes(n.children))))}),i}handleWindowResize(){const i=(0,C.R)(window,"resize").pipe((0,p.T)(()=>window.innerWidth),(0,m.Z)(window.innerWidth)).subscribe(n=>{this.dialogWidth=n<768?"100vw":"70vw"});this.unsubscribe.push(i)}static \u0275fac=function(i){return new(i||r)(e.rXU(l.c$))};static \u0275cmp=e.VBU({type:r,selectors:[["shared-tree-selector"]],inputs:{title:"title",placeholder:"placeholder",otherFieldPlaceholder:"otherFieldPlaceholder",selectAllLabel:"selectAllLabel",isRequired:"isRequired",fetchedData:"fetchedData",cancelLabel:"cancelLabel",okLabel:"okLabel",currentLang:"currentLang",initialSelectedNodes:"initialSelectedNodes"},outputs:{nodesSelected:"nodesSelected"},standalone:!0,features:[e.aNF],decls:16,vars:24,consts:[["appendTo","body",3,"visibleChange","header","visible","modal","contentStyle"],[1,"tree-container"],["selectionMode","checkbox","filterMode","strict",1,"industry-tree",3,"selectionChange","onNodeSelect","onNodeUnselect","onChange","value","selection","metaKeySelection","filter","loading"],["pTemplate","default"],[1,"p-2","d-flex","justify-content-between","align-items-center"],[1,"btn","btn-sm","btn-secondary","btn-shadow","cursor-pointer",3,"click"],[1,"btn","btn-sm","btn-primary","m-1","btn-shadow","cursor-pointer",3,"click"],[1,"col-12","mb-4"],["class","form-label fs-6 text-gray-900",3,"required",4,"ngIf"],[1,"selected-nodes-container",3,"click"],[4,"ngIf"],["class","placeholder-text",4,"ngIf"],[2,"display","flex","gap","5px",3,"ngStyle"],[2,"margin-top","10px"],[2,"display","flex","flex-direction","column","width","70%"],["pInputText","","type","text",2,"width","100%",3,"ngModelChange","input","keypress","ngModel","placeholder"],[1,"text-muted",2,"font-size","0.75rem","margin-top","2px",3,"ngStyle"],[1,"form-label","fs-6","text-gray-900"],[3,"label","removable","styleClass","style","onRemove","click",4,"ngFor","ngForOf"],[3,"onRemove","click","label","removable","styleClass"],[1,"placeholder-text"]],template:function(i,n){1&i&&(e.j41(0,"p-dialog",0),e.mxI("visibleChange",function(c){return e.DH7(n.dialogVisible,c)||(n.dialogVisible=c),c}),e.j41(1,"div",1)(2,"p-tree",2),e.nI1(3,"async"),e.mxI("selectionChange",function(c){return e.DH7(n.selectedNodes,c)||(n.selectedNodes=c),c}),e.bIt("onNodeSelect",function(c){return n.onNodeSelect(c)})("onNodeUnselect",function(c){return n.onNodeUnselect(c)})("onChange",function(){return n.updateSelectAllState()}),e.DNE(4,N,2,2,"ng-template",3),e.k0s()(),e.j41(5,"p-footer")(6,"div",4)(7,"a",5),e.bIt("click",function(){return n.onCancel()}),e.EFF(8),e.k0s(),e.j41(9,"a",6),e.bIt("click",function(){return n.onOk()}),e.EFF(10),e.k0s()()()(),e.j41(11,"div",7),e.DNE(12,I,2,3,"label",8),e.j41(13,"div",9),e.bIt("click",function(){return n.showDialog()}),e.DNE(14,R,2,1,"ng-container",10)(15,x,2,1,"div",11),e.k0s()()),2&i&&(e.Aen(e.eq3(20,d,n.dialogWidth)),e.Y8G("header",n.title),e.R50("visible",n.dialogVisible),e.Y8G("modal",!0)("contentStyle",e.lJ4(22,y)),e.R7$(2),e.Aen(e.lJ4(23,A)),e.Y8G("value",n.nodes),e.R50("selection",n.selectedNodes),e.Y8G("metaKeySelection",!1)("filter",!0)("loading",e.bMT(3,18,n.isLoading$)),e.R7$(6),e.SpI(" ",n.cancelLabel," "),e.R7$(2),e.SpI(" ",n.okLabel," "),e.R7$(2),e.Y8G("ngIf","\u0627\u0644\u062e\u0628\u0631\u0627\u062a \u0648 \u0627\u0644\u062a\u062e\u0635\u0635\u0627\u062a"===n.title||"Expertise and Specialties"===n.title),e.R7$(2),e.Y8G("ngIf",n.getDisplayableSelectedNodes().length>0),e.R7$(),e.Y8G("ngIf",0===n.getDisplayableSelectedNodes().length))},dependencies:[g.MD,g.Sq,g.bT,g.B3,g.Jj,u.P,u.l,s.wi,s.Ei,f.ft,f.PH,h.YN,h.me,h.BC,h.vS,_.u,_.S,O.P,O.v],styles:[".responsive-dialog[_ngcontent-%COMP%]{width:50vw;max-height:90vh;overflow:hidden}@media (max-width: 768px){.responsive-dialog[_ngcontent-%COMP%]{width:100vw}}.tree-container[_ngcontent-%COMP%]{height:500px;max-height:calc(-100px + 80vh)}.max-width-200px[_ngcontent-%COMP%]{max-width:250px;width:250px}.logo-placeholder[_ngcontent-%COMP%]{background-size:contain;background-position:center}.fit-content[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.selected-nodes-container[_ngcontent-%COMP%]{cursor:pointer;background-color:#fff;border:1px solid #DBDFE9;border-radius:.475rem;overflow-y:auto;padding:.5rem .75rem;min-height:3.5rem;max-height:6rem;display:flex;flex-wrap:wrap;align-items:flex-start;align-content:flex-start;position:relative}.dots[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;font-size:1.5rem;color:#6c757d}.placeholder-text[_ngcontent-%COMP%]{color:#6c757d;padding:10px}[_nghost-%COMP%]     .read-only-chip .p-chips-input-token{display:none}[_nghost-%COMP%]     .read-only-chip .p-chips-token{margin:2px;background:#e9ecef;color:#495057}[_nghost-%COMP%]     .selection-chip{background-color:#f0f7ff;color:#0d6efd;border-radius:16px;font-size:.85rem}[_nghost-%COMP%]     .selection-chip .p-chip-remove-icon{color:#0d6efd}[_nghost-%COMP%]     .selection-chip .p-chip-remove-icon:hover{color:#0a58ca}[_nghost-%COMP%]     .selection-chip:hover{background-color:#e2f0ff}"],changeDetection:0})}return r})()},6018:(L,S,o)=>{o.d(S,{c:()=>C});var e=o(4438),g=o(461),T=o(4420);let C=(()=>{class p extends g.h{pathId;ngOnInit(){this.pathId="url(#"+(0,T._Y)()+")"}static \u0275fac=(()=>{let u;return function(h){return(u||(u=e.xGo(p)))(h||p)}})();static \u0275cmp=e.VBU({type:p,selectors:[["PlusIcon"]],standalone:!0,features:[e.Vt3,e.aNF],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7.67742 6.32258V0.677419C7.67742 0.497757 7.60605 0.325452 7.47901 0.198411C7.35197 0.0713707 7.17966 0 7 0C6.82034 0 6.64803 0.0713707 6.52099 0.198411C6.39395 0.325452 6.32258 0.497757 6.32258 0.677419V6.32258H0.677419C0.497757 6.32258 0.325452 6.39395 0.198411 6.52099C0.0713707 6.64803 0 6.82034 0 7C0 7.17966 0.0713707 7.35197 0.198411 7.47901C0.325452 7.60605 0.497757 7.67742 0.677419 7.67742H6.32258V13.3226C6.32492 13.5015 6.39704 13.6725 6.52358 13.799C6.65012 13.9255 6.82106 13.9977 7 14C7.17966 14 7.35197 13.9286 7.47901 13.8016C7.60605 13.6745 7.67742 13.5022 7.67742 13.3226V7.67742H13.3226C13.5022 7.67742 13.6745 7.60605 13.8016 7.47901C13.9286 7.35197 14 7.17966 14 7C13.9977 6.82106 13.9255 6.65012 13.799 6.52358C13.6725 6.39704 13.5015 6.32492 13.3226 6.32258H7.67742Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(f,h){1&f&&(e.qSk(),e.j41(0,"svg",0)(1,"g"),e.nrm(2,"path",1),e.k0s(),e.j41(3,"defs")(4,"clipPath",2),e.nrm(5,"rect",3),e.k0s()()()),2&f&&(e.HbH(h.getClassNames()),e.BMQ("aria-label",h.ariaLabel)("aria-hidden",h.ariaHidden)("role",h.role),e.R7$(),e.BMQ("clip-path",h.pathId),e.R7$(3),e.Y8G("id",h.pathId))},encapsulation:2})}return p})()}}]);