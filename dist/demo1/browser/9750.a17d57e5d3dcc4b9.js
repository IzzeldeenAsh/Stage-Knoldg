"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[9750],{4078:(me,S,c)=>{c.r(S),c.d(S,{UserProfileModule:()=>Hi});var d=c(177),v=c(2791),_=c(5098),e=c(4438),w=c(4367),C=c(7112),E=c(9998),h=c(5779),g=c(1626);let j=(()=>{class n{http;uploadUrl="https://api.foresighta.co/api/account/profile/photo";removeUrl="https://api.foresighta.co/api/account/profile/photo/remove";updateLogo="https://api.foresighta.co/api/account/profile/company/logo";constructor(t){this.http=t}updateProfilePhoto(t){const i=new FormData;i.append("profile_photo",t);const o=new g.Lr({Accept:"application/json","Accept-Language":"en"});return this.http.post(this.uploadUrl,i,{headers:o})}updateCompanyLogo(t){const i=new FormData;i.append("logo",t);const o=new g.Lr({Accept:"application/json","Accept-Language":"en"});return this.http.post(this.updateLogo,i,{headers:o})}removeProfilePhoto(){const t=new g.Lr({Accept:"application/json","Accept-Language":"en"});return this.http.delete(this.removeUrl,{headers:t})}static \u0275fac=function(i){return new(i||n)(e.KVO(g.Qq))};static \u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var X=c(1774),y=c(3955);const fe=["fileInput"],ge=n=>({"background-image":n}),B=()=>["company-insighter"],ue=()=>["insighter"],J=()=>["company"];function _e(n,r){if(1&n){const t=e.RV6();e.j41(0,"label",12)(1,"i",13),e.nrm(2,"span",14)(3,"span",15),e.k0s(),e.j41(4,"input",16,0),e.bIt("change",function(o){e.eBV(t);const s=e.XpG(2);return e.Njj(s.onFileSelected(o))}),e.k0s()()}}function he(n,r){if(1&n&&(e.j41(0,"div",17),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Lme(" ",t.profile.first_name," ",t.profile.last_name," ")}}function be(n,r){if(1&n&&(e.j41(0,"span",19),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.Lme(" (",t.profile.first_name," ",t.profile.last_name,") ")}}function ve(n,r){if(1&n&&(e.j41(0,"div",17),e.EFF(1),e.DNE(2,be,2,2,"span",18),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",null==t.profile.company?null:t.profile.company.legal_name," "),e.R7$(),e.Y8G("ngIf",t.profile.roles.includes("company-insighter"))}}function Ce(n,r){1&n&&e.nrm(0,"app-keenicon",21)}function ye(n,r){if(1&n&&(e.qex(0),e.DNE(1,Ce,1,0,"app-keenicon",20),e.bVm()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.profile.company.verified)}}function Ie(n,r){if(1&n&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.AVh("text-success","active"===t.profile.insighter_status)("text-danger","inactive"===t.profile.insighter_status),e.R7$(),e.JRh(t.profile.insighter_status)}}function Te(n,r){if(1&n&&(e.j41(0,"div",11)(1,"div",23)(2,"div",24),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"div",22),e.EFF(6),e.nI1(7,"uppercase"),e.nI1(8,"translate"),e.k0s()(),e.j41(9,"div",23)(10,"div",24),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"div",22),e.EFF(14),e.nI1(15,"uppercase"),e.nI1(16,"translate"),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,12,"PROFILE.COMPANY_STATUS")),e.R7$(2),e.AVh("text-success","active"===(null==t.profile.company?null:t.profile.company.status))("text-danger","inactive"===(null==t.profile.company?null:t.profile.company.status)),e.R7$(),e.SpI(" ",e.bMT(8,16,"PROFILE.STATUS."+e.bMT(7,14,null==t.profile.company?null:t.profile.company.status))," "),e.R7$(5),e.JRh(e.bMT(12,18,"PROFILE.INSIGHTER_STATUS")),e.R7$(2),e.AVh("text-success","active"===t.profile.insighter_status)("text-danger","inactive"===t.profile.insighter_status),e.R7$(),e.SpI(" ",e.bMT(16,22,"PROFILE.STATUS."+e.bMT(15,20,t.profile.insighter_status))," ")}}function xe(n,r){if(1&n&&(e.j41(0,"div",22),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.AVh("text-success","active"===t.profile.insighter_status)("text-danger","inactive"===t.profile.insighter_status),e.R7$(),e.JRh(t.profile.insighter_status)}}function Fe(n,r){if(1&n&&(e.j41(0,"div",2)(1,"div",3),e.nrm(2,"div",4),e.DNE(3,_e,6,0,"label",5),e.k0s(),e.j41(4,"div",6),e.DNE(5,he,2,2,"div",7)(6,ve,3,2,"div",7)(7,ye,2,1,"ng-container",8),e.k0s(),e.j41(8,"div",9),e.DNE(9,Ie,2,5,"div",10)(10,Te,17,24,"div",11)(11,xe,2,5,"div",10),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("ngStyle",e.eq3(8,ge,"url('"+t.profileImage+"')")),e.R7$(),e.Y8G("ngIf",!t.hasRole(e.lJ4(10,B))),e.R7$(2),e.Y8G("ngIf",!(null!=t.profile.company&&t.profile.company.legal_name)),e.R7$(),e.Y8G("ngIf",null==t.profile.company?null:t.profile.company.legal_name),e.R7$(),e.Y8G("ngIf",t.profile.company),e.R7$(2),e.vxM(9,t.hasRole(e.lJ4(11,ue))&&!t.hasRole(e.lJ4(12,J))?9:-1),e.R7$(),e.vxM(10,t.hasRole(e.lJ4(13,J))?10:-1),e.R7$(),e.vxM(11,t.hasRole(e.lJ4(14,B))?11:-1)}}let Re=(()=>{class n extends _.${profileService;profile;photoupdated=new e.bkB;fileInput;isAvatar=!0;selectedImage=null;profileImage;isLoading=!1;constructor(t,i,o){super(o),this.profileService=i}ngOnInit(){this.profileImage=this.getProfileImage()}ngOnChanges(t){t.profile&&!t.profile.firstChange&&(this.profileImage=this.getProfileImage())}getProfileImage(){return this.selectedImage?this.selectedImage:this.profile?.company?.logo?this.profile.company.logo:this.profile?.profile_photo_url?this.profile.profile_photo_url:"assets/media/avatars/blank.png"}onFileSelected(t){const i=t.target.files[0];i&&this.uploadImage(i)}onCancel(){this.selectedImage=null,this.profileImage=this.getProfileImage(),this.fileInput&&(this.fileInput.nativeElement.value="")}onRemove(){this.profileService.removeProfilePhoto().subscribe(t=>{this.selectedImage=null,this.profileImage="assets/media/avatars/blank.png",this.photoupdated.emit(),this.showSuccess("","ar"===this.lang?"\u062a\u0645 \u062a\u062d\u0645\u064a\u0644 \u0635\u0648\u0631\u062a\u0643 \u0627\u0644\u0634\u062e\u0635\u064a\u0629 \u0628\u0646\u062c\u0627\u062d":"Your profile picture has been removed successfully."),this.fileInput&&(this.fileInput.nativeElement.value="")},t=>{this.showError("","ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0625\u0632\u0627\u0644\u0629 \u0635\u0648\u0631\u0629 \u0645\u0644\u0641\u0643 \u0627\u0644\u0634\u062e\u0635\u064a.":"An error occurred while removing your profile picture.")})}uploadImage(t){var a;this.isLoading=!0,(a=t,new Promise((f,l)=>{const m=new FileReader;m.onload=T=>{const k=new Image;k.onload=()=>{f(k.width>=100&&k.height>=100)},k.onerror=()=>{l(new Error("Invalid image file."))},k.src=T.target.result},m.onerror=()=>{l(new Error("Error reading file."))},m.readAsDataURL(a)})).then(a=>{if(!a)return this.showError("ar"===this.lang?"\u062c\u0648\u062f\u0629 \u0636\u0639\u064a\u0641\u0629":"Low Resolution","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u062a\u062d\u0645\u064a\u0644 \u0635\u0648\u0631\u0629 \u0628\u0623\u0628\u0639\u0627\u062f \u0644\u0627 \u062a\u0642\u0644 \u0639\u0646 100x100 \u0628\u0643\u0633\u0644.":"Please upload an image with at least 100x100 pixels."),this.selectedImage=null,this.profileImage=this.getProfileImage(),this.fileInput&&(this.fileInput.nativeElement.value=""),void(this.isLoading=!1);const f=new FileReader;f.onload=l=>{this.selectedImage=l.target.result,this.profileImage=this.selectedImage},f.readAsDataURL(t),this.profile.roles.includes("company")?this.profileService.updateCompanyLogo(t).subscribe(l=>{this.photoupdated.emit(),this.showSuccess("ar"===this.lang?"\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062e\u0635\u064a":"Profile Picture Updated","ar"===this.lang?"\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0635\u0648\u0631\u0629 \u0645\u0644\u0641\u0643 \u0627\u0644\u0634\u062e\u0635\u064a \u0628\u0646\u062c\u0627\u062d.":"Your profile picture has been updated successfully."),window.location.reload(),this.isLoading=!1},l=>{console.error("Error updating company logo:",l),this.isLoading=!1}):this.profileService.updateProfilePhoto(t).subscribe(l=>{this.photoupdated.emit(),this.showSuccess("ar"===this.lang?"\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062e\u0635\u064a":"Profile Picture Updated","ar"===this.lang?"\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0635\u0648\u0631\u0629 \u0645\u0644\u0641\u0643 \u0627\u0644\u0634\u062e\u0635\u064a \u0628\u0646\u062c\u0627\u062d.":"Your profile picture has been updated successfully."),document.location.reload(),this.isLoading=!1},l=>{this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062a\u062d\u062f\u064a\u062b \u0635\u0648\u0631\u0629 \u0645\u0644\u0641\u0643 \u0627\u0644\u0634\u062e\u0635\u064a.":"An error occurred while updating your profile picture."),this.selectedImage=null,this.profileImage=this.getProfileImage(),this.fileInput&&(this.fileInput.nativeElement.value=""),this.isLoading=!1})}).catch(a=>{console.error(a),this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062a\u062d\u062f\u064a\u062b \u0635\u0648\u0631\u0629 \u0645\u0644\u0641\u0643 \u0627\u0644\u0634\u062e\u0635\u064a.":"An error occurred while updating your profile picture."),this.selectedImage=null,this.profileImage=this.getProfileImage(),this.fileInput&&(this.fileInput.nativeElement.value=""),this.isLoading=!1})}hasRole(t){return t.some(i=>this.profile.roles.includes(i))}static \u0275fac=function(i){return new(i||n)(e.rXU(h.bg),e.rXU(j),e.rXU(e.zZn))};static \u0275cmp=e.VBU({type:n,selectors:[["app-profile-header"]],viewQuery:function(i,o){if(1&i&&e.GBs(fe,5),2&i){let s;e.mGM(s=e.lsd())&&(o.fileInput=s.first)}},inputs:{profile:"profile"},outputs:{photoupdated:"photoupdated"},features:[e.Vt3,e.OA$],decls:1,vars:1,consts:[["fileInput",""],["class","profile-header d-flex flex-column align-items-center gap-2 gap-lg-3 py-4 pt-20 pt-lg-5 pb-lg-5",4,"ngIf"],[1,"profile-header","d-flex","flex-column","align-items-center","gap-2","gap-lg-3","py-4","pt-20","pt-lg-5","pb-lg-5"],["data-kt-image-input","true",1,"image-input","image-input-outline","border-1","border-success",2,"background-image","url(../../../assets/media/svg/avatars/blank.svg)"],[1,"image-input-wrapper","w-125px","h-125px",3,"ngStyle"],["class","btn btn-icon btn-circle btn-color-muted btn-active-color-primary w-25px h-25px bg-body shadow","title","Change avatar",4,"ngIf"],[1,"profile-name","d-flex","align-items-center","gap-2",2,"direction","ltr"],["class","text-dark fs-2 fw-bolder",4,"ngIf"],[4,"ngIf"],[1,"profile-details","d-flex","flex-wrap","justify-content-center","gap-1","gap-lg-4","small"],[1,"fw-bold","text-uppercase",3,"text-success","text-danger"],[1,"d-flex","gap-4"],["title","Change avatar",1,"btn","btn-icon","btn-circle","btn-color-muted","btn-active-color-primary","w-25px","h-25px","bg-body","shadow"],[1,"ki-duotone","ki-pencil","fs-6"],[1,"path1"],[1,"path2"],["type","file","name","avatar","accept",".png, .jpg, .jpeg",1,"d-none",3,"change"],[1,"text-dark","fs-2","fw-bolder"],["class","fs-4 fw-normal ms-2",4,"ngIf"],[1,"fs-4","fw-normal","ms-2"],["name","verify","type","solid","class","fs-1 text-info",4,"ngIf"],["name","verify","type","solid",1,"fs-1","text-info"],[1,"fw-bold","text-uppercase"],[1,"border","rounded","p-3","bg-light"],[1,"text-gray-600","mb-1"]],template:function(i,o){1&i&&e.DNE(0,Fe,12,15,"div",1),2&i&&e.Y8G("ngIf",o.profile)},dependencies:[d.bT,d.B3,X.w,d.Pc,y.D9],styles:[".no-bg[_ngcontent-%COMP%]{border-radius:10px}.update-label[_ngcontent-%COMP%]{position:absolute;bottom:3%;left:10px}.image-input-wrapper[_ngcontent-%COMP%]{background-size:contain;background-position:center}.image-input[_ngcontent-%COMP%]{position:relative}.btn-icon[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0}.profile-image[_ngcontent-%COMP%]{width:125px;height:125px;border:1px solid #28a745;border-radius:50%;object-fit:cover}@media screen and (max-width: 768px){.profile-image[_ngcontent-%COMP%]{padding-top:100px!important}}"]})}return n})();var H=c(4133);function Ee(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.labelen)}}function Pe(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.labelar)}}function ke(n,r){if(1&n&&(e.j41(0,"div",6)(1,"div",7),e.nrm(2,"i"),e.k0s(),e.j41(3,"div",8),e.DNE(4,Ee,2,1,"ng-container",9)(5,Pe,2,1,"ng-container",9),e.k0s()()),2&n){const t=r.$implicit,i=e.XpG(2);e.Y8G("routerLink",t.link),e.R7$(2),e.ZvI("pi pi-",i.getPrimeIcon(t.icon)," icon-fixed-font"),e.R7$(2),e.Y8G("ngIf","en"===i.lang),e.R7$(),e.Y8G("ngIf","ar"===i.lang)}}function Se(n,r){if(1&n&&(e.j41(0,"div",2)(1,"div",3)(2,"h3"),e.EFF(3),e.k0s()(),e.j41(4,"div",4),e.DNE(5,ke,6,6,"div",5),e.k0s()()),2&n){const t=e.XpG();e.R7$(3),e.JRh("en"===t.lang?"Personal":"\u0634\u062e\u0635\u064a"),e.R7$(2),e.Y8G("ngForOf",t.personalTabs)}}function we(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.labelen)}}function Ne(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.labelar)}}function Oe(n,r){if(1&n&&(e.j41(0,"div",6)(1,"div",7),e.nrm(2,"i"),e.k0s(),e.j41(3,"div",8),e.DNE(4,we,2,1,"ng-container",9)(5,Ne,2,1,"ng-container",9),e.k0s()()),2&n){const t=r.$implicit,i=e.XpG(2);e.Y8G("routerLink",t.link),e.R7$(2),e.ZvI("pi pi-",i.getPrimeIcon(t.icon)," icon-fixed-font"),e.R7$(2),e.Y8G("ngIf","en"===i.lang),e.R7$(),e.Y8G("ngIf","ar"===i.lang)}}function Me(n,r){if(1&n&&(e.j41(0,"div",2)(1,"div",3)(2,"h3"),e.EFF(3),e.k0s()(),e.j41(4,"div",4),e.DNE(5,Oe,6,6,"div",5),e.k0s()()),2&n){const t=e.XpG();e.R7$(3),e.JRh("en"===t.lang?"Company":"\u0627\u0644\u0634\u0631\u0643\u0629"),e.R7$(2),e.Y8G("ngForOf",t.companyTabs)}}function $e(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.labelen)}}function je(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.labelar)}}function Ge(n,r){if(1&n&&(e.j41(0,"div",6)(1,"div",7),e.nrm(2,"i"),e.k0s(),e.j41(3,"div",8),e.DNE(4,$e,2,1,"ng-container",9)(5,je,2,1,"ng-container",9),e.k0s()()),2&n){const t=r.$implicit,i=e.XpG(2);e.Y8G("routerLink",t.link),e.R7$(2),e.ZvI("pi pi-",i.getPrimeIcon(t.icon)," icon-fixed-font"),e.R7$(2),e.Y8G("ngIf","en"===i.lang),e.R7$(),e.Y8G("ngIf","ar"===i.lang)}}function Ae(n,r){if(1&n&&(e.j41(0,"div",2)(1,"div",3)(2,"h3"),e.EFF(3),e.k0s()(),e.j41(4,"div",4),e.DNE(5,Ge,6,6,"div",5),e.k0s()()),2&n){const t=e.XpG();e.R7$(3),e.JRh("en"===t.lang?"Settings":"\u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a"),e.R7$(2),e.Y8G("ngForOf",t.settingsTabs)}}let De=(()=>{class n{translationService;authService;profile;lang="en";roles=[];filteredTabs=[];personalTabs=[];companyTabs=[];settingsTabs=[];menuItems=[];isSocialLogin=!1;tabs=[{labelen:"My Information",labelar:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a\u064a",link:"/app/profile/overview",activeInfo:!0,activePrimary:!1,roles:["client","insighter","company","company-insighter"],icon:"user",category:"personal"},{labelen:"My Certificates",labelar:"\u0634\u0647\u0627\u062f\u0627\u062a\u064a",link:"/app/profile/certificates",activeInfo:!1,activePrimary:!0,roles:["insighter","company","company-insighter"],icon:"certificate",category:"personal"},{labelen:"General Information",labelar:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0639\u0627\u0645\u0629",link:"/app/profile/company",activeInfo:!1,activePrimary:!0,roles:["company"],icon:"building",category:"company"},{labelen:"Certificates and Credentials",labelar:"\u0627\u0644\u0634\u0647\u0627\u062f\u0627\u062a \u0648\u0627\u0644\u0627\u0639\u062a\u0645\u0627\u062f\u0627\u062a",link:"/app/profile/company-certificates",activeInfo:!1,activePrimary:!0,roles:["company"],icon:"award",category:"company"},{labelen:"Legal Documents",labelar:"\u0648\u062b\u0627\u0626\u0642 \u0642\u0627\u0646\u0648\u0646\u064a\u0629",link:"/app/profile/documents",activeInfo:!1,activePrimary:!0,roles:["company"],icon:"file-text",category:"company"},{labelen:"Personal Settings",labelar:"\u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0634\u062e\u0635\u064a\u0629",link:"/app/profile/settings/personal-info",activeInfo:!1,activePrimary:!0,roles:["company","insighter","client"],icon:"id-card",category:"settings"},{labelen:"Company Settings",labelar:"\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0634\u0631\u0643\u0629",link:"/app/profile/settings/company-settings",activeInfo:!1,activePrimary:!0,roles:["company"],icon:"cog",category:"settings"}];constructor(t,i){this.translationService=t,this.authService=i}ngOnInit(){this.roles=this.profile.roles,this.handleLanguage(),this.checkSocialLogin(),this.filterTabs(),this.buildMenu()}ngOnChanges(t){t.profile&&(this.roles=this.profile.roles,this.checkSocialLogin(),this.filterTabs(),this.buildMenu())}handleLanguage(){this.lang=this.translationService.getSelectedLanguage(),this.translationService.onLanguageChange().subscribe(t=>{this.lang=t,this.buildMenu()})}checkSocialLogin(){this.isSocialLogin=!0===this.profile.login_social,this.isSocialLogin||this.tabs.some(i=>"/app/profile/settings/reset-password"===i.link)||this.tabs.push({labelen:"Change Password",labelar:"\u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",link:"/app/profile/settings/reset-password",activeInfo:!1,activePrimary:!0,roles:["client"],icon:"lock",category:"settings"})}filterTabs(){this.filteredTabs=this.tabs.filter(t=>this.hasRole(t.roles)),this.personalTabs=this.filteredTabs.filter(t=>"personal"===t.category),this.companyTabs=this.filteredTabs.filter(t=>"company"===t.category),this.settingsTabs=this.filteredTabs.filter(t=>"settings"===t.category)}buildMenu(){this.menuItems=this.filteredTabs.map(t=>({label:"en"===this.lang?t.labelen:t.labelar,icon:this.getDuotuneIconPath(t.icon),routerLink:t.link}))}getPrimeIcon(t){return{user:"user",certificate:"verified",building:"building",award:"star","file-text":"file","id-card":"id-card",lock:"lock",cog:"cog"}[t]||"circle"}getDuotuneIconPath(t){return{user:"duotune/general/gen049.svg",certificate:"duotune/general/gen026.svg",building:"duotune/general/gen055.svg",award:"duotune/general/gen047.svg","file-text":"duotune/files/fil003.svg","id-card":"duotune/general/gen046.svg",lock:"duotune/general/gen048.svg",cog:"duotune/general/gen054.svg"}[t]||"duotune/general/gen051.svg"}hasRole(t){return t.some(i=>this.roles.includes(i))}ngOnDestroy(){}static \u0275fac=function(i){return new(i||n)(e.rXU(H.L),e.rXU(w.uR))};static \u0275cmp=e.VBU({type:n,selectors:[["app-navigation-tabs"]],inputs:{profile:"profile"},features:[e.OA$],decls:4,vars:3,consts:[[1,"navigation-cards"],["class","p-card navigation-card",4,"ngIf"],[1,"p-card","navigation-card"],[1,"p-card-header"],[1,"p-card-body"],["class","nav-item","routerLinkActive","active",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"nav-item",3,"routerLink"],[1,"item-icon"],[1,"item-label"],[4,"ngIf"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.DNE(1,Se,6,2,"div",1)(2,Me,6,2,"div",1)(3,Ae,6,2,"div",1),e.k0s()),2&i&&(e.R7$(),e.Y8G("ngIf",o.personalTabs.length>0),e.R7$(),e.Y8G("ngIf",o.companyTabs.length>0),e.R7$(),e.Y8G("ngIf",o.settingsTabs.length>0))},dependencies:[d.Sq,d.bT,v.Wk,v.wQ],styles:[".app-sidebar[_ngcontent-%COMP%]{height:100%;min-height:600px;border-radius:.625rem;box-shadow:0 0 20px #0000000d;background-color:#fff}.sidebar-header[_ngcontent-%COMP%]{border-bottom:1px solid var(--kt-card-border-color);background-color:#fff}.menu-item[_ngcontent-%COMP%]{margin-top:.25rem}.menu-link[_ngcontent-%COMP%]{display:flex;padding:.75rem 1.5rem;color:var(--kt-gray-700);font-weight:500;border-radius:.475rem;transition:color .2s ease,background-color .2s ease}.menu-link[_ngcontent-%COMP%]:hover, .menu-link.active[_ngcontent-%COMP%]{background-color:var(--kt-info-light);color:var(--kt-info)}.menu-link.active[_ngcontent-%COMP%]{font-weight:600}.menu-title[_ngcontent-%COMP%]{font-size:1.075rem}.menu-icon[_ngcontent-%COMP%]{color:var(--kt-text-muted);margin-right:.5rem}@media screen and (max-width: 768px){.app-sidebar[_ngcontent-%COMP%]{width:100%;margin-bottom:1.5rem}}.icon-fixed-font[_ngcontent-%COMP%]{font-family:primeicons!important;color:var(--primary-color);font-size:1.2rem}.profile-navigation-container[_ngcontent-%COMP%]{height:100%}.navigation-card[_ngcontent-%COMP%]{height:100%;border-radius:12px;background-color:#fff;border:1px solid #f0f0f0}.nav-header[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;border-bottom:1px solid #f0f0f0}.nav-title[_ngcontent-%COMP%]{margin:0;font-size:1.15rem;font-weight:600;color:#212529}.menu-container[_ngcontent-%COMP%]{padding:.5rem 0}.nav-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #f0f0f0}[_nghost-%COMP%]     .custom-menu{width:100%;border:none;background:transparent;padding:.5rem}[_nghost-%COMP%]     .custom-menu .p-menuitem{margin-bottom:.25rem}[_nghost-%COMP%]     .custom-menu .p-menuitem-link{padding:.875rem 1.25rem;border-radius:8px;transition:background-color .2s,color .2s;background-color:transparent}[_nghost-%COMP%]     .custom-menu .p-menuitem-link:hover{background-color:var(--kt-info-light)}[_nghost-%COMP%]     .custom-menu .p-menuitem-link.p-menuitem-link-active{background-color:var(--kt-info-light);color:var(--kt-info);font-weight:500}[_nghost-%COMP%]     .custom-menu .p-menuitem-link .p-menuitem-icon{margin-right:.75rem;color:#6c757d;width:1.5rem;text-align:center;font-size:1.15rem}[_nghost-%COMP%]     .custom-menu .p-menuitem-link .p-menuitem-text{color:#495057;font-size:1rem;font-weight:500}[_nghost-%COMP%]     .custom-menu .p-menuitem-link:focus{box-shadow:none;outline:none}[_nghost-%COMP%]     .custom-menu .p-menuitem-link.p-menuitem-link-active .p-menuitem-text, [_nghost-%COMP%]     .custom-menu .p-menuitem-link.p-menuitem-link-active .p-menuitem-icon{color:var(--kt-info)}@media screen and (max-width: 768px){.profile-navigation-container[_ngcontent-%COMP%]{margin-bottom:1.5rem}}.navigation-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;width:100%}@media (min-width: 768px){.navigation-cards[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}}.navigation-cards[_ngcontent-%COMP%]   .navigation-card[_ngcontent-%COMP%]{flex:1;min-width:250px;border-radius:8px;overflow:hidden;box-shadow:0 4px 12px #0000000d;transition:transform .2s,box-shadow .2s;margin-bottom:1rem}.navigation-cards[_ngcontent-%COMP%]   .navigation-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 16px #0000001a}.navigation-cards[_ngcontent-%COMP%]   .navigation-card[_ngcontent-%COMP%]   .p-card-header[_ngcontent-%COMP%]{padding:1rem;background-color:#f8f9fa;border-bottom:1px solid #e9ecef}.navigation-cards[_ngcontent-%COMP%]   .navigation-card[_ngcontent-%COMP%]   .p-card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#495057}.navigation-cards[_ngcontent-%COMP%]   .navigation-card[_ngcontent-%COMP%]   .p-card-body[_ngcontent-%COMP%]{padding:0}.navigation-cards[_ngcontent-%COMP%]   .navigation-card[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem 1rem;cursor:pointer;transition:background-color .2s;border-bottom:1px solid #f1f1f1}.navigation-cards[_ngcontent-%COMP%]   .navigation-card[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.navigation-cards[_ngcontent-%COMP%]   .navigation-card[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.navigation-cards[_ngcontent-%COMP%]   .navigation-card[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]{background-color:#eef5ff;color:#4096ff;border-left:3px solid #4096ff}.navigation-cards[_ngcontent-%COMP%]   .navigation-card[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:50%;background-color:#f0f2f5;margin-right:12px}.navigation-cards[_ngcontent-%COMP%]   .navigation-card[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;color:#4096ff}.navigation-cards[_ngcontent-%COMP%]   .navigation-card[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .item-label[_ngcontent-%COMP%]{font-size:.9rem;color:#495057;font-weight:500}[dir=rtl][_nghost-%COMP%]   .navigation-cards[_ngcontent-%COMP%]   .navigation-card[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .navigation-cards[_ngcontent-%COMP%]   .navigation-card[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:12px}[dir=rtl][_nghost-%COMP%]   .navigation-cards[_ngcontent-%COMP%]   .navigation-card[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .navigation-cards[_ngcontent-%COMP%]   .navigation-card[_ngcontent-%COMP%]   .nav-item.active[_ngcontent-%COMP%]{border-left:none;border-right:3px solid #4096ff}.modern-sidebar[_ngcontent-%COMP%]{border-radius:12px;background-color:#fff;border:1px solid #f0f2f5;overflow:hidden}.sidebar-items[_ngcontent-%COMP%]{padding:12px 0}.parent-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:14px 20px;cursor:pointer;transition:background-color .2s,color .2s;color:#6c757d;position:relative}.parent-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.parent-item.active[_ngcontent-%COMP%]{background-color:#eef5ff;color:#4096ff}.parent-item.active[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{color:#4096ff}.item-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:20px;margin-right:12px;color:#909399}.item-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.item-label[_ngcontent-%COMP%]{flex:1;font-size:14px;font-weight:500}.item-arrow[_ngcontent-%COMP%]{color:#c0c4cc}.item-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.sidebar-actions[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #f0f2f5}@media screen and (max-width: 768px){.modern-sidebar[_ngcontent-%COMP%]{margin-bottom:24px}}"]})}return n})();function Le(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",10)(1,"app-profile-header",11),e.bIt("photoupdated",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.reloadAPI())}),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("profile",t.profile)}}let Ye=(()=>{class n extends _.${auth;getProfileService;profile;constructor(t,i,o){super(i),this.auth=t,this.getProfileService=o}ngOnInit(){this.getProfile()}getProfile(){const t=this.getProfileService.getProfile().subscribe({next:i=>{this.profile=i},error:i=>{}});this.unsubscribe.push(t)}reloadAPI(){this.getProfile()}static \u0275fac=function(i){return new(i||n)(e.rXU(w.uR),e.rXU(e.zZn),e.rXU(C.p))};static \u0275cmp=e.VBU({type:n,selectors:[["app-profile"]],features:[e.Vt3],decls:12,vars:2,consts:[[1,"d-flex","justify-content-center","align-items-center","hero-bg"],[1,"bg-center","bg-cover","bg-no-repeat","container"],["class","container",4,"ngIf"],[1,"container","pb-5","mt-5"],[1,"row","gx-5"],[1,"col-12","col-lg-3","mb-10","mb-lg-0"],[3,"profile"],[1,"col-12","col-lg-9"],[1,"card"],[1,"card-body","p-lg-10"],[1,"container"],[3,"photoupdated","profile"]],template:function(i,o){1&i&&(e.nrm(0,"p-toast"),e.j41(1,"div",0)(2,"div",1),e.DNE(3,Le,2,1,"div",2),e.k0s()(),e.j41(4,"div",3)(5,"div",4)(6,"div",5),e.nrm(7,"app-navigation-tabs",6),e.k0s(),e.j41(8,"div",7)(9,"div",8)(10,"div",9),e.nrm(11,"router-outlet"),e.k0s()()()()()),2&i&&(e.R7$(3),e.Y8G("ngIf",o.profile),e.R7$(4),e.Y8G("profile",o.profile))},dependencies:[d.bT,v.n3,E.y8,Re,De],styles:[".hero-bg[_ngcontent-%COMP%]{background-image:url(bg-cells.bf4ccef43a7336f7.png);background-size:cover;background-position:center;margin-top:65px;padding-top:30px;min-height:300px}@media screen and (max-width: 998px){.hero-bg[_ngcontent-%COMP%]{margin-top:10px;padding-top:0}}"]})}return n})();var Ue=c(1594),W=c(5330),R=c(1579);const Ve=()=>({height:"4px"}),Xe=n=>({"col-12 col-lg-12":n});function Be(n,r){1&n&&(e.j41(0,"div",2),e.nrm(1,"p-progressBar",3),e.k0s()),2&n&&(e.R7$(),e.Aen(e.lJ4(2,Ve)))}function Je(n,r){if(1&n&&e.nrm(0,"img",42),2&n){const t=e.XpG(4);e.Y8G("src",t.profile.profile_photo_url,e.B4B)}}function He(n,r){if(1&n&&(e.j41(0,"div",43),e.EFF(1),e.k0s()),2&n){const t=e.XpG(4);e.R7$(),e.SpI(" ",t.getProfileInitials()," ")}}function We(n,r){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"HOME.INSIGHTER")))}function ze(n,r){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"HOME.COMPANY")))}function qe(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",31)(4,"div",32),e.DNE(5,Je,1,1,"img",33)(6,He,2,1,"div",34),e.k0s(),e.j41(7,"label",35),e.nrm(8,"i",36),e.j41(9,"input",37),e.bIt("change",function(o){e.eBV(t);const s=e.XpG(3);return e.Njj(s.onFileSelected(o))}),e.k0s()()(),e.j41(10,"div",38)(11,"h2",39),e.EFF(12),e.k0s(),e.j41(13,"div",40)(14,"span",41),e.DNE(15,We,3,3,"ng-container",1)(16,ze,3,3,"ng-container",1),e.k0s()()()()()()}if(2&n){const t=e.XpG(3);e.R7$(4),e.xc7("background-image",t.getLogoBackgroundImage()),e.R7$(),e.Y8G("ngIf",t.hasProfilePhoto()),e.R7$(),e.Y8G("ngIf",!t.hasProfilePhoto()),e.R7$(6),e.Lme("",t.profile.first_name," ",t.profile.last_name,""),e.R7$(3),e.Y8G("ngIf",t.profile.roles.includes("insighter")),e.R7$(),e.Y8G("ngIf",t.profile.roles.includes("company"))}}function Ze(n,r){if(1&n&&(e.j41(0,"div",9)(1,"div",10)(2,"div",11)(3,"span",12),e.nrm(4,"i",44),e.k0s(),e.j41(5,"h3",14),e.EFF(6),e.nI1(7,"translate"),e.k0s()()(),e.j41(8,"div",15)(9,"p",45),e.EFF(10),e.k0s()()()),2&n){const t=e.XpG(3);e.R7$(6),e.JRh(e.bMT(7,2,"ACCOUNT_SETTINGS.BIO")),e.R7$(4),e.SpI(" ",t.profile.bio," ")}}function Ke(n,r){if(1&n&&(e.qex(0),e.j41(1,"a",52),e.nrm(2,"img",53),e.k0s(),e.bVm()),2&n){const t=r.$implicit;e.R7$(),e.Y8G("href",t.link,e.B4B),e.R7$(),e.Y8G("src","assets/media/svg/social-logos/"+t.type+".svg",e.B4B)("alt",t.type)}}function Qe(n,r){1&n&&(e.j41(0,"div",54),e.nrm(1,"i",55),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"NO_SOCIAL_MEDIA")," "))}function et(n,r){if(1&n&&(e.j41(0,"div",9)(1,"div",10)(2,"div",11)(3,"span",12),e.nrm(4,"i",47),e.k0s(),e.j41(5,"h3",14),e.EFF(6),e.nI1(7,"translate"),e.k0s()()(),e.j41(8,"div",48)(9,"div",49),e.DNE(10,Ke,3,3,"ng-container",50)(11,Qe,4,3,"div",51),e.k0s()()()),2&n){const t=e.XpG(4);e.R7$(6),e.JRh(e.bMT(7,3,"PROFILE.SOCIAL_MEDIA")),e.R7$(4),e.Y8G("ngForOf",t.profile.social),e.R7$(),e.Y8G("ngIf",!t.profile.social.length)}}function tt(n,r){if(1&n&&(e.j41(0,"div",46),e.DNE(1,et,12,5,"div",24),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",t.profile.social&&t.profile.social.length>0)}}function nt(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.name," ")}}function it(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.name," ")}}function ot(n,r){if(1&n&&(e.j41(0,"span",67),e.DNE(1,nt,2,1,"ng-container",1)(2,it,2,1,"ng-container",1),e.k0s()),2&n){const t=e.XpG(4);e.R7$(),e.Y8G("ngIf","ar"===t.lang),e.R7$(),e.Y8G("ngIf","en"===t.lang)}}function rt(n,r){if(1&n&&(e.j41(0,"div",56)(1,"div",57)(2,"div",10)(3,"div",11)(4,"span",58),e.qSk(),e.j41(5,"svg",59),e.nrm(6,"path",60)(7,"path",61)(8,"path",62)(9,"path",63)(10,"path",64),e.k0s()(),e.joV(),e.j41(11,"h3",14),e.EFF(12),e.nI1(13,"translate"),e.k0s()()(),e.j41(14,"div",15)(15,"div",65),e.DNE(16,ot,3,2,"span",66),e.k0s()()()()),2&n){const t=e.XpG(3);e.R7$(12),e.JRh(e.bMT(13,2,"PROFILE.INDUSTRIES")),e.R7$(4),e.Y8G("ngForOf",t.profile.industries)}}function st(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.names.ar," ")}}function at(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.name," ")}}function lt(n,r){if(1&n&&(e.j41(0,"span",67),e.DNE(1,st,2,1,"ng-container",1)(2,at,2,1,"ng-container",1),e.k0s()),2&n){const t=r.$implicit,i=e.XpG(4);e.R7$(),e.Y8G("ngIf","ar"===i.lang&&t.names&&t.names.ar),e.R7$(),e.Y8G("ngIf","en"===i.lang||!t.names||!t.names.ar)}}function ct(n,r){if(1&n&&(e.j41(0,"div",56)(1,"div",57)(2,"div",10)(3,"div",11)(4,"span",68),e.nrm(5,"i",69),e.k0s(),e.j41(6,"h3",14),e.EFF(7),e.nI1(8,"translate"),e.k0s()()(),e.j41(9,"div",15)(10,"div",65),e.DNE(11,lt,3,2,"span",66),e.k0s()()()()),2&n){const t=e.XpG(3);e.R7$(7),e.JRh(e.bMT(8,2,"PROFILE.CONSULTING_FIELDS")),e.R7$(4),e.Y8G("ngForOf",t.profile.consulting_field)}}function pt(n,r){if(1&n&&(e.j41(0,"div",5),e.DNE(1,qe,17,8,"div",6),e.j41(2,"div",7)(3,"div",8)(4,"div",9)(5,"div",10)(6,"div",11)(7,"span",12),e.nrm(8,"i",13),e.k0s(),e.j41(9,"h3",14),e.EFF(10),e.nI1(11,"translate"),e.k0s()()(),e.j41(12,"div",15)(13,"div",16)(14,"div",17),e.nrm(15,"i",18),e.j41(16,"span"),e.EFF(17),e.nI1(18,"translate"),e.k0s()(),e.j41(19,"div",19),e.EFF(20),e.k0s()(),e.j41(21,"div",16)(22,"div",17),e.nrm(23,"i",20),e.j41(24,"span"),e.EFF(25),e.nI1(26,"translate"),e.k0s()(),e.j41(27,"div",19),e.EFF(28),e.k0s()(),e.j41(29,"div",16)(30,"div",17),e.nrm(31,"i",21),e.j41(32,"span"),e.EFF(33),e.nI1(34,"translate"),e.k0s()(),e.j41(35,"div",19),e.EFF(36),e.k0s()(),e.j41(37,"div",22)(38,"div",17),e.nrm(39,"i",23),e.j41(40,"span"),e.EFF(41),e.nI1(42,"translate"),e.k0s()(),e.j41(43,"div",19),e.EFF(44),e.k0s()()()(),e.DNE(45,Ze,11,4,"div",24),e.k0s(),e.DNE(46,tt,2,1,"div",25),e.k0s(),e.j41(47,"div",26),e.DNE(48,rt,17,4,"div",27)(49,ct,12,4,"div",27),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.profile.roles.includes("company")||t.profile.roles.includes("company-insighter")),e.R7$(2),e.Y8G("ngClass",e.eq3(26,Xe,t.profile.roles.includes("company-insighter"))),e.R7$(7),e.JRh(e.bMT(11,16,"PROFILE.GENERAL_INFO")),e.R7$(7),e.JRh(e.bMT(18,18,"PROFILE.FULL_NAME")),e.R7$(3),e.Lme("",t.profile.first_name," ",t.profile.last_name,""),e.R7$(5),e.JRh(e.bMT(26,20,"PROFILE.EMAIL")),e.R7$(3),e.JRh(t.profile.email),e.R7$(5),e.JRh(e.bMT(34,22,"ACCOUNT_SETTINGS.PHONE_NUMBER")),e.R7$(3),e.JRh(t.getDisplayPhone()),e.R7$(5),e.JRh(e.bMT(42,24,"PROFILE.COUNTRY")),e.R7$(3),e.JRh(t.profile.country),e.R7$(),e.Y8G("ngIf",t.profile.bio),e.R7$(),e.Y8G("ngIf",!t.profile.roles.includes("company-insighter")),e.R7$(2),e.Y8G("ngIf",t.profile.industries&&t.profile.industries.length>0),e.R7$(),e.Y8G("ngIf",t.profile.consulting_field&&t.profile.consulting_field.length>0)}}function dt(n,r){if(1&n&&(e.qex(0),e.DNE(1,pt,50,28,"div",4),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.profile)}}let mt=(()=>{class n extends _.${profileService;getProfileService;profile;lang="en";loadingProfile=!1;constructor(t,i,o,s){super(s),this.profileService=i,this.getProfileService=o}ngOnInit(){this.getProfile(),this.handleLanguage()}handleLanguage(){const t=this.translate.onLanguageChange().subscribe(i=>{this.lang=i});this.unsubscribe.push(t)}getProfile(){this.loadingProfile=!0;const t=this.getProfileService.getProfile().subscribe({next:i=>{this.profile=i,this.loadingProfile=!1,console.log("Profile roles:",this.profile?.roles),console.log("Profile social:",this.profile?.social),console.log("Company social:",this.profile?.company?.social),this.profile?.company?.social&&(console.log("Company social length:",this.profile.company.social.length),console.log("Company social is array:",Array.isArray(this.profile.company.social)))},error:i=>{this.loadingProfile=!1}});this.unsubscribe.push(t)}onFileSelected(t){const i=t.target.files[0];i&&this.uploadImage(i)}uploadImage(t){this.profileService.updateProfilePhoto(t).pipe((0,Ue.$)()).subscribe(i=>{this.messageService.add({severity:"success",summary:"Profile Picture Updated",detail:"Your profile picture has been updated successfully."}),document.location.reload()},i=>{const o=this.extractUploadErrorMessage(i);this.messageService.add({severity:"error",summary:"Error",detail:o})})}getLogoBackgroundImage(){return this.profile?.profile_photo_url?`url('${encodeURI(this.profile.profile_photo_url)}')`:""}hasProfilePhoto(){return!!this.profile?.profile_photo_url}getProfileInitials(){return`${(this.profile?.first_name||"").trim().charAt(0)}${(this.profile?.last_name||"").trim().charAt(0)}`.toUpperCase()||"--"}extractUploadErrorMessage(t){const i="An error occurred while updating your profile picture.";if(!t)return i;const o=t.error??t;if(o?.errors){const a=o.errors.profile_photo;if(Array.isArray(a)&&a.length)return a[0];for(const f of Object.keys(o.errors)){const l=o.errors[f];if(Array.isArray(l)&&l.length&&"string"==typeof l[0]){const m=l[0].trim();if(m)return m}else if("string"==typeof l&&l.trim())return l.trim()}}const s=o?.message??t.message;return"string"==typeof s&&s.trim()?s:i}hasCompanySocial(){return!!this.profile?.company?.social&&Array.isArray(this.profile?.company?.social)&&this.profile?.company?.social?.length>0}getSocialLinks(){let t=[];return this.profile?.social&&Array.isArray(this.profile.social)&&(t=[...this.profile.social]),this.profile?.company?.social&&Array.isArray(this.profile.company.social)&&(t=[...t,...this.profile.company.social]),t}logCompanySocial(){console.log("Company social data:",this.profile?.company?.social)}getDisplayPhone(){if(!this.profile)return"";if(this.profile.roles?.includes("company")){if(this.profile.company?.company_phone&&this.profile.company?.phone_code)return`(+${this.profile.company.phone_code}) ${this.profile.company.company_phone}`;if(this.profile.phone&&this.profile.phone_code)return`(+${this.profile.phone_code}) ${this.profile.phone}`}else if(this.profile.phone&&this.profile.phone_code)return`(+${this.profile.phone_code}) ${this.profile.phone}`;return"ar"===this.lang?"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f":"Not specified"}static \u0275fac=function(i){return new(i||n)(e.rXU(W.f),e.rXU(j),e.rXU(C.p),e.rXU(e.zZn))};static \u0275cmp=e.VBU({type:n,selectors:[["app-overview"]],features:[e.Vt3],decls:2,vars:2,consts:[["class","pt-3",4,"ngIf"],[4,"ngIf"],[1,"pt-3"],["mode","indeterminate",1,"bg-primary"],["class","container-fluid p-0",4,"ngIf"],[1,"container-fluid","p-0"],["class"," border-0 rounded-4 mb-4 overflow-hidden",4,"ngIf"],[1,"row","g-4"],[1,"col-12","col-lg-8",3,"ngClass"],[1,"card","rounded-4","border","border-light","mb-4"],[1,"card-header","border-0","bg-white","py-3"],[1,"d-flex","align-items-center"],[1,"bg-info","bg-opacity-10","p-2","rounded-3","me-3","d-flex","align-items-center","justify-content-center",2,"width","42px","height","42px"],[1,"bi","bi-person-vcard","fs-1","text-info"],[1,"card-title","fs-3","fw-bolder","mb-0"],[1,"card-body","pt-0"],[1,"row","mb-3","py-2","border-bottom","border-light"],[1,"col-12","col-md-4","text-muted","d-flex","align-items-center"],[1,"bi","bi-person","fs-4","text-info","me-2"],[1,"col-12","col-md-8","text-dark"],[1,"bi","bi-envelope","fs-4","text-info","me-2"],[1,"bi","bi-telephone","fs-4","text-success","me-2"],[1,"row","mb-0","py-2"],[1,"bi","bi-globe","fs-4","text-warning","me-2"],["class","card rounded-4 border border-light mb-4",4,"ngIf"],["class","col-12 col-lg-4",4,"ngIf"],[1,"row","g-4","mt-2"],["class","col-12 col-md-6",4,"ngIf"],[1,"border-0","rounded-4","mb-4","overflow-hidden"],[1,"p-0"],[1,"p-5","d-flex","flex-column","flex-md-row","align-items-center","gap-4"],[1,"image-input","image-input-circle","mb-3","mb-md-0"],[1,"image-input-wrapper","border-2","border-primary","w-125px","h-125px"],["alt","Profile Photo","class","w-100 h-100 rounded-circle","style","object-fit: cover; object-position: top;",3,"src",4,"ngIf"],["class","placeholder-avatar",4,"ngIf"],["title","Change avatar",1,"btn","btn-icon","btn-circle","btn-light","btn-active-light","w-25px","h-25px","position-absolute","bottom-0","end-0"],[1,"bi","bi-pencil","fs-6"],["type","file","name","avatar","accept",".png, .jpg, .jpeg",1,"d-none",3,"change"],[1,"d-flex","flex-column"],[1,"fs-1","fw-bold","mb-1"],[1,"d-flex","align-items-center","gap-2"],[1,"badge","badge-light-info","fw-bolder","fs-6","px-3","py-2","me-1","mb-1","text-truncate",2,"max-width","150px"],["alt","Profile Photo",1,"w-100","h-100","rounded-circle",2,"object-fit","cover","object-position","top",3,"src"],[1,"placeholder-avatar"],[1,"bi","bi-chat-quote","fs-1","text-info"],[1,"text-gray-800","mb-0","p-2"],[1,"col-12","col-lg-4"],[1,"bi","bi-share","fs-1","text-info"],[1,"card-body","pt-0","p-4"],[1,"d-flex","flex-wrap","align-items-center","justify-content-center"],[4,"ngFor","ngForOf"],["class","text-muted d-flex align-items-center",4,"ngIf"],["target","_blank",1,"btn","btn-light","btn-icon","btn-lg","m-2",2,"z-index","1","position","relative",3,"href"],["width","36","height","36",1,"p-2",3,"src","alt"],[1,"text-muted","d-flex","align-items-center"],[1,"bi","bi-info-circle","fs-2","me-2","text-info"],[1,"col-12","col-md-6"],[1,"card","rounded-4","border","border-light","h-100"],[1,"bg-warning","bg-opacity-10","p-2","rounded-3","me-3","d-flex","align-items-center","justify-content-center",2,"width","42px","height","42px"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-building-factory","text-warning","fs-1"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M4 21c1.147 -4.02 1.983 -8.027 2 -12h6c.017 3.973 .853 7.98 2 12"],["d","M12.5 13h4.5c.025 2.612 .894 5.296 2 8"],["d","M9 5a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1"],["d","M3 21l19 0"],[1,"d-flex","flex-wrap","gap-2"],["class","badge bg-light text-dark rounded-pill px-3 py-2 fs-6 fw-medium d-flex align-items-center",4,"ngFor","ngForOf"],[1,"badge","bg-light","text-dark","rounded-pill","px-3","py-2","fs-6","fw-medium","d-flex","align-items-center"],[1,"bg-success","bg-opacity-10","p-2","rounded-3","me-3","d-flex","align-items-center","justify-content-center",2,"width","42px","height","42px"],[1,"bi","bi-briefcase","fs-1","text-success"]],template:function(i,o){1&i&&e.DNE(0,Be,2,3,"div",0)(1,dt,2,1,"ng-container",1),2&i&&(e.Y8G("ngIf",o.loadingProfile),e.R7$(),e.Y8G("ngIf",!o.loadingProfile))},dependencies:[d.YU,d.Sq,d.bT,R.z,y.D9],styles:[".no-bg[_ngcontent-%COMP%]{mix-blend-mode:multiply;border-radius:10px}.update-label[_ngcontent-%COMP%]{position:absolute;bottom:3%;left:10px}.image-input-wrapper[_ngcontent-%COMP%]{background-size:contain;background-position:center;border-radius:50%;overflow:hidden}.image-input[_ngcontent-%COMP%]{position:relative}.btn-icon[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0}.placeholder-avatar[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:#eef3f7;color:#0d6efd;font-size:2rem;font-weight:600}"]})}return n})();const ft=()=>[];function gt(n,r){1&n&&(e.j41(0,"div",2)(1,"div",3),e.nrm(2,"div",4),e.k0s()())}function ut(n,r){if(1&n&&(e.j41(0,"div",22)(1,"div",23),e.nrm(2,"i",24),e.j41(3,"span"),e.EFF(4,"Company Name"),e.k0s()(),e.j41(5,"div",25),e.EFF(6),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(6),e.JRh(null==t.profile.company?null:t.profile.company.legal_name)}}function _t(n,r){if(1&n&&(e.j41(0,"div",22)(1,"div",23),e.nrm(2,"i",26),e.j41(3,"span"),e.EFF(4,"Website"),e.k0s()(),e.j41(5,"div",27)(6,"a",28),e.EFF(7),e.nrm(8,"i",29),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(6),e.Y8G("href",null!=t.profile.company&&null!=t.profile.company.website&&t.profile.company.website.startsWith("http")?null==t.profile.company?null:t.profile.company.website:"https://"+(null==t.profile.company?null:t.profile.company.website),e.B4B),e.R7$(),e.SpI(" ",null==t.profile.company?null:t.profile.company.website," ")}}function ht(n,r){if(1&n&&(e.j41(0,"div",22)(1,"div",23),e.nrm(2,"i",30),e.j41(3,"span"),e.EFF(4,"Company Phone"),e.k0s()(),e.j41(5,"div",27),e.EFF(6),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(6),e.JRh(null==t.profile.company?null:t.profile.company.company_phone)}}function bt(n,r){if(1&n&&(e.j41(0,"div",22)(1,"div",23),e.nrm(2,"i",31),e.j41(3,"span"),e.EFF(4,"Address"),e.k0s()(),e.j41(5,"div",27),e.EFF(6),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(6),e.JRh(null==t.profile.company?null:t.profile.company.address)}}function vt(n,r){if(1&n&&(e.j41(0,"div",32)(1,"div",23),e.nrm(2,"i",33),e.j41(3,"span"),e.EFF(4,"Business Email"),e.k0s()(),e.j41(5,"div",27),e.EFF(6),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(6),e.JRh(null==t.profile.company?null:t.profile.company.verified_email)}}function Ct(n,r){if(1&n&&(e.j41(0,"div",34)(1,"div",9)(2,"div",10)(3,"span",11),e.nrm(4,"i",35),e.k0s(),e.j41(5,"h3",13),e.EFF(6),e.nI1(7,"translate"),e.k0s()()(),e.j41(8,"div",14)(9,"p",36),e.EFF(10),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(6),e.JRh(e.bMT(7,2,"PROFILE.ABOUT_COMPANY")),e.R7$(4),e.SpI(" ",null==t.profile.company?null:t.profile.company.about_us," ")}}function yt(n,r){if(1&n&&(e.qex(0),e.j41(1,"a",42),e.nrm(2,"img",43),e.k0s(),e.bVm()),2&n){const t=r.$implicit;e.R7$(),e.Y8G("href",(null==t?null:t.link)||"#",e.B4B),e.R7$(),e.Y8G("src","assets/media/svg/social-logos/"+(null==t?null:t.type)+".svg",e.B4B)("alt",null==t?null:t.type)}}function It(n,r){1&n&&(e.j41(0,"div",44),e.nrm(1,"i",45),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"NO_SOCIAL_MEDIA")," "))}function Tt(n,r){if(1&n&&(e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"span",11),e.nrm(4,"i",37),e.k0s(),e.j41(5,"h3",13),e.EFF(6),e.nI1(7,"translate"),e.k0s()()(),e.j41(8,"div",38)(9,"div",39),e.DNE(10,yt,3,3,"ng-container",40)(11,It,4,3,"div",41),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(6),e.JRh(e.bMT(7,3,"PROFILE.SOCIAL_MEDIA")),e.R7$(4),e.Y8G("ngForOf",(null==t.profile||null==t.profile.company?null:t.profile.company.social)||e.lJ4(5,ft)),e.R7$(),e.Y8G("ngIf",!(null!=t.profile&&null!=t.profile.company&&null!=t.profile.company.social&&t.profile.company.social.length))}}function xt(n,r){1&n&&(e.j41(0,"span",54),e.nrm(1,"i",55),e.k0s())}function Ft(n,r){if(1&n&&(e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"span",46),e.nrm(4,"app-keenicon",47),e.k0s(),e.j41(5,"h3",13),e.EFF(6),e.nI1(7,"translate"),e.k0s()()(),e.j41(8,"div",14)(9,"div",48)(10,"div",49),e.DNE(11,xt,2,0,"span",50),e.k0s(),e.j41(12,"div",51)(13,"span",52),e.EFF(14),e.nI1(15,"translate"),e.nI1(16,"translate"),e.k0s(),e.j41(17,"span",53),e.EFF(18),e.nI1(19,"translate"),e.nI1(20,"translate"),e.k0s()()()()()),2&n){const t=e.XpG(2);e.R7$(6),e.JRh(e.bMT(7,6,"VERIFICATION_STATUS")),e.R7$(3),e.Y8G("ngClass",t.profile.company.verified?"bg-success bg-opacity-10":"bg-warning bg-opacity-10"),e.R7$(2),e.Y8G("ngIf",!t.profile.company.verified),e.R7$(2),e.Y8G("ngClass",t.profile.company.verified?"text-success":"text-warning"),e.R7$(),e.SpI(" ",t.profile.company.verified?e.bMT(15,8,"VERIFIED"):e.bMT(16,10,"PENDING_VERIFICATION")," "),e.R7$(4),e.SpI(" ",t.profile.company.verified?e.bMT(19,12,"COMPANY_VERIFIED_MESSAGE"):e.bMT(20,14,"COMPANY_PENDING_MESSAGE")," ")}}function Rt(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.name," ")}}function Et(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.name," ")}}function Pt(n,r){if(1&n&&(e.j41(0,"span",67),e.DNE(1,Rt,2,1,"ng-container",1)(2,Et,2,1,"ng-container",1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf","ar"===t.lang),e.R7$(),e.Y8G("ngIf","en"===t.lang)}}function kt(n,r){if(1&n&&(e.j41(0,"div",56)(1,"div",57)(2,"div",9)(3,"div",10)(4,"span",58),e.qSk(),e.j41(5,"svg",59),e.nrm(6,"path",60)(7,"path",61)(8,"path",62)(9,"path",63)(10,"path",64),e.k0s()(),e.joV(),e.j41(11,"h3",13),e.EFF(12),e.nI1(13,"translate"),e.k0s()()(),e.j41(14,"div",14)(15,"div",65),e.DNE(16,Pt,3,2,"span",66),e.k0s()()()()),2&n){const t=e.XpG(2);e.R7$(12),e.JRh(e.bMT(13,2,"COMPANY_INDUSTRIES")),e.R7$(4),e.Y8G("ngForOf",t.profile.company.industries)}}function St(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.names.ar," ")}}function wt(n,r){if(1&n&&(e.qex(0),e.EFF(1),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.name," ")}}function Nt(n,r){if(1&n&&(e.j41(0,"span",67),e.DNE(1,St,2,1,"ng-container",1)(2,wt,2,1,"ng-container",1),e.k0s()),2&n){const t=r.$implicit,i=e.XpG(3);e.R7$(),e.Y8G("ngIf","ar"===i.lang&&t.names&&t.names.ar),e.R7$(),e.Y8G("ngIf","en"===i.lang||!t.names||!t.names.ar)}}function Ot(n,r){if(1&n&&(e.j41(0,"div",56)(1,"div",57)(2,"div",9)(3,"div",10)(4,"span",46),e.nrm(5,"i",68),e.k0s(),e.j41(6,"h3",13),e.EFF(7),e.nI1(8,"translate"),e.k0s()()(),e.j41(9,"div",14)(10,"div",65),e.DNE(11,Nt,3,2,"span",66),e.k0s()()()()),2&n){const t=e.XpG(2);e.R7$(7),e.JRh(e.bMT(8,2,"COMPANY_CONSULTING_FIELDS")),e.R7$(4),e.Y8G("ngForOf",t.profile.company.consulting_field)}}function Mt(n,r){if(1&n&&(e.qex(0),e.j41(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"div",10)(7,"span",11),e.nrm(8,"i",12),e.k0s(),e.j41(9,"h3",13),e.EFF(10),e.nI1(11,"translate"),e.k0s()()(),e.j41(12,"div",14),e.DNE(13,ut,7,1,"div",15)(14,_t,9,2,"div",15)(15,ht,7,1,"div",15)(16,bt,7,1,"div",15)(17,vt,7,1,"div",16),e.k0s()(),e.DNE(18,Ct,11,4,"div",17),e.k0s(),e.j41(19,"div",18),e.DNE(20,Tt,12,6,"div",19)(21,Ft,21,16,"div",19),e.k0s()(),e.j41(22,"div",20),e.DNE(23,kt,17,4,"div",21)(24,Ot,12,4,"div",21),e.k0s()(),e.bVm()),2&n){const t=e.XpG();e.R7$(10),e.JRh(e.bMT(11,11,"PROFILE.GENERAL_INFO2")),e.R7$(3),e.Y8G("ngIf",null==t.profile.company?null:t.profile.company.legal_name),e.R7$(),e.Y8G("ngIf",null==t.profile.company?null:t.profile.company.website),e.R7$(),e.Y8G("ngIf",null==t.profile.company?null:t.profile.company.company_phone),e.R7$(),e.Y8G("ngIf",null==t.profile.company?null:t.profile.company.address),e.R7$(),e.Y8G("ngIf",null==t.profile.company?null:t.profile.company.verified_email),e.R7$(),e.Y8G("ngIf",null==t.profile.company?null:t.profile.company.about_us),e.R7$(2),e.Y8G("ngIf",null==t.profile||null==t.profile.company?null:t.profile.company.social),e.R7$(),e.Y8G("ngIf",t.profile.company),e.R7$(2),e.Y8G("ngIf",t.profile.company&&t.profile.company.industries&&t.profile.company.industries.length>0),e.R7$(),e.Y8G("ngIf",t.profile.company&&t.profile.company.consulting_field&&t.profile.company.consulting_field.length>0)}}let $t=(()=>{class n extends _.${profilePictureService;getProfileService;scrollAnims;route;profile={};id="";loadingProfile=!0;isMe=!1;lang="en";constructor(t,i,o,s,a){super(t),this.profilePictureService=i,this.getProfileService=o,this.scrollAnims=s,this.route=a,this.id=this.route.snapshot.params.id}ngOnInit(){this.loadProfileData(),this.handleLanguage()}loadProfileData(){this.observeUser(),this.observeParamId(),this.loadProfile()}observeParamId(){this.route.params.subscribe(t=>{t.id&&(this.id=t.id,this.loadProfile())})}observeUser(){this.isMe=!0}loadProfile(){this.loadingProfile=!0,this.getProfileService.getProfile().subscribe(t=>{this.profile=t,this.loadingProfile=!1})}getCompanySocialLinks(){return this.profile&&this.profile.company&&this.profile.company.social&&this.profile.company.social.length?this.profile.company.social:[]}isValidUrl(t){return!!t&&(t.startsWith("http://")||t.startsWith("https://"))}formatUrl(t){return t?this.isValidUrl(t)?t:`https://${t}`:"#"}handleLanguage(){this.lang=this.translate.getSelectedLanguage();const t=this.translate.onLanguageChange().subscribe(i=>{this.lang=i});this.unsubscribe.push(t)}static \u0275fac=function(i){return new(i||n)(e.rXU(e.zZn),e.rXU(j),e.rXU(C.p),e.rXU(W.f),e.rXU(v.nX))};static \u0275cmp=e.VBU({type:n,selectors:[["app-company"]],features:[e.Vt3],decls:2,vars:2,consts:[["class","pt-3",4,"ngIf"],[4,"ngIf"],[1,"pt-3"],[1,"progress",2,"height","4px"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","progress-bar-animated","bg-primary",2,"width","100%"],[1,"container-fluid","p-0"],[1,"row","g-4"],[1,"col-12","col-lg-8"],[1,"card","rounded-4","border","border-light","mb-4"],[1,"card-header","border-0","bg-white","py-3"],[1,"d-flex","align-items-center"],[1,"bg-info","bg-opacity-10","p-2","rounded-3","me-3","d-flex","align-items-center","justify-content-center",2,"width","42px","height","42px"],[1,"bi","bi-building","fs-1","text-info"],[1,"card-title","fs-3","fw-bolder","mb-0"],[1,"card-body","pt-0"],["class","row mb-3 py-2 border-bottom border-light",4,"ngIf"],["class","row mb-0 py-2",4,"ngIf"],["class","card rounded-4 border mb-4",4,"ngIf"],[1,"col-12","col-lg-4"],["class","card rounded-4 border border-light mb-4",4,"ngIf"],[1,"row","g-4","mt-2"],["class","col-12 col-md-6",4,"ngIf"],[1,"row","mb-3","py-2","border-bottom","border-light"],[1,"col-12","col-md-4","text-muted","d-flex","align-items-center"],[1,"bi","bi-person-workspace","fs-4","text-primary","me-2"],[1,"col-12","col-md-8","text-dark","fw-semibold"],[1,"bi","bi-globe","fs-4","text-info","me-2"],[1,"col-12","col-md-8","text-dark"],["target","_blank",1,"text-primary","text-decoration-none","d-flex","align-items-center",3,"href"],[1,"bi","bi-box-arrow-up-right","fs-6","ms-1"],[1,"bi","bi-telephone","fs-4","text-success","me-2"],[1,"bi","bi-geo-alt","fs-4","text-danger","me-2"],[1,"row","mb-0","py-2"],[1,"bi","bi-envelope","fs-4","text-warning","me-2"],[1,"card","rounded-4","border","mb-4"],[1,"bi","bi-file-text","fs-1","text-info"],[1,"text-gray-800","mb-0","p-2"],[1,"bi","bi-share","fs-1","text-info"],[1,"card-body","pt-0","p-4"],[1,"d-flex","flex-wrap","align-items-center","justify-content-center"],[4,"ngFor","ngForOf"],["class","text-muted d-flex align-items-center",4,"ngIf"],["target","_blank",1,"btn","btn-light","btn-icon","btn-lg","m-2",2,"z-index","1","position","relative",3,"href"],["width","36","height","36",1,"p-2",3,"src","alt"],[1,"text-muted","d-flex","align-items-center"],[1,"bi","bi-info-circle","fs-2","me-2","text-info"],[1,"bg-success","bg-opacity-10","p-2","rounded-3","me-3","d-flex","align-items-center","justify-content-center",2,"width","42px","height","42px"],["name","check",1,"fs-1","text-success"],[1,"d-flex","align-items-center","p-3","rounded-4",3,"ngClass"],[1,"symbol","symbol-45px","me-3"],["class","symbol-label bg-warning d-flex align-items-center justify-content-center","style","width: 45px; height: 45px;",4,"ngIf"],[1,"d-flex","flex-column"],[1,"fw-bold","fs-5",3,"ngClass"],[1,"text-muted","fs-6"],[1,"symbol-label","bg-warning","d-flex","align-items-center","justify-content-center",2,"width","45px","height","45px"],[1,"bi","bi-clock","fs-1","text-white"],[1,"col-12","col-md-6"],[1,"card","rounded-4","border","border-light","h-100"],[1,"bg-warning","bg-opacity-10","p-2","rounded-3","me-3","d-flex","align-items-center","justify-content-center",2,"width","42px","height","42px"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icons-tabler-outline","icon-tabler-building-factory","text-warning","fs-1"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M4 21c1.147 -4.02 1.983 -8.027 2 -12h6c.017 3.973 .853 7.98 2 12"],["d","M12.5 13h4.5c.025 2.612 .894 5.296 2 8"],["d","M9 5a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1a2.4 2.4 0 0 0 2 1a2.4 2.4 0 0 0 2 -1a2.4 2.4 0 0 1 2 -1a2.4 2.4 0 0 1 2 1"],["d","M3 21l19 0"],[1,"d-flex","flex-wrap","gap-2"],["class","badge bg-light text-dark rounded-pill px-3 py-2 fs-6 fw-medium d-flex align-items-center",4,"ngFor","ngForOf"],[1,"badge","bg-light","text-dark","rounded-pill","px-3","py-2","fs-6","fw-medium","d-flex","align-items-center"],[1,"bi","bi-briefcase","fs-1","text-success"]],template:function(i,o){1&i&&e.DNE(0,gt,3,0,"div",0)(1,Mt,25,13,"ng-container",1),2&i&&(e.Y8G("ngIf",o.loadingProfile),e.R7$(),e.Y8G("ngIf",!o.loadingProfile&&o.profile))},dependencies:[d.YU,d.Sq,d.bT,X.w,y.D9],styles:[".card[_ngcontent-%COMP%]{box-shadow:0 .5rem 1.5rem #0000000d;transition:all .3s ease}.btn-light.btn-icon[_ngcontent-%COMP%]:hover{background-color:#f1f1f1;transform:translateY(-3px);box-shadow:0 .5rem 1rem #0000001a}.badge.bg-light[_ngcontent-%COMP%]{transition:all .2s ease}.badge.bg-light[_ngcontent-%COMP%]:hover{background-color:#e9e9e9!important;box-shadow:0 .25rem .5rem #0000000d}"]})}return n})();var z=c(7192),q=c(4412),Z=c(8810),x=c(6354),b=c(9437),F=c(980),K=c(779);let N=(()=>{class n{http;translationService;postProfileUrl="https://api.foresighta.co/api/account/profile";insighterSocialUrl="https://api.foresighta.co/api/insighter/social";companySocialUrl="https://api.foresighta.co/api/company/social";deleteCertificateUrl="https://api.foresighta.co/api/account/profile/certification";updateCompanyInfoUrl="https://api.foresighta.co/api/account/profile/company/info";deleteCompanyCertificateUrl="https://api.foresighta.co/api/account/profile/company/certification";isLoadingSubject=new q.t(!1);isLoading$=this.isLoadingSubject.asObservable();currentLang="en";constructor(t,i){this.http=t,this.translationService=i,this.currentLang=this.translationService.getSelectedLanguage(),this.translationService.onLanguageChange().subscribe(o=>{this.currentLang=o||"en"})}setLoading(t){this.isLoadingSubject.next(t)}handleError(t){return(0,Z.$)(t)}postProfile(t){const i=new g.Lr({Accept:"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.post(this.postProfileUrl,t,{headers:i}).pipe((0,x.T)(o=>o),(0,b.W)(o=>this.handleError(o)),(0,F.j)(()=>this.setLoading(!1)))}addInsighterSocial(t){const i=new g.Lr({Accept:"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.post(this.insighterSocialUrl,{social:t},{headers:i}).pipe((0,x.T)(o=>o),(0,b.W)(o=>this.handleError(o)),(0,F.j)(()=>this.setLoading(!1)))}addCompanySocial(t){const i=new g.Lr({Accept:"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.post(this.companySocialUrl,{social:t},{headers:i}).pipe((0,x.T)(o=>o),(0,b.W)(o=>this.handleError(o)),(0,F.j)(()=>this.setLoading(!1)))}updateCompanyInfo(t){const i=new g.Lr({"Accept-Language":this.currentLang});return this.setLoading(!0),this.http.post(this.updateCompanyInfoUrl,t,{headers:i}).pipe((0,x.T)(o=>o),(0,b.W)(o=>this.handleError(o)),(0,F.j)(()=>this.setLoading(!1)))}deleteCertificate(t){const i=new g.Lr({Accept:"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.delete(`${this.deleteCertificateUrl}/${t}`,{headers:i}).pipe((0,x.T)(o=>o),(0,b.W)(o=>this.handleError(o)),(0,F.j)(()=>this.setLoading(!1)))}deleteCompanyCertificate(t){const i=new g.Lr({Accept:"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.delete(`${this.deleteCompanyCertificateUrl}/${t}`,{headers:i}).pipe((0,x.T)(o=>o),(0,b.W)(o=>this.handleError(o)),(0,F.j)(()=>this.setLoading(!1)))}uploadCertificate(t,i){const o=new FormData;o.append("certification[0][type]",t),o.append("certification[0][file]",i);const s=new g.Lr({Accept:"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.post("https://api.foresighta.co/api/account/profile/certification",o,{headers:s}).pipe((0,x.T)(a=>a),(0,b.W)(a=>this.handleError(a)),(0,F.j)(()=>this.setLoading(!1)))}updateCompanyCertification(t,i){const o=new FormData;o.append("certification[0][type]",t),o.append("certification[0][file]",i);const s=new g.Lr({Accept:"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.post("https://api.foresighta.co/api/account/profile/company/certification",o,{headers:s}).pipe((0,x.T)(a=>a),(0,b.W)(a=>this.handleError(a)),(0,F.j)(()=>this.setLoading(!1)))}static \u0275fac=function(i){return new(i||n)(e.KVO(g.Qq),e.KVO(K.L))};static \u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var p=c(9417),O=c(8833),G=c(6781);const Q=()=>({width:"450px"}),jt=()=>({width:"100%"}),Gt=()=>({height:"4px"});function At(n,r){1&n&&e.nrm(0,"p-progressBar",12),2&n&&e.Aen(e.lJ4(2,Gt))}function Dt(n,r){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"MANAGER_CERTIFICATES"),""))}function Lt(n,r){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"MY_CERTIFICATES"),""))}function Yt(n,r){if(1&n&&(e.j41(0,"span",19),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.JRh(t.profile.certifications.length)}}function Ut(n,r){1&n&&(e.qex(0),e.nrm(1,"i",22),e.EFF(2),e.nI1(3,"translate"),e.bVm()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"ADD_MANAGER_CERTIFICATE"),""))}function Vt(n,r){1&n&&(e.qex(0),e.nrm(1,"i",22),e.EFF(2),e.nI1(3,"translate"),e.bVm()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"ADD_CERTIFICATE"),""))}function Xt(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",20)(1,"button",21),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showAddCertDialog())}),e.DNE(2,Ut,4,3,"ng-container",1)(3,Vt,4,3,"ng-container",1),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("ngIf",t.profile&&t.profile.roles&&t.profile.roles.includes("company")),e.R7$(),e.Y8G("ngIf",!t.profile||!t.profile.roles||!t.profile.roles.includes("company"))}}function Bt(n,r){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"NO_MANAGER_CERTIFICATES")))}function Jt(n,r){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"NO_CERTIFICATES")))}function Ht(n,r){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"ADD_MANAGER_CERTIFICATE_PROMPT")))}function Wt(n,r){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"ADD_CERTIFICATE_PROMPT")))}function zt(n,r){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"ADD_MANAGER_CERTIFICATE")))}function qt(n,r){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,"ADD_CERTIFICATE")))}function Zt(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",23),e.nrm(1,"img",24),e.j41(2,"h3",25),e.DNE(3,Bt,3,3,"ng-container",1)(4,Jt,3,3,"ng-container",1),e.k0s(),e.j41(5,"p",26),e.DNE(6,Ht,3,3,"ng-container",1)(7,Wt,3,3,"ng-container",1),e.k0s(),e.j41(8,"button",27),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showAddCertDialog())}),e.nrm(9,"i",28),e.DNE(10,zt,3,3,"ng-container",1)(11,qt,3,3,"ng-container",1),e.k0s()()}if(2&n){const t=e.XpG(2);e.R7$(3),e.Y8G("ngIf",t.profile&&t.profile.roles&&t.profile.roles.includes("company")),e.R7$(),e.Y8G("ngIf",!t.profile||!t.profile.roles||!t.profile.roles.includes("company")),e.R7$(2),e.Y8G("ngIf",t.profile&&t.profile.roles&&t.profile.roles.includes("company")),e.R7$(),e.Y8G("ngIf",!t.profile||!t.profile.roles||!t.profile.roles.includes("company")),e.R7$(3),e.Y8G("ngIf",t.profile&&t.profile.roles&&t.profile.roles.includes("company")),e.R7$(),e.Y8G("ngIf",!t.profile||!t.profile.roles||!t.profile.roles.includes("company"))}}function Kt(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",31)(1,"div",32)(2,"div",33)(3,"a",34)(4,"div",35),e.nrm(5,"img",36),e.k0s(),e.j41(6,"div",37),e.EFF(7),e.k0s()(),e.j41(8,"button",38),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG(3);return e.Njj(s.confirmDelete(o))}),e.nrm(9,"i",39),e.EFF(10),e.nI1(11,"translate"),e.k0s()()()()}if(2&n){const t=r.$implicit,i=e.XpG(3);e.R7$(3),e.Y8G("href",t.url,e.B4B),e.R7$(2),e.Y8G("src",i.getFileIcon(t.url),e.B4B),e.R7$(2),e.SpI(" ",i.gerCertName(t.type)," "),e.R7$(3),e.SpI(" ",e.bMT(11,4,"COMMON.DELETE")," ")}}function Qt(n,r){if(1&n&&(e.j41(0,"div",29),e.DNE(1,Kt,12,6,"div",30),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.profile.certifications)}}function en(n,r){if(1&n&&(e.qex(0),e.j41(1,"div",13)(2,"h3",14),e.DNE(3,Dt,3,3,"ng-container",1)(4,Lt,3,3,"ng-container",1)(5,Yt,2,1,"span",15),e.k0s(),e.DNE(6,Xt,4,2,"div",16),e.k0s(),e.DNE(7,Zt,12,6,"div",17)(8,Qt,2,1,"div",18),e.bVm()),2&n){const t=e.XpG();e.R7$(3),e.Y8G("ngIf",t.profile&&t.profile.roles&&t.profile.roles.includes("company")),e.R7$(),e.Y8G("ngIf",!t.profile||!t.profile.roles||!t.profile.roles.includes("company")),e.R7$(),e.Y8G("ngIf",t.profile&&t.profile.certifications),e.R7$(),e.Y8G("ngIf",t.profile&&t.profile.certifications&&t.profile.certifications.length>0),e.R7$(),e.Y8G("ngIf",t.profile&&t.profile.certifications&&0===t.profile.certifications.length&&!t.isLoadingDocumentTypes),e.R7$(),e.Y8G("ngIf",t.profile&&t.profile.certifications&&t.profile.certifications.length>0&&!t.isLoadingDocumentTypes)}}function tn(n,r){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"COMMON.UPLOAD")," "))}function nn(n,r){1&n&&(e.qex(0),e.nrm(1,"span",42),e.EFF(2),e.nI1(3,"translate"),e.bVm()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"COMMON.UPLOADING")," "))}function on(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",40),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.displayAddCertDialog=!1)}),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"button",41),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.uploadCertificate())}),e.DNE(4,tn,3,3,"ng-container",1)(5,nn,4,3,"ng-container",1),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("disabled",t.isUploading),e.R7$(),e.SpI(" ",e.bMT(2,5,"COMMON.CANCEL")," "),e.R7$(2),e.Y8G("disabled",!t.selectedDocType||!t.selectedFile||t.isUploading),e.R7$(),e.Y8G("ngIf",!t.isUploading),e.R7$(),e.Y8G("ngIf",t.isUploading)}}function rn(n,r){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"COMMON.DELETE")," "))}function sn(n,r){1&n&&(e.qex(0),e.nrm(1,"span",42),e.EFF(2),e.nI1(3,"translate"),e.bVm()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"COMMON.DELETING")," "))}function an(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",40),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.displayDeleteDialog=!1)}),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"button",43),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.deleteCertificate())}),e.DNE(4,rn,3,3,"ng-container",1)(5,sn,4,3,"ng-container",1),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("disabled",t.isDeleting),e.R7$(),e.SpI(" ",e.bMT(2,5,"COMMON.CANCEL")," "),e.R7$(2),e.Y8G("disabled",t.isDeleting),e.R7$(),e.Y8G("ngIf",!t.isDeleting),e.R7$(),e.Y8G("ngIf",t.isDeleting)}}let ln=(()=>{class n extends _.${documentsService;_profilePost;getProfileService;profile;lang="en";loadingProfile=!1;documentTypes;isLoadingDocumentTypes=!1;displayAddCertDialog=!1;displayDeleteDialog=!1;selectedDocType;selectedFile=null;isUploading=!1;isDeleting=!1;selectedCertificate=null;constructor(t,i,o,s){super(i),this.documentsService=t,this._profilePost=o,this.getProfileService=s}ngOnInit(){this.loadDocList(),this.getProfile()}getProfile(){this.loadingProfile=!0;const t=this.getProfileService.getProfile().subscribe({next:i=>{this.profile=i,this.loadingProfile=!1},error:()=>{this.loadingProfile=!1}});this.unsubscribe.push(t)}loadDocList(){const t=this.documentsService.getDocumentsTypes().subscribe({next:i=>{this.documentTypes=i,this.isLoadingDocumentTypes=!1},error:()=>{this.isLoadingDocumentTypes=!1}});this.unsubscribe.push(t)}getFileIcon(t){return t?`./assets/media/svg/files/${t.split(".").pop()?.toLowerCase()}.svg`:"./assets/media/svg/files/default.svg"}gerCertName(t){if(!this.documentTypes||0===this.documentTypes.length)return"Other";const i=this.documentTypes.find(o=>o.id===t);return i?i.name:"Other"}showAddCertDialog(){this.displayAddCertDialog=!0,this.selectedDocType="",this.selectedFile=null,this.isUploading=!1}onFileSelect(t){if(t.target.files&&t.target.files.length>0){const i=t.target.files[0];["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/png"].includes(i.type)?this.selectedFile=i:(this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"Error","ar"===this.lang?"\u0646\u0648\u0639 \u0627\u0644\u0645\u0644\u0641 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d. \u064a\u0631\u062c\u0649 \u0631\u0641\u0639 \u0645\u0644\u0641\u0627\u062a PDF \u0623\u0648 DOC \u0623\u0648 DOCX \u0623\u0648 JPG \u0623\u0648 PNG \u0641\u0642\u0637.":"Invalid file type. Please upload PDF, DOC, DOCX, JPG or PNG files only."),t.target.value="")}}uploadCertificate(){if(!this.selectedDocType||!this.selectedFile)return;this.isUploading=!0;const t=this._profilePost.uploadCertificate(this.selectedDocType,this.selectedFile).subscribe({next:()=>{this.showSuccess("Success","Certificate uploaded successfully"),this.displayAddCertDialog=!1,this.getProfileService.clearProfile(),this.getProfile()},error:i=>{if(i.error&&i.error.errors){const o=i.error.errors;for(const s in o)o.hasOwnProperty(s)&&this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",o[s].join(", "))}else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred","ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"Failed to upload certificate");this.isUploading=!1},complete:()=>{this.isUploading=!1}});this.unsubscribe.push(t)}confirmDelete(t){this.selectedCertificate=t,this.displayDeleteDialog=!0}deleteCertificate(){if(!this.selectedCertificate)return;this.isDeleting=!0;const t=this._profilePost.deleteCertificate(this.selectedCertificate.id).subscribe({next:()=>{this.showSuccess("Success","Certificate deleted successfully"),this.displayDeleteDialog=!1,this.getProfileService.clearProfile(),this.getProfile()},error:()=>{this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"Error","ar"===this.lang?"\u0641\u0634\u0644 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0634\u0647\u0627\u062f\u0629":"Failed to delete certificate")},complete:()=>{this.isDeleting=!1}});this.unsubscribe.push(t)}static \u0275fac=function(i){return new(i||n)(e.rXU(z.Q),e.rXU(e.zZn),e.rXU(N),e.rXU(C.p))};static \u0275cmp=e.VBU({type:n,selectors:[["app-certificates"]],features:[e.Vt3],decls:27,vars:42,consts:[["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],[3,"visibleChange","onHide","visible","header","modal","draggable","resizable"],[1,"p-fluid"],[1,"field","mb-4"],["for","documentType",1,"block","mb-2"],["id","documentType","optionLabel","name","optionValue","id","appendTo","body",1,"w-full",3,"ngModelChange","options","ngModel","placeholder"],["for","certificate",1,"block","mb-2"],["type","file","accept",".pdf,.doc,.docx,.jpg,.jpeg,.png",1,"form-control",3,"change"],[1,"text-muted"],["pTemplate","footer"],[3,"visibleChange","visible","header","modal","draggable","resizable"],["mode","indeterminate"],[1,"d-flex","flex-wrap","flex-stack","mb-6"],[1,"fw-bold","my-2"],["class","fs-6 text-gray-500 fw-semibold ms-1",4,"ngIf"],["class","d-flex my-2",4,"ngIf"],["class","text-center py-10 my-5",4,"ngIf"],["class","row g-6 g-xl-9 mb-6 mb-xl-9",4,"ngIf"],[1,"fs-6","text-gray-500","fw-semibold","ms-1"],[1,"d-flex","my-2"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"text-center","py-10","my-5"],["src","assets/media/illustrations/Add_certificate.svg","alt","Add Certificate",1,"mw-100","mh-300px","mb-5"],[1,"fs-2","fw-bold","mb-3"],[1,"text-gray-500","mb-5"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus","me-2"],[1,"row","g-6","g-xl-9","mb-6","mb-xl-9"],["class","col-md-6 col-lg-4 col-xl-3",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-4","col-xl-3"],[1,"card","h-100"],[1,"card-body","d-flex","justify-content-center","text-center","flex-column","p-8"],["target","_blank",1,"text-gray-800","text-hover-primary","d-flex","flex-column",3,"href"],[1,"symbol","symbol-60px","mb-5"],["alt","icon",3,"src"],[1,"fs-7","badge-outline-gray","fw-bold","mb-2"],[1,"btn","btn-sm","btn-light-danger","mt-3",3,"click"],[1,"fas","fa-trash"],[1,"btn","btn-secondary","me-2",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"],[1,"btn","btn-danger",3,"click","disabled"]],template:function(i,o){1&i&&(e.DNE(0,At,1,3,"p-progressBar",0)(1,en,9,6,"ng-container",1),e.j41(2,"p-dialog",2),e.nI1(3,"translate"),e.mxI("visibleChange",function(a){return e.DH7(o.displayAddCertDialog,a)||(o.displayAddCertDialog=a),a}),e.bIt("onHide",function(){return o.isUploading=!1}),e.j41(4,"div",3)(5,"div",4)(6,"label",5),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"p-dropdown",6),e.nI1(10,"translate"),e.mxI("ngModelChange",function(a){return e.DH7(o.selectedDocType,a)||(o.selectedDocType=a),a}),e.k0s()(),e.j41(11,"div",4)(12,"label",7),e.EFF(13),e.nI1(14,"translate"),e.k0s(),e.j41(15,"input",8),e.bIt("change",function(a){return o.onFileSelect(a)}),e.k0s(),e.j41(16,"small",9),e.EFF(17),e.nI1(18,"translate"),e.k0s()()(),e.DNE(19,on,6,7,"ng-template",10),e.k0s(),e.j41(20,"p-dialog",11),e.nI1(21,"translate"),e.mxI("visibleChange",function(a){return e.DH7(o.displayDeleteDialog,a)||(o.displayDeleteDialog=a),a}),e.j41(22,"div",3)(23,"p"),e.EFF(24),e.nI1(25,"translate"),e.k0s()(),e.DNE(26,an,6,7,"ng-template",10),e.k0s()),2&i&&(e.Y8G("ngIf",o.loadingProfile),e.R7$(),e.Y8G("ngIf",!o.loadingProfile),e.R7$(),e.Aen(e.lJ4(39,Q)),e.R50("visible",o.displayAddCertDialog),e.Y8G("header",e.bMT(3,25,"PROFILE.ADD_CERTIFICATE"))("modal",!0)("draggable",!1)("resizable",!1),e.R7$(5),e.JRh(e.bMT(8,27,"PROFILE.CERTIFICATE_TYPE")),e.R7$(2),e.Aen(e.lJ4(40,jt)),e.Y8G("options",o.documentTypes),e.R50("ngModel",o.selectedDocType),e.Y8G("placeholder",e.bMT(10,29,"PROFILE.SELECT_CERTIFICATE_TYPE")),e.R7$(4),e.JRh(e.bMT(14,31,"PROFILE.CERTIFICATE_FILE")),e.R7$(4),e.JRh(e.bMT(18,33,"PROFILE.SUPPORTED_FORMATS")),e.R7$(3),e.Aen(e.lJ4(41,Q)),e.R50("visible",o.displayDeleteDialog),e.Y8G("header",e.bMT(21,35,"PROFILE.DELETE_CERTIFICATE"))("modal",!0)("draggable",!1)("resizable",!1),e.R7$(4),e.JRh(e.bMT(25,37,"PROFILE.DELETE_CERTIFICATE_CONFIRMATION")))},dependencies:[d.Sq,d.bT,p.BC,p.vS,h.Ei,R.z,O.ms,G.l,y.D9]})}return n})();const ee=()=>({width:"450px"}),cn=()=>({width:"100%"}),pn=()=>({height:"4px"});function dn(n,r){1&n&&e.nrm(0,"p-progressBar",12),2&n&&e.Aen(e.lJ4(2,pn))}function mn(n,r){if(1&n&&(e.j41(0,"span",19),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.JRh(t.profile.company.certifications.length)}}function fn(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",20)(1,"button",21),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showAddCompanyCertDialog())}),e.nrm(2,"i",22),e.EFF(3),e.nI1(4,"translate"),e.k0s()()}2&n&&(e.R7$(3),e.SpI(" ",e.bMT(4,1,"PROFILE.ADD_COMPANY_CERTIFICATE")," "))}function gn(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",23),e.nrm(1,"img",24),e.j41(2,"h3",25),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"p",26),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"button",27),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.showAddCompanyCertDialog())}),e.nrm(9,"i",28),e.EFF(10),e.nI1(11,"translate"),e.k0s()()}2&n&&(e.R7$(3),e.JRh(e.bMT(4,3,"NO_COMPANY_CERTIFICATES")),e.R7$(3),e.JRh(e.bMT(7,5,"ADD_COMPANY_CERTIFICATE_PROMPT")),e.R7$(4),e.SpI(" ",e.bMT(11,7,"ADD_COMPANY_CERTIFICATE")," "))}function un(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",31)(1,"div",32)(2,"div",33)(3,"a",34)(4,"div",35),e.nrm(5,"img",36),e.k0s(),e.j41(6,"div",37),e.EFF(7),e.k0s()(),e.j41(8,"button",38),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG(3);return e.Njj(s.confirmCompanyDelete(o))}),e.nrm(9,"i",39),e.EFF(10),e.nI1(11,"translate"),e.k0s()()()()}if(2&n){const t=r.$implicit,i=e.XpG(3);e.R7$(3),e.Y8G("href",t.url,e.B4B),e.R7$(2),e.Y8G("src",i.getFileIcon(t.url),e.B4B),e.R7$(2),e.SpI(" ",i.gerCertName(t.type)," "),e.R7$(3),e.SpI(" ",e.bMT(11,4,"COMMON.DELETE")," ")}}function _n(n,r){if(1&n&&(e.j41(0,"div",29),e.DNE(1,un,12,6,"div",30),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.profile.company.certifications)}}function hn(n,r){if(1&n&&(e.qex(0),e.j41(1,"div",13)(2,"h3",14),e.EFF(3),e.nI1(4,"translate"),e.DNE(5,mn,2,1,"span",15),e.k0s(),e.DNE(6,fn,5,3,"div",16),e.k0s(),e.DNE(7,gn,12,9,"div",17)(8,_n,2,1,"div",18),e.bVm()),2&n){const t=e.XpG();e.R7$(3),e.SpI(" ",e.bMT(4,5,"PROFILE.COMPANY_CERTIFICATES")," "),e.R7$(2),e.Y8G("ngIf",t.profile.company&&t.profile.company.certifications),e.R7$(),e.Y8G("ngIf",t.profile.company&&t.profile.company.certifications&&t.profile.company.certifications.length>0),e.R7$(),e.Y8G("ngIf",t.profile.company&&t.profile.company.certifications&&0===t.profile.company.certifications.length&&!t.isLoadingDocumentTypes),e.R7$(),e.Y8G("ngIf",t.profile.company&&t.profile.company.certifications&&t.profile.company.certifications.length>0&&!t.isLoadingDocumentTypes)}}function bn(n,r){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"COMMON.UPLOAD")," "))}function vn(n,r){1&n&&(e.qex(0),e.nrm(1,"span",42),e.EFF(2),e.nI1(3,"translate"),e.bVm()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"COMMON.UPLOADING")," "))}function Cn(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",40),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.displayAddCompanyCertDialog=!1)}),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"button",41),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.uploadCompanyCertificate())}),e.DNE(4,bn,3,3,"ng-container",1)(5,vn,4,3,"ng-container",1),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("disabled",t.isUploadingCompany),e.R7$(),e.SpI(" ",e.bMT(2,5,"COMMON.CANCEL")," "),e.R7$(2),e.Y8G("disabled",!t.selectedCompanyDocType||!t.selectedCompanyFile||t.isUploadingCompany),e.R7$(),e.Y8G("ngIf",!t.isUploadingCompany),e.R7$(),e.Y8G("ngIf",t.isUploadingCompany)}}function yn(n,r){1&n&&(e.qex(0),e.EFF(1),e.nI1(2,"translate"),e.bVm()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"COMMON.DELETE")," "))}function In(n,r){1&n&&(e.qex(0),e.nrm(1,"span",42),e.EFF(2),e.nI1(3,"translate"),e.bVm()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"COMMON.DELETING")," "))}function Tn(n,r){if(1&n){const t=e.RV6();e.j41(0,"button",40),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.displayCompanyDeleteDialog=!1)}),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"button",43),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.deleteCompanyCertificate())}),e.DNE(4,yn,3,3,"ng-container",1)(5,In,4,3,"ng-container",1),e.k0s()}if(2&n){const t=e.XpG();e.Y8G("disabled",t.isDeletingCompany),e.R7$(),e.SpI(" ",e.bMT(2,5,"COMMON.CANCEL")," "),e.R7$(2),e.Y8G("disabled",t.isDeletingCompany),e.R7$(),e.Y8G("ngIf",!t.isDeletingCompany),e.R7$(),e.Y8G("ngIf",t.isDeletingCompany)}}let xn=(()=>{class n extends _.${documentsService;_profilePost;getProfileService;messageService;profile;lang="en";loadingProfile=!1;documentTypes;isLoadingDocumentTypes=!1;displayAddCompanyCertDialog=!1;displayCompanyDeleteDialog=!1;selectedCompanyDocType;selectedCompanyFile=null;isUploadingCompany=!1;isDeletingCompany=!1;selectedCompanyCertificate=null;constructor(t,i,o,s,a){super(i),this.documentsService=t,this._profilePost=o,this.getProfileService=s,this.messageService=a}ngOnInit(){this.loadDocList(),this.getProfile()}getProfile(){this.loadingProfile=!0;const t=this.getProfileService.getProfile().subscribe({next:i=>{this.profile=i,this.loadingProfile=!1},error:i=>{this.loadingProfile=!1}});this.unsubscribe.push(t)}loadDocList(){const t=this.documentsService.getDocumentsTypes().subscribe({next:i=>{this.documentTypes=i,this.isLoadingDocumentTypes=!1},error:i=>{this.isLoadingDocumentTypes=!1}});this.unsubscribe.push(t)}getFileIcon(t){return t?`./assets/media/svg/files/${t.split(".").pop()?.toLowerCase()}.svg`:"./assets/media/svg/files/default.svg"}gerCertName(t){if(!this.documentTypes||0===this.documentTypes.length)return"Other";const i=this.documentTypes.find(o=>o.id===t);return i?i.name:"Other"}showAddCompanyCertDialog(){this.displayAddCompanyCertDialog=!0,this.selectedCompanyDocType="",this.selectedCompanyFile=null,this.isUploadingCompany=!1}onCompanyFileSelect(t){if(t.target.files&&t.target.files.length>0){const i=t.target.files[0];["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","image/jpeg","image/png"].includes(i.type)?this.selectedCompanyFile=i:(this.messageService.add({severity:"error",summary:"Error",detail:"Invalid file type. Please upload PDF, DOC, DOCX, JPG or PNG files only."}),t.target.value="")}}uploadCompanyCertificate(){if(!this.selectedCompanyDocType||!this.selectedCompanyFile)return;this.isUploadingCompany=!0;const t=this._profilePost.updateCompanyCertification(this.selectedCompanyDocType,this.selectedCompanyFile).subscribe({next:i=>{this.showSuccess("ar"===this.lang?"\u0646\u062c\u062d":"Success","ar"===this.lang?"\u062a\u0645 \u0631\u0641\u0639 \u0627\u0644\u0634\u0647\u0627\u062f\u0629 \u0628\u0646\u062c\u0627\u062d":"Company certificate uploaded successfully"),this.displayAddCompanyCertDialog=!1,this.getProfileService.clearProfile(),this.getProfile()},error:i=>{this.handleServerErrors(i),this.isUploadingCompany=!1},complete:()=>{this.isUploadingCompany=!1}});this.unsubscribe.push(t)}handleServerErrors(t){if(t.error&&t.error.errors){const i=t.error.errors;for(const o in i)i.hasOwnProperty(o)&&this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",i[o].join(", "))}else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred","ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An unexpected error occurred.")}confirmCompanyDelete(t){this.selectedCompanyCertificate=t,this.displayCompanyDeleteDialog=!0}deleteCompanyCertificate(){if(!this.selectedCompanyCertificate)return;this.isDeletingCompany=!0;const t=this._profilePost.deleteCompanyCertificate(this.selectedCompanyCertificate.id).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Company certificate deleted successfully"}),this.displayCompanyDeleteDialog=!1,this.getProfileService.clearProfile(),this.getProfile()},error:i=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to delete company certificate"})},complete:()=>{this.isDeletingCompany=!1}});this.unsubscribe.push(t)}static \u0275fac=function(i){return new(i||n)(e.rXU(z.Q),e.rXU(e.zZn),e.rXU(N),e.rXU(C.p),e.rXU(h.bg))};static \u0275cmp=e.VBU({type:n,selectors:[["app-company-certificates"]],features:[e.Vt3],decls:27,vars:42,consts:[["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],[3,"visibleChange","onHide","visible","header","modal","draggable","resizable"],[1,"p-fluid"],[1,"field","mb-4"],["for","companyDocumentType",1,"block","mb-2"],["id","companyDocumentType","optionLabel","name","optionValue","id","appendTo","body",1,"w-full",3,"ngModelChange","options","ngModel","placeholder"],["for","companyCertificate",1,"block","mb-2"],["type","file","accept",".pdf,.doc,.docx,.jpg,.jpeg,.png",1,"form-control",3,"change"],[1,"text-muted"],["pTemplate","footer"],[3,"visibleChange","visible","header","modal","draggable","resizable"],["mode","indeterminate"],[1,"d-flex","flex-wrap","flex-stack","mb-6"],[1,"fw-bold","my-2"],["class","fs-6 text-gray-500 fw-semibold ms-1",4,"ngIf"],["class","d-flex my-2",4,"ngIf"],["class","text-center py-10 my-5",4,"ngIf"],["class","row g-6 g-xl-9 mb-6 mb-xl-9",4,"ngIf"],[1,"fs-6","text-gray-500","fw-semibold","ms-1"],[1,"d-flex","my-2"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"text-center","py-10","my-5"],["src","assets/media/illustrations/Add_certificate.svg","alt","Add Company Certificate",1,"mw-100","mh-300px","mb-5"],[1,"fs-2","fw-bold","mb-3"],[1,"text-gray-500","mb-5"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus","me-2"],[1,"row","g-6","g-xl-9","mb-6","mb-xl-9"],["class","col-md-6 col-lg-4 col-xl-3",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-4","col-xl-3"],[1,"card","h-100"],[1,"card-body","d-flex","justify-content-center","text-center","flex-column","p-8"],["target","_blank",1,"text-gray-800","text-hover-primary","d-flex","flex-column",3,"href"],[1,"symbol","symbol-60px","mb-5"],["alt","icon",3,"src"],[1,"fs-7","badge-outline-gray","fw-bold","mb-2"],[1,"btn","btn-sm","btn-light-danger","mt-3",3,"click"],[1,"fas","fa-trash"],[1,"btn","btn-secondary","me-2",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-1"],[1,"btn","btn-danger",3,"click","disabled"]],template:function(i,o){1&i&&(e.DNE(0,dn,1,3,"p-progressBar",0)(1,hn,9,7,"ng-container",1),e.j41(2,"p-dialog",2),e.nI1(3,"translate"),e.mxI("visibleChange",function(a){return e.DH7(o.displayAddCompanyCertDialog,a)||(o.displayAddCompanyCertDialog=a),a}),e.bIt("onHide",function(){return o.isUploadingCompany=!1}),e.j41(4,"div",3)(5,"div",4)(6,"label",5),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"p-dropdown",6),e.nI1(10,"translate"),e.mxI("ngModelChange",function(a){return e.DH7(o.selectedCompanyDocType,a)||(o.selectedCompanyDocType=a),a}),e.k0s()(),e.j41(11,"div",4)(12,"label",7),e.EFF(13),e.nI1(14,"translate"),e.k0s(),e.j41(15,"input",8),e.bIt("change",function(a){return o.onCompanyFileSelect(a)}),e.k0s(),e.j41(16,"small",9),e.EFF(17),e.nI1(18,"translate"),e.k0s()()(),e.DNE(19,Cn,6,7,"ng-template",10),e.k0s(),e.j41(20,"p-dialog",11),e.nI1(21,"translate"),e.mxI("visibleChange",function(a){return e.DH7(o.displayCompanyDeleteDialog,a)||(o.displayCompanyDeleteDialog=a),a}),e.j41(22,"div",3)(23,"p"),e.EFF(24),e.nI1(25,"translate"),e.k0s()(),e.DNE(26,Tn,6,7,"ng-template",10),e.k0s()),2&i&&(e.Y8G("ngIf",o.loadingProfile),e.R7$(),e.Y8G("ngIf",!o.loadingProfile&&o.profile&&o.profile.roles&&o.profile.roles.includes("company")&&o.profile.company),e.R7$(),e.Aen(e.lJ4(39,ee)),e.R50("visible",o.displayAddCompanyCertDialog),e.Y8G("header",e.bMT(3,25,"PROFILE.ADD_COMPANY_CERTIFICATE"))("modal",!0)("draggable",!1)("resizable",!1),e.R7$(5),e.JRh(e.bMT(8,27,"PROFILE.CERTIFICATE_TYPE")),e.R7$(2),e.Aen(e.lJ4(40,cn)),e.Y8G("options",o.documentTypes),e.R50("ngModel",o.selectedCompanyDocType),e.Y8G("placeholder",e.bMT(10,29,"PROFILE.SELECT_CERTIFICATE_TYPE")),e.R7$(4),e.JRh(e.bMT(14,31,"PROFILE.CERTIFICATE_FILE")),e.R7$(4),e.JRh(e.bMT(18,33,"PROFILE.SUPPORTED_FORMATS")),e.R7$(3),e.Aen(e.lJ4(41,ee)),e.R50("visible",o.displayCompanyDeleteDialog),e.Y8G("header",e.bMT(21,35,"PROFILE.DELETE_COMPANY_CERTIFICATE"))("modal",!0)("draggable",!1)("resizable",!1),e.R7$(4),e.JRh(e.bMT(25,37,"PROFILE.DELETE_COMPANY_CERTIFICATE_CONFIRMATION")))},dependencies:[d.Sq,d.bT,p.BC,p.vS,h.Ei,R.z,O.ms,G.l,y.D9],styles:[".badge-outline-gray[_ngcontent-%COMP%]{border:1px solid #e4e6ef;background-color:transparent;color:#5e6278;padding:.5rem .75rem;border-radius:.475rem;display:inline-block}"]})}return n})();var I=c(4077);const Fn=()=>({height:"4px"});function Rn(n,r){1&n&&e.nrm(0,"p-progressBar",2),2&n&&e.Aen(e.lJ4(2,Fn))}function En(n,r){1&n&&(e.j41(0,"span",7),e.EFF(1,"No Documents Available"),e.k0s())}function Pn(n,r){if(1&n&&(e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"a",12)(5,"div",13),e.nrm(6,"img",14),e.k0s(),e.j41(7,"div",15),e.EFF(8),e.nI1(9,"translate"),e.k0s()()()()()()),2&n){const t=e.XpG(2);e.R7$(4),e.Y8G("href",null==t.profile.company?null:t.profile.company.register_document,e.B4B),e.R7$(2),e.Y8G("src",t.getFileIcon(null==t.profile.company?null:t.profile.company.register_document),e.B4B),e.R7$(2),e.SpI(" ",e.bMT(9,3,"PROFILE.REGYDOCUMENT")," ")}}function kn(n,r){if(1&n&&(e.qex(0),e.j41(1,"div",3)(2,"h3",4),e.EFF(3),e.nI1(4,"translate"),e.DNE(5,En,2,0,"span",5),e.k0s()(),e.DNE(6,Pn,10,5,"div",6),e.bVm()),2&n){const t=e.XpG();e.R7$(3),e.SpI(" ",e.bMT(4,3,"PROFILE.MYDOCUMENTS")," "),e.R7$(2),e.Y8G("ngIf",t.profile&&!(null!=t.profile.company&&t.profile.company.register_document)),e.R7$(),e.Y8G("ngIf",t.profile&&(null==t.profile.company?null:t.profile.company.register_document))}}let Sn=(()=>{class n extends _.${getProfileService;profile;loadingProfile=!1;documentTypes;isLoadingDocumentTypes=!0;constructor(t,i){super(t),this.getProfileService=i}ngOnInit(){this.getProfile()}getProfile(){this.loadingProfile=!0;const t=this.getProfileService.getProfile().subscribe({next:i=>{this.profile=i,this.loadingProfile=!1},error:i=>{this.loadingProfile=!1}});this.unsubscribe.push(t)}getFileIcon(t){return t?`./assets/media/svg/files/${t.split(".").pop()?.toLowerCase()}.svg`:"./assets/media/svg/files/default.svg"}static \u0275fac=function(i){return new(i||n)(e.rXU(e.zZn),e.rXU(C.p))};static \u0275cmp=e.VBU({type:n,selectors:[["app-documents"]],features:[e.Vt3],decls:2,vars:2,consts:[["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],[1,"d-flex","flex-wrap","flex-stack","mb-6"],[1,"fw-bold","my-2"],["class","fs-6 text-gray-500 fw-semibold ms-1",4,"ngIf"],["class","row g-6 g-xl-9 mb-6 mb-xl-9",4,"ngIf"],[1,"fs-6","text-gray-500","fw-semibold","ms-1"],[1,"row","g-6","g-xl-9","mb-6","mb-xl-9"],[1,"col-md-6","col-lg-4","col-xl-3"],[1,"card","h-100"],[1,"card-body","d-flex","justify-content-center","text-center","flex-column","p-8"],["target","_blank",1,"text-gray-800","text-hover-primary","d-flex","flex-column",3,"href"],[1,"symbol","symbol-60px","mb-5"],["alt","icon",3,"src"],[1,"fs-7","badge-outline-gray","fw-bold","mb-2"]],template:function(i,o){1&i&&e.DNE(0,Rn,1,3,"p-progressBar",0)(1,kn,7,5,"ng-container",1),2&i&&(e.Y8G("ngIf",o.loadingProfile),e.R7$(),e.Y8G("ngIf",!o.loadingProfile))},dependencies:[d.bT,R.z,y.D9]})}return n})(),wn=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=e.VBU({type:n,selectors:[["app-settings-dashboard"]],decls:7,vars:3,consts:[[1,"fs-2","fw-bold","text-gray-800","mb-5","px-4","py-5"],[1,"container-fluid"],[1,"row"],[1,"col-12"]],template:function(i,o){1&i&&(e.j41(0,"h2",0),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.j41(3,"div",1)(4,"div",2)(5,"div",3),e.nrm(6,"router-outlet"),e.k0s()()()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"HOME.PROFILE_SETTINGS")))},dependencies:[v.n3,y.D9]})}return n})();var u=c(7673),P=c(8141),M=c(7468),te=c(2016),ne=c(8688),ie=c(9634),Nn=c(5312);let oe=(()=>{class n{http;translationService;apiUrl=Nn.c.apiUrl;acceptInsighterInvitationApi="https://api.foresighta.co/api/account/invitation/accept/insighter";isLoadingSubject=new q.t(!1);isLoading$=this.isLoadingSubject.asObservable();currentLang="en";constructor(t,i){this.http=t,this.translationService=i,this.translationService.onLanguageChange().subscribe(o=>{this.currentLang=o||"en"})}setLoading(t){this.isLoadingSubject.next(t)}handleError(t){return(0,Z.$)(t)}acceptInsighterInvitation(t){const i=new g.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.post(this.acceptInsighterInvitationApi,{code:t},{headers:i}).pipe((0,x.T)(o=>o),(0,b.W)(o=>this.handleError(o)),(0,F.j)(()=>this.setLoading(!1)))}static \u0275fac=function(i){return new(i||n)(e.KVO(g.Qq),e.KVO(K.L))};static \u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var A=c(2242),D=c(5653),re=c(7415);const On=()=>({height:"4px"}),L=()=>["insighter"],se=()=>["company"],ae=()=>["company-insighter"];function Mn(n,r){1&n&&e.nrm(0,"p-progressBar",3),2&n&&e.Aen(e.lJ4(2,On))}function $n(n,r){if(1&n&&(e.j41(0,"div",28),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.getFieldError("first_name")," ")}}function jn(n,r){if(1&n&&(e.j41(0,"div",28),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.getFieldError("last_name")," ")}}function Gn(n,r){if(1&n){const t=e.RV6();e.j41(0,"shared-tree-selector",33),e.nI1(1,"translate"),e.nI1(2,"translate"),e.nI1(3,"translate"),e.nI1(4,"translate"),e.nI1(5,"translate"),e.bIt("nodesSelected",function(o){e.eBV(t);const s=e.XpG(3);return e.Njj(s.onConsultingNodesSelected(o))}),e.k0s()}if(2&n){const t=e.XpG(3);e.Y8G("title",e.bMT(1,10,"INSIGHTER_WIZARD.CONSULTING_FIELDS"))("placeholder",e.bMT(2,12,"AUTH.REGISTRATION.CONSULTING_FIELD_PLACEHOLDER"))("isRequired",!0)("otherFieldPlaceholder",e.bMT(3,14,"INSIGHTER_WIZARD.OTHER_FIELD_PLACEHOLDER"))("selectAllLabel","ar"===t.lang?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0643\u0644":"Select All")("fetchedData",t.consultingFields)("initialSelectedNodes",t.personalInfoForm.value.consulting_field)("cancelLabel",e.bMT(4,16,"BUTTONS.CANCEL"))("currentLang",t.lang)("okLabel",e.bMT(5,18,"BUTTONS.OK"))}}function An(n,r){if(1&n&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.getFieldError("consulting_field")," ")}}function Dn(n,r){1&n&&(e.j41(0,"div",35),e.EFF(1," No industries data available "),e.k0s())}function Ln(n,r){if(1&n){const t=e.RV6();e.j41(0,"shared-tree-selector",36),e.nI1(1,"translate"),e.nI1(2,"translate"),e.nI1(3,"translate"),e.nI1(4,"translate"),e.nI1(5,"translate"),e.bIt("nodesSelected",function(o){e.eBV(t);const s=e.XpG(3);return e.Njj(s.onIndustrySelected(o))}),e.k0s()}if(2&n){const t=e.XpG(3);e.Y8G("title",e.bMT(1,9,"AUTH.REGISTRATION.INDUSTRY"))("isRequired",!0)("placeholder",e.bMT(2,11,"AUTH.REGISTRATION.INDUSTRY_PLACEHOLDER"))("otherFieldPlaceholder",e.bMT(3,13,"INSIGHTER_WIZARD.OTHER_FIELD_PLACEHOLDER"))("selectAllLabel","ar"===t.lang?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0643\u0644":"Select All")("fetchedData",t.industries)("initialSelectedNodes",t.personalInfoForm.value.industries)("cancelLabel",e.bMT(4,15,"BUTTONS.CANCEL"))("okLabel",e.bMT(5,17,"BUTTONS.OK"))}}function Yn(n,r){if(1&n&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.getFieldError("industries")," ")}}function Un(n,r){if(1&n&&(e.j41(0,"div",8)(1,"div",29),e.DNE(2,Gn,6,20,"shared-tree-selector",30)(3,An,2,1,"div",19),e.k0s(),e.j41(4,"div",29),e.DNE(5,Dn,2,0,"div",31)(6,Ln,6,19,"shared-tree-selector",32)(7,Yn,2,1,"div",19),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("ngIf",t.consultingFields),e.R7$(),e.Y8G("ngIf",t.isFieldInvalid("consulting_field")),e.R7$(2),e.Y8G("ngIf",!(null!=t.industries&&t.industries.length)),e.R7$(),e.Y8G("ngIf",t.industries&&t.industries.length>0),e.R7$(),e.Y8G("ngIf",t.isFieldInvalid("industries"))}}function Vn(n,r){if(1&n){const t=e.RV6();e.j41(0,"img",39),e.bIt("error",function(){e.eBV(t);const o=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.onFlagError(o))}),e.k0s()}if(2&n){const t=e.XpG().$implicit;e.FS9("alt",t.names.en),e.Y8G("src",t.flagPath,e.B4B)}}function Xn(n,r){if(1&n&&(e.j41(0,"div",37),e.DNE(1,Vn,1,2,"img",38),e.j41(2,"span"),e.EFF(3),e.k0s()()),2&n){const t=r.$implicit;e.R7$(),e.Y8G("ngIf",t.showFlag),e.R7$(2),e.JRh(t.names.en)}}function Bn(n,r){if(1&n&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.getFieldError("country")," ")}}function Jn(n,r){if(1&n&&(e.j41(0,"div",28),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.getFieldError("bio")," ")}}function Hn(n,r){if(1&n&&(e.j41(0,"div",40)(1,"label",41),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.nrm(4,"textarea",42),e.DNE(5,Jn,2,1,"div",12),e.k0s()),2&n){const t=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,4,"ACCOUNT_SETTINGS.BIO")," "),e.R7$(2),e.AVh("is-invalid",t.isFieldInvalid("bio")),e.R7$(),e.Y8G("ngIf",t.isFieldInvalid("bio"))}}function Wn(n,r){if(1&n&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.getFieldError("linkedIn")," ")}}function zn(n,r){if(1&n&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.getFieldError("facebook")," ")}}function qn(n,r){if(1&n&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.getFieldError("twitter")," ")}}function Zn(n,r){if(1&n&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.getFieldError("instagram")," ")}}function Kn(n,r){if(1&n&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.getFieldError("youtube")," ")}}function Qn(n,r){if(1&n&&(e.j41(0,"div",43)(1,"div",22)(2,"label",20),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"div",44)(6,"div",45),e.nrm(7,"img",46),e.k0s(),e.j41(8,"div",47),e.nrm(9,"input",48),e.DNE(10,Wn,2,1,"div",19),e.k0s()(),e.j41(11,"div",44)(12,"div",45),e.nrm(13,"img",49),e.k0s(),e.j41(14,"div",47),e.nrm(15,"input",50),e.DNE(16,zn,2,1,"div",19),e.k0s()(),e.j41(17,"div",44)(18,"div",45),e.nrm(19,"img",51),e.k0s(),e.j41(20,"div",47),e.nrm(21,"input",52),e.DNE(22,qn,2,1,"div",19),e.k0s()(),e.j41(23,"div",44)(24,"div",45),e.nrm(25,"img",53),e.k0s(),e.j41(26,"div",47),e.nrm(27,"input",54),e.DNE(28,Zn,2,1,"div",19),e.k0s()(),e.j41(29,"div",44)(30,"div",45),e.nrm(31,"img",55),e.k0s(),e.j41(32,"div",47),e.nrm(33,"input",56),e.DNE(34,Kn,2,1,"div",19),e.k0s()()()()),2&n){const t=e.XpG(2);e.R7$(3),e.SpI(" ",e.bMT(4,6,"ACCOUNT_SETTINGS.SOCIAL_NETWORKS")," "),e.R7$(7),e.Y8G("ngIf",t.isFieldInvalid("linkedIn")),e.R7$(6),e.Y8G("ngIf",t.isFieldInvalid("facebook")),e.R7$(6),e.Y8G("ngIf",t.isFieldInvalid("twitter")),e.R7$(6),e.Y8G("ngIf",t.isFieldInvalid("instagram")),e.R7$(6),e.Y8G("ngIf",t.isFieldInvalid("youtube"))}}function ei(n,r){1&n&&(e.qex(0),e.j41(1,"span",57),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.bVm()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"ACCOUNT_SETTINGS.SAVE_CHANGES")," "))}function ti(n,r){1&n&&(e.qex(0),e.j41(1,"span",58),e.EFF(2),e.nI1(3,"translate"),e.nrm(4,"span",59),e.k0s(),e.bVm()),2&n&&(e.R7$(),e.xc7("display","block"),e.R7$(),e.SpI(" ",e.bMT(3,3,"AUTH.REGISTRATION.PLEASE_WAIT")," "))}function ni(n,r){if(1&n){const t=e.RV6();e.j41(0,"form",4),e.bIt("ngSubmit",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onSubmit())}),e.j41(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"label",10),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.nrm(9,"input",11),e.DNE(10,$n,2,1,"div",12),e.k0s(),e.j41(11,"div",9)(12,"label",13),e.EFF(13),e.nI1(14,"translate"),e.k0s(),e.nrm(15,"input",14),e.DNE(16,jn,2,1,"div",12),e.k0s()(),e.DNE(17,Un,8,5,"div",15),e.j41(18,"div",8)(19,"div",9)(20,"label",16),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.j41(23,"p-dropdown",17),e.nI1(24,"translate"),e.DNE(25,Xn,4,2,"ng-template",18),e.k0s(),e.DNE(26,Bn,2,1,"div",19),e.k0s(),e.j41(27,"div",9)(28,"label",20),e.EFF(29),e.nI1(30,"translate"),e.k0s(),e.j41(31,"app-phone-number-input",21,0),e.bIt("countryCodeChange",function(o){e.eBV(t);const s=e.XpG();return e.Njj(s.onCountryCodeChange(o))})("phoneNumberChange",function(o){e.eBV(t);const s=e.XpG();return e.Njj(s.onPhoneNumberChange(o))})("formattedPhoneNumberChange",function(o){e.eBV(t);const s=e.XpG();return e.Njj(s.onFormattedPhoneNumberChange(o))})("flagError",function(o){e.eBV(t);const s=e.XpG();return e.Njj(s.onFlagError(o))}),e.k0s()()(),e.j41(33,"div",8)(34,"div",22),e.DNE(35,Hn,6,6,"div",23),e.k0s()(),e.DNE(36,Qn,35,8,"div",24),e.j41(37,"div",25)(38,"button",26),e.nI1(39,"async"),e.DNE(40,ei,4,3,"ng-container",27),e.nI1(41,"async"),e.DNE(42,ti,5,5,"ng-container",27),e.nI1(43,"async"),e.k0s()()()()()()}if(2&n){let t,i;const o=e.XpG();e.Y8G("formGroup",o.personalInfoForm),e.R7$(7),e.SpI(" ",e.bMT(8,36,"ACCOUNT_SETTINGS.FIRST_NAME")," "),e.R7$(2),e.AVh("is-invalid",o.isFieldInvalid("first_name")),e.R7$(),e.Y8G("ngIf",o.isFieldInvalid("first_name")),e.R7$(3),e.SpI(" ",e.bMT(14,38,"ACCOUNT_SETTINGS.LAST_NAME")," "),e.R7$(2),e.AVh("is-invalid",o.isFieldInvalid("last_name")),e.R7$(),e.Y8G("ngIf",o.isFieldInvalid("last_name")),e.R7$(),e.Y8G("ngIf",o.hasRole(e.lJ4(52,L))||o.hasRole(e.lJ4(53,se))||o.hasRole(e.lJ4(54,ae))),e.R7$(4),e.SpI(" ",e.bMT(22,40,"ACCOUNT_SETTINGS.COUNTRY")," "),e.R7$(2),e.AVh("ng-invalid",o.isFieldInvalid("country"))("is-invalid",o.isFieldInvalid("country")),e.FS9("placeholder",e.bMT(24,42,"ACCOUNT_SETTINGS.SELECT_COUNTRY")),e.Y8G("options",o.countries)("filter",!0)("showClear",!0),e.R7$(3),e.Y8G("ngIf",o.isFieldInvalid("country")),e.R7$(3),e.SpI(" ",e.bMT(30,44,"ACCOUNT_SETTINGS.PHONE")," "),e.R7$(2),e.Y8G("countries",o.countries)("placeholder","ar"===o.lang?"\u0631\u0642\u0645 \u0647\u0627\u062a\u0641\u0643":"Your phone number")("searchPlaceholder","ar"===o.lang?"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u062f\u0648\u0644\u0629...":"Search for a country...")("lang",o.lang)("isRequired",!1)("showValidationErrors",!0)("countryCodeError",o.getFieldError("phoneCountryCode"))("phoneNumberError",o.getFieldError("phoneNumber"))("initialCountryCode",null==(t=o.personalInfoForm.get("phoneCountryCode"))?null:t.value)("initialPhoneNumber",null==(i=o.personalInfoForm.get("phoneNumber"))?null:i.value),e.R7$(4),e.Y8G("ngIf",o.hasRole(e.lJ4(55,L))||o.hasRole(e.lJ4(56,se))||o.hasRole(e.lJ4(57,ae))),e.R7$(),e.Y8G("ngIf",o.hasRole(e.lJ4(58,L))),e.R7$(2),e.Y8G("disabled",e.bMT(39,46,o.isUpdatingProfile$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(41,48,o.isUpdatingProfile$)),e.R7$(2),e.Y8G("ngIf",e.bMT(43,50,o.isUpdatingProfile$))}}let le=(()=>{class n extends _.${_profileService;fb;_countryService;_profilePost;getProfileService;_consultingFieldService;_industries;_invitationService;personalInfoForm;invitationForm;isLoadingCountries=!1;countries=[];roles=[];consultingFields=[];industries=[];isUpdatingProfile$;isLoading$=(0,u.of)(!1);isProcessingInvitation$;profile;allIndustriesSelected=[];allConsultingFieldsSelected=[];socialNetworks=[];constructor(t,i,o,s,a,f,l,m,T){super(t),this._profileService=i,this.fb=o,this._countryService=s,this._profilePost=a,this.getProfileService=f,this._consultingFieldService=l,this._industries=m,this._invitationService=T,this.isProcessingInvitation$=this._invitationService.isLoading$,this.isUpdatingProfile$=this._profilePost.isLoading$}ngOnInit(){this.handleAPIs(),this.initForm(),this.initInvitationForm()}handleAPIs(){this.isLoading$=(0,u.of)(!0);const t=this.getProfileService.getProfile().pipe((0,P.M)(o=>{this.profile=o,this.roles=o.roles,console.log("Current roles:",this.roles),this.callConsultingFields(),this.callIndustries(),this.socialNetworks=o.social||[]})),i=this._countryService.getCountries().pipe((0,P.M)(o=>{this.countries=o.map(s=>({...s,flagPath:`assets/media/flags/${s.flag}.svg`,showFlag:!0}))}),(0,b.W)(o=>(0,u.of)([])));(0,M.p)([t,i]).subscribe({next:()=>{this.updateFormValidators(),this.populateForm(),this.isLoading$=(0,u.of)(!1)},error:o=>{this.isLoading$=(0,u.of)(!1)}})}callIndustries(){const t=this._industries.getIsicCodesTree(this.lang?this.lang:"en").subscribe(i=>{console.log("Industries data received:",i),this.industries=i},i=>{console.error("Error loading industries:",i)});this.unsubscribe.push(t)}callConsultingFields(){const t=this._consultingFieldService.getConsultingCodesTree(this.lang?this.lang:"en").subscribe(i=>{this.consultingFields=i});this.unsubscribe.push(t)}updateFormValidators(){this.isClientOnly()?(this.personalInfoForm.get("industries")?.clearValidators(),this.personalInfoForm.get("consulting_field")?.clearValidators(),this.personalInfoForm.get("bio")?.clearValidators()):(this.personalInfoForm.get("industries")?.setValidators([p.k0.required]),this.personalInfoForm.get("consulting_field")?.setValidators([p.k0.required]),this.personalInfoForm.get("bio")?.setValidators([p.k0.required])),this.personalInfoForm.get("industries")?.updateValueAndValidity(),this.personalInfoForm.get("consulting_field")?.updateValueAndValidity(),this.personalInfoForm.get("bio")?.updateValueAndValidity()}populateForm(){let t,i;const o=s=>s&&Array.isArray(s)?s.map(a=>({key:a.id,label:a.name,data:{key:a.id,nameEn:a.name,nameAr:a.name},children:a.children?o(a.children):[]})):[];t=o(this.profile.industries||[]),i=o(this.profile.consulting_field||[]),this.personalInfoForm.patchValue({first_name:this.profile.first_name,last_name:this.profile.last_name,country:this.countries.find(s=>s.id===this.profile.country_id),phoneCountryCode:this.profile.phone_code||"",phoneNumber:this.profile.phone||"",bio:this.profile.bio||"",industries:t,consulting_field:i,linkedIn:this.getSocialLink("linkedin"),facebook:this.getSocialLink("facebook"),twitter:this.getSocialLink("twitter"),instagram:this.getSocialLink("instagram")})}onConsultingNodesSelected(t){const i=t&&t.length>0?t.filter(o=>"selectAll"!==o.data.key):[];this.allConsultingFieldsSelected=i,this.personalInfoForm.get("consulting_field")?.setValue(i)}onIndustrySelected(t){const i=t&&t.length>0?t.filter(o=>"selectAll"!==o.data.key):[];this.allIndustriesSelected=i,this.personalInfoForm.get("industries")?.setValue(i),console.log("Selected Industries:",i)}initForm(){this.personalInfoForm=this.fb.group({first_name:["",p.k0.required],last_name:["",p.k0.required],country:["",p.k0.required],phoneCountryCode:[""],phoneNumber:[""],bio:[""],industries:[[]],consulting_field:[[]],linkedIn:["",[p.k0.pattern("^https://www.linkedin.com/.*$")]],facebook:["",[p.k0.pattern("^https://www.facebook.com/.*$")]],twitter:["",[p.k0.pattern("^https://www.(twitter.com|x.com)/.*$")]],instagram:["",[p.k0.pattern("^https://www.instagram.com/.*$")]],youtube:["",[p.k0.pattern("^https://www.youtube.com/.*$")]]}),this.updateFormValidators()}initInvitationForm(){this.invitationForm=this.fb.group({invitationCode:["",[p.k0.required,p.k0.minLength(6),p.k0.maxLength(6),p.k0.pattern("^[0-9]*$")]]})}onFlagError(t){t.showFlag=!1}hasRole(t){return t.some(i=>this.roles.includes(i))}onSubmit(){if(this.personalInfoForm.markAllAsTouched(),this.personalInfoForm.invalid)return;const t=this.createFormData();this.hasRole(["insighter"])?(0,M.p)([this._profilePost.postProfile(t),this.submitSocialNetworks()]).subscribe({next:([i,o])=>{this.showSuccess("","ar"===this.lang?"\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u0631\u0648\u0641\u0627\u064a\u0644":"Profile Updated Successfully"),document.location.reload()},error:i=>{this.handleServerErrors(i)}}):this._profilePost.postProfile(t).subscribe({next:i=>{this.showSuccess("","ar"===this.lang?"\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u0631\u0648\u0641\u0627\u064a\u0644":"Profile Updated Successfully"),document.location.reload()},error:i=>{this.handleServerErrors(i)}})}onSubmitInvitation(){if(this.invitationForm.markAllAsTouched(),this.invitationForm.invalid)return;const t=this.invitationForm.get("invitationCode")?.value;this._invitationService.acceptInsighterInvitation(t).subscribe({next:i=>{this.showSuccess("","ar"===this.lang?"\u062a\u0645 \u0642\u0628\u0648\u0644 \u0627\u0644\u062f\u0639\u0648\u0629 \u0628\u0646\u062c\u0627\u062d":"Invitation accepted successfully"),this.invitationForm.reset(),document.location.reload()},error:i=>{this.handleServerErrors(i)}})}createFormData(){const t=new FormData,i=this.personalInfoForm;return t.append("first_name",i.get("first_name")?.value),t.append("last_name",i.get("last_name")?.value),i.get("phoneNumber")?.value&&t.append("phone",i.get("phoneNumber")?.value),i.get("phoneCountryCode")?.value&&t.append("phone_code",i.get("phoneCountryCode")?.value),i.get("country")?.value&&t.append("country_id",i.get("country")?.value.id),this.isClientOnly()||this.appendNonClientFields(t,i),t}appendNonClientFields(t,i){t.append("bio",i.get("bio")?.value),this.appendIndustries(t,i.get("industries")?.value||[]),this.appendConsultingFields(t,i.get("consulting_field")?.value||[])}appendIndustries(t,i){const o=this.filterRegularNodes(i),s=this.filterCustomNodes(i);o.forEach(a=>{t.append("industries[]",a.data.key.toString())}),s.forEach((a,f)=>{t.append(`suggest_industries[${f}][parent_id]`,"selectAll"===a.parent?.key?"0":a.parent?.key),t.append(`suggest_industries[${f}][name][en]`,a.data.customInput),t.append(`suggest_industries[${f}][name][ar]`,a.data.customInput)})}appendConsultingFields(t,i){const o=this.filterRegularNodes(i),s=this.filterCustomNodes(i);o.forEach(a=>{t.append("consulting_field[]",a.data.key.toString())}),s.forEach((a,f)=>{t.append(`suggest_consulting_fields[${f}][parent_id]`,"selectAll"===a.parent?.key?"0":a.parent?.key),t.append(`suggest_consulting_fields[${f}][name][en]`,a.data.customInput),t.append(`suggest_consulting_fields[${f}][name][ar]`,a.data.customInput)})}filterRegularNodes(t){return t.filter(i=>"number"==typeof i.data.key&&"selectAll"!==i.data.key)}filterCustomNodes(t){return t.filter(i=>"string"==typeof i.data.key&&"selectAll"!==i.data.key&&null!=i.data.customInput)}isClientOnly(){return this.hasRole(["client"])&&!this.hasRole(["company"])&&!this.hasRole(["insighter"])&&!this.hasRole(["company-insighter"])}submitSocialNetworks(){const t=this.personalInfoForm;if(this.socialNetworks=[],t.get("linkedIn")?.value&&this.socialNetworks.push({type:"linkedin",link:t.get("linkedIn")?.value}),t.get("facebook")?.value&&this.socialNetworks.push({type:"facebook",link:t.get("facebook")?.value}),t.get("twitter")?.value&&this.socialNetworks.push({type:"x",link:t.get("twitter")?.value}),t.get("instagram")?.value&&this.socialNetworks.push({type:"instagram",link:t.get("instagram")?.value}),t.get("youtube")?.value&&this.socialNetworks.push({type:"youtube",link:t.get("youtube")?.value}),this.socialNetworks.length>0){if(this.hasRole(["insighter"]))return this._profilePost.addInsighterSocial(this.socialNetworks);if(this.hasRole(["company"]))return this._profilePost.addCompanySocial(this.socialNetworks)}return(0,u.of)(null)}handleServerErrors(t){if(t.error&&t.error.errors){const i=t.error.errors;for(const o in i)i.hasOwnProperty(o)&&this.showError("",i[o].join(", "))}else this.showError("","An unexpected error occurred.")}getSocialLink(t){const i=this.socialNetworks.find(o=>o.type===t);return i?i.link:""}getFieldError(t){const i=this.personalInfoForm.get(t);if(i&&i.invalid&&i.touched){if(i.errors?.required)return"ar"===this.lang?"\u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628":"This field is required";if(i.errors?.pattern)return"ar"===this.lang?"\u0627\u0644\u0631\u0627\u0628\u0637 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d":"Invalid URL format"}return""}isFieldInvalid(t){const i=this.personalInfoForm.get(t);return!!i&&i.invalid&&i.touched}getInvitationFieldError(t){const i=this.invitationForm.get(t);if(i&&i.invalid&&i.touched){if(i.errors?.required)return"ar"===this.lang?"\u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628":"This field is required";if(i.errors?.minlength||i.errors?.maxlength)return"ar"===this.lang?"\u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0627\u0644\u0631\u0645\u0632 6 \u0623\u0631\u0642\u0627\u0645":"Code must be 6 digits";if(i.errors?.pattern)return"ar"===this.lang?"\u064a\u062c\u0628 \u0623\u0646 \u064a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 \u0623\u0631\u0642\u0627\u0645 \u0641\u0642\u0637":"Only numbers allowed"}return""}isInvitationFieldInvalid(t){const i=this.invitationForm.get(t);return!!i&&i.invalid&&i.touched}onCountryCodeChange(t){this.personalInfoForm.get("phoneCountryCode")?.setValue(t)}onPhoneNumberChange(t){this.personalInfoForm.get("phoneNumber")?.setValue(t)}onFormattedPhoneNumberChange(t){}static \u0275fac=function(i){return new(i||n)(e.rXU(e.zZn),e.rXU(w.uR),e.rXU(p.ok),e.rXU(te.C),e.rXU(N),e.rXU(C.p),e.rXU(ne.M),e.rXU(ie.I),e.rXU(oe))};static \u0275cmp=e.VBU({type:n,selectors:[["app-personal-settings"]],features:[e.Vt3],decls:4,vars:6,consts:[["phoneInput",""],["mode","indeterminate",3,"style",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["mode","indeterminate"],[3,"ngSubmit","formGroup"],[1,"card"],[1,"card-body"],[1,"personal-info"],[1,"row"],[1,"col-lg-6","mb-6","fv-row"],["for","first_name",1,"form-label","required"],["pInputText","","id","first_name","type","text","formControlName","first_name",1,"d-block","w-100"],["class","invalid-feedback",4,"ngIf"],["for","last_name",1,"form-label","required"],["id","last_name","type","text","pInputText","","formControlName","last_name",1,"d-block","w-100"],["class","row",4,"ngIf"],["for","country",1,"form-label","required"],["formControlName","country","optionLabel","names.en",1,"d-block",3,"options","placeholder","filter","showClear"],["pTemplate","item"],["class","invalid-feedback d-block",4,"ngIf"],[1,"form-label"],[3,"countryCodeChange","phoneNumberChange","formattedPhoneNumberChange","flagError","countries","placeholder","searchPlaceholder","lang","isRequired","showValidationErrors","countryCodeError","phoneNumberError","initialCountryCode","initialPhoneNumber"],[1,"col-12"],["class","mb-6",4,"ngIf"],["class","row mb-6",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],[1,"invalid-feedback"],[1,"col-lg-12","fv-row"],[3,"title","placeholder","isRequired","otherFieldPlaceholder","selectAllLabel","fetchedData","initialSelectedNodes","cancelLabel","currentLang","okLabel","nodesSelected",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[3,"title","isRequired","placeholder","otherFieldPlaceholder","selectAllLabel","fetchedData","initialSelectedNodes","cancelLabel","okLabel","nodesSelected",4,"ngIf"],[3,"nodesSelected","title","placeholder","isRequired","otherFieldPlaceholder","selectAllLabel","fetchedData","initialSelectedNodes","cancelLabel","currentLang","okLabel"],[1,"invalid-feedback","d-block"],[1,"alert","alert-warning"],[3,"nodesSelected","title","isRequired","placeholder","otherFieldPlaceholder","selectAllLabel","fetchedData","initialSelectedNodes","cancelLabel","okLabel"],[1,"country-option"],["class","flag-icon w-20px mx-2",3,"src","alt","error",4,"ngIf"],[1,"flag-icon","w-20px","mx-2",3,"error","src","alt"],[1,"mb-6"],[1,"form-label","required"],["formControlName","bio",1,"form-control","min-h-300px"],[1,"row","mb-6"],[1,"d-flex","align-items-center","mb-4"],[1,"symbol","symbol-60px","me-5"],["src","assets/media/svg/social-logos/linkedin.svg","alt","LinkedIn",1,"p-3"],[1,"flex-grow-1"],["type","text","formControlName","linkedIn","placeholder","LinkedIn Profile URL",1,"form-control"],["src","assets/media/svg/social-logos/facebook.svg","alt","Facebook",1,"p-3"],["type","text","formControlName","facebook","placeholder","Facebook Profile URL",1,"form-control"],["src","assets/media/svg/social-logos/x.svg","alt","Twitter",1,"p-3"],["type","text","formControlName","twitter","placeholder","Twitter Profile URL",1,"form-control"],["src","assets/media/svg/social-logos/instagram.svg","alt","Instagram",1,"p-3"],["type","text","formControlName","instagram","placeholder","Instagram Profile URL",1,"form-control"],["src","assets/media/svg/social-logos/youtube.svg","alt","YouTube",1,"p-3"],["type","text","formControlName","youtube","placeholder","YouTube Channel URL",1,"form-control"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(i,o){1&i&&(e.DNE(0,Mn,1,3,"p-progressBar",1),e.nI1(1,"async"),e.DNE(2,ni,44,59,"form",2),e.nI1(3,"async")),2&i&&(e.Y8G("ngIf",e.bMT(1,2,o.isLoading$)),e.R7$(2),e.Y8G("ngIf",!e.bMT(3,4,o.isLoading$)))},dependencies:[d.bT,p.qT,p.me,p.BC,p.cb,h.Ei,p.j4,p.JD,A.S,D.o,R.z,O.ms,re.D,d.Jj,y.D9]})}return n})();const ii=()=>({height:"4px"}),ce=()=>["company"],oi=()=>["insighter"],ri=()=>["/app/profile/company-account"];function si(n,r){1&n&&e.nrm(0,"p-progressBar",3),2&n&&e.Aen(e.lJ4(2,ii))}function ai(n,r){if(1&n&&(e.j41(0,"div",38),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.getFieldError("companyLegalName")," ")}}function li(n,r){if(1&n&&(e.j41(0,"div",39),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.getFieldError("companyConsultingFields")," ")}}function ci(n,r){if(1&n&&(e.j41(0,"div",39),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.getFieldError("companyIndustries")," ")}}function pi(n,r){if(1&n&&(e.j41(0,"div",38),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.getFieldError("companyAddress")," ")}}function di(n,r){if(1&n&&(e.j41(0,"div",38),e.EFF(1),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.getFieldError("companyAboutUs")," ")}}function mi(n,r){1&n&&(e.qex(0),e.j41(1,"span",40),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.bVm()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"ACCOUNT_SETTINGS.SAVE_CHANGES"),""))}function fi(n,r){1&n&&(e.qex(0),e.j41(1,"span",41),e.EFF(2),e.nI1(3,"translate"),e.nrm(4,"span",42),e.k0s(),e.bVm()),2&n&&(e.R7$(),e.xc7("display","block"),e.R7$(),e.SpI(" ",e.bMT(3,3,"AUTH.REGISTRATION.PLEASE_WAIT")," "))}function gi(n,r){if(1&n){const t=e.RV6();e.j41(0,"form",5),e.bIt("ngSubmit",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onSubmit())}),e.j41(1,"div",6)(2,"div",7)(3,"label",8),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.nrm(6,"input",9),e.DNE(7,ai,2,1,"div",10),e.k0s(),e.j41(8,"div",7)(9,"label",8),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.nrm(12,"input",11),e.k0s()(),e.j41(13,"div",6)(14,"div",12)(15,"shared-tree-selector",13),e.nI1(16,"translate"),e.nI1(17,"translate"),e.nI1(18,"translate"),e.nI1(19,"translate"),e.nI1(20,"translate"),e.bIt("nodesSelected",function(o){e.eBV(t);const s=e.XpG(2);return e.Njj(s.onConsultingNodesSelected(o))}),e.k0s(),e.DNE(21,li,2,1,"div",14),e.k0s()(),e.j41(22,"div",6)(23,"div",12)(24,"shared-tree-selector",15),e.nI1(25,"translate"),e.nI1(26,"translate"),e.nI1(27,"translate"),e.nI1(28,"translate"),e.nI1(29,"translate"),e.bIt("nodesSelected",function(o){e.eBV(t);const s=e.XpG(2);return e.Njj(s.onIndustrySelected(o))}),e.k0s(),e.DNE(30,ci,2,1,"div",14),e.k0s()(),e.j41(31,"div",6)(32,"div",7)(33,"label",16),e.EFF(34),e.nI1(35,"translate"),e.k0s(),e.nrm(36,"input",17),e.DNE(37,pi,2,1,"div",10),e.k0s(),e.j41(38,"div",7)(39,"label",8),e.EFF(40),e.k0s(),e.j41(41,"app-phone-number-input",18,0),e.bIt("countryCodeChange",function(o){e.eBV(t);const s=e.XpG(2);return e.Njj(s.onCompanyCountryCodeChange(o))})("phoneNumberChange",function(o){e.eBV(t);const s=e.XpG(2);return e.Njj(s.onCompanyPhoneNumberChange(o))})("formattedPhoneNumberChange",function(o){e.eBV(t);const s=e.XpG(2);return e.Njj(s.onCompanyFormattedPhoneNumberChange(o))})("flagError",function(o){e.eBV(t);const s=e.XpG(2);return e.Njj(s.onFlagError(o))}),e.k0s()()(),e.j41(43,"div",19)(44,"label",8),e.EFF(45),e.nI1(46,"translate"),e.k0s(),e.nrm(47,"textarea",20),e.DNE(48,di,2,1,"div",10),e.k0s(),e.j41(49,"div",21)(50,"div",12)(51,"label",8),e.EFF(52),e.nI1(53,"translate"),e.k0s(),e.j41(54,"div",22)(55,"div",23),e.nrm(56,"img",24),e.k0s(),e.j41(57,"div",25),e.nrm(58,"input",26),e.k0s()(),e.j41(59,"div",22)(60,"div",23),e.nrm(61,"img",27),e.k0s(),e.j41(62,"div",25),e.nrm(63,"input",28),e.k0s()(),e.j41(64,"div",22)(65,"div",23),e.nrm(66,"img",29),e.k0s(),e.j41(67,"div",25),e.nrm(68,"input",30),e.k0s()(),e.j41(69,"div",22)(70,"div",23),e.nrm(71,"img",31),e.k0s(),e.j41(72,"div",25),e.nrm(73,"input",32),e.k0s()(),e.j41(74,"div",33)(75,"div",23),e.nrm(76,"img",34),e.k0s(),e.j41(77,"div",25),e.nrm(78,"input",35),e.k0s()()()(),e.j41(79,"div",36)(80,"button",37),e.DNE(81,mi,4,3,"ng-container",2),e.nI1(82,"async"),e.DNE(83,fi,5,5,"ng-container",2),e.nI1(84,"async"),e.k0s()()()}if(2&n){let t,i;const o=e.XpG(2);e.Y8G("formGroup",o.corporateInfoForm),e.R7$(4),e.JRh(e.bMT(5,48,"ACCOUNT_SETTINGS.COMPANY_LEGAL_NAME")),e.R7$(2),e.AVh("is-invalid",o.isFieldInvalid("companyLegalName")),e.R7$(),e.Y8G("ngIf",o.isFieldInvalid("companyLegalName")),e.R7$(3),e.JRh(e.bMT(11,50,"ACCOUNT_SETTINGS.WEBSITE")),e.R7$(5),e.Y8G("title",e.bMT(16,52,"INSIGHTER_WIZARD.CONSULTING_FIELDS"))("placeholder",e.bMT(17,54,"AUTH.REGISTRATION.CONSULTING_FIELD_PLACEHOLDER"))("otherFieldPlaceholder",e.bMT(18,56,"INSIGHTER_WIZARD.OTHER_FIELD_PLACEHOLDER"))("selectAllLabel","ar"===o.lang?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0643\u0644":"Select All")("fetchedData",o.consultingFields)("initialSelectedNodes",o.corporateInfoForm.value.companyConsultingFields)("cancelLabel",e.bMT(19,58,"BUTTONS.CANCEL"))("okLabel",e.bMT(20,60,"BUTTONS.OK")),e.R7$(6),e.Y8G("ngIf",o.isFieldInvalid("companyConsultingFields")),e.R7$(3),e.Y8G("title",e.bMT(25,62,"AUTH.REGISTRATION.INDUSTRY"))("placeholder",e.bMT(26,64,"AUTH.REGISTRATION.INDUSTRY_PLACEHOLDER"))("otherFieldPlaceholder",e.bMT(27,66,"INSIGHTER_WIZARD.OTHER_FIELD_PLACEHOLDER"))("selectAllLabel","ar"===o.lang?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0643\u0644":"Select All")("fetchedData",o.industries)("initialSelectedNodes",o.corporateInfoForm.value.companyIndustries)("cancelLabel",e.bMT(28,68,"BUTTONS.CANCEL"))("okLabel",e.bMT(29,70,"BUTTONS.OK"))("currentLang",o.lang),e.R7$(6),e.Y8G("ngIf",o.isFieldInvalid("companyIndustries")),e.R7$(4),e.JRh(e.bMT(35,72,"ACCOUNT_SETTINGS.COMPANY_ADDRESS")),e.R7$(2),e.AVh("is-invalid",o.isFieldInvalid("companyAddress")),e.Y8G("placeholder","ar"===o.lang?"\u0623\u062f\u062e\u0644 \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0634\u0631\u0643\u0629":"Enter company address"),e.R7$(),e.Y8G("ngIf",o.isFieldInvalid("companyAddress")),e.R7$(3),e.SpI(" ","ar"===o.lang?"\u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0627\u0644\u0634\u0631\u0643\u0629":"Company Phone Number"," "),e.R7$(),e.Y8G("countries",o.countries)("placeholder","ar"===o.lang?"\u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0627\u0644\u0634\u0631\u0643\u0629":"Company phone number")("searchPlaceholder","ar"===o.lang?"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u062f\u0648\u0644\u0629...":"Search for a country...")("lang",o.lang)("isRequired",!1)("showValidationErrors",!0)("countryCodeError",o.getFieldError("companyPhoneCountryCode"))("phoneNumberError",o.getFieldError("companyPhoneNumber"))("initialCountryCode",null==(t=o.corporateInfoForm.get("companyPhoneCountryCode"))?null:t.value)("initialPhoneNumber",null==(i=o.corporateInfoForm.get("companyPhoneNumber"))?null:i.value),e.R7$(4),e.JRh(e.bMT(46,74,"ACCOUNT_SETTINGS.ABOUT_COMPANY")),e.R7$(2),e.AVh("is-invalid",o.isFieldInvalid("companyAboutUs")),e.R7$(),e.Y8G("ngIf",o.isFieldInvalid("companyAboutUs")),e.R7$(4),e.SpI(" ",e.bMT(53,76,"ACCOUNT_SETTINGS.SOCIAL_NETWORKS")," "),e.R7$(29),e.Y8G("ngIf",!1===e.bMT(82,78,o.isUpdatingProfile$)),e.R7$(2),e.Y8G("ngIf",e.bMT(84,80,o.isUpdatingProfile$))}}function ui(n,r){1&n&&(e.j41(0,"div")(1,"div",12)(2,"div",43)(3,"div",44)(4,"div",45)(5,"div",46)(6,"div",47),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"span",48),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"div",49)(13,"a",50),e.EFF(14),e.nI1(15,"translate"),e.k0s()()(),e.nrm(16,"img",51),e.nI1(17,"translate"),e.k0s()()()()()),2&n&&(e.R7$(7),e.SpI(" ",e.bMT(8,5,"UPGRADE_TO_COMPANY_ACCOUNT.TITLE")," "),e.R7$(3),e.SpI(" ",e.bMT(11,7,"UPGRADE_TO_COMPANY_ACCOUNT.DESCRIPTION")," "),e.R7$(3),e.Y8G("routerLink",e.lJ4(13,ri)),e.R7$(),e.SpI(" ",e.bMT(15,9,"UPGRADE_TO_COMPANY_ACCOUNT.BUTTON_TEXT")," "),e.R7$(2),e.FS9("alt",e.bMT(17,11,"UPGRADE_TO_COMPANY_ACCOUNT.ILLUSTRATION_ALT")))}function _i(n,r){if(1&n&&(e.qex(0),e.DNE(1,gi,85,82,"form",4),e.nI1(2,"async"),e.DNE(3,ui,18,14,"div",2),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!e.bMT(2,2,t.isLoading$)&&t.hasRole(e.lJ4(4,ce))),e.R7$(2),e.Y8G("ngIf",!t.hasRole(e.lJ4(5,ce))&&t.hasRole(e.lJ4(6,oi)))}}let Y=(()=>{class n extends _.${_profileService;fb;_industries;_consultingFieldService;_profilePost;_countryService;getProfileService;isLoading=!1;isUpdatingProfile$=(0,u.of)(!1);isLoading$=(0,u.of)(!1);roles=[];profile;corporateInfoForm;industries=[];consultingFields=[];countries=[];allIndustriesSelected=[];allConsultingFieldsSelected=[];constructor(t,i,o,s,a,f,l,m){super(l),this._profileService=t,this.fb=i,this._industries=o,this._consultingFieldService=s,this._profilePost=a,this._countryService=f,this.getProfileService=m}ngOnInit(){this.handleAPIs()}handleAPIs(){this.isLoading$=(0,u.of)(!0);const t=this.getProfileService.getProfile().pipe((0,P.M)(a=>{this.profile=a,this.roles=a.roles})),i=this._industries.getIsicCodesTree(this.lang?this.lang:"en").pipe((0,P.M)(a=>{this.industries=a}),(0,b.W)(a=>(0,u.of)([]))),o=this._consultingFieldService.getConsultingCodesTree(this.lang?this.lang:"en").pipe((0,P.M)(a=>{this.consultingFields=a}),(0,b.W)(a=>(0,u.of)([]))),s=this._countryService.getCountries().pipe((0,P.M)(a=>{this.countries=a.map(f=>({...f,flagPath:`assets/media/flags/${f.flag}.svg`,showFlag:!0}))}),(0,b.W)(a=>(0,u.of)([])));(0,M.p)([t,i,o,s]).subscribe({next:()=>{this.hasRole(["company"])&&(this.initForm(),this.populateForm()),this.isLoading$=(0,u.of)(!1)},error:a=>{this.isLoading$=(0,u.of)(!1)}})}initForm(){this.profile.roles.includes("company")&&(this.corporateInfoForm=this.fb.group({companyAddress:["",p.k0.required],companyPhoneCountryCode:[""],companyPhoneNumber:[""],companyIndustries:[[],p.k0.required],companyConsultingFields:[[],p.k0.required],companyLegalName:["",p.k0.required],companyWebsite:[null],companyRegisterDocument:[null],companyAboutUs:["",p.k0.required],linkedIn:[""],facebook:[""],x:[""],instagram:[""],youtube:[""]}))}onFileSelectedRegistry(t){const i=t.target.files[0];i&&(this.corporateInfoForm.patchValue({companyRegisterDocument:i}),this.corporateInfoForm.get("companyRegisterDocument")?.markAsTouched())}onFileDrop(t){t.preventDefault();const i=t.dataTransfer?.files;if(i&&i.length>0){const o=i.item(0);this.corporateInfoForm.patchValue({companyRegisterDocument:o}),this.corporateInfoForm.get("companyRegisterDocument")?.markAsTouched()}}onDragOver(t){t.preventDefault()}removeRegisterDocument(){this.corporateInfoForm.patchValue({companyRegisterDocument:null})}populateForm(){const t=s=>s&&Array.isArray(s)?s.map(a=>({key:a.id,label:a.name,data:{key:a.id,code:a.code,status:a.status,nameEn:a.name,nameAr:a.name},children:a.children?t(a.children):[]})):[],i=t(this.profile.company?.industries||[]),o=t(this.profile.company?.consulting_field||[]);this.corporateInfoForm.patchValue({companyIndustries:i,companyConsultingFields:o,companyLegalName:this.profile.company?.legal_name,companyWebsite:this.profile.company?.website,companyRegisterDocument:this.profile.company?.register_document,companyAboutUs:this.profile.company?.about_us,companyAddress:this.profile.company?.address,companyPhoneCountryCode:this.profile.company?.phone_code||"",companyPhoneNumber:this.profile.company?.company_phone||""}),this.profile.company?.social&&this.profile.company.social.forEach(s=>{switch(s.type){case"linkedin":this.corporateInfoForm.patchValue({linkedIn:s.link});break;case"facebook":this.corporateInfoForm.patchValue({facebook:s.link});break;case"x":this.corporateInfoForm.patchValue({x:s.link});break;case"instagram":this.corporateInfoForm.patchValue({instagram:s.link});break;case"youtube":this.corporateInfoForm.patchValue({youtube:s.link})}})}getProfile(){const t=this._profileService.getProfile().subscribe(i=>{this.profile=i,this.roles=i.roles});this.unsubscribe.push(t)}onFileSelected(t){}handleFiles(t){}onIndustrySelected(t){this.allIndustriesSelected=t&&t.length>0?t:[],this.corporateInfoForm.get("companyIndustries")?.setValue(this.allIndustriesSelected)}onConsultingNodesSelected(t){this.allConsultingFieldsSelected=t&&t.length>0?t:[],this.corporateInfoForm.get("companyConsultingFields")?.setValue(this.allConsultingFieldsSelected)}hasRole(t){return t.some(i=>this.roles.includes(i))}getFieldError(t){const i=this.corporateInfoForm.get(t);return i&&i.invalid&&i.touched&&i.errors?.required?"ar"===this.lang?"\u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628":"This field is required":""}isFieldInvalid(t){const i=this.corporateInfoForm.get(t);return!!i&&i.invalid&&i.touched}get isSubmitDisabled(){return!1}onSubmit(){if(this.corporateInfoForm.markAllAsTouched(),this.corporateInfoForm.invalid)return;const t=new FormData;t.append("first_name",this.profile.first_name),t.append("last_name",this.profile.last_name),this.profile.country_id&&t.append("country_id",this.profile.country_id.toString()),t.append("address",this.corporateInfoForm.get("companyAddress")?.value),t.append("legal_name",this.corporateInfoForm.get("companyLegalName")?.value),t.append("website",this.corporateInfoForm.get("companyWebsite")?.value),t.append("about_us",this.corporateInfoForm.get("companyAboutUs")?.value),this.corporateInfoForm.get("companyPhoneNumber")?.value&&t.append("company_phone",this.corporateInfoForm.get("companyPhoneNumber")?.value),this.corporateInfoForm.get("companyPhoneCountryCode")?.value&&t.append("phone_code",this.corporateInfoForm.get("companyPhoneCountryCode")?.value);const i=this.corporateInfoForm.get("companyIndustries")?.value.filter(l=>"number"==typeof l.key),o=this.corporateInfoForm.get("companyIndustries")?.value.filter(l=>"string"==typeof l.key&&"selectAll"!==l.key&&l.data?.customInput);i&&i.length>0&&i.forEach(l=>{t.append("industries[]",l.key.toString())}),o&&o.length>0&&o.forEach((l,m)=>{t.append(`suggest_industries[${m}][parent_id]`,"selectAll"===l.parent.key?0:l.parent.key),t.append(`suggest_industries[${m}][name][en]`,l.data.customInput),t.append(`suggest_industries[${m}][name][ar]`,l.data.customInput)});const s=this.corporateInfoForm.get("companyConsultingFields")?.value.filter(l=>"number"==typeof l.key),a=this.corporateInfoForm.get("companyConsultingFields")?.value.filter(l=>"string"==typeof l.key&&"selectAll"!==l.key&&l.data?.customInput);s&&s.length>0&&s.forEach(l=>{t.append("consulting_field[]",l.key.toString())}),a&&a.length>0&&a.forEach((l,m)=>{t.append(`suggest_consulting_fields[${m}][parent_id]`,"selectAll"===l.parent.key?0:l.parent.key),t.append(`suggest_consulting_fields[${m}][name][en]`,l.data.customInput),t.append(`suggest_consulting_fields[${m}][name][ar]`,l.data.customInput)});const f=[];t.forEach((l,m)=>{f.push({key:m,value:l.toString()})}),(0,M.p)([this._profilePost.updateCompanyInfo(t),this.submitSocialNetworks()]).subscribe({next:([l,m])=>{this.showSuccess("","ar"===this.lang?"\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u0631\u0648\u0641\u0627\u064a\u0644":"Profile Updated Successfully"),document.location.reload()},error:l=>{this.handleServerErrors(l)}})}submitSocialNetworks(){const t=[],i=this.corporateInfoForm.value;return i.linkedIn&&t.push({type:"linkedin",link:i.linkedIn}),i.facebook&&t.push({type:"facebook",link:i.facebook}),i.x&&t.push({type:"x",link:i.x}),i.instagram&&t.push({type:"instagram",link:i.instagram}),i.youtube&&t.push({type:"youtube",link:i.youtube}),this._profilePost.addCompanySocial(t)}handleServerErrors(t){if(t.error&&t.error.errors){const i=t.error.errors;for(const o in i)i.hasOwnProperty(o)&&this.showError("",i[o].join(", "))}else this.showError("","An unexpected error occurred.")}onCompanyCountryCodeChange(t){this.corporateInfoForm.get("companyPhoneCountryCode")?.setValue(t)}onCompanyPhoneNumberChange(t){this.corporateInfoForm.get("companyPhoneNumber")?.setValue(t)}onCompanyFormattedPhoneNumberChange(t){}onFlagError(t){t&&(t.showFlag=!1)}static \u0275fac=function(i){return new(i||n)(e.rXU(w.uR),e.rXU(p.ok),e.rXU(ie.I),e.rXU(ne.M),e.rXU(N),e.rXU(te.C),e.rXU(e.zZn),e.rXU(C.p))};static \u0275cmp=e.VBU({type:n,selectors:[["app-company-settings"]],features:[e.Vt3],decls:3,vars:4,consts:[["companyPhoneInput",""],["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-lg-6","mb-6","fv-row"],[1,"form-label"],["type","text","formControlName","companyLegalName",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","companyWebsite",1,"form-control"],[1,"col-12"],[3,"nodesSelected","title","placeholder","otherFieldPlaceholder","selectAllLabel","fetchedData","initialSelectedNodes","cancelLabel","okLabel"],["class","invalid-feedback d-block",4,"ngIf"],[3,"nodesSelected","title","placeholder","otherFieldPlaceholder","selectAllLabel","fetchedData","initialSelectedNodes","cancelLabel","okLabel","currentLang"],[1,"form-label","required"],["type","text","formControlName","companyAddress",1,"form-control",3,"placeholder"],[3,"countryCodeChange","phoneNumberChange","formattedPhoneNumberChange","flagError","countries","placeholder","searchPlaceholder","lang","isRequired","showValidationErrors","countryCodeError","phoneNumberError","initialCountryCode","initialPhoneNumber"],[1,"mb-6"],["formControlName","companyAboutUs",1,"form-control","min-h-300px"],[1,"row","mb-6"],[1,"d-flex","align-items-center","mb-4"],[1,"symbol","symbol-60px","me-5"],["src","assets/media/svg/social-logos/linkedin.svg","alt","LinkedIn",1,"p-3"],[1,"flex-grow-1"],["type","text","formControlName","linkedIn","placeholder","LinkedIn Profile URL",1,"form-control"],["src","assets/media/svg/social-logos/facebook.svg","alt","Facebook",1,"p-3"],["type","text","formControlName","facebook","placeholder","Facebook Profile URL",1,"form-control"],["src","assets/media/svg/social-logos/x.svg","alt","x",1,"p-3"],["type","text","formControlName","x","placeholder","X Profile URL",1,"form-control"],["src","assets/media/svg/social-logos/instagram.svg","alt","Instagram",1,"p-3"],["type","text","formControlName","instagram","placeholder","Instagram Profile URL",1,"form-control"],[1,"d-flex","align-items-center"],["src","assets/media/svg/social-logos/youtube.svg","alt","YouTube",1,"p-3"],["type","text","formControlName","youtube","placeholder","YouTube Channel URL",1,"form-control"],[1,"d-flex","justify-content-end","mt-8"],["type","submit",1,"btn","btn-primary"],[1,"invalid-feedback"],[1,"invalid-feedback","d-block"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"card","card-custom","bg-body","h-md-100"],[1,"card-body"],[1,"d-flex","flex-column","flex-md-row","align-items-center","justify-content-around"],[1,"mt-2","me-9","me-md-0"],[1,"position-relative","text-gray-800","fs-1","z-index-2","fw-bold","mb-5"],[1,"text-gray-600","fw-semibold","mw-400px","fs-6","mb-6","d-block"],[1,"mb-7"],["data-bs-toggle","modal","data-bs-target","#kt_modal_upgrade_plan",1,"btn","btn-sm","btn-primary","fw-semibold","me-2",3,"routerLink"],["src","../../../../../assets/media/auth/Wavy_Bus-32_Single-03.jpg",1,"h-250px","me-15",3,"alt"]],template:function(i,o){1&i&&(e.DNE(0,si,1,3,"p-progressBar",1),e.nI1(1,"async"),e.DNE(2,_i,4,7,"ng-container",2)),2&i&&(e.Y8G("ngIf",e.bMT(1,2,o.isLoading$)),e.R7$(2),e.Y8G("ngIf",o.profile&&o.roles.length>0))},dependencies:[d.bT,v.Wk,p.qT,p.me,p.BC,p.cb,p.j4,p.JD,D.o,R.z,re.D,d.Jj,y.D9],styles:[".offer-bg[_ngcontent-%COMP%]{background-image:url(/assets/media/images/2600x1200/bg-4.png);background-size:cover;background-position:center;border-style:dashed;background-size:750px;min-height:100%}.b-color[_ngcontent-%COMP%]{border-color:#ffd19496}textarea[_ngcontent-%COMP%]{min-height:300px}"]})}return n})();var hi=c(1413),bi=c(6977),vi=c(3804);const U=(n,r,t,i)=>({"bi bi-eye-slash":n,"bi bi-eye":r,"end-0 pe-3":t,"start-0 ps-3":i});function Ci(n,r){1&n&&(e.j41(0,"div",11)(1,"div",12),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",13),e.EFF(5,"************"),e.k0s()()),2&n&&(e.R7$(2),e.JRh(e.bMT(3,1,"ACCOUNT_SETTINGS.PASSWORD")))}function yi(n,r){1&n&&(e.j41(0,"div",32),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ACCOUNT_SETTINGS.PASSWORDS_DO_NOT_MATCH")," "))}function Ii(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",14)(1,"form",15,0),e.bIt("ngSubmit",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.changePassword())}),e.j41(3,"div",16)(4,"div",17)(5,"div",18)(6,"label",19),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"div",20)(10,"input",21),e.mxI("ngModelChange",function(o){e.eBV(t);const s=e.XpG();return e.DH7(s.oldPassword,o)||(s.oldPassword=o),e.Njj(o)}),e.k0s(),e.j41(11,"i",22),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.toggleOldPasswordVisibility())}),e.k0s()()()(),e.j41(12,"div",17)(13,"div",18)(14,"label",23),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.j41(17,"div",20)(18,"input",24),e.mxI("ngModelChange",function(o){e.eBV(t);const s=e.XpG();return e.DH7(s.newPassword,o)||(s.newPassword=o),e.Njj(o)}),e.k0s(),e.j41(19,"i",22),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.toggleNewPasswordVisibility())}),e.k0s()()()(),e.j41(20,"div",17)(21,"div",18)(22,"label",25),e.EFF(23),e.nI1(24,"translate"),e.k0s(),e.j41(25,"div",20)(26,"input",26),e.mxI("ngModelChange",function(o){e.eBV(t);const s=e.XpG();return e.DH7(s.confirmPassword,o)||(s.confirmPassword=o),e.Njj(o)}),e.k0s(),e.j41(27,"i",22),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.toggleConfirmPasswordVisibility())}),e.k0s()()(),e.DNE(28,yi,3,3,"div",27),e.k0s()(),e.j41(29,"div",28),e.EFF(30),e.nI1(31,"translate"),e.k0s(),e.j41(32,"div",29)(33,"button",30),e.EFF(34),e.nI1(35,"translate"),e.k0s(),e.j41(36,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.cancelEdit())}),e.EFF(37),e.nI1(38,"translate"),e.k0s()()()()}if(2&n){const t=e.sdS(2),i=e.XpG();e.R7$(7),e.SpI(" ",e.bMT(8,17,"ACCOUNT_SETTINGS.CURRENT_PASSWORD")," "),e.R7$(3),e.Y8G("type",i.showOldPassword()?"text":"password"),e.R50("ngModel",i.oldPassword),e.R7$(),e.Y8G("ngClass",e.ziG(29,U,i.showOldPassword(),!i.showOldPassword(),!i.isRtl(),i.isRtl())),e.R7$(4),e.SpI(" ",e.bMT(16,19,"ACCOUNT_SETTINGS.NEW_PASSWORD")," "),e.R7$(3),e.Y8G("type",i.showNewPassword()?"text":"password"),e.R50("ngModel",i.newPassword),e.R7$(),e.Y8G("ngClass",e.ziG(34,U,i.showNewPassword(),!i.showNewPassword(),!i.isRtl(),i.isRtl())),e.R7$(4),e.SpI(" ",e.bMT(24,21,"ACCOUNT_SETTINGS.CONFIRM_NEW_PASSWORD")," "),e.R7$(3),e.Y8G("type",i.showConfirmPassword()?"text":"password"),e.R50("ngModel",i.confirmPassword),e.R7$(),e.Y8G("ngClass",e.ziG(39,U,i.showConfirmPassword(),!i.showConfirmPassword(),!i.isRtl(),i.isRtl())),e.R7$(),e.Y8G("ngIf",!i.passwordsMatch()&&i.isEditing()),e.R7$(2),e.SpI(" ",e.bMT(31,23,"ACCOUNT_SETTINGS.PASSWORD_RULES")," "),e.R7$(3),e.Y8G("disabled",!i.passwordsMatch()||t.invalid),e.R7$(),e.SpI(" ",e.bMT(35,25,"ACCOUNT_SETTINGS.UPDATE_PASSWORD")," "),e.R7$(3),e.SpI(" ",e.bMT(38,27,"ACCOUNT_SETTINGS.CANCEL")," ")}}function Ti(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",33)(1,"button",34),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.editPassword())}),e.EFF(2),e.nI1(3,"translate"),e.k0s()()}2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"ACCOUNT_SETTINGS.CHANGE_PASSWORD")," "))}let pe=(()=>{class n extends _.${_changepassword;constructor(t,i){super(i),this._changepassword=t}unsub$=new hi.B;_oldPassword=(0,e.vPA)("");_newPassword=(0,e.vPA)("");_confirmPassword=(0,e.vPA)("");showOldPassword=(0,e.vPA)(!1);showNewPassword=(0,e.vPA)(!1);showConfirmPassword=(0,e.vPA)(!1);isRtl(){return"ar"===this.lang}toggleOldPasswordVisibility(){this.showOldPassword.update(t=>!t)}toggleNewPasswordVisibility(){this.showNewPassword.update(t=>!t)}toggleConfirmPasswordVisibility(){this.showConfirmPassword.update(t=>!t)}get oldPassword(){return this._oldPassword()}set oldPassword(t){this._oldPassword.set(t)}get newPassword(){return this._newPassword()}set newPassword(t){this._newPassword.set(t)}get confirmPassword(){return this._confirmPassword()}set confirmPassword(t){this._confirmPassword.set(t)}passwordsMatch=(0,e.EWP)(()=>this._newPassword()===this._confirmPassword());_messages=(0,e.vPA)([]);get messages(){return this._messages()}set messages(t){this._messages.set(t)}isEditing=(0,e.vPA)(!1);handleServerErrors(t){if(t.error&&t.error.errors){const i=t.error.errors;for(const o in i)i.hasOwnProperty(o)&&this.showError("",i[o].join(", "))}else this.showError("","An unexpected error occurred.")}changePassword(){if(!this.passwordsMatch())return void this._messages.set([{severity:"error",summary:"Validation Error",detail:"New Password and Confirm Password do not match."}]);const t={old_password:this._oldPassword(),new_password:this._newPassword(),password_confirmation:this._confirmPassword()};this.isEditing.set(!0),this._changepassword.changePassword(t).pipe((0,bi.Q)(this.unsub$)).subscribe({next:()=>{this.showSuccess("","Changes Successfully"),this.isEditing.set(!1),this.clearForm()},error:i=>{this.handleServerErrors(i),this.isEditing.set(!0)}})}clearForm(){this._oldPassword.set(""),this._newPassword.set(""),this._confirmPassword.set(""),this.showOldPassword.set(!1),this.showNewPassword.set(!1),this.showConfirmPassword.set(!1)}editPassword(){this.isEditing.set(!0)}cancelEdit(){this.isEditing.set(!1),this.clearForm()}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}static \u0275fac=function(i){return new(i||n)(e.rXU(vi.F),e.rXU(e.zZn))};static \u0275cmp=e.VBU({type:n,selectors:[["app-reset-password"]],features:[e.Vt3],decls:12,vars:6,consts:[["passwordForm","ngForm"],[1,"card","mb-5","mb-xl-10","shadow-none","border-1","border","border-gray-300","rounded-2"],["role","button",1,"card-header","border-0","cursor-pointer"],[1,"card-title","m-0"],[1,"fw-bold","m-0"],["id","kt_account_settings_signin_method",1,"show"],[1,"card-body","border-top","p-9"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","mb-10"],["id","kt_signin_password",4,"ngIf"],["id","kt_signin_password_edit","class","flex-row-fluid",4,"ngIf"],["id","kt_signin_password_button",4,"ngIf"],["id","kt_signin_password"],[1,"fs-6","fw-bold","mb-1"],[1,"fw-semibold","text-gray-600"],["id","kt_signin_password_edit",1,"flex-row-fluid"],[3,"ngSubmit"],[1,"row","mb-1"],[1,"col-lg-4"],[1,"fv-row","mb-0"],["for","currentpassword",1,"form-label","fs-6","fw-bold","mb-3"],[1,"position-relative"],["pInputText","","id","currentpassword","name","currentpassword","required","",1,"form-control","form-control-lg","form-control-solid",3,"ngModelChange","type","ngModel"],[1,"position-absolute","top-50","translate-middle-y","cursor-pointer",3,"click","ngClass"],["for","newpassword",1,"form-label","fs-6","fw-bold","mb-3"],["pInputText","","id","newpassword","name","newpassword","required","",1,"form-control","form-control-lg","form-control-solid",3,"ngModelChange","type","ngModel"],["for","confirmpassword",1,"form-label","fs-6","fw-bold","mb-3"],["pInputText","","id","confirmpassword","name","confirmpassword","required","",1,"form-control","form-control-lg","form-control-solid",3,"ngModelChange","type","ngModel"],["class","text-danger mb-3",4,"ngIf"],[1,"form-text","mb-5"],[1,"d-flex"],["type","submit",1,"btn","btn-primary","me-2","px-6",3,"disabled"],["type","button",1,"btn","btn-color-gray-500","btn-active-light-primary","px-6",3,"click"],[1,"text-danger","mb-3"],["id","kt_signin_password_button"],[1,"btn","btn-light","btn-active-light-primary",3,"click"]],template:function(i,o){1&i&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3",4),e.EFF(4),e.nI1(5,"translate"),e.k0s()()(),e.j41(6,"div",5)(7,"div",6)(8,"div",7),e.DNE(9,Ci,6,3,"div",8)(10,Ii,39,44,"div",9)(11,Ti,4,3,"div",10),e.k0s()()()()),2&i&&(e.R7$(4),e.JRh(e.bMT(5,4,"ACCOUNT_SETTINGS.CHANGE_PASSWORD")),e.R7$(5),e.Y8G("ngIf",!o.isEditing()),e.R7$(),e.Y8G("ngIf",o.isEditing()),e.R7$(),e.Y8G("ngIf",!o.isEditing()))},dependencies:[d.YU,d.bT,p.qT,p.me,p.BC,p.cb,p.YS,p.vS,p.cV,A.S,y.D9],encapsulation:2})}return n})();var $=c(9335);const xi=()=>({height:"4px"});function Fi(n,r){1&n&&e.nrm(0,"p-progressBar",23),2&n&&e.Aen(e.lJ4(2,xi))}function Ri(n,r){1&n&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"JOIN_COMPANY.INVITATION_CODE_REQUIRED")," "))}function Ei(n,r){1&n&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"JOIN_COMPANY.INVITATION_CODE_LENGTH")," "))}function Pi(n,r){1&n&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"JOIN_COMPANY.INVITATION_CODE_NUMERIC")," "))}function ki(n,r){if(1&n&&(e.j41(0,"div",24),e.DNE(1,Ri,3,3,"div",20)(2,Ei,3,3,"div",20)(3,Pi,3,3,"div",20),e.k0s()),2&n){let t,i,o;const s=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==(t=s.invitationForm.get("invitationCode"))||null==t.errors?null:t.errors.required),e.R7$(),e.Y8G("ngIf",(null==(i=s.invitationForm.get("invitationCode"))||null==i.errors?null:i.errors.minlength)||(null==(i=s.invitationForm.get("invitationCode"))||null==i.errors?null:i.errors.maxlength)),e.R7$(),e.Y8G("ngIf",null==(o=s.invitationForm.get("invitationCode"))||null==o.errors?null:o.errors.pattern)}}function Si(n,r){1&n&&(e.qex(0),e.j41(1,"span",25),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.bVm()),2&n&&(e.R7$(2),e.JRh(e.bMT(3,1,"JOIN_COMPANY.JOIN_BUTTON")))}function wi(n,r){1&n&&(e.qex(0),e.j41(1,"span",26),e.EFF(2),e.nI1(3,"translate"),e.nrm(4,"span",27),e.k0s(),e.bVm()),2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"AUTH.REGISTRATION.PLEASE_WAIT")," "))}function Ni(n,r){if(1&n){const t=e.RV6();e.j41(0,"form",9),e.bIt("ngSubmit",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onSubmitInvitation())}),e.DNE(1,Fi,1,3,"p-progressBar",10),e.nI1(2,"async"),e.j41(3,"div",11)(4,"label",12),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"div",13),e.nrm(8,"input",14),e.nI1(9,"translate"),e.j41(10,"div",15),e.nrm(11,"i",16),e.k0s()(),e.DNE(12,ki,4,3,"div",17),e.k0s(),e.j41(13,"div",18)(14,"button",19),e.nI1(15,"async"),e.DNE(16,Si,4,3,"ng-container",20),e.nI1(17,"async"),e.DNE(18,wi,5,3,"ng-container",20),e.nI1(19,"async"),e.k0s()(),e.j41(20,"div",21),e.EFF(21),e.nI1(22,"translate"),e.j41(23,"a",22),e.EFF(24),e.nI1(25,"translate"),e.k0s()()()}if(2&n){let t;const i=e.XpG();e.Y8G("formGroup",i.invitationForm),e.R7$(),e.Y8G("ngIf",e.bMT(2,10,i.isProcessingInvitation$)),e.R7$(4),e.JRh(e.bMT(6,12,"JOIN_COMPANY.INVITATION_CODE_LABEL")),e.R7$(3),e.FS9("placeholder",e.bMT(9,14,"JOIN_COMPANY.INVITATION_CODE_PLACEHOLDER")),e.R7$(4),e.Y8G("ngIf",(null==(t=i.invitationForm.get("invitationCode"))?null:t.invalid)&&(null==(t=i.invitationForm.get("invitationCode"))?null:t.touched)),e.R7$(2),e.Y8G("disabled",i.invitationForm.invalid||e.bMT(15,16,i.isProcessingInvitation$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(17,18,i.isProcessingInvitation$)),e.R7$(2),e.Y8G("ngIf",e.bMT(19,20,i.isProcessingInvitation$)),e.R7$(3),e.SpI(" ",e.bMT(22,22,"JOIN_COMPANY.NO_INVITATION_QUESTION")," "),e.R7$(3),e.JRh(e.bMT(25,24,"JOIN_COMPANY.RETURN_TO_DASHBOARD"))}}const Mi=[{path:"",component:Ye,children:[{path:"",redirectTo:"overview",pathMatch:"full"},{path:"overview",component:mt},{path:"company",component:$t,canActivate:[I.R],data:{roles:["company"]}},{path:"documents",component:Sn,canActivate:[I.R],data:{roles:["company"]}},{path:"certificates",component:ln,canActivate:[I.R],data:{roles:["insighter","company","company-insighter"]}},{path:"company-certificates",component:xn,canActivate:[I.R],data:{roles:["company"]}},{path:"settings",component:wn,canActivate:[$.W],children:[{path:"",redirectTo:"personal-info",pathMatch:"full"},{path:"personal-info",component:le},{path:"company-settings",component:Y,canActivate:[I.R],data:{roles:["company","company-insighter"]}},{path:"reset-password",component:pe,canActivate:[I.R],data:{roles:["client"]}},{path:"company-account",component:Y,canActivate:[I.R],data:{roles:["company"]}}],data:{roles:["insighter","company","client"]}},{path:"settings/personal-info",component:le,canActivate:[$.W,I.R],data:{roles:["company","insighter","client"]}},{path:"settings/company-settings",component:Y,canActivate:[$.W,I.R],data:{roles:["company","company-insighter"]}},{path:"settings/reset-password",component:pe,canActivate:[$.W,I.R],data:{roles:["client"]}}]},{path:"join-company",component:(()=>{class n extends _.${fb;router;_invitationService;invitationForm;isLoading$=(0,u.of)(!1);isProcessingInvitation$;constructor(t,i,o,s){super(t),this.fb=i,this.router=o,this._invitationService=s,this.isProcessingInvitation$=this._invitationService.isLoading$}ngOnInit(){this.initInvitationForm()}initInvitationForm(){this.invitationForm=this.fb.group({invitationCode:["",[p.k0.required,p.k0.minLength(6),p.k0.maxLength(6),p.k0.pattern("^[0-9]*$")]]})}onSubmitInvitation(){if(this.invitationForm.invalid)return;const t=this.invitationForm.get("invitationCode")?.value;this._invitationService.acceptInsighterInvitation(t).subscribe({next:i=>{this.showSuccess("","ar"===this.lang?"\u062a\u0645 \u0642\u0628\u0648\u0644 \u0627\u0644\u062f\u0639\u0648\u0629 \u0628\u0646\u062c\u0627\u062d":"Invitation accepted successfully"),this.invitationForm.reset(),this.router.navigate(["/app/profile/overview"]).then(()=>{window.location.reload()})},error:i=>{this.handleServerErrors(i)}})}handleServerErrors(t){let i="";if(console.log("Error response:",t),t.error&&"object"==typeof t.error)if(t.error.message)i=t.error.message;else if(t.error.error)i=t.error.error;else if(t.error.errors)if(t.error.errors.common&&Array.isArray(t.error.errors.common))i=t.error.errors.common[0];else{const o=Object.keys(t.error.errors)[0];o&&Array.isArray(t.error.errors[o])&&(i=t.error.errors[o][0])}else{const o=Object.keys(t.error)[0];o&&Array.isArray(t.error[o])&&(i=t.error[o][0])}else i=t.message||"An unexpected error occurred";console.log("Extracted error message:",i),this.showError("",i)}static \u0275fac=function(i){return new(i||n)(e.rXU(e.zZn),e.rXU(p.ok),e.rXU(v.Ix),e.rXU(oe))};static \u0275cmp=e.VBU({type:n,selectors:[["app-join-company"]],features:[e.Vt3],decls:15,vars:9,consts:[[1,"d-flex","flex-column","flex-root"],[1,"d-flex","flex-column","flex-center","flex-column-fluid"],[1,"d-flex","flex-column","flex-center","text-center","p-10"],[1,"mb-10"],[1,"fw-bolder","fs-2qx","text-primary","mb-3"],[1,"fs-4","text-gray-500","mb-5"],[1,"card","shadow-sm","w-lg-500px"],[1,"card-body","p-10","p-lg-15"],["class","form w-100",3,"formGroup","ngSubmit",4,"ngIf"],[1,"form","w-100",3,"ngSubmit","formGroup"],["mode","indeterminate",3,"style",4,"ngIf"],[1,"fv-row","mb-8"],[1,"form-label","fs-6","fw-bolder","text-dark","required"],[1,"position-relative"],["type","text","formControlName","invitationCode","maxlength","6","autocomplete","off",1,"form-control","form-control-lg","form-control-solid",3,"placeholder"],[1,"position-absolute","translate-middle-y","end-0","me-3",2,"top","50%"],[1,"fas","fa-key","text-gray-400","fs-4"],["class","fv-plugins-message-container invalid-feedback",4,"ngIf"],[1,"d-grid","mb-10"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[4,"ngIf"],[1,"text-gray-500","text-center","fw-semibold","fs-6"],["routerLink","/dashboard",1,"link-primary","fw-bold"],["mode","indeterminate"],[1,"fv-plugins-message-container","invalid-feedback"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(i,o){1&i&&(e.nrm(0,"p-toast"),e.j41(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"div",5),e.EFF(9),e.nI1(10,"translate"),e.k0s()(),e.j41(11,"div",6)(12,"div",7),e.DNE(13,Ni,26,26,"form",8),e.nI1(14,"async"),e.k0s()()()()()),2&i&&(e.R7$(6),e.JRh(e.bMT(7,3,"JOIN_COMPANY.TITLE")),e.R7$(3),e.JRh(e.bMT(10,5,"JOIN_COMPANY.DESCRIPTION")),e.R7$(4),e.Y8G("ngIf",!e.bMT(14,7,o.isLoading$)))},dependencies:[d.bT,v.Wk,p.qT,p.me,p.BC,p.cb,p.tU,p.j4,p.JD,E.y8,R.z,d.Jj,y.D9],styles:[".flex-root[_ngcontent-%COMP%]{min-height:100vh;background-color:var(--bs-body-bg)}.flex-center[_ngcontent-%COMP%]{align-items:center;justify-content:center}.flex-column-fluid[_ngcontent-%COMP%]{flex:1 0 auto}.card[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 .5rem 1.5rem #0000001a!important}.form-control-solid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .25rem rgba(var(--bs-primary-rgb),.25)}.btn-primary[_ngcontent-%COMP%]{transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 .5rem 1rem rgba(var(--bs-primary-rgb),.15)}.h-40px[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInDown 1s ease-in-out}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .8s ease-in-out .3s both}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}"]})}return n})(),canActivate:[I.R],data:{roles:["client"]}}];let $i=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=e.$C({type:n});static \u0275inj=e.G2t({imports:[v.iI.forChild(Mi),v.iI]})}return n})();var ji=c(8646),Gi=c(5236),Ai=c(185),Di=c(6296),Li=c(1141),Yi=c(320),V=c(2100),Ui=c(8542),Vi=c(8870),de=c(4187),Xi=c(4035),Bi=c(4799),Ji=c(5144);let Hi=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=e.$C({type:n});static \u0275inj=e.G2t({providers:[V.o3,de.Lw,h.bg],imports:[d.MD,$i,p.YN,Bi.F,ji.G,p.X1,V.k_,E.MB,A.u,D.o,de.XZ,Yi.e,R.d,Li.tm,V.k_,Xi.e1,O.kr,Ui.S,G.P,Ai.VG,Di.iV,Vi.W,H.E,Gi.QV,Ji.Mk]})}return n})()},8807:(me,S,c)=>{c.d(S,{v:()=>_});var d=c(4438),v=c(461);let _=(()=>{class e extends v.h{static \u0275fac=(()=>{let C;return function(h){return(C||(C=d.xGo(e)))(h||e)}})();static \u0275cmp=d.VBU({type:e,selectors:[["ChevronRightIcon"]],standalone:!0,features:[d.Vt3,d.aNF],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z","fill","currentColor"]],template:function(E,h){1&E&&(d.qSk(),d.j41(0,"svg",0),d.nrm(1,"path",1),d.k0s()),2&E&&(d.HbH(h.getClassNames()),d.BMQ("aria-label",h.ariaLabel)("aria-hidden",h.ariaHidden)("role",h.role))},encapsulation:2})}return e})()}}]);