"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[7834],{7834:(x,l,i)=>{i.r(l),i.d(l,{ContactMessagesModule:()=>M});var c=i(177),r=i(1626),d=i(2791),t=i(4438);let u=(()=>{class a{http;apiUrl="https://api.foresighta.co/api/admin/setting/contact-us";headers=new r.Lr({"Content-Type":"application/json",Accept:"application/json","Accept-Language":"en"});constructor(e){this.http=e}getContactMessages(e=1){return this.http.get(`${this.apiUrl}?page=${e}`,{headers:this.headers})}updateStatus(e,s){return this.http.put(`${this.apiUrl}/${e}`,{status:s},{headers:this.headers})}static \u0275fac=function(s){return new(s||a)(t.KVO(r.Qq))};static \u0275prov=t.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();const g=a=>({disabled:a}),f=()=>[],m=a=>({active:a});function h(a,o){1&a&&(t.j41(0,"div",8)(1,"div",9)(2,"span",10),t.EFF(3,"Loading..."),t.k0s()()())}function F(a,o){1&a&&(t.j41(0,"div",11),t.EFF(1," No contact messages found. "),t.k0s())}function C(a,o){if(1&a&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"div",19)(5,"div",20)(6,"span",21),t.EFF(7),t.k0s()()()(),t.j41(8,"td")(9,"span",22),t.EFF(10),t.k0s()(),t.j41(11,"td")(12,"span",22),t.EFF(13),t.k0s()(),t.j41(14,"td")(15,"span",22),t.EFF(16),t.k0s()(),t.j41(17,"td")(18,"button",23),t.EFF(19," View Message "),t.k0s(),t.j41(20,"div",24)(21,"div",25),t.EFF(22),t.k0s()()()()),2&a){const e=o.$implicit;t.R7$(2),t.JRh(e.id),t.R7$(5),t.Lme("",e.first_name," ",e.last_name,""),t.R7$(3),t.JRh(e.email),t.R7$(3),t.JRh(e.phone),t.R7$(3),t.JRh(e.created_at),t.R7$(2),t.BMQ("data-bs-target","#message-"+e.id),t.R7$(2),t.Y8G("id","message-"+e.id),t.R7$(2),t.SpI(" ",e.message," ")}}function v(a,o){if(1&a&&(t.j41(0,"div",12)(1,"table",13)(2,"thead")(3,"tr",14)(4,"th"),t.EFF(5,"ID"),t.k0s(),t.j41(6,"th",15),t.EFF(7,"Name"),t.k0s(),t.j41(8,"th",16),t.EFF(9,"Email"),t.k0s(),t.j41(10,"th",16),t.EFF(11,"Phone"),t.k0s(),t.j41(12,"th",15),t.EFF(13,"Date"),t.k0s(),t.j41(14,"th",17),t.EFF(15,"Message"),t.k0s()()(),t.j41(16,"tbody"),t.DNE(17,C,23,9,"tr",18),t.k0s()()()),2&a){const e=t.XpG();t.R7$(17),t.Y8G("ngForOf",e.contactMessages)}}function j(a,o){if(1&a){const e=t.RV6();t.j41(0,"li",29)(1,"a",30),t.bIt("click",function(){const n=t.eBV(e).index,R=t.XpG(2);return t.Njj(R.onPageChange(n+1))}),t.EFF(2),t.k0s()()}if(2&a){const e=o.index,s=t.XpG(2);t.Y8G("ngClass",t.eq3(2,m,s.currentPage===e+1)),t.R7$(2),t.JRh(e+1)}}function _(a,o){if(1&a){const e=t.RV6();t.j41(0,"div",26)(1,"nav",27)(2,"ul",28)(3,"li",29)(4,"a",30),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onPageChange(n.currentPage-1))}),t.EFF(5,"Previous"),t.k0s()(),t.DNE(6,j,3,4,"li",31),t.j41(7,"li",29)(8,"a",30),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onPageChange(n.currentPage+1))}),t.EFF(9,"Next"),t.k0s()()()()()}if(2&a){const e=t.XpG();t.R7$(3),t.Y8G("ngClass",t.eq3(3,g,1===e.currentPage)),t.R7$(3),t.Y8G("ngForOf",t.lJ4(5,f).constructor(e.totalPages)),t.R7$(),t.Y8G("ngClass",t.eq3(6,g,e.currentPage===e.totalPages))}}let p=(()=>{class a{contactMessageService;contactMessages=[];loading=!0;currentPage=1;totalPages=1;totalItems=0;constructor(e){this.contactMessageService=e}ngOnInit(){this.loadContactMessages()}loadContactMessages(e=1){this.loading=!0,this.contactMessageService.getContactMessages(e).subscribe({next:s=>{this.contactMessages=s.data,this.currentPage=s.meta.current_page,this.totalPages=s.meta.last_page,this.totalItems=s.meta.total,this.loading=!1},error:s=>{console.error("Error fetching contact messages:",s),this.loading=!1}})}onPageChange(e){this.loadContactMessages(e)}markAsRead(e){this.contactMessageService.updateStatus(e,"read").subscribe({next:()=>{const s=this.contactMessages.find(n=>n.id===e);s&&(s.status="read")},error:s=>console.error("Error updating status:",s)})}static \u0275fac=function(s){return new(s||a)(t.rXU(u))};static \u0275cmp=t.VBU({type:a,selectors:[["app-contact-list"]],standalone:!0,features:[t.aNF],decls:9,vars:4,consts:[[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body","py-3"],["class","d-flex justify-content-center",4,"ngIf"],["class","alert alert-info",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","d-flex justify-content-center mt-3",4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","text-info"],[1,"visually-hidden"],[1,"alert","alert-info"],[1,"table-responsive"],[1,"table","table-row-dashed","table-row-gray-300","align-middle","gs-0","gy-4"],[1,"fw-bolder","text-muted"],[1,"min-w-90px"],[1,"min-w-100px"],[1,"min-w-300px"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"d-flex","justify-content-start","flex-column"],[1,"text-dark","fw-bolder","fs-6"],[1,"text-muted","fw-bold","text-muted","d-block","fs-7"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"btn","btn-sm","btn-light-info"],[1,"collapse",3,"id"],[1,"card","card-body","mt-2"],[1,"d-flex","justify-content-center","mt-3"],["aria-label","Page navigation"],[1,"pagination"],[1,"page-item",3,"ngClass"],["href","javascript:void(0)",1,"page-link",3,"click"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"]],template:function(s,n){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"h4",2),t.EFF(3,"Contact Messages"),t.k0s()(),t.j41(4,"div",3),t.DNE(5,h,4,0,"div",4)(6,F,2,0,"div",5)(7,v,18,1,"div",6)(8,_,10,8,"div",7),t.k0s()()),2&s&&(t.R7$(5),t.Y8G("ngIf",n.loading),t.R7$(),t.Y8G("ngIf",!n.loading&&0===n.contactMessages.length),t.R7$(),t.Y8G("ngIf",!n.loading&&n.contactMessages.length>0),t.R7$(),t.Y8G("ngIf",n.totalPages>1))},dependencies:[c.MD,c.YU,c.Sq,c.bT]})}return a})();const k=[{path:"",redirectTo:"contact-list",pathMatch:"full"},{path:"contact-list",component:p}];let b=(()=>{class a{static \u0275fac=function(s){return new(s||a)};static \u0275mod=t.$C({type:a});static \u0275inj=t.G2t({imports:[d.iI.forChild(k),d.iI]})}return a})(),M=(()=>{class a{static \u0275fac=function(s){return new(s||a)};static \u0275mod=t.$C({type:a});static \u0275inj=t.G2t({imports:[c.MD,b,r.q1,p]})}return a})()}}]);