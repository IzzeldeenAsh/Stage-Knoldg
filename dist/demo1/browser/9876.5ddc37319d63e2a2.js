"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[9876],{9876:(G,_,s)=>{s.r(_),s.d(_,{InvoicePageModule:()=>V});var g=s(177),h=s(2791),x=s(5098),k=s(7468),m=s(9437),u=s(7673),t=s(4438),y=s(2479),M=s(7112);function w(i,c){if(1&i&&(t.j41(0,"tr")(1,"td",33),t.EFF(2),t.k0s(),t.j41(3,"td",34),t.EFF(4),t.k0s()()),2&i){const n=c.$implicit;t.R7$(2),t.SpI(" \xa0\xa0\xa0\xa0\u2022 ",n.label," "),t.R7$(2),t.JRh(n.value)}}function F(i,c){if(1&i&&(t.qex(0),t.j41(1,"tr")(2,"td",30),t.EFF(3),t.k0s(),t.j41(4,"td",31),t.EFF(5),t.k0s()(),t.DNE(6,w,5,2,"tr",32),t.bVm()),2&i){const n=t.XpG();t.R7$(3),t.JRh(n.meetingTitle),t.R7$(2),t.SpI("$",n.invoiceData.amount.toFixed(2),""),t.R7$(),t.Y8G("ngForOf",n.meetingDetails)}}function D(i,c){if(1&i&&(t.j41(0,"tr")(1,"td",33),t.EFF(2),t.k0s(),t.j41(3,"td",34),t.EFF(4),t.k0s()()),2&i){const n=c.$implicit;t.R7$(2),t.SpI(" \xa0\xa0\xa0\xa0\u2022 \u{1f4c4} ",n.file_name," "),t.R7$(2),t.SpI("$",n.price.toFixed(2),"")}}function E(i,c){if(1&i&&(t.qex(0),t.j41(1,"tr")(2,"td",35),t.EFF(3),t.k0s(),t.nrm(4,"td",31),t.k0s(),t.DNE(5,D,5,2,"tr",32),t.bVm()),2&i){const n=c.$implicit;t.R7$(3),t.JRh(n.title),t.R7$(2),t.Y8G("ngForOf",n.documents)}}function I(i,c){if(1&i&&(t.qex(0),t.DNE(1,E,6,2,"ng-container",32),t.bVm()),2&i){const n=t.XpG();t.R7$(),t.Y8G("ngForOf",n.knowledgePackages)}}let j=(()=>{class i extends x.${invoiceData;invoiceDate="";serviceRows=[];subtotal=0;isMeetingOrder=!1;meetingTitle="";meetingDetails=[];knowledgePackages=[];constructor(n){super(n)}ngOnInit(){this.processInvoiceData()}ngOnDestroy(){}handleKeyboardEvent(n){(n.ctrlKey||n.metaKey)&&"p"===n.key&&(n.preventDefault(),this.printOrSaveAsPDF())}processInvoiceData(){if(this.invoiceData)if(this.invoiceDate=new Date(this.invoiceData.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"}),this.isMeetingOrder="meeting_service"===this.invoiceData.service,this.serviceRows=[],this.subtotal=this.invoiceData.amount,this.isMeetingOrder){const n=this.invoiceData.orderable;if(n?.meeting_booking){const e=n.meeting_booking;this.meetingTitle=`Meeting: ${e.title}`,this.meetingDetails=[{label:"\u{1f4c5} Date: "+e.date,value:"-"},{label:"\u23f0 Time: "+e.start_time+" - "+e.end_time,value:"-"}],this.serviceRows.push({name:`Meeting: ${e.title} - ${e.date} (${e.start_time} - ${e.end_time})`,amount:this.invoiceData.amount})}}else{const n=new Map;this.subtotal=0;const e=this.invoiceData.orderable?.knowledge?.[0]?.title||"Knowledge Package";if(this.invoiceData.orderable?.knowledge_documents){n.has(e)||n.set(e,{documents:[],totalPrice:0});const o=n.get(e);this.invoiceData.orderable.knowledge_documents.forEach(p=>{p.forEach(l=>{o.documents.push(l),o.totalPrice+=l.price,this.subtotal+=l.price,this.serviceRows.push({name:l.file_name,amount:l.price})})})}this.knowledgePackages=Array.from(n.entries()).map(([o,p])=>({title:o,documents:p.documents,totalPrice:p.totalPrice}))}}printOrSaveAsPDF(){try{this.addPrintStyles(),window.focus(),setTimeout(()=>{window.print?window.print():document.execCommand("print",!1,void 0)},250),this.showInfo("ar"===this.lang?"\u0637\u0628\u0627\u0639\u0629 \u0623\u0648 \u062d\u0641\u0638 \u0643\u0640 PDF":"Print or Save PDF","ar"===this.lang?'\u0627\u0633\u062a\u062e\u062f\u0645 \u0646\u0627\u0641\u0630\u0629 \u0627\u0644\u0637\u0628\u0627\u0639\u0629 \u0644\u0644\u0637\u0628\u0627\u0639\u0629 \u0623\u0648 \u0627\u062e\u062a\u0631 "\u062d\u0641\u0638 \u0643\u0640 PDF"':'Use the print dialog to print or select "Save as PDF"')}catch(n){console.error("Print error:",n),this.showError("ar"===this.lang?"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0637\u0628\u0627\u0639\u0629":"Print Error","ar"===this.lang?"\u0641\u0634\u0644 \u0641\u064a \u0641\u062a\u062d \u0646\u0627\u0641\u0630\u0629 \u0627\u0644\u0637\u0628\u0627\u0639\u0629":"Failed to open print dialog")}}addPrintStyles(){const n=document.getElementById("invoice-print-styles");n&&n.remove();const e=document.createElement("style");e.id="invoice-print-styles",e.type="text/css",e.innerHTML="\n      @page {\n        margin: 0 !important;\n        padding: 0 !important;\n        size: A4 !important;\n      }\n\n      @media print {\n        * {\n          -webkit-print-color-adjust: exact !important;\n          print-color-adjust: exact !important;\n        }\n\n        /* Hide navigation and layout elements */\n        .kt_header,\n        .kt_toolbar,\n        .kt_aside,\n        .kt_footer,\n        .kt_app_header,\n        .kt_app_toolbar,\n        .kt_app_aside,\n        .kt_app_footer,\n        .primeng-header,\n        .p-toolbar,\n        .navbar,\n        .toolbar,\n        .sidebar,\n        .menu,\n        .navigation,\n        .app-header,\n        .app-toolbar,\n        .app-sidebar,\n        .app-nav,\n        .breadcrumb,\n        .page-header,\n        .no-print,\n        nav,\n        header:not(.header-cell) {\n          display: none !important;\n        }\n\n        /* Remove browser default margins and padding */\n        html, body {\n          margin: 0 !important;\n          padding: 0 !important;\n          background: white !important;\n          height: 100% !important;\n          overflow: visible !important;\n          font-family: Arial, Helvetica, sans-serif !important;\n        }\n\n        /* Ensure Angular app root is visible */\n        app-root {\n          display: block !important;\n          width: 100% !important;\n          height: auto !important;\n          margin: 0 !important;\n          padding: 0 !important;\n        }\n\n        /* Ensure router outlet content is visible */\n        router-outlet + * {\n          display: block !important;\n          margin: 0 !important;\n          padding: 0 !important;\n        }\n\n        /* Ensure invoice page component is visible */\n        app-invoice-page {\n          display: block !important;\n          width: 100% !important;\n          height: auto !important;\n          margin: 0 !important;\n          padding: 0 !important;\n        }\n\n        /* Ensure invoice viewer is visible */\n        app-invoice-viewer {\n          display: block !important;\n          width: 100% !important;\n          height: auto !important;\n          margin: 0 !important;\n          padding: 0 !important;\n        }\n\n        /* Invoice container styling */\n        .invoice-viewer-container {\n          display: flex !important;\n          justify-content: center !important;\n          align-items: flex-start !important;\n          padding: 0 !important;\n          margin: 0 !important;\n          background: white !important;\n          width: 100% !important;\n          height: auto !important;\n          min-height: 100vh !important;\n        }\n\n        .page, .invoice-container {\n          display: flex !important;\n          flex-direction: column !important;\n          width: 100% !important;\n          height: auto !important;\n          min-height: 100vh !important;\n          background: white !important;\n          box-shadow: none !important;\n          border-radius: 0 !important;\n          margin: 0 !important;\n          padding: 0 !important;\n          overflow: visible !important;\n        }\n\n        /* Prevent page breaks within important sections */\n        .layout,\n        .header-cell,\n        .content-cell,\n        .logo-table,\n        .billing-table,\n        .services,\n        .totals,\n        .footer-invoice {\n          page-break-inside: avoid !important;\n        }\n      }\n    ",document.head.appendChild(e)}getInvoiceStyles(){return"\n      * {\n        margin: 0;\n        padding: 0;\n        box-sizing: border-box;\n      }\n\n      body {\n        font-family: Arial, Helvetica, sans-serif;\n        background: white;\n      }\n\n      .invoice-container {\n        background: white;\n        width: 190mm;\n        height: 277mm;\n        margin: 0 auto;\n        position: relative;\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n      }\n\n      .header {\n        background: linear-gradient(90deg, #042043 0%, #57B6C7 100%);\n        padding: 25px;\n        position: relative;\n        overflow: hidden;\n      }\n\n      .header h1 {\n        color: white;\n        font-size: 36px;\n        text-align: center;\n        font-weight: 600;\n        position: relative;\n        z-index: 1;\n        margin: 0;\n      }\n\n      .content {\n        padding: 40px;\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n      }\n\n      .logo-section {\n        display: flex;\n        justify-content: space-between;\n        align-items: flex-start;\n        margin-bottom: 40px;\n      }\n\n      .logo {\n        width: 160px;\n      }\n\n      .invoice-info {\n        text-align: right;\n        color: #666;\n        font-size: 13px;\n        line-height: 1.6;\n      }\n\n      .billing-section {\n        display: flex;\n        justify-content: space-between;\n        margin-bottom: 40px;\n        gap: 60px;\n      }\n\n      .from-section, .bill-to-section {\n        flex: 1;\n      }\n\n      .section-title {\n        font-size: 18px;\n        font-weight: 600;\n        color: #042043;\n        margin-bottom: 15px;\n      }\n\n      .from-section p, .bill-to-section p {\n        color: #333;\n        line-height: 1.6;\n        font-size: 14px;\n      }\n\n      .bill-to-section .label {\n        display: inline-block;\n        font-weight: 600;\n        color: #042043;\n        min-width: 80px;\n      }\n\n      .services-table {\n        margin-bottom: 40px;\n      }\n\n      .table-header {\n        display: flex;\n        justify-content: space-between;\n        padding: 15px 0;\n        border-bottom: 2px solid #e0e0e0;\n        margin-bottom: 20px;\n      }\n\n      .table-header h3 {\n        font-size: 18px;\n        font-weight: 600;\n        color: #042043;\n      }\n\n      .service-row {\n        display: flex;\n        justify-content: space-between;\n        padding: 15px 0;\n        border-bottom: 1px solid #f0f0f0;\n      }\n\n      .service-name {\n        color: #333;\n        font-size: 15px;\n      }\n\n      .service-amount {\n        color: #333;\n        font-size: 15px;\n      }\n\n      .totals-section {\n        margin-top: 40px;\n        margin-bottom: 40px;\n        display: flex;\n        flex-direction: column;\n        align-items: flex-end;\n        gap: 15px;\n      }\n\n      .subtotal, .total {\n        display: flex;\n        align-items: center;\n        gap: 30px;\n        font-size: 18px;\n      }\n\n      .subtotal {\n        color: #666;\n      }\n\n      .total {\n        font-weight: 600;\n        color: #042043;\n      }\n\n      .total .amount {\n        background: linear-gradient(90deg, #042043 0%, #57B6C7 100%);\n        color: white;\n        padding: 10px 20px;\n        border-radius: 4px;\n        min-width: 120px;\n        text-align: center;\n      }\n\n      .footer {\n        padding: 30px;\n        text-align: center;\n        color: #999;\n        font-size: 14px;\n        border-top: 1px solid #f0f0f0;\n      }\n\n      .bg {\n        background-image: url(https://res.cloudinary.com/dsiku9ipv/image/upload/v1758005640/invoice_template_knoldg_0_1_naflvj.png);\n        position: absolute;\n        top: 130px;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        background-repeat: no-repeat;\n        z-index: 10;\n        background-position: center;\n        height: 100%;\n        width: 680px;\n        opacity: 0.1;\n      }\n    "}getDisplayName(){if(!this.invoiceData?.userProfile)return"Client Name";const n=this.invoiceData.userProfile;return n.first_name&&n.last_name?`${n.first_name} ${n.last_name}`:n.name?n.name:"Client Name"}getDisplayAddress(){return this.invoiceData?.userProfile||this.invoiceData?.billingAddress?this.invoiceData.billingAddress?this.formatBillingAddress(this.invoiceData.billingAddress):this.invoiceData.userProfile?.country?this.invoiceData.userProfile.country:"N/A":"N/A"}formatBillingAddress(n){if(!n)return"";if("string"==typeof n)return n;const e=[];return n.line1&&e.push(n.line1),n.line2&&e.push(n.line2),n.city&&e.push(n.city),n.state&&e.push(n.state),n.postal_code&&e.push(n.postal_code),n.country&&e.push(n.country),e.filter(o=>o).join(", ")}static \u0275fac=function(e){return new(e||i)(t.rXU(t.zZn))};static \u0275cmp=t.VBU({type:i,selectors:[["app-invoice-viewer"]],hostBindings:function(e,o){1&e&&t.bIt("keydown",function(l){return o.handleKeyboardEvent(l)},!1,t.tSv)},inputs:{invoiceData:"invoiceData"},features:[t.Vt3],decls:74,vars:10,consts:[[1,"invoice-viewer-container","d-flex","justify-content-center"],[2,"max-width","190mm","width","190mm","margin","auto"],[1,"no-print","mb-3","d-flex","justify-content-center","mx-auto"],["type","button",1,"btn","btn-info","btn-sm","px-4",3,"click"],[1,"ki-outline","ki-printer","fs-6","me-2"],["id","invoice-content",1,"page"],[1,"bg"],["cellpadding","0","cellspacing","0",1,"layout"],[1,"header-cell",2,"height","48px"],[1,"header-title"],[1,"content-cell"],[1,"logo-table"],[1,"logo-left"],["src","https://res.cloudinary.com/dsiku9ipv/image/upload/v1758006879/invoice_template_knoldg_0_2_aeurma.png","alt","KNOLDG Logo",1,"logo-img"],[1,"logo-right"],[2,"margin-top","6px"],["cellpadding","0","cellspacing","0",1,"billing-table"],[2,"width","70%","padding-right","10px"],[1,"section-title"],[2,"width","30%","text-align","left","padding-left","10px"],[2,"margin-top","6px","text-align","left"],["cellpadding","0","cellspacing","0",1,"services"],[2,"width","70%"],[2,"width","30%","text-align","right"],[4,"ngIf"],["cellpadding","0","cellspacing","0",1,"totals"],[1,"label",2,"font-weight","600","color","#2C74B3"],[1,"value"],[1,"total-badge"],[1,"footer-invoice"],[1,"meeting-item",2,"padding-top","8px"],[1,"amount",2,"padding-top","8px"],[4,"ngFor","ngForOf"],[1,"sub-item"],[1,"amount","sub-item-amount"],[1,"knowledge-item",2,"padding-top","8px"]],template:function(e,o){1&e&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t.bIt("click",function(){return o.printOrSaveAsPDF()}),t.nrm(4,"i",4),t.EFF(5),t.k0s()()(),t.j41(6,"div",5),t.nrm(7,"div",6),t.j41(8,"table",7)(9,"tr")(10,"td",8)(11,"div",9),t.EFF(12,"INVOICE"),t.k0s()()(),t.j41(13,"tr")(14,"td",10)(15,"table",11)(16,"tr")(17,"td",12),t.nrm(18,"img",13),t.k0s(),t.j41(19,"td",14)(20,"div"),t.EFF(21),t.k0s(),t.j41(22,"div",15),t.EFF(23),t.k0s()()()(),t.j41(24,"table",16)(25,"tr")(26,"td",17)(27,"div",18),t.EFF(28,"From:"),t.k0s(),t.j41(29,"div",15),t.EFF(30," Foresighta Systems Consulting FZ-LLC"),t.nrm(31,"br"),t.EFF(32," Compass Building, Al Shohada Road"),t.nrm(33,"br"),t.EFF(34," AL Hamra Industrial Zone-FZ"),t.nrm(35,"br"),t.EFF(36," Ras Al Khaimah, United Arab Emirates"),t.nrm(37,"br"),t.EFF(38," info@knoldg.com"),t.nrm(39,"br"),t.k0s()(),t.j41(40,"td",19)(41,"div",18),t.EFF(42,"Bill To:"),t.k0s(),t.j41(43,"div",20)(44,"strong"),t.EFF(45,"Name:"),t.k0s(),t.EFF(46),t.nrm(47,"br"),t.j41(48,"strong"),t.EFF(49,"Email:"),t.k0s(),t.EFF(50),t.nrm(51,"br"),t.j41(52,"strong"),t.EFF(53,"Address:"),t.k0s(),t.EFF(54),t.k0s()()()(),t.j41(55,"table",21)(56,"thead")(57,"tr")(58,"th",22),t.EFF(59),t.k0s(),t.j41(60,"th",23),t.EFF(61,"Amount"),t.k0s()()(),t.j41(62,"tbody"),t.DNE(63,F,7,3,"ng-container",24)(64,I,2,1,"ng-container",24),t.k0s()(),t.j41(65,"table",25)(66,"tr")(67,"td",26),t.EFF(68,"Total:"),t.k0s(),t.j41(69,"td",27)(70,"span",28),t.EFF(71),t.k0s()()()()()()(),t.j41(72,"div",29),t.EFF(73," Thank you for your business \xa9 2025 knoldg | info@knoldg.com "),t.k0s()()()),2&e&&(t.R7$(5),t.SpI(" ","ar"===o.lang?"\u0637\u0628\u0627\u0639\u0629 \u0623\u0648 \u062d\u0641\u0638 \u0643\u0640 PDF":"Print or Save PDF"," "),t.R7$(16),t.JRh(o.invoiceData.invoice_no||o.invoiceData.order_no),t.R7$(2),t.JRh(o.invoiceDate),t.R7$(23),t.JRh(o.getDisplayName()),t.R7$(4),t.JRh((null==o.invoiceData.userProfile?null:o.invoiceData.userProfile.email)||"client@email.com"),t.R7$(4),t.SpI(" ",o.getDisplayAddress()," "),t.R7$(5),t.JRh(o.isMeetingOrder?"Meeting Service":"Knowledge"),t.R7$(4),t.Y8G("ngIf",o.isMeetingOrder),t.R7$(),t.Y8G("ngIf",!o.isMeetingOrder),t.R7$(7),t.SpI("$",o.invoiceData.amount.toFixed(2),""))},dependencies:[g.Sq,g.bT],styles:[".invoice-viewer-container[_ngcontent-%COMP%]{padding:3rem 2rem 2rem;background:#f5f8fa;min-height:94vh;position:relative;display:flex;flex-direction:column;max-height:94vh}.page[_ngcontent-%COMP%]{width:190mm;height:277mm;margin:0 auto;position:relative;background:#fff;overflow:hidden;box-shadow:0 10px 30px #0000001a;border-radius:8px}.layout[_ngcontent-%COMP%]{width:100%;height:100%;border-collapse:collapse;font-size:13px;position:relative;z-index:1}.header-cell[_ngcontent-%COMP%]{background-color:#2c74b3;background-image:linear-gradient(90deg,#2c74b3,#57b6c7);color:#fff;text-align:center;padding:14px 10px}.header-title[_ngcontent-%COMP%]{font-size:32px;font-weight:600;margin:0}.content-cell[_ngcontent-%COMP%]{padding:25px;vertical-align:top}.logo-table[_ngcontent-%COMP%]{margin-top:16px;width:100%;border-collapse:collapse}.logo-left[_ngcontent-%COMP%]{width:60%;vertical-align:top}.logo-right[_ngcontent-%COMP%]{width:40%;text-align:right;vertical-align:top;font-size:13px;color:#666}.logo-img[_ngcontent-%COMP%]{width:150px;display:block;margin-bottom:6px}.billing-table[_ngcontent-%COMP%]{width:100%;margin-top:15px;border-collapse:collapse}.billing-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top;padding:6px 0;font-size:13px;color:#333}.section-title[_ngcontent-%COMP%]{color:#2c74b3;font-weight:700;margin-bottom:6px;display:inline-block;font-size:14px}.services[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:50px}.services[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .services[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px;font-size:13px}.services[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;border-bottom:2px solid #2C74B3}.services[_ngcontent-%COMP%]   td.amount[_ngcontent-%COMP%]{text-align:right}.services[_ngcontent-%COMP%]   td.amount.sub-item-amount[_ngcontent-%COMP%]{background-color:#f8f9fa}.sub-item[_ngcontent-%COMP%]{padding-left:40px;font-size:12px;color:#666;padding-top:2px;padding-bottom:6px;background-color:#f8f9fa}.knowledge-item[_ngcontent-%COMP%], .meeting-item[_ngcontent-%COMP%]{font-weight:600;color:#2c74b3}.totals[_ngcontent-%COMP%]{width:auto;margin-left:auto;border-collapse:collapse;margin-top:12px}.totals[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px 8px;font-size:14px;text-align:right}.totals[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;white-space:nowrap}.totals[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:#2c74b3}.totals[_ngcontent-%COMP%]   .total-badge[_ngcontent-%COMP%]{background:#2c74b3;color:#fff;padding:6px 12px;border-radius:4px;display:inline-block;min-width:80px;text-align:center}.footer-invoice[_ngcontent-%COMP%]{position:absolute;bottom:14px;text-align:center;font-size:12px;color:#999;padding-top:8px;left:50%;transform:translate(-50%,-50%)}.bg[_ngcontent-%COMP%]{background-image:url(https://res.cloudinary.com/dsiku9ipv/image/upload/v1758005640/invoice_template_knoldg_0_1_naflvj.png);position:absolute;top:137px;left:50%;transform:translate(-50%,-50%);background-repeat:no-repeat;z-index:10;background-position:center;height:100%;width:750px;opacity:.04}@media print{.no-print[_ngcontent-%COMP%]{display:none!important}}.btn[_ngcontent-%COMP%]{transition:all .3s ease}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}@media (max-width: 992px){.invoice-viewer-container[_ngcontent-%COMP%]{padding:1rem}.page[_ngcontent-%COMP%]{width:100%;height:auto;max-height:none;transform:scale(.8);transform-origin:top center}}@media (max-width: 768px){.page[_ngcontent-%COMP%]{transform:scale(.6)}.no-print[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:14px;padding:8px 16px}}@page{margin:0!important;padding:0!important;size:A4!important}@media print{*[_ngcontent-%COMP%]{-webkit-print-color-adjust:exact!important;print-color-adjust:exact!important}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0!important;padding:0!important;background:#fff!important;font-family:Arial,Helvetica,sans-serif!important;height:100%!important;overflow:visible!important}.invoice-viewer-container[_ngcontent-%COMP%]{background:#fff!important;padding:0!important;margin:0!important;min-height:auto!important;position:static!important;width:100%!important;height:auto!important}.page[_ngcontent-%COMP%]{width:100%!important;height:auto!important;min-height:100vh!important;max-height:none!important;box-shadow:none!important;border-radius:0!important;margin:0!important;padding:0!important;transform:none!important;page-break-after:avoid!important;page-break-inside:avoid!important;position:relative!important;overflow:visible!important;background:#fff!important}.header[_ngcontent-%COMP%]{background:linear-gradient(90deg,#042043,#57b6c7)!important;padding:25px!important;position:relative!important;overflow:hidden!important;page-break-inside:avoid!important}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff!important;font-size:36px!important;text-align:center!important;font-weight:600!important;margin:0!important}.content[_ngcontent-%COMP%]{padding:40px!important;flex:1!important;display:flex!important;flex-direction:column!important;justify-content:space-between!important}.total[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{background:linear-gradient(90deg,#042043,#57b6c7)!important;color:#fff!important;padding:10px 20px!important;border-radius:4px!important;min-width:120px!important;text-align:center!important}.bg[_ngcontent-%COMP%]{background-image:url(https://res.cloudinary.com/dsiku9ipv/image/upload/v1758005640/invoice_template_knoldg_0_1_naflvj.png)!important;position:absolute!important;top:130px!important;left:50%!important;transform:translate(-50%,-50%)!important;background-repeat:no-repeat!important;z-index:10!important;background-position:center!important;height:100%!important;width:680px!important;opacity:.1!important}.no-print[_ngcontent-%COMP%]{display:none!important}.kt_header[_ngcontent-%COMP%], .kt_toolbar[_ngcontent-%COMP%], .kt_aside[_ngcontent-%COMP%], .kt_footer[_ngcontent-%COMP%], .primeng-header[_ngcontent-%COMP%], .p-toolbar[_ngcontent-%COMP%], .navbar[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], header[_ngcontent-%COMP%], .header[_ngcontent-%COMP%], .toolbar[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%], .menu[_ngcontent-%COMP%], .navigation[_ngcontent-%COMP%], .app-header[_ngcontent-%COMP%], .app-toolbar[_ngcontent-%COMP%], .app-sidebar[_ngcontent-%COMP%], .app-nav[_ngcontent-%COMP%], .breadcrumb[_ngcontent-%COMP%], .page-header[_ngcontent-%COMP%], .kt_app_header[_ngcontent-%COMP%], .kt_app_toolbar[_ngcontent-%COMP%], .kt_app_aside[_ngcontent-%COMP%], .kt_app_footer[_ngcontent-%COMP%]{display:none!important}.logo-section[_ngcontent-%COMP%], .billing-section[_ngcontent-%COMP%], .services-table[_ngcontent-%COMP%], .totals-section[_ngcontent-%COMP%], .invoice-footer[_ngcontent-%COMP%], .service-row[_ngcontent-%COMP%]{page-break-inside:avoid!important}}"]})}return i})();function R(i,c){if(1&i&&(t.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"span",7),t.EFF(4),t.k0s()(),t.j41(5,"div",8),t.EFF(6),t.k0s()()()),2&i){const n=t.XpG();t.R7$(4),t.JRh("ar"===n.lang?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...":"Loading..."),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629...":"Loading invoice..."," ")}}function $(i,c){if(1&i){const n=t.RV6();t.j41(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"div",14)(6,"div",15),t.nrm(7,"i",16),t.k0s()(),t.j41(8,"h5",17),t.EFF(9),t.k0s(),t.j41(10,"p",18),t.EFF(11),t.k0s(),t.j41(12,"button",19),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.goBack())}),t.nrm(13,"i",20),t.EFF(14),t.k0s()()()()()()}if(2&i){const n=t.XpG();t.R7$(9),t.JRh("ar"===n.lang?"\u062e\u0637\u0623":"Error"),t.R7$(2),t.JRh(n.error),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0627\u0644\u0639\u0648\u062f\u0629 \u0625\u0644\u0649 \u0627\u0644\u0637\u0644\u0628\u0627\u062a":"Back to Orders"," ")}}function S(i,c){if(1&i){const n=t.RV6();t.j41(0,"div",21)(1,"div",22)(2,"div",23)(3,"button",24),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.goBack())}),t.nrm(4,"i",20),t.EFF(5),t.k0s()()()()}if(2&i){const n=t.XpG();t.R7$(5),t.SpI(" ","ar"===n.lang?"\u0627\u0644\u0639\u0648\u062f\u0629 \u0625\u0644\u0649 \u0627\u0644\u0637\u0644\u0628\u0627\u062a":"Back to Orders"," ")}}function A(i,c){if(1&i&&t.nrm(0,"app-invoice-viewer",25),2&i){const n=t.XpG();t.Y8G("invoiceData",n.invoiceData)}}let z=(()=>{class i extends x.${route;router;myOrdersService;profileService;invoiceData=null;isLoading=!0;error=null;constructor(n,e,o,p,l){super(n),this.route=e,this.router=o,this.myOrdersService=p,this.profileService=l}ngOnInit(){const n=this.route.snapshot.params.orderNo;n?this.loadInvoiceData(n):(this.error="ar"===this.lang?"\u0631\u0642\u0645 \u0627\u0644\u0637\u0644\u0628 \u0645\u0637\u0644\u0648\u0628":"Order number is required",this.isLoading=!1)}loadInvoiceData(n){this.isLoading=!0,this.error=null,this.profileService.getProfile().subscribe({next:e=>{const l=(e?.roles||[]).includes("company")?"company":"insighter";(0,k.p)({orders:this.myOrdersService.getOrders(1).pipe((0,m.W)(()=>(0,u.of)({data:[],meta:{last_page:1}}))),meetingOrders:this.myOrdersService.getMeetingOrders(1).pipe((0,m.W)(()=>(0,u.of)({data:[],meta:{last_page:1}}))),salesKnowledgeOrders:this.myOrdersService.getSalesKnowledgeOrders(1,l).pipe((0,m.W)(()=>(0,u.of)({data:[],meta:{last_page:1}}))),salesMeetingOrders:this.myOrdersService.getSalesMeetingOrders(1,l).pipe((0,m.W)(()=>(0,u.of)({data:[],meta:{last_page:1}})))}).subscribe({next:({orders:f,meetingOrders:C,salesKnowledgeOrders:P,salesMeetingOrders:O})=>{let a=f.data.find(r=>r.order_no===n||r.invoice_no===n);if(a||(a=C.data.find(r=>r.order_no===n||r.invoice_no===n)),a||(a=P.data.find(r=>r.order_no===n||r.invoice_no===n)),a||(a=O.data.find(r=>r.order_no===n||r.invoice_no===n)),a){const r=f.data.some(d=>d.uuid===a.uuid)||C.data.some(d=>d.uuid===a.uuid),B=P.data.some(d=>d.uuid===a.uuid)||O.data.some(d=>d.uuid===a.uuid);let b,v=null;if(r)b={first_name:e?.first_name||"",last_name:e?.last_name||"",name:e?.name||"",email:e?.email||"",country:e?.country||""},v=a.payment?.billing_address||e?.country||"";else if(B){const d="object"==typeof a.payment?.billing_address?a.payment.billing_address:null;b={first_name:a.user?.first_name||"",last_name:a.user?.last_name||"",name:a.user?.name||"",email:a.user?.email||"",country:d?.country||a.user?.country||""},v=a.payment?.billing_address||""}this.invoiceData={order_no:a.order_no,invoice_no:a.invoice_no,date:a.date,amount:a.amount,service:a.service,orderable:a.orderable,userProfile:b,billingAddress:v}}else this.error="ar"===this.lang?"\u0627\u0644\u0637\u0644\u0628 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f":"Order not found";this.isLoading=!1},error:f=>{console.error("Error loading invoice data:",f),this.error="ar"===this.lang?"\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629":"Error loading invoice data",this.isLoading=!1}})},error:e=>{console.error("Error loading user profile:",e),this.error="ar"===this.lang?"\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645":"Error loading user profile",this.isLoading=!1}})}goBack(){this.router.navigate(["/app/insighter-dashboard/my-orders"])}static \u0275fac=function(e){return new(e||i)(t.rXU(t.zZn),t.rXU(h.nX),t.rXU(h.Ix),t.rXU(y.B),t.rXU(M.p))};static \u0275cmp=t.VBU({type:i,selectors:[["app-invoice-page"]],features:[t.Vt3],decls:4,vars:4,consts:[["class","d-flex justify-content-center align-items-center","style","min-height: 70vh;",4,"ngIf"],["class","container-fluid py-5",4,"ngIf"],["class","no-print container-fluid py-3",4,"ngIf"],[3,"invoiceData",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center",2,"min-height","70vh"],[1,"text-center"],["role","status",1,"spinner-border","text-info",2,"width","4rem","height","4rem"],[1,"visually-hidden"],[1,"mt-3","text-muted"],[1,"container-fluid","py-5"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"card"],[1,"card-body","text-center","py-10"],[1,"symbol","symbol-100px","mx-auto","mb-4"],[1,"symbol-label","bg-light-danger"],[1,"ki-outline","ki-cross-circle","fs-2x","text-danger"],[1,"mb-3","text-danger"],[1,"text-muted","mb-4"],["type","button",1,"btn","btn-info",3,"click"],[1,"ki-outline","ki-arrow-left","fs-6","me-2"],[1,"no-print","container-fluid","py-3"],[1,"row"],[1,"col-12"],["type","button",1,"btn","btn-light-info","btn-sm",3,"click"],[3,"invoiceData"]],template:function(e,o){1&e&&t.DNE(0,R,7,2,"div",0)(1,$,15,3,"div",1)(2,S,6,1,"div",2)(3,A,1,1,"app-invoice-viewer",3),2&e&&(t.Y8G("ngIf",o.isLoading),t.R7$(),t.Y8G("ngIf",o.error&&!o.isLoading),t.R7$(),t.Y8G("ngIf",o.invoiceData&&!o.isLoading),t.R7$(),t.Y8G("ngIf",o.invoiceData&&!o.isLoading))},dependencies:[g.bT,j],styles:["@media print{.no-print[_ngcontent-%COMP%]{display:none!important}}.spinner-border[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spinner-border .75s linear infinite}@keyframes _ngcontent-%COMP%_spinner-border{to{transform:rotate(360deg)}}.symbol[_ngcontent-%COMP%]{transition:all .3s ease}.symbol[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.btn[_ngcontent-%COMP%]{transition:all .3s ease}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px #00000026}@media print{[_ngcontent-%COMP%]:global(.kt_header), [_ngcontent-%COMP%]:global(.kt_toolbar), [_ngcontent-%COMP%]:global(.kt_aside), [_ngcontent-%COMP%]:global(.kt_footer), [_ngcontent-%COMP%]:global(.kt_app_header), [_ngcontent-%COMP%]:global(.kt_app_toolbar), [_ngcontent-%COMP%]:global(.kt_app_aside), [_ngcontent-%COMP%]:global(.kt_app_footer), [_ngcontent-%COMP%]:global(.primeng-header), [_ngcontent-%COMP%]:global(.p-toolbar), [_ngcontent-%COMP%]:global(.navbar), [_ngcontent-%COMP%]:global(nav), [_ngcontent-%COMP%]:global(header), [_ngcontent-%COMP%]:global(.header), [_ngcontent-%COMP%]:global(.toolbar), [_ngcontent-%COMP%]:global(.sidebar), [_ngcontent-%COMP%]:global(.menu), [_ngcontent-%COMP%]:global(.navigation), [_ngcontent-%COMP%]:global(.app-header), [_ngcontent-%COMP%]:global(.app-toolbar), [_ngcontent-%COMP%]:global(.app-sidebar), [_ngcontent-%COMP%]:global(.app-nav), [_ngcontent-%COMP%]:global(.breadcrumb), [_ngcontent-%COMP%]:global(.page-header){display:none!important;visibility:hidden!important;opacity:0!important;height:0!important;overflow:hidden!important}[_ngcontent-%COMP%]:global(body){margin:0!important;padding:0!important;background:#fff!important}[_ngcontent-%COMP%]:global(body > *[_ngcontent-%COMP%]:not(app-root)){display:none!important}[_ngcontent-%COMP%]:global(app-root > *[_ngcontent-%COMP%]:not(router-outlet):not(app-invoice-page)){display:none!important}.no-print[_ngcontent-%COMP%]{display:none!important}}"]})}return i})(),T=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=t.$C({type:i});static \u0275inj=t.G2t({imports:[g.MD]})}return i})(),V=(()=>{class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=t.$C({type:i});static \u0275inj=t.G2t({imports:[g.MD,h.iI.forChild([{path:"",component:z}]),T]})}return i})()}}]);