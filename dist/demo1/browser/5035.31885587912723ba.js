"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[5035],{5035:(Se,x,l)=>{l.r(x),l.d(x,{SetupPaymentInfoModule:()=>Me});var d=l(177),c=l(9417),g=l(2791),_=l(6781),O=l(8833),f=l(5098),t=l(4438),y=l(288),w=l(4412);let M=(()=>{class o{selectedCountryIdSubject=new w.t(null);selectedCountryId$=this.selectedCountryIdSubject.asObservable();setCountryId(e){this.selectedCountryIdSubject.next(e)}getCountryId(){return this.selectedCountryIdSubject.value}clearCountryId(){this.selectedCountryIdSubject.next(null)}static \u0275fac=function(i){return new(i||o)};static \u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var R=l(744),T=l(1626),b=l(9998),C=l(5779),j=l(4133);const D=()=>({width:"90vw",maxWidth:"500px"});function $(o,a){if(1&o&&(t.j41(0,"div",5)(1,"div",6)(2,"span",7),t.EFF(3),t.k0s()(),t.j41(4,"div",8)(5,"h5",9),t.EFF(6),t.k0s(),t.j41(7,"p",10),t.EFF(8),t.k0s()()()),2&o){const e=t.XpG();t.R7$(3),t.JRh("ar"===e.lang?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...":"Loading..."),t.R7$(3),t.SpI(" ",e.redirectMessage," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631":"Please wait"," ")}}function G(o,a){if(1&o){const e=t.RV6();t.j41(0,"span",23),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.onResendOtp())}),t.nrm(1,"i",24),t.EFF(2),t.k0s()}if(2&o){const e=t.XpG(2);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0625\u0639\u0627\u062f\u0629 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0631\u0645\u0632":"Resend Code"," ")}}function V(o,a){if(1&o&&(t.j41(0,"span",25),t.nrm(1,"span",26),t.EFF(2),t.k0s()),2&o){const e=t.XpG(2);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u062c\u0627\u0631\u064a \u0627\u0644\u0625\u0631\u0633\u0627\u0644...":"Sending..."," ")}}function N(o,a){if(1&o&&(t.j41(0,"span",10),t.nrm(1,"i",27),t.EFF(2),t.k0s()),2&o){const e=t.XpG(2);t.R7$(2),t.E5c(" ","ar"===e.lang?"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0645\u062a\u0627\u062d\u0629 \u062e\u0644\u0627\u0644":"Resend available in"," ",e.resendCooldown,"","ar"===e.lang?"\u062b":"s"," ")}}function Y(o,a){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",11),t.nrm(2,"i",12),t.j41(3,"h5",13),t.EFF(4),t.k0s(),t.j41(5,"p",10),t.EFF(6),t.k0s()(),t.j41(7,"div",14)(8,"label",15),t.EFF(9),t.k0s(),t.j41(10,"input",16),t.mxI("ngModelChange",function(n){t.eBV(e);const r=t.XpG();return t.DH7(r.otpCode,n)||(r.otpCode=n),t.Njj(n)}),t.bIt("keyup.enter",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onSubmit())}),t.k0s(),t.j41(11,"div",17),t.nrm(12,"i",18),t.EFF(13),t.k0s()(),t.j41(14,"div",19),t.DNE(15,G,3,1,"span",20)(16,V,3,1,"span",21)(17,N,3,3,"span",22),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(4),t.SpI(" ","ar"===e.lang?"\u0623\u062f\u062e\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642":"Enter Verification Code"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0644\u0642\u062f \u0623\u0631\u0633\u0644\u0646\u0627 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"We sent a verification code to your email"," "),t.R7$(3),t.SpI(" ","ar"===e.lang?"\u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642":"Verification Code"," "),t.R7$(),t.R50("ngModel",e.otpCode),t.Y8G("placeholder","ar"===e.lang?"\u0623\u062f\u062e\u0644 \u0627\u0644\u0631\u0645\u0632":"Enter code")("disabled",e.isSubmitting),t.R7$(3),t.SpI(" ","ar"===e.lang?"\u062a\u062d\u0642\u0642 \u0645\u0646 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0648\u0645\u062c\u0644\u062f \u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0645\u0632\u0639\u062c\u0629 (\u062a\u0646\u062a\u0647\u064a \u0641\u0639\u0627\u0644\u064a\u0629 \u0627\u0644\u0643\u0648\u062f \u0641\u064a 1 \u0633\u0627\u0639\u0629)":"Check your email and spam folder (Code expires in 1 hour)"," "),t.R7$(2),t.Y8G("ngIf",e.canResend&&!e.isResending),t.R7$(),t.Y8G("ngIf",e.isResending),t.R7$(),t.Y8G("ngIf",!e.canResend&&!e.isResending)}}function B(o,a){1&o&&t.nrm(0,"span",26)}function X(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",29)(1,"button",30),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.onCancel())}),t.EFF(2),t.k0s(),t.j41(3,"button",31),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.onSubmit())}),t.DNE(4,B,1,0,"span",32),t.EFF(5),t.k0s()()}if(2&o){const e=t.XpG(2);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0625\u0644\u063a\u0627\u0621":"Cancel"," "),t.R7$(),t.Y8G("disabled",e.isSubmitting||!e.otpCode.trim()),t.R7$(),t.Y8G("ngIf",e.isSubmitting),t.R7$(),t.SpI(" ","ar"===e.lang?"\u062a\u0623\u0643\u064a\u062f":"Verify"," ")}}function L(o,a){if(1&o&&t.DNE(0,X,6,4,"div",28),2&o){const e=t.XpG();t.Y8G("ngIf",!e.isWaitingForRedirect)}}let S=(()=>{class o{translationService;visible=!1;config={};isSubmitting=!1;isWaitingForRedirect=!1;isResending=!1;visibleChange=new t.bkB;otpSubmit=new t.bkB;otpResend=new t.bkB;modalCancel=new t.bkB;modalClose=new t.bkB;otpCode="";resendCooldown=0;canResend=!0;lang="en";cooldownTimer;constructor(e){this.translationService=e}ngOnInit(){this.translationService.onLanguageChange().subscribe(e=>{this.lang=e||"en"})}ngOnDestroy(){this.cooldownTimer&&clearInterval(this.cooldownTimer)}get headerTitle(){return this.config.headerTitle?this.config.headerTitle:"ar"===this.lang?"\u062a\u062d\u0642\u0642 \u0645\u0646 \u0647\u0648\u064a\u062a\u0643":"Verify Your Identity"}get redirectMessage(){return this.config.redirectMessage?this.config.redirectMessage:"ar"===this.lang?"\u062c\u0627\u0631\u064a \u0627\u0644\u0645\u0639\u0627\u0644\u062c\u0629...":"Processing..."}onSubmit(){this.otpCode.trim()&&this.otpSubmit.emit(this.otpCode.trim())}onResendOtp(){this.canResend&&(this.otpResend.emit(),this.startCooldown())}onCancel(){this.modalCancel.emit(),this.closeModal()}onClose(){this.modalClose.emit(),this.closeModal()}closeModal(){this.visible=!1,this.visibleChange.emit(!1),this.otpCode="",this.resetCooldown()}startCooldown(){this.canResend=!1,this.resendCooldown=30,this.cooldownTimer=setInterval(()=>{this.resendCooldown--,this.resendCooldown<=0&&(this.canResend=!0,clearInterval(this.cooldownTimer),this.cooldownTimer=null)},1e3)}resetCooldown(){this.canResend=!0,this.resendCooldown=0,this.cooldownTimer&&(clearInterval(this.cooldownTimer),this.cooldownTimer=null)}showModal(){this.visible=!0,this.visibleChange.emit(!0),this.config.autoGenerateOnOpen&&setTimeout(()=>{this.onResendOtp()},100)}hideModal(){this.closeModal()}clearOtp(){this.otpCode=""}static \u0275fac=function(i){return new(i||o)(t.rXU(j.L))};static \u0275cmp=t.VBU({type:o,selectors:[["app-otp-modal"]],inputs:{visible:"visible",config:"config",isSubmitting:"isSubmitting",isWaitingForRedirect:"isWaitingForRedirect",isResending:"isResending"},outputs:{visibleChange:"visibleChange",otpSubmit:"otpSubmit",otpResend:"otpResend",modalCancel:"modalCancel",modalClose:"modalClose"},decls:5,vars:11,consts:[[3,"visibleChange","onHide","visible","modal","closable","draggable","resizable","header"],[1,"otp-content"],["class","text-center py-5",4,"ngIf"],[4,"ngIf"],["pTemplate","footer"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-info",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[1,"mt-3"],[1,"text-gray-700"],[1,"text-muted"],[1,"text-center","mb-4"],[1,"fas","fa-shield-check","text-info","fs-2","mb-3"],[1,"mb-2"],[1,"mb-4"],[1,"form-label","required"],["type","text","maxlength","10",1,"form-control","text-center",3,"ngModelChange","keyup.enter","ngModel","placeholder","disabled"],[1,"form-text","text-muted","mt-2"],[1,"fas","fa-envelope","me-1"],[1,"text-center","mb-3"],["class","text-info text-decoration-underline","style","cursor: pointer;",3,"click",4,"ngIf"],["class","text-info",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"text-info","text-decoration-underline",2,"cursor","pointer",3,"click"],[1,"fas","fa-paper-plane","me-1"],[1,"text-info"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-clock","me-1"],["class","d-flex justify-content-between",4,"ngIf"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-info",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"]],template:function(i,n){1&i&&(t.j41(0,"p-dialog",0),t.mxI("visibleChange",function(u){return t.DH7(n.visible,u)||(n.visible=u),u}),t.bIt("onHide",function(){return n.onClose()}),t.j41(1,"div",1),t.DNE(2,$,9,3,"div",2)(3,Y,18,10,"div",3),t.k0s(),t.DNE(4,L,1,1,"ng-template",4),t.k0s()),2&i&&(t.Aen(t.lJ4(10,D)),t.R50("visible",n.visible),t.Y8G("modal",!0)("closable",!0)("draggable",!1)("resizable",!1)("header",n.headerTitle),t.R7$(2),t.Y8G("ngIf",n.isWaitingForRedirect),t.R7$(),t.Y8G("ngIf",!n.isWaitingForRedirect))},dependencies:[d.bT,c.me,c.BC,c.tU,c.vS,_.l,C.Ei],styles:[".otp-content[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:1.1rem;padding:12px}.otp-content[_ngcontent-%COMP%]   .form-control.text-center[_ngcontent-%COMP%]{letter-spacing:.2em;font-weight:600}.otp-content[_ngcontent-%COMP%]   .text-info.text-decoration-underline[_ngcontent-%COMP%]{transition:opacity .2s ease}.otp-content[_ngcontent-%COMP%]   .text-info.text-decoration-underline[_ngcontent-%COMP%]:hover{opacity:.8}.otp-content[_ngcontent-%COMP%]   .spinner-border.text-info[_ngcontent-%COMP%]{border-color:#0dcaf0 transparent #0dcaf0 transparent}[dir=rtl][_ngcontent-%COMP%]   .otp-content[_ngcontent-%COMP%]   .form-control.text-center[_ngcontent-%COMP%]{direction:ltr;text-align:center}"]})}return o})(),v=(()=>{class o extends f.${title="";subtitle="";static \u0275fac=(()=>{let e;return function(n){return(e||(e=t.xGo(o)))(n||o)}})();static \u0275cmp=t.VBU({type:o,selectors:[["app-payment-header"]],inputs:{title:"title",subtitle:"subtitle"},features:[t.Vt3],decls:11,vars:2,consts:[[1,"section-header","px-4","sm:px-6","lg:px-8","py-8","relative","overflow-hidden","rounded-lg"],["alt","Section background","src","https://res.cloudinary.com/dsiku9ipv/image/upload/v1737266454/breadcrumb-bg-2_anwto8.png",1,"object-cover","z-0","position-absolute","top-0","left-0","w-100","h-100",2,"object-fit","cover"],[1,"position-absolute","z-10","d-none","d-md-block",2,"left","28%","transform","translateX(-50%)","top","0","pointer-events","none"],["src","assets/media/misc/stripes-dark.svg","width","768","height","768","alt","Stripes",1,"opacity-50",2,"width","auto","height","auto","max-width","none"],[2,"padding-top","50px"],[1,"position-relative","z-10","max-w-6xl","mx-auto","mt-5","w-100"],[1,"text-center","mb-4"],[1,"display-4","fw-bolder","mb-3","text-info"],[1,"lead","mb-4","text-info"]],template:function(i,n){1&i&&(t.j41(0,"div",0),t.nrm(1,"img",1),t.j41(2,"div",2),t.nrm(3,"img",3),t.k0s(),t.j41(4,"div",4)(5,"div",5)(6,"div",6)(7,"h1",7),t.EFF(8),t.k0s(),t.j41(9,"p",8),t.EFF(10),t.k0s()()()()()),2&i&&(t.R7$(8),t.SpI(" ",n.title," "),t.R7$(2),t.SpI(" ",n.subtitle," "))},styles:[".section-header[_ngcontent-%COMP%]{position:relative;min-height:175px}.section-header[_ngcontent-%COMP%]   .text-gradient-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#e0f2fe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;color:transparent}.section-header[_ngcontent-%COMP%]   .backdrop-blur[_ngcontent-%COMP%]{backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{min-height:200px;padding:2rem 1rem!important}.section-header[_ngcontent-%COMP%]   .display-4[_ngcontent-%COMP%]{font-size:2rem}.section-header[_ngcontent-%COMP%]   .lead[_ngcontent-%COMP%]{font-size:1.1rem}}"]})}return o})();const U=()=>({width:"90vw",maxWidth:"800px"}),W=()=>({standalone:!0}),I=()=>["/app/insighter-dashboard/account-settings/payment-settings"];function z(o,a){if(1&o&&(t.j41(0,"div",15)(1,"div",16)(2,"span",17),t.EFF(3,"Loading..."),t.k0s()(),t.j41(4,"div",18)(5,"h5",19),t.EFF(6),t.k0s(),t.j41(7,"p",20),t.EFF(8),t.k0s()()()),2&o){const e=t.XpG();t.R7$(6),t.SpI(" ","ar"===e.lang?"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062f\u0641\u0639...":"Loading payment information..."," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631":"Please wait"," ")}}function H(o,a){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit,i=t.XpG(2);t.R7$(),t.SpI(" ","ar"===i.lang?e.description.ar:e.description.en," ")}}function J(o,a){1&o&&(t.j41(0,"span"),t.EFF(1," \u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0623\u0648 \u0627\u0644\u062d\u0630\u0641 \u0645\u0646 \u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u062f\u0641\u0639 "),t.k0s())}function q(o,a){1&o&&(t.j41(0,"span"),t.EFF(1," Edit or delete from payment settings "),t.k0s())}function Z(o,a){if(1&o&&(t.j41(0,"span")(1,"span",41),t.EFF(2),t.k0s(),t.j41(3,"span",42),t.DNE(4,J,2,0,"span",6)(5,q,2,0,"span",6),t.k0s()()),2&o){const e=t.XpG(3);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u0647\u0630\u0647 \u0627\u0644\u0637\u0631\u064a\u0642\u0629 \u0628\u0627\u0644\u0641\u0639\u0644":"This payment method is already configured"," "),t.R7$(2),t.Y8G("ngIf","ar"===e.lang),t.R7$(),t.Y8G("ngIf","ar"!==e.lang)}}function K(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",32)(1,"div",33)(2,"input",34),t.bIt("change",function(){const n=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.onPaymentTypeChange(n.id))}),t.k0s(),t.j41(3,"label",35)(4,"div",36),t.nrm(5,"img",37),t.k0s(),t.j41(6,"span",38)(7,"span",39),t.EFF(8),t.k0s(),t.j41(9,"span",40),t.DNE(10,H,2,1,"span",6)(11,Z,6,3,"span",6),t.k0s()()()()()}if(2&o){const e=a.$implicit,i=t.XpG(2);t.R7$(2),t.Y8G("id",e.id)("value",e.id)("checked",i.selectedPaymentType===e.id)("disabled","manual"===e.id&&"active"===(null==i.existingManualAccount?null:i.existingManualAccount.status)||"provider"===e.id&&i.existingProviderAccount&&null!==i.existingProviderAccount.details_submitted_at),t.R7$(),t.xc7("cursor","manual"===e.id&&"active"===(null==i.existingManualAccount?null:i.existingManualAccount.status)||"provider"===e.id&&i.existingProviderAccount&&null!==i.existingProviderAccount.details_submitted_at?"not-allowed":"pointer"),t.AVh("disabled","manual"===e.id&&"active"===(null==i.existingManualAccount?null:i.existingManualAccount.status)||"provider"===e.id&&i.existingProviderAccount&&null!==i.existingProviderAccount.details_submitted_at),t.Y8G("for","manual"===e.id&&"active"===(null==i.existingManualAccount?null:i.existingManualAccount.status)||"provider"===e.id&&i.existingProviderAccount&&null!==i.existingProviderAccount.details_submitted_at?null:e.id),t.R7$(2),t.Y8G("src",e.imageUrl,t.B4B),t.R7$(3),t.SpI(" ","ar"===i.lang?e.name.ar:e.name.en," "),t.R7$(2),t.Y8G("ngIf",!("manual"===e.id&&"active"===(null==i.existingManualAccount?null:i.existingManualAccount.status)||"provider"===e.id&&i.existingProviderAccount&&null!==i.existingProviderAccount.details_submitted_at)),t.R7$(),t.Y8G("ngIf","manual"===e.id&&"active"===(null==i.existingManualAccount?null:i.existingManualAccount.status)||"provider"===e.id&&i.existingProviderAccount&&null!==i.existingProviderAccount.details_submitted_at)}}function Q(o,a){if(1&o&&(t.j41(0,"div",43),t.nrm(1,"i",44),t.EFF(2),t.k0s()),2&o){const e=t.XpG(2);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639":"Please select a payment type"," ")}}function tt(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",49)(1,"div",50)(2,"div",51)(3,"div",52)(4,"div",53),t.nrm(5,"img",54),t.j41(6,"span",55),t.EFF(7),t.k0s()(),t.j41(8,"button",56),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.unselectCountry())}),t.nrm(9,"i",57),t.k0s()()()()()}if(2&o){const e=t.XpG(3);t.R7$(5),t.FS9("alt",e.selectedCountry.name),t.Y8G("src",e.getFlagUrl(e.selectedCountry.flag),t.B4B),t.R7$(2),t.JRh(e.selectedCountry.name)}}function et(o,a){if(1&o&&t.nrm(0,"img",54),2&o){const e=t.XpG().$implicit,i=t.XpG(4);t.FS9("alt",e.name),t.Y8G("src",i.getFlagUrl(e.flag),t.B4B)}}function nt(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",65),t.bIt("click",function(){const n=t.eBV(e).$implicit,r=t.XpG(4);return t.Njj(r.selectCountry(n))}),t.j41(1,"div",53),t.DNE(2,et,1,2,"img",66),t.j41(3,"span"),t.EFF(4),t.k0s()()()}if(2&o){const e=a.$implicit;t.R7$(2),t.Y8G("ngIf",e.showFlag),t.R7$(2),t.JRh(e.name)}}function ot(o,a){if(1&o&&(t.j41(0,"div",67),t.EFF(1),t.k0s()),2&o){const e=t.XpG(4);t.R7$(),t.SpI(" ","ar"===e.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0628\u0644\u062f\u0627\u0646":"No countries found"," ")}}function it(o,a){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",58)(2,"span",59),t.nrm(3,"i",60),t.k0s(),t.j41(4,"input",61),t.mxI("ngModelChange",function(n){t.eBV(e);const r=t.XpG(3);return t.DH7(r.searchTerm,n)||(r.searchTerm=n),t.Njj(n)}),t.bIt("ngModelChange",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.filterCountries())}),t.k0s()(),t.j41(5,"div",62),t.DNE(6,nt,5,2,"div",63)(7,ot,2,1,"div",64),t.k0s()()}if(2&o){const e=t.XpG(3);t.R7$(4),t.R50("ngModel",e.searchTerm),t.Y8G("ngModelOptions",t.lJ4(5,W))("placeholder","ar"===e.lang?"\u0627\u0628\u062d\u062b \u0639\u0646 \u0628\u0644\u062f...":"Search for a country..."),t.R7$(2),t.Y8G("ngForOf",e.filteredCountries),t.R7$(),t.Y8G("ngIf",0===e.filteredCountries.length)}}function rt(o,a){if(1&o&&(t.j41(0,"div",68),t.nrm(1,"i",44),t.EFF(2),t.k0s()),2&o){const e=t.XpG(3);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0628\u0644\u062f":"Please select a country"," ")}}function at(o,a){if(1&o&&(t.j41(0,"div",22)(1,"div",23)(2,"span",24),t.EFF(3,"2"),t.k0s(),t.j41(4,"h4",25),t.EFF(5),t.k0s()(),t.j41(6,"p",26),t.EFF(7),t.k0s(),t.j41(8,"div",45)(9,"label",46),t.EFF(10),t.k0s(),t.DNE(11,tt,10,3,"div",47)(12,it,8,6,"div",6)(13,rt,3,1,"div",48),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(5),t.SpI(" ","ar"===e.lang?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0628\u0644\u062f":"Select Country"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0627\u062e\u062a\u0631 \u0627\u0644\u0628\u0644\u062f \u0644\u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643":"Select the country for your Stripe account"," "),t.R7$(3),t.SpI(" ","ar"===e.lang?"\u0627\u0644\u0628\u0644\u062f":"Country"," "),t.R7$(),t.Y8G("ngIf",e.selectedCountry),t.R7$(),t.Y8G("ngIf",!e.selectedCountry),t.R7$(),t.Y8G("ngIf",e.showValidationErrors&&!e.selectedCountry&&"provider"===e.selectedPaymentType)}}function ut(o,a){if(1&o){const e=t.RV6();t.j41(0,"span"),t.EFF(1," \u0623\u0648\u0627\u0641\u0642 \u0639\u0644\u0649 \u0625\u0646\u0634\u0627\u0621 \u062d\u0633\u0627\u0628 \u062f\u0641\u0639 \u0648\u0623\u0642\u0631\u0651 \u0623\u0646\u064a \u0642\u0631\u0623\u062a \u0648\u0641\u0647\u0645\u062a "),t.j41(2,"a",73),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.openTermsDialog())}),t.EFF(3,"\u0634\u0631\u0648\u0637 \u0648\u0623\u062d\u0643\u0627\u0645 \u0627\u0644\u0627\u062a\u0641\u0627\u0642\u064a\u0629"),t.k0s(),t.EFF(4,". "),t.k0s()}}function st(o,a){if(1&o){const e=t.RV6();t.j41(0,"span"),t.EFF(1," I agree to create a Payment Account and acknowledge that I have read and understood the "),t.j41(2,"a",73),t.bIt("click",function(){t.eBV(e);const n=t.XpG(3);return t.Njj(n.openTermsDialog())}),t.EFF(3,"Terms & Conditions"),t.k0s(),t.EFF(4,". "),t.k0s()}}function ct(o,a){if(1&o&&(t.j41(0,"div",68),t.nrm(1,"i",44),t.EFF(2),t.k0s()),2&o){const e=t.XpG(3);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u062c\u0628 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0634\u0631\u0648\u0637 \u0648\u0623\u062d\u0643\u0627\u0645 \u0627\u0644\u0627\u062a\u0641\u0627\u0642\u064a\u0629":"You must agree to the Terms & Conditions"," ")}}function lt(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",69)(1,"div",70)(2,"input",71),t.bIt("change",function(n){t.eBV(e);const r=t.XpG(2);return t.Njj(r.onTermsChange(n))}),t.k0s(),t.j41(3,"label",72),t.DNE(4,ut,5,0,"span",6)(5,st,5,0,"span",6),t.k0s()(),t.DNE(6,ct,3,1,"div",48),t.k0s()}if(2&o){let e;const i=t.XpG(2);t.R7$(4),t.Y8G("ngIf","ar"===i.lang),t.R7$(),t.Y8G("ngIf","ar"!==i.lang),t.R7$(),t.Y8G("ngIf",i.showValidationErrors&&(null==(e=i.paymentForm.get("termsAgreed"))?null:e.invalid))}}function dt(o,a){1&o&&(t.j41(0,"span"),t.EFF(1," \u0644\u062f\u064a\u0643 \u0628\u0627\u0644\u0641\u0639\u0644 \u062c\u0645\u064a\u0639 \u0637\u0631\u0642 \u0627\u0644\u062f\u0641\u0639 \u0627\u0644\u0645\u062a\u0627\u062d\u0629. \u064a\u0645\u0643\u0646\u0643 \u062d\u0630\u0641 \u0623\u0648 \u062a\u0639\u062f\u064a\u0644 \u0637\u0631\u0642 \u0627\u0644\u062f\u0641\u0639 \u0645\u0646 "),t.j41(2,"a",79),t.EFF(3," \u0635\u0641\u062d\u0629 \u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u062f\u0641\u0639 "),t.k0s(),t.EFF(4,". "),t.k0s()),2&o&&(t.R7$(2),t.Y8G("routerLink",t.lJ4(1,I)))}function pt(o,a){1&o&&(t.j41(0,"span"),t.EFF(1," You already have all available payment options. You can delete or edit payment methods from the "),t.j41(2,"a",79),t.EFF(3," payment settings page "),t.k0s(),t.EFF(4,". "),t.k0s()),2&o&&(t.R7$(2),t.Y8G("routerLink",t.lJ4(1,I)))}function mt(o,a){if(1&o&&(t.j41(0,"div",74)(1,"div",75),t.nrm(2,"i",76),t.j41(3,"div")(4,"h6",77),t.EFF(5),t.k0s(),t.j41(6,"p",78),t.DNE(7,dt,5,2,"span",6)(8,pt,5,2,"span",6),t.k0s()()()()),2&o){const e=t.XpG(2);t.R7$(5),t.SpI(" ","ar"===e.lang?"\u062c\u0645\u064a\u0639 \u0637\u0631\u0642 \u0627\u0644\u062f\u0641\u0639 \u0645\u062a\u0648\u0641\u0631\u0629":"All Payment Options Available"," "),t.R7$(2),t.Y8G("ngIf","ar"===e.lang),t.R7$(),t.Y8G("ngIf","ar"!==e.lang)}}function gt(o,a){1&o&&t.nrm(0,"span",84)}function ht(o,a){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const e=t.XpG(3);t.R7$(),t.SpI(" ","ar"===e.lang?"\u0627\u0644\u062a\u0627\u0644\u064a":"Next"," ")}}function _t(o,a){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&o){const e=t.XpG(3);t.R7$(),t.SpI(" ","ar"===e.lang?"\u062c\u0627\u0631\u064a \u0625\u0646\u0634\u0627\u0621 \u062d\u0633\u0627\u0628 Stripe...":"Creating Stripe account..."," ")}}function ft(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",74)(1,"div",52)(2,"div",80),t.nrm(3,"i",81),t.EFF(4),t.k0s(),t.j41(5,"button",82),t.nI1(6,"async"),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.onNext())}),t.DNE(7,gt,1,0,"span",83),t.nI1(8,"async"),t.DNE(9,ht,2,1,"span",6)(10,_t,2,1,"span",6),t.k0s()()()}if(2&o){const e=t.XpG(2);t.R7$(4),t.SpI(" ","ar"===e.lang?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a\u0643 \u0622\u0645\u0646\u0629 \u0648\u0645\u0634\u0641\u0631\u0629":"Your information is secure and encrypted"," "),t.R7$(),t.Y8G("disabled",t.bMT(6,5,e.paymentService.isLoading$)||e.isCreatingStripeAccount),t.R7$(2),t.Y8G("ngIf",t.bMT(8,7,e.paymentService.isLoading$)||e.isCreatingStripeAccount),t.R7$(2),t.Y8G("ngIf",!e.isCreatingStripeAccount),t.R7$(),t.Y8G("ngIf",e.isCreatingStripeAccount)}}function bt(o,a){if(1&o&&(t.j41(0,"div")(1,"form",21)(2,"div",22)(3,"div",23)(4,"span",24),t.EFF(5,"1"),t.k0s(),t.j41(6,"h4",25),t.EFF(7),t.k0s()(),t.j41(8,"p",26),t.EFF(9),t.k0s(),t.j41(10,"div",3),t.DNE(11,K,12,13,"div",27),t.k0s(),t.DNE(12,Q,3,1,"div",28),t.k0s(),t.DNE(13,at,14,6,"div",29)(14,lt,7,3,"div",30)(15,mt,9,3,"div",31)(16,ft,11,9,"div",31),t.k0s()()),2&o){const e=t.XpG();t.R7$(),t.Y8G("formGroup",e.paymentForm),t.R7$(6),t.SpI(" ","ar"===e.lang?"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639":"Select Payment Method"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0627\u062e\u062a\u0631 \u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639 \u0627\u0644\u0645\u0641\u0636\u0644\u0629 \u0644\u062f\u064a\u0643":"All methods are secure and protected. Pick the payment option that works best for you:"," "),t.R7$(2),t.Y8G("ngForOf",e.paymentTypes),t.R7$(),t.Y8G("ngIf",e.showValidationErrors&&!e.selectedPaymentType),t.R7$(),t.Y8G("ngIf","provider"===e.selectedPaymentType),t.R7$(),t.Y8G("ngIf","provider"===e.selectedPaymentType),t.R7$(),t.Y8G("ngIf",e.allPaymentOptionsExist),t.R7$(),t.Y8G("ngIf",!e.allPaymentOptionsExist)}}function yt(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",85)(1,"h5",86),t.EFF(2),t.k0s(),t.j41(3,"div",87)(4,"button",88),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.printTerms())}),t.nrm(5,"i",89),t.k0s(),t.j41(6,"button",90),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.saveTerms())}),t.nrm(7,"i",91),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(2),t.JRh("ar"===e.lang?"\u0634\u0631\u0648\u0637 \u0648\u0623\u062d\u0643\u0627\u0645 \u0627\u0644\u0627\u062a\u0641\u0627\u0642\u064a\u0629":"Terms & Conditions")}}function Ct(o,a){if(1&o&&(t.j41(0,"div",92)(1,"div",93)(2,"span",17),t.EFF(3),t.k0s()()()),2&o){const e=t.XpG();t.R7$(3),t.JRh("ar"===e.lang?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...":"Loading...")}}function vt(o,a){if(1&o&&t.nrm(0,"div",94),2&o){const e=t.XpG();t.Y8G("innerHTML",e.stripeTermsContent,t.npT)}}function At(o,a){if(1&o&&(t.j41(0,"div",95),t.nrm(1,"i",96),t.j41(2,"p"),t.EFF(3),t.k0s()()),2&o){const e=t.XpG();t.R7$(3),t.JRh("ar"===e.lang?"\u0644\u0627 \u064a\u0645\u0643\u0646 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645":"Unable to load Terms & Conditions")}}function kt(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",97)(1,"button",98),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.declineTerms())}),t.EFF(2),t.k0s(),t.j41(3,"button",99),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.acceptTerms())}),t.EFF(4),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0631\u0641\u0636":"Decline"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0642\u0628\u0648\u0644":"Accept"," ")}}let Ft=(()=>{class o extends f.${fb;router;paymentService;paymentCountryService;guidelinesService;http;paymentForm;paymentTypes=[{id:"manual",name:{en:"Bank Transfer",ar:"\u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 \u0628\u0646\u0643\u064a"},description:{en:"Direct transfers to your bank account with manual verification and processing.",ar:"\u0625\u0639\u062f\u0627\u062f \u0627\u0644\u062a\u062d\u0648\u064a\u0644\u0627\u062a \u0627\u0644\u0628\u0646\u0643\u064a\u0629 \u0627\u0644\u0645\u0628\u0627\u0634\u0631\u0629 \u0645\u0639 \u0627\u0644\u062a\u062d\u0642\u0642 \u0648\u0627\u0644\u0645\u0639\u0627\u0644\u062c\u0629 \u0627\u0644\u064a\u062f\u0648\u064a\u0629"},imageUrl:"https://res.cloudinary.com/dsiku9ipv/image/upload/v1755933067/bank-account_18410123_jbdogp.png"},{id:"provider",name:{en:"Stripe Provider",ar:"\u0645\u0632\u0648\u062f \u0633\u062a\u0631\u0627\u064a\u0628"},description:{en:"Automated payment processing with instant transfers via Stripe platform",ar:"\u0645\u0639\u0627\u0644\u062c\u0629 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0627\u0644\u0622\u0644\u064a\u0629 \u0645\u0639 \u0627\u0644\u062a\u062d\u0648\u064a\u0644\u0627\u062a \u0627\u0644\u0641\u0648\u0631\u064a\u0629 \u0639\u0628\u0631 \u0645\u0646\u0635\u0629 \u0633\u062a\u0631\u0627\u064a\u0628"},imageUrl:"https://res.cloudinary.com/dsiku9ipv/image/upload/v1754902439/New_Project_12_jmtvd6.png"}];selectedPaymentType="";selectedCountry=null;allCountries=[];stripeCountries=[];filteredCountries=[];searchTerm="";termsAgreed=!1;showValidationErrors=!1;stripeTermsContent="";isLoadingTerms=!1;paymentInfo=null;isEditing=!1;isLoadingPaymentInfo=!0;isCreatingStripeAccount=!1;existingManualAccount=null;existingProviderAccount=null;showManualEdit=!1;showProviderDelete=!1;isProviderUnderReview=!1;showTermsDialog=!1;showOtpDialog=!1;otpCode="";resendCooldown=0;canResendOtp=!0;isSubmittingOtp=!1;isOtpForLinkAccount=!1;isWaitingForRedirect=!1;isResendingOtp=!1;otpModalConfig={headerTitle:"",redirectMessage:"",autoGenerateOnOpen:!0};constructor(e,i,n,r,u,s,p){super(e),this.fb=i,this.router=n,this.paymentService=r,this.paymentCountryService=u,this.guidelinesService=s,this.http=p,this.paymentForm=this.fb.group({paymentType:["",c.k0.required],country:[""],termsAgreed:[!1]})}ngOnInit(){this.loadExistingPaymentInfo()}loadStripeCountries(){this.paymentService.getStripeCountries().subscribe({next:e=>{this.stripeCountries=e.map(i=>({...i,showFlag:!0})),this.filteredCountries=[...this.stripeCountries]},error:e=>{console.error("Error loading Stripe countries:",e)}})}onPaymentTypeChange(e){this.selectedPaymentType=e,this.paymentForm.patchValue({paymentType:e}),"provider"===e?(this.loadStripeCountries(),this.loadStripeTerms(),this.paymentForm.get("country")?.setValidators([c.k0.required]),this.paymentForm.get("termsAgreed")?.setValidators([c.k0.requiredTrue])):(this.selectedCountry=null,this.stripeCountries=[],this.filteredCountries=[],this.termsAgreed=!1,this.stripeTermsContent="",this.paymentForm.get("country")?.clearValidators(),this.paymentForm.get("termsAgreed")?.clearValidators(),this.paymentForm.patchValue({country:"",termsAgreed:!1})),this.paymentForm.get("country")?.updateValueAndValidity(),this.paymentForm.get("termsAgreed")?.updateValueAndValidity()}selectCountry(e){this.selectedCountry=e,this.paymentCountryService.setCountryId(e.id),this.paymentForm.patchValue({country:e.id})}unselectCountry(){this.selectedCountry=null,this.paymentForm.patchValue({country:""}),this.searchTerm="",this.filterCountries()}filterCountries(){this.filteredCountries=this.searchTerm?this.stripeCountries.filter(e=>e.name.toLowerCase().includes(this.searchTerm.toLowerCase())):[...this.stripeCountries]}getCountryName(e){return e.name}getFlagUrl(e){return`assets/media/flags/${e}.svg`}onNext(){if(this.showValidationErrors=!0,this.paymentForm.get("paymentType")?.markAsTouched(),this.paymentForm.get("country")?.markAsTouched(),this.paymentForm.get("termsAgreed")?.markAsTouched(),this.selectedPaymentType){if("provider"===this.selectedPaymentType){if(!this.selectedCountry)return void this.showError("ar"===this.lang?"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642":"Validation Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0628\u0644\u062f":"Please select a country");if(!this.paymentForm.get("termsAgreed")?.value)return void this.showError("ar"===this.lang?"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642":"Validation Error","ar"===this.lang?"\u064a\u062c\u0628 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0634\u0631\u0648\u0637 \u0648\u0623\u062d\u0643\u0627\u0645 \u0627\u0644\u0627\u062a\u0641\u0627\u0642\u064a\u0629":"You must agree to the Terms & Conditions")}"provider"===this.selectedPaymentType&&this.paymentForm.invalid?this.showError("ar"===this.lang?"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642":"Validation Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629":"Please fill in all required fields"):"manual"===this.selectedPaymentType&&"active"===this.existingManualAccount?.status||"provider"===this.selectedPaymentType&&this.existingProviderAccount&&null!==this.existingProviderAccount.details_submitted_at?this.showError("ar"===this.lang?"\u062e\u064a\u0627\u0631 \u063a\u064a\u0631 \u0645\u062a\u0627\u062d":"Option Not Available","ar"===this.lang?"\u0647\u0630\u0627 \u0627\u0644\u062e\u064a\u0627\u0631 \u063a\u064a\u0631 \u0645\u062a\u0627\u062d \u062d\u0627\u0644\u064a\u064b\u0627. \u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u062e\u064a\u0627\u0631 \u0622\u062e\u0631.":"This option is currently not available. Please choose another option."):"manual"===this.selectedPaymentType?this.router.navigate(["/app/setup-payment-info/manual-account"]):"provider"===this.selectedPaymentType&&(this.otpModalConfig.headerTitle="ar"===this.lang?"\u062a\u062d\u0642\u0642 \u0645\u0646 \u062d\u0633\u0627\u0628 Stripe":"Stripe Account Verification",this.otpModalConfig.redirectMessage="ar"===this.lang?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u0648\u062c\u064a\u0647 \u0625\u0644\u0649 Stripe...":"Redirecting to Stripe...",this.showOtpDialog=!0)}else this.showError("ar"===this.lang?"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642":"Validation Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639":"Please select a payment type")}initiateStripeOnboarding(){this.paymentService.getPaymentAccountDetails().subscribe({next:e=>{const i=this.paymentService.getProviderAccount(e.data);this.isOtpForLinkAccount="provider"===i?.type&&!0===i?.stripe_account&&!i.details_submitted_at,this.showOtpDialog=!0},error:e=>{this.isOtpForLinkAccount=!1,this.showOtpDialog=!0}})}createStripeAccountWithOtp(e){this.isSubmittingOtp=!0;const i=this.selectedCountry?.id;if(!i)return this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0628\u0644\u062f":"Please select a country"),void(this.isSubmittingOtp=!1);this.paymentService.createStripeAccount({country_id:i,code:e,accept_terms:!0}).subscribe({next:r=>{this.isSubmittingOtp=!1,this.showOtpDialog=!1,r.data.stripe_account_link.url?(this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u062a\u062d\u0642\u0642 \u0628\u0646\u062c\u0627\u062d":"Successfully Verified","ar"===this.lang?"\u0633\u064a\u062a\u0645 \u062a\u0648\u062c\u064a\u0647\u0643 \u0625\u0644\u0649 Stripe \u0644\u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u0625\u0639\u062f\u0627\u062f":"Redirecting to Stripe to complete setup"),this.isWaitingForRedirect=!0,window.location.href=r.data.stripe_account_link.url):this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"Error","ar"===this.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0631\u0627\u0628\u0637 Stripe":"Stripe link not found")},error:r=>{if(this.isSubmittingOtp=!1,422===r.status&&r.error&&"Stripe account exists"===r.error.message)return this.showOtpDialog=!1,void this.router.navigate(["/app/setup-payment-info/stripe-callback/refresh"]);this.handleServerErrors(r)}})}linkStripeAccountWithOtp(e){this.isSubmittingOtp=!0;const i=this.existingProviderAccount?.country?.id;if(!i)return this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0628\u0644\u062f":"Country information not found"),void(this.isSubmittingOtp=!1);this.paymentService.linkStripeAccount({country_id:i,code:e,accept_terms:!0}).subscribe({next:r=>{this.isSubmittingOtp=!1,this.showOtpDialog=!1,r.data.stripe_account_link.url?(this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u062a\u062d\u0642\u0642 \u0628\u0646\u062c\u0627\u062d":"Successfully Verified","ar"===this.lang?"\u0633\u064a\u062a\u0645 \u062a\u0648\u062c\u064a\u0647\u0643 \u0625\u0644\u0649 Stripe \u0644\u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u0625\u0639\u062f\u0627\u062f":"Redirecting to Stripe to complete setup"),this.isWaitingForRedirect=!0,window.location.href=r.data.stripe_account_link.url):this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"Error","ar"===this.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0631\u0627\u0628\u0637 Stripe":"Stripe link not found")},error:r=>{this.isSubmittingOtp=!1,this.handleServerErrors(r)}})}loadExistingPaymentInfo(){this.isLoadingPaymentInfo=!0,this.paymentService.getPaymentAccountDetails().subscribe({next:e=>{const i=this.paymentService.getPrimaryAccount(e.data);i?(this.paymentInfo=i,this.existingManualAccount=this.paymentService.getManualAccount(e.data),this.existingProviderAccount=this.paymentService.getProviderAccount(e.data),this.showManualEdit=null!==this.existingManualAccount&&"active"===this.existingManualAccount.status,this.showProviderDelete=null!==this.existingProviderAccount,this.isProviderUnderReview="inactive"===this.existingProviderAccount?.status&&null!==this.existingProviderAccount?.details_submitted_at,this.preSelectExistingInfo()):(this.existingManualAccount=null,this.existingProviderAccount=null,this.showManualEdit=!1,this.showProviderDelete=!1,this.isProviderUnderReview=!1),this.isLoadingPaymentInfo=!1},error:e=>{this.existingManualAccount=null,this.existingProviderAccount=null,this.showManualEdit=!1,this.showProviderDelete=!1,this.isProviderUnderReview=!1,this.isLoadingPaymentInfo=!1}})}preSelectExistingInfo(){this.paymentInfo&&("manual"!==this.paymentInfo.type||"active"!==this.existingManualAccount?.status)&&("provider"!==this.paymentInfo.type||!this.existingProviderAccount||null===this.existingProviderAccount.details_submitted_at)&&(this.selectedPaymentType=this.paymentInfo.type,this.paymentForm.patchValue({paymentType:this.paymentInfo.type}))}handleServerErrors(e){if(e?.error)if(e.error.errors){const i=e.error.errors;for(const n in i)if(i.hasOwnProperty(n)){const r=i[n];this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",Array.isArray(r)?r.join(", "):r)}}else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",e.error.message?e.error.message:"ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639":"An unexpected error occurred.");else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred","ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639":"An unexpected error occurred.")}generateOtp(){this.paymentService.generatePaymentOTP().subscribe({next:e=>{this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0628\u0646\u062c\u0627\u062d":"Successfully Sent","ar"===this.lang?"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"Verification code sent to your email")},error:e=>{this.handleServerErrors(e)}})}onOtpSubmit(e){this.processStripeAccountWithOtp(e)}onOtpResend(){this.resendOtp()}onOtpCancel(){this.showOtpDialog=!1,this.otpCode=""}onOtpClose(){this.showOtpDialog=!1,this.otpCode=""}processStripeAccountWithOtp(e){this.isSubmittingOtp=!0,this.paymentService.getPaymentAccountDetails().subscribe({next:i=>{const n=this.paymentService.getProviderAccount(i.data);n&&!0===n.stripe_account?this.linkStripeAccountWithOtp(e):this.createStripeAccountWithOtp(e)},error:i=>{this.createStripeAccountWithOtp(e)}})}resendOtp(){!this.canResendOtp||this.isResendingOtp||(this.isResendingOtp=!0,this.paymentService.generatePaymentOTP().subscribe({next:e=>{this.isResendingOtp=!1,this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0628\u0646\u062c\u0627\u062d":"Successfully Sent","ar"===this.lang?"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0627\u0644\u062c\u062f\u064a\u062f \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"New verification code sent to your email"),this.startCooldown()},error:e=>{this.isResendingOtp=!1,this.handleServerErrors(e)}}))}startCooldown(){this.canResendOtp=!1,this.resendCooldown=30;const e=setInterval(()=>{this.resendCooldown--,this.resendCooldown<=0&&(this.canResendOtp=!0,clearInterval(e))},1e3)}navigateToManualAccount(){this.router.navigate(["/app/setup-payment-info/manual-account"])}deleteManualAccount(){confirm("ar"===this.lang?"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u062d\u0633\u0627\u0628\u0643 \u0627\u0644\u0628\u0646\u0643\u064a \u0627\u0644\u064a\u062f\u0648\u064a\u061f":"Are you sure you want to delete your manual bank account?")&&this.paymentService.deleteManualAccount().subscribe({next:()=>{this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d":"Successfully Deleted","ar"===this.lang?"\u062a\u0645 \u062d\u0630\u0641 \u062d\u0633\u0627\u0628\u0643 \u0627\u0644\u0628\u0646\u0643\u064a \u0627\u0644\u064a\u062f\u0648\u064a \u0628\u0646\u062c\u0627\u062d":"Your manual bank account has been deleted successfully"),this.loadExistingPaymentInfo()},error:e=>{this.handleServerErrors(e)}})}deleteProviderAccount(){confirm("ar"===this.lang?"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0623\u0646\u0643 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643\u061f":"Are you sure you want to delete your Stripe account?")&&this.paymentService.deleteStripeAccount().subscribe({next:()=>{this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u062d\u0630\u0641 \u0628\u0646\u062c\u0627\u062d":"Successfully Deleted","ar"===this.lang?"\u062a\u0645 \u062d\u0630\u0641 \u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 \u0628\u0646\u062c\u0627\u062d":"Your Stripe account has been deleted successfully"),this.loadExistingPaymentInfo()},error:e=>{this.handleServerErrors(e)}})}openTermsDialog(){console.log("Opening Terms Dialog"),this.showTermsDialog=!0,this.loadTermsAndConditions()}closeTermsDialog(){this.showTermsDialog=!1}acceptTerms(){this.termsAgreed=!0,this.paymentForm.patchValue({termsAgreed:!0}),this.closeTermsDialog()}declineTerms(){this.termsAgreed=!1,this.paymentForm.patchValue({termsAgreed:!1}),this.closeTermsDialog()}onTermsChange(e){this.termsAgreed=e.target.checked}loadTermsAndConditions(){this.isLoadingTerms=!0,this.stripeTermsContent="";const e={"Content-Type":"application/json",Accept:"application/json","Accept-Language":this.lang||"en","X-Timezone":Intl.DateTimeFormat().resolvedOptions().timeZone};this.http.get("https://api.foresighta.co/api/common/setting/guideline/slug/stripe-payment-terms-and-conditions",{headers:e}).subscribe({next:i=>{this.isLoadingTerms=!1,i&&i.data&&i.data.guideline?this.stripeTermsContent=i.data.guideline:this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u0644\u0627 \u064a\u0645\u0643\u0646 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645":"Unable to load Terms & Conditions")},error:i=>{this.isLoadingTerms=!1,this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u0641\u0634\u0644 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645":"Failed to load Terms & Conditions")}})}printTerms(){const e=window.open("","_blank");if(e){const i="ar"===this.lang?"\u0634\u0631\u0648\u0637 \u0648\u0623\u062d\u0643\u0627\u0645 \u0627\u0644\u0627\u062a\u0641\u0627\u0642\u064a\u0629":"Terms & Conditions",n=`\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>${i}</title>\n          <style>\n            body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }\n            h1 { color: #333; text-align: center; margin-bottom: 20px; }\n            .content { margin: 0 auto; max-width: 800px; }\n          </style>\n        </head>\n        <body>\n          <h1>${i}</h1>\n          <div class="content">${this.stripeTermsContent}</div>\n        </body>\n        </html>\n      `;e.document.open(),e.document.write(n),e.document.close(),setTimeout(()=>{e.print()},500)}else this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u0644\u0627 \u064a\u0645\u0643\u0646 \u0641\u062a\u062d \u0646\u0627\u0641\u0630\u0629 \u0627\u0644\u0637\u0628\u0627\u0639\u0629. \u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0645\u062a\u0635\u0641\u062d.":"Could not open print window. Please check your browser settings.")}saveTerms(){if(this.stripeTermsContent){const e="ar"===this.lang?"\u0634\u0631\u0648\u0637-\u0648\u0623\u062d\u0643\u0627\u0645-\u0627\u0644\u0627\u062a\u0641\u0627\u0642\u064a\u0629":"Terms-and-Conditions",i=this.stripHtmlTags(this.stripeTermsContent),n=new Blob([i],{type:"text/plain"}),r=window.URL.createObjectURL(n),u=document.createElement("a");u.href=r,u.download=`${e}.txt`,document.body.appendChild(u),u.click(),window.URL.revokeObjectURL(r),document.body.removeChild(u)}}stripHtmlTags(e){const i=document.createElement("div");return i.innerHTML=e,i.textContent||i.innerText||""}loadStripeTerms(){this.isLoadingTerms=!0,this.paymentService.getStripePaymentTerms().subscribe({next:e=>{this.stripeTermsContent=e?.data?.guideline||"",this.isLoadingTerms=!1},error:e=>{console.error("Error loading Stripe terms:",e),this.isLoadingTerms=!1}})}get allPaymentOptionsExist(){return"active"===this.existingManualAccount?.status&&this.existingProviderAccount&&null!==this.existingProviderAccount.details_submitted_at}static \u0275fac=function(i){return new(i||o)(t.rXU(t.zZn),t.rXU(c.ok),t.rXU(g.Ix),t.rXU(y.W),t.rXU(M),t.rXU(R.N),t.rXU(T.Qq))};static \u0275cmp=t.VBU({type:o,selectors:[["app-setup-payment-info"]],features:[t.Vt3],decls:16,vars:20,consts:[[3,"title","subtitle"],[1,"gradient-background",2,"padding-top","50px"],[1,"container-fluid"],[1,"row"],[1,"col-12","mx-auto","col-md-6"],["class","text-center py-5",4,"ngIf"],[4,"ngIf"],[3,"visibleChange","visible","modal","closable","draggable","resizable"],["pTemplate","header"],[1,"terms-content",2,"max-height","60vh","overflow-y","auto"],["class","text-center py-4",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","text-center py-4 text-muted",4,"ngIf"],["pTemplate","footer"],[3,"visibleChange","otpSubmit","otpResend","modalCancel","modalClose","visible","config","isSubmitting","isWaitingForRedirect","isResending"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-info",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[1,"mt-3"],[1,"text-gray-700"],[1,"text-muted"],[3,"formGroup"],[1,"mb-8"],[1,"d-flex","align-items-center","mb-4"],[1,"badge","badge-circle","badge-info","me-3"],[1,"mb-0","text-gray-800","fw-bold"],[1,"text-muted","mb-4"],["class","col-lg-6 mb-4",4,"ngFor","ngForOf"],["class","text-danger mt-3 fs-7 d-flex align-items-center",4,"ngIf"],["class","mb-8",4,"ngIf"],["class","mb-4",4,"ngIf"],["class","card-footer",4,"ngIf"],[1,"col-lg-6","mb-4"],[1,"position-relative"],["name","paymentType","type","radio",1,"btn-check",3,"change","id","value","checked","disabled"],[1,"btn","btn-outline","btn-outline-dashed","btn-outline-default","p-7","d-flex","align-items-center","position-relative","hover-elevate-up","shadow-sm","rounded-3","transition",2,"height","140px",3,"for"],[1,"mx-5","my-5"],["alt","Payment method icon",2,"width","38px","height","38px","object-fit","contain",3,"src"],[1,"d-block","fw-bold","text-inline-start"],[1,"text-gray-900","fw-bolder","d-block","fs-4","mb-2"],[1,"text-gray-500","fw-bold","fs-6"],[1,"d-block","text-info"],[1,"d-block","text-muted","fs-7","mt-1"],[1,"text-danger","mt-3","fs-7","d-flex","align-items-center"],[1,"fas","fa-exclamation-circle","me-2"],[1,"form-group"],[1,"form-label","required"],["class","selected-country-card mb-3",4,"ngIf"],["class","text-danger mt-2 fs-7 d-flex align-items-center",4,"ngIf"],[1,"selected-country-card","mb-3"],[1,"card","border-info"],[1,"card-body","p-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center"],[1,"me-3",2,"width","24px","height","16px","object-fit","cover",3,"src","alt"],[1,"fw-semibold"],["type","button",1,"btn","btn-sm","btn-light-danger",3,"click"],[1,"fas","fa-times"],[1,"input-group","mb-3"],[1,"input-group-text"],[1,"fas","fa-search"],["type","text",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions","placeholder"],[1,"country-list",2,"max-height","300px","overflow-y","auto","overflow-x","hidden"],["class","country-item p-3 hover-light-info cursor-pointer border-bottom",3,"click",4,"ngFor","ngForOf"],["class","p-3 text-center text-muted",4,"ngIf"],[1,"country-item","p-3","hover-light-info","cursor-pointer","border-bottom",3,"click"],["class","me-3","style","width: 24px; height: 16px; object-fit: cover;",3,"src","alt",4,"ngIf"],[1,"p-3","text-center","text-muted"],[1,"text-danger","mt-2","fs-7","d-flex","align-items-center"],[1,"mb-4"],[1,"form-check","d-flex","align-items-start"],["type","checkbox","id","termsAgreement","formControlName","termsAgreed",1,"form-check-input","me-3","mt-1",3,"change"],["for","termsAgreement",1,"form-check-label"],["href","javascript:void(0)",1,"text-decoration-underline","fw-bold","text-info",3,"click"],[1,"card-footer"],["role","alert",1,"alert","alert-info","d-flex","align-items-center","mb-0"],[1,"fas","fa-info-circle","me-3","fs-4"],[1,"mb-1","fw-bold"],[1,"mb-0"],[1,"text-decoration-underline","fw-bold","text-info",3,"routerLink"],[1,"text-muted","small"],[1,"fas","fa-shield-alt","text-info","me-1"],["type","button",1,"btn","btn-info",3,"click","disabled"],["class","spinner-border spinner-border-sm text-white me-2","role","status","aria-hidden","true","style","width: 1rem; height: 1rem;",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","text-white","me-2",2,"width","1rem","height","1rem"],[1,"d-flex","justify-content-between","align-items-center","w-100"],[1,"m-0"],[1,"d-flex"],[1,"btn","btn-sm","btn-icon","me-2",3,"click"],[1,"ki-outline","ki-printer","fs-3"],[1,"btn","btn-sm","btn-icon",3,"click"],[1,"ki-outline","ki-save-2","fs-3"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-info"],[3,"innerHTML"],[1,"text-center","py-4","text-muted"],[1,"fas","fa-exclamation-triangle","fs-2x","mb-3"],[1,"d-flex","justify-content-end","gap-3"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-info",3,"click"]],template:function(i,n){1&i&&(t.nrm(0,"p-toast")(1,"app-payment-header",0),t.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),t.DNE(6,z,9,2,"div",5)(7,bt,17,9,"div",6),t.k0s()()(),t.j41(8,"p-dialog",7),t.mxI("visibleChange",function(u){return t.DH7(n.showTermsDialog,u)||(n.showTermsDialog=u),u}),t.DNE(9,yt,8,1,"ng-template",8),t.j41(10,"div",9),t.DNE(11,Ct,4,1,"div",10)(12,vt,1,1,"div",11)(13,At,4,1,"div",12),t.k0s(),t.DNE(14,kt,5,2,"ng-template",13),t.k0s(),t.j41(15,"app-otp-modal",14),t.mxI("visibleChange",function(u){return t.DH7(n.showOtpDialog,u)||(n.showOtpDialog=u),u}),t.bIt("otpSubmit",function(u){return n.onOtpSubmit(u)})("otpResend",function(){return n.onOtpResend()})("modalCancel",function(){return n.onOtpCancel()})("modalClose",function(){return n.onOtpClose()}),t.k0s()()),2&i&&(t.R7$(),t.Y8G("title","ar"===n.lang?"\u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 \u0627\u0644\u062f\u0641\u0639":"Set Up Your Payment Account")("subtitle","ar"===n.lang?"\u0627\u062e\u062a\u0631 \u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629 \u0644\u0643 \u0648\u0642\u0645 \u0628\u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628\u0643 \u0627\u0644\u0628\u0646\u0643\u064a \u0628\u0633\u0647\u0648\u0644\u0629 \u0648\u0623\u0645\u0627\u0646":"Choose your preferred payment method and setup your digital wallet easily and securely"),t.R7$(5),t.Y8G("ngIf",n.isLoadingPaymentInfo),t.R7$(),t.Y8G("ngIf",!n.isLoadingPaymentInfo),t.R7$(),t.Aen(t.lJ4(19,U)),t.R50("visible",n.showTermsDialog),t.Y8G("modal",!0)("closable",!0)("draggable",!1)("resizable",!1),t.R7$(3),t.Y8G("ngIf",n.isLoadingTerms),t.R7$(),t.Y8G("ngIf",!n.isLoadingTerms&&n.stripeTermsContent),t.R7$(),t.Y8G("ngIf",!n.isLoadingTerms&&!n.stripeTermsContent),t.R7$(2),t.R50("visible",n.showOtpDialog),t.Y8G("config",n.otpModalConfig)("isSubmitting",n.isSubmittingOtp)("isWaitingForRedirect",n.isWaitingForRedirect)("isResending",n.isResendingOtp))},dependencies:[d.Sq,d.bT,c.qT,c.me,c.Zm,c.BC,c.cb,c.vS,c.j4,c.JD,b.y8,C.Ei,_.l,S,g.Wk,v,d.Jj],styles:['.payment-warning-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e4e6ef;border-radius:8px;padding:2rem}.payment-warning-card[_ngcontent-%COMP%]   .payment-type-info[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.875rem;padding:.5rem 1rem;border-radius:20px}.payment-warning-card[_ngcontent-%COMP%]   .payment-type-info[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-radius:50%}.payment-warning-card[_ngcontent-%COMP%]   .payment-type-info[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   .status-dot.active[_ngcontent-%COMP%]{background-color:#28a745}.payment-warning-card[_ngcontent-%COMP%]   .payment-type-info[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]   .status-dot.inactive[_ngcontent-%COMP%]{background-color:#dc3545}.payment-type-card[_ngcontent-%COMP%]{border:2px solid #e4e6ef;border-radius:1rem;padding:1.5rem;cursor:pointer;transition:all .3s ease;background-color:#fff;position:relative;height:200px;display:flex;align-items:center;justify-content:center;overflow:hidden}.payment-type-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#0978b908,#fff0 60%);opacity:0;transition:opacity .3s ease}.payment-type-card[_ngcontent-%COMP%]:hover{border-color:#0978b9;transform:translateY(-3px);box-shadow:0 .5rem 1.5rem #0978b926}.payment-type-card[_ngcontent-%COMP%]:hover:before{opacity:1}.payment-type-card.selected[_ngcontent-%COMP%]{border-color:#0978b9;background-color:#0978b90d;box-shadow:0 .5rem 1.5rem #0978b933}.payment-type-card.selected[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]{color:#0978b9}.payment-type-card.selected[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]   .payment-icon[_ngcontent-%COMP%]{filter:grayscale(0%);opacity:1;transform:scale(1.05)}.payment-type-card.selected[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-name[_ngcontent-%COMP%]{color:#0978b9;font-weight:600}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]{text-align:center}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]{margin-bottom:1.25rem;transition:all .3s ease;height:100px;display:flex;align-items:center;justify-content:center}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]   .payment-icon[_ngcontent-%COMP%]{max-height:100px;max-width:120px;object-fit:contain;filter:grayscale(80%);opacity:.8;transition:all .3s ease}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500;color:#181c32;transition:color .3s ease;letter-spacing:.01em}.payment-type-card[_ngcontent-%COMP%]   .payment-type-check[_ngcontent-%COMP%]{position:absolute;top:12px;inset-inline-end:12px;font-size:1.4rem;background:#0978b9;color:#fff!important;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 3px 6px #0978b933;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.payment-type-card[_ngcontent-%COMP%]   .payment-type-check[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}.search-container[_ngcontent-%COMP%]{margin-bottom:1.5rem}.search-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:.75rem;border:1px solid #e4e6ef;padding:.85rem 1.25rem;font-size:1rem;transition:all .25s ease;background-color:#f9f9f9}.search-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#0978b9;box-shadow:0 0 0 .25rem #0978b926;background-color:#fff}.search-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#a1a5b7;font-style:italic}.countries-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem;max-height:400px;overflow-y:auto;padding:.75rem;border:1px solid #e4e6ef;border-radius:.75rem;background-color:#f9f9f9;box-shadow:inset 0 2px 6px #00000008}.countries-grid[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.countries-grid[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.countries-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#0978b9;border-radius:10px;opacity:.7}.countries-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#0866a0}.country-card[_ngcontent-%COMP%]{border:1px solid #e4e6ef;border-radius:.75rem;padding:1rem 1.25rem;cursor:pointer;transition:all .3s ease;background-color:#fff;position:relative}.country-card[_ngcontent-%COMP%]:hover{border-color:#0978b9;transform:translateY(-2px);box-shadow:0 .3rem .8rem #0978b926}.country-card.selected[_ngcontent-%COMP%]{border-color:#0978b9;background-color:#0978b90d;box-shadow:0 .3rem .8rem #0978b933}.country-card.selected[_ngcontent-%COMP%]   .country-name[_ngcontent-%COMP%]{color:#0978b9;font-weight:600}.country-card[_ngcontent-%COMP%]   .country-card-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.25rem}.country-card[_ngcontent-%COMP%]   .country-card-content[_ngcontent-%COMP%]   .country-flag-option[_ngcontent-%COMP%]{flex-shrink:0}.country-card[_ngcontent-%COMP%]   .country-card-content[_ngcontent-%COMP%]   .country-flag-option[_ngcontent-%COMP%]   .flag-image[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:4px;object-fit:cover;border:1px solid #e4e6ef;box-shadow:0 2px 4px #0000000d;transition:all .3s ease}.country-card[_ngcontent-%COMP%]   .country-card-content[_ngcontent-%COMP%]   .country-name[_ngcontent-%COMP%]{font-size:1.05rem;color:#181c32;font-weight:500;transition:color .3s ease;flex:1;min-width:0;word-wrap:break-word;letter-spacing:.01em}.country-card[_ngcontent-%COMP%]   .country-check[_ngcontent-%COMP%]{position:absolute;top:10px;inset-inline-end:10px;font-size:1rem;background:#0978b9;color:#fff!important;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 5px #0978b933;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.country-card[_ngcontent-%COMP%]   .country-check[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.card[_ngcontent-%COMP%]{border:none;box-shadow:0 .5rem 2rem #00000014;border-radius:1rem;overflow:hidden}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #e4e6ef;padding:1.75rem 2rem;position:relative}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:2rem;width:50px;height:3px;background:#0978b9;border-radius:3px}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:0;font-weight:700;color:#181c32;font-size:1.4rem;letter-spacing:.01em}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2.5rem 2rem}.card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{background-color:#fff;border-top:1px solid #e4e6ef;padding:1.5rem 2rem}.btn-info[_ngcontent-%COMP%]{background-color:#ebf3fe;border-color:#ebf3fe;color:#0978b9;border-radius:.75rem;padding:.75rem 2rem;font-weight:500;letter-spacing:.03em;transition:all .3s ease;position:relative;overflow:hidden}.btn-info[_ngcontent-%COMP%]:hover{background-color:#d4e8fc;border-color:#d4e8fc;transform:translateY(-2px)}.btn-info[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-info[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed}.btn-light-info[_ngcontent-%COMP%]{background-color:#ebf3fe;border-color:#ebf3fe;color:#0978b9}.btn-light-info[_ngcontent-%COMP%]:hover{background-color:#d4e8fc;border-color:#d4e8fc}.selected-country-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-color:#0978b9!important;border-width:2px}.country-item[_ngcontent-%COMP%]{border-radius:8px;transition:all .3s ease}.country-item[_ngcontent-%COMP%]:hover{background-color:#ebf3fe;transform:translate(4px)}.hover-light-info[_ngcontent-%COMP%]:hover{background-color:#ebf3fe!important}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.badge.badge-circle[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600}.badge.badge-circle.badge-info[_ngcontent-%COMP%]{background-color:#0978b9;color:#fff}.badge.badge-light-success[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#4caf50}.badge.badge-light-warning[_ngcontent-%COMP%]{background-color:#fff8e1;color:#ff9800}@media (max-width: 768px){.countries-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}.payment-type-card[_ngcontent-%COMP%]{height:150px;padding:1.5rem 1rem}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]{margin-bottom:.75rem}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]   .payment-icon[_ngcontent-%COMP%]{max-height:80px}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-name[_ngcontent-%COMP%]{font-size:1.1rem}.card-body[_ngcontent-%COMP%]{padding:1.75rem 1.5rem}.card-header[_ngcontent-%COMP%]{padding:1.5rem 1.75rem}.card-header[_ngcontent-%COMP%]:after{left:1.75rem;width:40px}.card-footer[_ngcontent-%COMP%]{padding:1.25rem 1.75rem}}@media (max-width: 576px){.countries-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.payment-type-card[_ngcontent-%COMP%]{height:120px;padding:1rem}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]{margin-bottom:.5rem;height:70px}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-icon[_ngcontent-%COMP%]   .payment-icon[_ngcontent-%COMP%]{max-height:70px;max-width:100px}.payment-type-card[_ngcontent-%COMP%]   .payment-type-content[_ngcontent-%COMP%]   .payment-type-name[_ngcontent-%COMP%]{font-size:1rem}.card-body[_ngcontent-%COMP%]{padding:1.5rem 1.25rem}.card-header[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}.card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.25rem}.card-header[_ngcontent-%COMP%]:after{left:1.5rem;width:35px}.card-footer[_ngcontent-%COMP%]{padding:1.25rem 1.5rem}.btn-info[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem}}.border-gray-200[_ngcontent-%COMP%]{border:2px solid #e4e6ef!important}']})}return o})();var Pt=l(1985),xt=l(2016),Ot=l(7112),Mt=l(7415),E=l(3955);const St=["phoneInput"],It=()=>({width:"90vw",maxWidth:"800px"}),Et=()=>({width:"90vw",maxWidth:"500px"});function wt(o,a){if(1&o&&(t.j41(0,"div",51),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.getFieldError("account_name")," ")}}function Rt(o,a){if(1&o){const e=t.RV6();t.j41(0,"img",54),t.bIt("error",function(){t.eBV(e);const n=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.onFlagError(n))}),t.k0s()}if(2&o){const e=t.XpG().$implicit,i=t.XpG(2);t.Y8G("src",i.getFlagUrl(e.flag),t.B4B)("alt",e.name)}}function Tt(o,a){if(1&o&&(t.j41(0,"div",34),t.DNE(1,Rt,1,2,"img",53),t.j41(2,"span"),t.EFF(3),t.k0s()()),2&o){const e=a.$implicit;t.R7$(),t.Y8G("ngIf",e.showFlag),t.R7$(2),t.JRh(e.name)}}function jt(o,a){if(1&o){const e=t.RV6();t.j41(0,"img",54),t.bIt("error",function(){t.eBV(e);const n=t.XpG(2).$implicit,r=t.XpG(2);return t.Njj(r.onFlagError(n))}),t.k0s()}if(2&o){const e=t.XpG(2).$implicit,i=t.XpG(2);t.Y8G("src",i.getFlagUrl(e.flag),t.B4B)("alt",e.name)}}function Dt(o,a){if(1&o&&(t.j41(0,"div",34),t.DNE(1,jt,1,2,"img",53),t.j41(2,"span"),t.EFF(3),t.k0s()()),2&o){const e=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",e.showFlag),t.R7$(2),t.JRh(e.name)}}function $t(o,a){1&o&&t.DNE(0,Dt,4,2,"div",55),2&o&&t.Y8G("ngIf",a.$implicit)}function Gt(o,a){if(1&o&&(t.j41(0,"div",56),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.getFieldError("account_country_id")," ")}}function Vt(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",11)(1,"label",12),t.EFF(2),t.k0s(),t.j41(3,"p-dropdown",52),t.bIt("onChange",function(n){t.eBV(e);const r=t.XpG();return t.Njj(r.onAccountCountryChange(n))}),t.DNE(4,Tt,4,2,"ng-template",26)(5,$t,1,1,"ng-template",27),t.k0s(),t.DNE(6,Gt,2,1,"div",28),t.k0s()}if(2&o){const e=t.XpG();t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0628\u0644\u062f \u0627\u0644\u0625\u0642\u0627\u0645\u0629":"Country of Residence"," "),t.R7$(),t.AVh("p-invalid",e.getFieldError("account_country_id")),t.Y8G("options",e.countries)("filter",!0)("filterBy","name")("showClear",!0)("placeholder","ar"===e.lang?"\u0627\u062e\u062a\u0631 \u0628\u0644\u062f \u0627\u0644\u0625\u0642\u0627\u0645\u0629":"Select Country of Residence")("filterPlaceholder","ar"===e.lang?"\u0627\u0628\u062d\u062b \u0639\u0646 \u0628\u0644\u062f...":"Search for a country..."),t.R7$(3),t.Y8G("ngIf",e.getFieldError("account_country_id"))}}function Nt(o,a){if(1&o&&(t.j41(0,"div",51),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.getFieldError("account_address")," ")}}function Yt(o,a){if(1&o&&(t.j41(0,"div",51),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.getFieldError("bank_name")," ")}}function Bt(o,a){if(1&o){const e=t.RV6();t.j41(0,"img",54),t.bIt("error",function(){t.eBV(e);const n=t.XpG().$implicit,r=t.XpG();return t.Njj(r.onFlagError(n))}),t.k0s()}if(2&o){const e=t.XpG().$implicit,i=t.XpG();t.Y8G("src",i.getFlagUrl(e.flag),t.B4B)("alt",e.name)}}function Xt(o,a){if(1&o&&(t.j41(0,"div",34),t.DNE(1,Bt,1,2,"img",53),t.j41(2,"span"),t.EFF(3),t.k0s()()),2&o){const e=a.$implicit;t.R7$(),t.Y8G("ngIf",e.showFlag),t.R7$(2),t.JRh(e.name)}}function Lt(o,a){if(1&o){const e=t.RV6();t.j41(0,"img",54),t.bIt("error",function(){t.eBV(e);const n=t.XpG(2).$implicit,r=t.XpG();return t.Njj(r.onFlagError(n))}),t.k0s()}if(2&o){const e=t.XpG(2).$implicit,i=t.XpG();t.Y8G("src",i.getFlagUrl(e.flag),t.B4B)("alt",e.name)}}function Ut(o,a){if(1&o&&(t.j41(0,"div",34),t.DNE(1,Lt,1,2,"img",53),t.j41(2,"span"),t.EFF(3),t.k0s()()),2&o){const e=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",e.showFlag),t.R7$(2),t.JRh(e.name)}}function Wt(o,a){1&o&&t.DNE(0,Ut,4,2,"div",55),2&o&&t.Y8G("ngIf",a.$implicit)}function zt(o,a){if(1&o&&(t.j41(0,"div",56),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.getFieldError("bank_country_id")," ")}}function Ht(o,a){if(1&o&&(t.j41(0,"div",51),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.getFieldError("bank_address")," ")}}function Jt(o,a){if(1&o&&(t.j41(0,"div",51),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.getFieldError("bank_iban")," ")}}function qt(o,a){if(1&o&&(t.j41(0,"div",51),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.getFieldError("bank_swift_code")," ")}}function Zt(o,a){if(1&o&&(t.j41(0,"div",51),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.getFieldError("accept_terms")," ")}}function Kt(o,a){if(1&o&&(t.j41(0,"div",62),t.nrm(1,"i",63),t.EFF(2),t.k0s()),2&o){const e=t.XpG(2);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u062a\u0645 \u0642\u0628\u0648\u0644 \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645":"Terms & Conditions accepted"," ")}}function Qt(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",11)(1,"div",57),t.nrm(2,"input",58),t.j41(3,"label",59),t.EFF(4),t.j41(5,"a",60),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.openTermsDialog())}),t.EFF(6),t.k0s()(),t.DNE(7,Zt,2,1,"div",14)(8,Kt,3,1,"div",61),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(2),t.AVh("is-invalid",e.getFieldError("accept_terms")),t.Y8G("disabled",e.termsAccepted),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0623\u0648\u0627\u0641\u0642 \u0639\u0644\u0649":"I agree to the"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645":"Terms & Conditions"," "),t.R7$(),t.Y8G("ngIf",e.getFieldError("accept_terms")),t.R7$(),t.Y8G("ngIf",e.termsAccepted)}}function te(o,a){1&o&&t.nrm(0,"span",64)}function ee(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",65)(1,"h5",66),t.EFF(2),t.k0s(),t.j41(3,"div",67)(4,"button",68),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.printTerms())}),t.nrm(5,"i",69),t.k0s(),t.j41(6,"button",70),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.saveTerms())}),t.nrm(7,"i",71),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(2),t.JRh("ar"===e.lang?"\u0634\u0631\u0648\u0637 \u0648\u0623\u062d\u0643\u0627\u0645 \u0645\u062d\u0641\u0638\u0629 \u0627\u0644\u062f\u0641\u0639":"Wallet Payment Terms & Conditions"),t.R7$(2),t.Y8G("disabled",e.isLoadingTerms),t.R7$(2),t.Y8G("disabled",e.isLoadingTerms)}}function ne(o,a){if(1&o&&(t.j41(0,"div",72)(1,"div",73)(2,"span",74),t.EFF(3),t.k0s()()()),2&o){const e=t.XpG();t.R7$(3),t.JRh("ar"===e.lang?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...":"Loading...")}}function oe(o,a){if(1&o&&t.nrm(0,"div",75),2&o){const e=t.XpG();t.Y8G("innerHTML",e.termsContent,t.npT)}}function ie(o,a){if(1&o&&(t.j41(0,"div",76),t.nrm(1,"i",77),t.j41(2,"p"),t.EFF(3),t.k0s()()),2&o){const e=t.XpG();t.R7$(3),t.JRh("ar"===e.lang?"\u0644\u0627 \u064a\u0645\u0643\u0646 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645":"Unable to load Terms & Conditions")}}function re(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",78)(1,"button",79),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.declineTerms())}),t.EFF(2),t.k0s(),t.j41(3,"button",80),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.acceptTerms())}),t.EFF(4),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0631\u0641\u0636":"Decline"," "),t.R7$(),t.Y8G("disabled",e.isLoadingTerms),t.R7$(),t.SpI(" ","ar"===e.lang?"\u0623\u0648\u0627\u0641\u0642":"I Agree"," ")}}function ae(o,a){if(1&o&&(t.j41(0,"div",34),t.nrm(1,"i",81),t.j41(2,"h5",66),t.EFF(3),t.k0s()()),2&o){const e=t.XpG();t.R7$(3),t.JRh("ar"===e.lang?"\u062a\u063a\u064a\u064a\u0631\u0627\u062a \u063a\u064a\u0631 \u0645\u062d\u0641\u0648\u0638\u0629":"Unsaved Changes")}}function ue(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",78)(1,"button",39),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onStayOnPage())}),t.EFF(2),t.k0s(),t.j41(3,"button",82),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onDiscardChanges())}),t.EFF(4),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0627\u0644\u0628\u0642\u0627\u0621 \u0641\u064a \u0627\u0644\u0635\u0641\u062d\u0629":"Stay on Page"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u062a\u062c\u0627\u0647\u0644 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a":"Discard Changes"," ")}}let se=(()=>{class o extends f.${fb;router;paymentService;countriesService;profileService;manualAccountForm;showValidationErrors=!1;isEditing=!1;existingData=null;hasExistingManualAccount=!1;countries=[];userRoles=[];isCompanyAccount=!1;resendCooldown=0;canResendOtp=!0;formattedPhoneNumber="";selectedCountry=null;termsAccepted=!1;showTermsDialog=!1;termsContent="";isLoadingTerms=!1;acceptAgreement=!1;initialFormValue=null;showUnsavedChangesDialog=!1;pendingNavigation=()=>{};isFormDirtyOnEdit=!1;allowNavigationAfterDiscard=!1;navigationResolver=null;showOtpModal=!1;isResendingOtp=!1;otpModalConfig={headerTitle:"",autoGenerateOnOpen:!0};phoneInput;constructor(e,i,n,r,u,s){super(e),this.fb=i,this.router=n,this.paymentService=r,this.countriesService=u,this.profileService=s,this.manualAccountForm=this.fb.group({account_name:["",[c.k0.required,c.k0.minLength(2)]],account_country_id:[""],account_address:[""],account_phone:[""],bank_name:["",[c.k0.required,c.k0.minLength(2)]],bank_country_id:["",[c.k0.required]],bank_address:["",[c.k0.required,c.k0.minLength(5)]],bank_iban:["",[c.k0.required,c.k0.minLength(10)]],bank_swift_code:[""],accept_terms:[!1,[c.k0.requiredTrue]],code:["",[c.k0.required,c.k0.minLength(4)]],phoneCountryCode:[""],phoneNumber:[""]})}ngOnInit(){this.loadUserProfile(),this.loadCountries(),this.trackFormChanges()}ngAfterViewInit(){console.log("ngAfterViewInit called, phoneInput available:",!!this.phoneInput),this.isEditing&&this.phoneInput&&setTimeout(()=>{console.log("Calling updatePhoneInputDisplay from ngAfterViewInit"),this.updatePhoneInputDisplay()})}trackFormChanges(){this.manualAccountForm.valueChanges.subscribe(()=>{this.isEditing&&this.initialFormValue&&(this.isFormDirtyOnEdit=this.hasFormChanged())})}hasFormChanged(){if(!this.initialFormValue)return!1;const e=this.manualAccountForm.getRawValue(),i=["account_name","account_country_id","account_address","account_phone","bank_name","bank_country_id","bank_address","bank_iban","bank_swift_code","accept_terms"];for(const n of i)if(e[n]!==this.initialFormValue[n])return!0;return!1}canDeactivate(){return!!this.allowNavigationAfterDiscard||!this.isEditing||!this.hasFormChanged()||new Pt.c(e=>{this.navigationResolver=i=>{e.next(i),e.complete()},this.showUnsavedChangesDialog=!0})}unloadNotification(e){this.isEditing&&this.hasFormChanged()&&(e.returnValue=!0)}onStayOnPage(){this.showUnsavedChangesDialog=!1,this.navigationResolver&&(this.navigationResolver(!1),this.navigationResolver=null),this.openOtpModal()}onDiscardChanges(){this.showUnsavedChangesDialog=!1,this.initialFormValue=this.manualAccountForm.getRawValue(),this.manualAccountForm.markAsPristine(),this.isFormDirtyOnEdit=!1,this.navigationResolver&&(this.navigationResolver(!0),this.navigationResolver=null),this.pendingNavigation&&(this.pendingNavigation(),this.pendingNavigation=()=>{})}loadUserProfile(){this.profileService.getProfile().subscribe({next:e=>{this.userRoles=e?.roles||[],this.isCompanyAccount=this.userRoles.includes("company"),this.updateValidatorsBasedOnAccountType()},error:e=>{console.error("Error loading user profile:",e)}})}updateValidatorsBasedOnAccountType(){const e=this.manualAccountForm.get("account_country_id");this.isCompanyAccount?e?.clearValidators():e?.setValidators([c.k0.required]),e?.updateValueAndValidity()}loadCountries(){console.log("Starting to load countries from API: https://api.foresighta.co/api/common/setting/country/list"),this.countriesService.getCountries().subscribe({next:e=>{if(console.log("Countries API response:",e),console.log("Countries API response length:",e?.length),e&&0!==e.length){this.countries=e.map(r=>({...r,showFlag:!0})),console.log("Countries loaded successfully:",this.countries.length),console.log("Sample countries:",this.countries.slice(0,3));const i=this.countries.find(r=>"268"===r.international_code),n=this.countries.find(r=>167===r.id);console.log("Country with code 268:",i),console.log("Country with ID 167:",n)}else console.error("Empty or null countries response from API"),this.countries=[];this.loadExistingData()},error:e=>{console.error("Error loading countries from API:",e),console.error("Error status:",e?.status),console.error("Error message:",e?.message),console.error("Error details:",e?.error),this.countries=[],this.loadExistingData()}})}loadExistingData(){console.log("Loading existing data, countries available:",this.countries.length),this.paymentService.getPaymentAccountDetails().subscribe({next:e=>{const i=this.paymentService.getManualAccount(e.data);this.hasExistingManualAccount=null!==i&&null!==i.bank_iban&&""!==i.bank_iban,this.acceptAgreement=i?.accept_agreement||!1;const r="true"===new URLSearchParams(window.location.search).get("edit");if(r&&i){this.isEditing=!0,this.existingData=i;let u="",s="";if(this.existingData.account_phone_code&&this.existingData.account_phone)u=this.existingData.account_phone_code,s=this.existingData.account_phone,this.formattedPhoneNumber=`(+${u})${s}`,console.log("Phone code from API:",u,"Phone number:",s);else if(this.existingData.account_phone){const m=this.existingData.account_phone.match(/\(\+(\d+)\)(.+)/);m?(u=m[1],s=m[2],this.formattedPhoneNumber=this.existingData.account_phone):(s=this.existingData.account_phone,this.formattedPhoneNumber=s)}let p="";this.existingData.bank_country&&(p=this.existingData.bank_country.id,console.log("Bank country from API:",this.existingData.bank_country),console.log("Bank country ID to set:",p),console.log("Bank country ID type:",typeof p)),this.existingData.account_country&&this.setSelectedCountry(this.existingData.account_country);const h={account_name:this.existingData.account_name||"",account_country_id:this.existingData.account_country?.id||"",account_address:this.existingData.account_address||"",account_phone:this.formattedPhoneNumber||"",bank_name:this.existingData.bank_name||"",bank_country_id:p,bank_address:this.existingData.bank_address||"",bank_iban:this.existingData.bank_iban||"",bank_swift_code:this.existingData.bank_swift_code||"",accept_terms:this.acceptAgreement,phoneCountryCode:u,phoneNumber:s.replace(/\D/g,"")};console.log("Available countries for dropdown:",this.countries.map(m=>({id:m.id,name:m.name}))),console.log("Looking for bank country ID:",p,"type:",typeof p);const P=this.countries.find(m=>m.id===p);console.log("Matching bank country found:",P),this.manualAccountForm.patchValue(h),setTimeout(()=>{this.initialFormValue=this.manualAccountForm.getRawValue(),this.manualAccountForm.markAsPristine(),this.updatePhoneInputDisplay(),console.log("Form value after patching:",this.manualAccountForm.getRawValue()),setTimeout(()=>{this.updatePhoneInputDisplay()},500)})}else i?.country&&(this.setSelectedCountry(i.country),this.manualAccountForm.patchValue({account_country_id:i.country.id,bank_country_id:i.country.id}));r||this.loadManualPaymentTerms()},error:()=>{console.log("No existing payment details"),this.hasExistingManualAccount=!1,this.isEditing=!1,this.loadManualPaymentTerms()}})}setSelectedCountry(e){const i=this.countries.find(n=>n.id===e.id);this.selectedCountry=i||{...e,region_id:0,iso2:"",iso3:"",nationality:"",nationalities:{en:"",ar:""},international_code:"",names:{en:e.name,ar:e.name},status:"active",showFlag:!0}}onAccountCountryChange(e){const i=e.value;this.selectedCountry=i&&this.countries.find(n=>n.id===i)||null}onBankCountryChange(e){}onSubmit(){if(this.showValidationErrors=!0,this.markFormGroupTouched(),this.isEditing&&!this.hasFormChanged())return void this.showInfo("ar"===this.lang?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a":"Information","ar"===this.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0625\u062c\u0631\u0627\u0621 \u0623\u064a \u062a\u063a\u064a\u064a\u0631\u0627\u062a":"No changes were made");const e=this.manualAccountForm.value;if(this.areRequiredFieldsValid()){if(!e.code)return void this.generateAndOpenOtpModal();if(this.manualAccountForm.valid){const i=this.manualAccountForm.value;if(!this.isCompanyAccount&&!i.account_country_id)return void this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0628\u0644\u062f \u0627\u0644\u062d\u0633\u0627\u0628":"Please select account country");if(!i.bank_country_id)return void this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0628\u0644\u062f \u0627\u0644\u0628\u0646\u0643":"Please select bank country");const n={account_name:i.account_name,account_country_id:i.account_country_id,account_address:i.account_address,account_phone_code:i.phoneCountryCode||"",account_phone:i.phoneNumber||"",bank_name:i.bank_name,bank_country_id:i.bank_country_id,bank_address:i.bank_address,bank_iban:i.bank_iban.replace(/\s+/g,""),bank_swift_code:i.bank_swift_code,accept_terms:i.accept_terms,code:i.code};this.paymentService.updateManualAccount(n).subscribe({next:()=>{this.initialFormValue=this.manualAccountForm.getRawValue(),this.manualAccountForm.markAsPristine(),this.isFormDirtyOnEdit=!1,this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u062d\u0641\u0638":"Success","ar"===this.lang?"\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u062d\u0633\u0627\u0628 \u0628\u0646\u062c\u0627\u062d":"Account updated successfully"),this.router.navigate(["/app/insighter-dashboard/account-settings/payment-settings"])},error:r=>{this.handleServerErrors(r)}})}}}markFormGroupTouched(){Object.keys(this.manualAccountForm.controls).forEach(e=>{const i=this.manualAccountForm.get(e);i?.markAsTouched(),i?.markAsDirty()})}areRequiredFieldsValid(){const e=["account_name","bank_name","bank_country_id","bank_address","bank_iban"];this.isCompanyAccount||e.push("account_country_id"),this.acceptAgreement||e.push("accept_terms");for(const i of e){const n=this.manualAccountForm.get(i);if(!n||n.invalid)return!1}return!0}goBack(){this.isEditing&&this.hasFormChanged()?(this.showUnsavedChangesDialog=!0,this.pendingNavigation=()=>{this.router.navigate(["/app/insighter-dashboard/account-settings/payment-settings"])}):this.router.navigate(this.isEditing?["/app/insighter-dashboard/account-settings/payment-settings"]:["/setup-payment-info"])}onCountryCodeChange(e){this.manualAccountForm.get("phoneCountryCode")?.setValue(e)}onPhoneNumberChange(e){this.manualAccountForm.get("phoneNumber")?.setValue(e)}onFormattedPhoneNumberChange(e){this.formattedPhoneNumber=e,this.manualAccountForm.get("account_phone")?.setValue(e)}updatePhoneInputDisplay(){if(this.phoneInput){const e=this.manualAccountForm.get("phoneCountryCode")?.value,i=this.manualAccountForm.get("phoneNumber")?.value;if(console.log("Updating phone display - countryCode:",e,"phoneNumber:",i),console.log("Available countries for phone:",this.countries.length),0===this.countries.length)return console.log("Countries not loaded yet, retrying in 1 second..."),void setTimeout(()=>this.updatePhoneInputDisplay(),1e3);const n=this.countries.find(r=>r.international_code===e);console.log("Matching country found:",n),e&&n&&(this.phoneInput.countryCode=e,this.phoneInput.updateMask(),this.phoneInput.updatePlaceholder(),console.log("Phone country code set to:",e)),i&&(this.phoneInput.value=i,console.log("Phone number set to:",i))}else console.log("Phone input component not available yet")}onFlagError(e){e.showFlag=!1}getFlagUrl(e){return`assets/media/flags/${e}.svg`}openOtpModal(){this.otpModalConfig.headerTitle="ar"===this.lang?"\u062a\u062d\u0642\u0642 \u0645\u0646 \u0631\u0645\u0632 \u0627\u0644\u062f\u0641\u0639":"Payment Verification",this.showOtpModal=!0}generateAndOpenOtpModal(){this.paymentService.generatePaymentOTP().subscribe({next:()=>{this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0628\u0646\u062c\u0627\u062d":"Successfully Sent","ar"===this.lang?"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"Verification code sent to your email"),this.openOtpModal()},error:e=>{this.handleServerErrors(e)}})}onOtpSubmit(e){this.manualAccountForm.patchValue({code:e}),this.showOtpModal=!1,this.submitFormWithOtp()}submitFormWithOtp(){if(this.manualAccountForm.valid){const e=this.manualAccountForm.value;if(!this.isCompanyAccount&&!e.account_country_id)return void this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0628\u0644\u062f \u0627\u0644\u062d\u0633\u0627\u0628":"Please select account country");if(!e.bank_country_id)return void this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0628\u0644\u062f \u0627\u0644\u0628\u0646\u0643":"Please select bank country");const i={account_name:e.account_name,account_country_id:e.account_country_id,account_address:e.account_address,account_phone_code:e.phoneCountryCode||"",account_phone:e.phoneNumber||"",bank_name:e.bank_name,bank_country_id:e.bank_country_id,bank_address:e.bank_address,bank_iban:e.bank_iban.replace(/\s+/g,""),bank_swift_code:e.bank_swift_code,accept_terms:e.accept_terms,code:e.code};this.paymentService.updateManualAccount(i).subscribe({next:()=>{this.initialFormValue=this.manualAccountForm.getRawValue(),this.manualAccountForm.markAsPristine(),this.isFormDirtyOnEdit=!1,this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u062d\u0641\u0638":"Success","ar"===this.lang?"\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u062d\u0633\u0627\u0628 \u0628\u0646\u062c\u0627\u062d":"Account updated successfully"),this.router.navigate(["/app/insighter-dashboard/account-settings/payment-settings"])},error:n=>{this.handleOtpError(n)}})}}handleOtpError(e){e?.error?.errors?.code&&!e?.error?.errors?.account_phone?(this.manualAccountForm.patchValue({code:""}),this.showError("ar"===this.lang?"\u0631\u0645\u0632 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d":"Invalid Code","ar"===this.lang?"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0645\u062f\u062e\u0644 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d\u060c \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649":"The entered code is invalid, please try again"),setTimeout(()=>{this.openOtpModal()},500)):this.handleServerErrors(e)}onOtpResend(){this.isResendingOtp=!0,this.paymentService.generatePaymentOTP().subscribe({next:()=>{this.isResendingOtp=!1,this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0628\u0646\u062c\u0627\u062d":"Successfully Sent","ar"===this.lang?"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0627\u0644\u062c\u062f\u064a\u062f \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"New verification code sent to your email")},error:e=>{this.isResendingOtp=!1,this.handleServerErrors(e)}})}onOtpCancel(){this.showOtpModal=!1,this.manualAccountForm.patchValue({code:""})}onOtpClose(){this.showOtpModal=!1,this.manualAccountForm.patchValue({code:""})}openTermsDialog(){this.showTermsDialog=!0}closeTermsDialog(){this.showTermsDialog=!1}acceptTerms(){this.termsAccepted=!0,this.manualAccountForm.patchValue({termsAccepted:!0}),this.closeTermsDialog()}declineTerms(){this.termsAccepted=!1,this.manualAccountForm.patchValue({termsAccepted:!1}),this.closeTermsDialog()}loadManualPaymentTerms(){this.isLoadingTerms=!0,this.paymentService.getManualPaymentTerms().subscribe({next:e=>{this.termsContent=e.data.guideline,this.isLoadingTerms=!1},error:()=>{this.isLoadingTerms=!1}})}printTerms(){const e=window.open("","_blank");if(e){const i="ar"===this.lang?"\u0634\u0631\u0648\u0637 \u0648\u0623\u062d\u0643\u0627\u0645 \u0645\u062d\u0641\u0638\u0629 \u0627\u0644\u062f\u0641\u0639":"Wallet Payment Terms & Conditions",n=`\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>${i}</title>\n          <style>\n            body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }\n            h1 { color: #333; text-align: center; margin-bottom: 20px; }\n            .content { margin: 0 auto; max-width: 800px; }\n          </style>\n        </head>\n        <body>\n          <h1>${i}</h1>\n          <div class="content">${this.termsContent}</div>\n        </body>\n        </html>\n      `;e.document.open(),e.document.write(n),e.document.close(),setTimeout(()=>{e.print()},500)}}saveTerms(){if(this.termsContent){const e="ar"===this.lang?"\u0634\u0631\u0648\u0637-\u0648\u0623\u062d\u0643\u0627\u0645-\u0645\u062d\u0641\u0638\u0629-\u0627\u0644\u062f\u0641\u0639":"Wallet-Payment-Terms-and-Conditions",i=this.stripHtmlTags(this.termsContent),n=new Blob([i],{type:"text/plain"}),r=window.URL.createObjectURL(n),u=document.createElement("a");u.href=r,u.download=`${e}.txt`,document.body.appendChild(u),u.click(),window.URL.revokeObjectURL(r),document.body.removeChild(u)}}stripHtmlTags(e){const i=document.createElement("div");return i.innerHTML=e,i.textContent||i.innerText||""}getAccountNameLabel(){return this.isCompanyAccount?"ar"===this.lang?"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0642\u0627\u0646\u0648\u0646\u064a \u0644\u0644\u0634\u0631\u0643\u0629":"Company Legal Name":"ar"===this.lang?"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644":"Full Name"}getFieldError(e){const i=this.manualAccountForm.get(e);if(i?.errors&&(i.dirty||i.touched||this.showValidationErrors)){if(i.errors.required||i.errors.requiredTrue)return"accept_terms"===e?"ar"===this.lang?"\u064a\u062c\u0628 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645":"You must agree to the Terms & Conditions":"ar"===this.lang?`${this.getFieldLabel(e)} \u0645\u0637\u0644\u0648\u0628`:`${this.getFieldLabel(e)} is required`;if(i.errors.minlength){const n=i.errors.minlength.requiredLength;return"ar"===this.lang?`${this.getFieldLabel(e)} \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 ${n} \u0623\u062d\u0631\u0641`:`${this.getFieldLabel(e)} must be at least ${n} characters`}}return""}getFieldLabel(e){const i={account_name:this.isCompanyAccount?{en:"Company Legal Name",ar:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0642\u0627\u0646\u0648\u0646\u064a \u0644\u0644\u0634\u0631\u0643\u0629"}:{en:"Full Name",ar:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644"},account_country_id:{en:"Account Country",ar:"\u0628\u0644\u062f \u0627\u0644\u062d\u0633\u0627\u0628"},account_address:{en:"Account Address",ar:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u062d\u0633\u0627\u0628"},account_phone:{en:"Account Phone",ar:"\u0647\u0627\u062a\u0641 \u0627\u0644\u062d\u0633\u0627\u0628"},bank_name:{en:"Bank Name",ar:"\u0627\u0633\u0645 \u0627\u0644\u0628\u0646\u0643"},bank_country_id:{en:"Bank Country",ar:"\u0628\u0644\u062f \u0627\u0644\u0628\u0646\u0643"},bank_address:{en:"Bank Address",ar:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0628\u0646\u0643"},bank_iban:{en:"IBAN",ar:"\u0631\u0642\u0645 \u0627\u0644\u0622\u064a\u0628\u0627\u0646"},bank_swift_code:{en:"SWIFT Code",ar:"\u0631\u0645\u0632 \u0627\u0644\u0633\u0648\u064a\u0641\u062a"},phoneCountryCode:{en:"Country Code",ar:"\u0631\u0645\u0632 \u0627\u0644\u0628\u0644\u062f"},phoneNumber:{en:"Phone Number",ar:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"},code:{en:"Verification Code",ar:"\u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642"},accept_terms:{en:"Terms & Conditions",ar:"\u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645"}};return"ar"===this.lang?i[e].ar:i[e].en}handleServerErrors(e){if(e?.error)if(e.error.errors){const i=e.error.errors;for(const n in i)if(i.hasOwnProperty(n)){const r=i[n];this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",Array.isArray(r)?r.join(", "):r)}}else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",e.error.message?e.error.message:"ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639":"An unexpected error occurred.");else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred","ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639":"An unexpected error occurred.")}static \u0275fac=function(i){return new(i||o)(t.rXU(t.zZn),t.rXU(c.ok),t.rXU(g.Ix),t.rXU(y.W),t.rXU(xt.C),t.rXU(Ot.p))};static \u0275cmp=t.VBU({type:o,selectors:[["app-manual-account"]],viewQuery:function(i,n){if(1&i&&t.GBs(St,5),2&i){let r;t.mGM(r=t.lsd())&&(n.phoneInput=r.first)}},hostBindings:function(i,n){1&i&&t.bIt("beforeunload",function(u){return n.unloadNotification(u)},!1,t.tSv)},features:[t.Vt3],decls:106,vars:103,consts:[["phoneInput",""],[3,"title","subtitle"],[1,"container-fluid","gradient-background",2,"padding","50px 0px"],[1,"row","justify-content-center",2,"padding-bottom","100px"],[1,"col-lg-8","col-xl-7"],[3,"ngSubmit","formGroup"],[1,"card","mb-6"],[1,"card-header","bg-light-info"],[1,"card-title","mb-0","text-info"],[1,"fas","fa-user","me-2"],[1,"card-body"],[1,"mb-6"],[1,"form-label","required"],["type","text","formControlName","account_name",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],[1,"form-text","text-muted"],[1,"fas","fa-info-circle","me-1"],["class","mb-6",4,"ngIf"],[1,"form-label"],[1,"text-gray-500"],["type","text","formControlName","account_address",1,"form-control",3,"placeholder"],[1,"mb-0"],[3,"countryCodeChange","phoneNumberChange","formattedPhoneNumberChange","flagError","countries","placeholder","searchPlaceholder","lang","isRequired","showValidationErrors","countryCodeError","phoneNumberError","initialCountryCode","initialPhoneNumber"],[1,"fas","fa-building-columns","me-2"],["type","text","formControlName","bank_name",1,"form-control",3,"placeholder"],["formControlName","bank_country_id","optionLabel","name","optionValue","id","styleClass","w-100",3,"onChange","options","filter","filterBy","showClear","placeholder","filterPlaceholder"],["pTemplate","item"],["pTemplate","selectedItem"],["class","invalid-feedback d-block",4,"ngIf"],["type","text","formControlName","bank_address",1,"form-control",3,"placeholder"],["type","text","formControlName","bank_iban",1,"form-control",3,"placeholder"],["type","text","formControlName","bank_swift_code",1,"form-control",3,"placeholder"],["type","hidden","formControlName","code"],[1,"alert","alert-light-info","mb-0"],[1,"d-flex","align-items-center"],[1,"fas","fa-info-circle","text-info","fs-2","me-3"],[1,"mb-1","fw-bold"],[1,"mb-0","text-muted"],[1,"d-flex","justify-content-between","pt-5"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-info",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[3,"visibleChange","visible","modal","closable","draggable","resizable"],["pTemplate","header"],[1,"terms-content",2,"max-height","60vh","overflow-y","auto"],["class","text-center py-4",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","text-center py-4 text-muted",4,"ngIf"],["pTemplate","footer"],[3,"visibleChange","otpSubmit","otpResend","modalCancel","modalClose","visible","config","isSubmitting","isWaitingForRedirect","isResending"],[1,"py-3"],[1,"invalid-feedback"],["formControlName","account_country_id","optionLabel","name","optionValue","id","styleClass","w-100",3,"onChange","options","filter","filterBy","showClear","placeholder","filterPlaceholder"],["class","me-3","style","width: 24px; height: 16px; object-fit: cover;",3,"src","alt","error",4,"ngIf"],[1,"me-3",2,"width","24px","height","16px","object-fit","cover",3,"error","src","alt"],["class","d-flex align-items-center",4,"ngIf"],[1,"invalid-feedback","d-block"],[1,"form-check"],["type","checkbox","id","acceptTerms","formControlName","accept_terms",1,"form-check-input",3,"disabled"],["for","acceptTerms",1,"form-check-label","required"],["href","javascript:void(0)",1,"text-info","text-decoration-underline",3,"click"],["class","form-text text-success mt-1",4,"ngIf"],[1,"form-text","text-success","mt-1"],[1,"fas","fa-check-circle","me-1"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"d-flex","justify-content-between","align-items-center","w-100"],[1,"m-0"],[1,"d-flex"],[1,"btn","btn-sm","btn-icon","me-2",3,"click","disabled"],[1,"ki-outline","ki-printer","fs-3"],[1,"btn","btn-sm","btn-icon",3,"click","disabled"],[1,"ki-outline","ki-save-2","fs-3"],[1,"text-center","py-4"],["role","status",1,"spinner-border","text-info"],[1,"visually-hidden"],[3,"innerHTML"],[1,"text-center","py-4","text-muted"],[1,"fas","fa-exclamation-triangle","fs-2x","mb-3"],[1,"d-flex","justify-content-end","gap-3"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-info",3,"click","disabled"],[1,"fas","fa-exclamation-triangle","text-warning","fs-2","me-3"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(i,n){if(1&i){const r=t.RV6();t.nrm(0,"p-toast")(1,"app-payment-header",1),t.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5),t.bIt("ngSubmit",function(){return t.eBV(r),t.Njj(n.onSubmit())}),t.j41(6,"div",6)(7,"div",7)(8,"h5",8),t.nrm(9,"i",9),t.EFF(10),t.k0s()(),t.j41(11,"div",10)(12,"div",11)(13,"label",12),t.EFF(14),t.k0s(),t.nrm(15,"input",13),t.DNE(16,wt,2,1,"div",14),t.j41(17,"div",15),t.nrm(18,"i",16),t.EFF(19),t.k0s()(),t.DNE(20,Vt,7,10,"div",17),t.j41(21,"div",11)(22,"label",18),t.EFF(23),t.j41(24,"span",19),t.EFF(25),t.k0s()(),t.nrm(26,"input",20),t.DNE(27,Nt,2,1,"div",14),t.k0s(),t.j41(28,"div",21)(29,"label",18),t.EFF(30),t.j41(31,"span",19),t.EFF(32),t.k0s()(),t.j41(33,"app-phone-number-input",22,0),t.nI1(35,"translate"),t.bIt("countryCodeChange",function(s){return t.eBV(r),t.Njj(n.onCountryCodeChange(s))})("phoneNumberChange",function(s){return t.eBV(r),t.Njj(n.onPhoneNumberChange(s))})("formattedPhoneNumberChange",function(s){return t.eBV(r),t.Njj(n.onFormattedPhoneNumberChange(s))})("flagError",function(s){return t.eBV(r),t.Njj(n.onFlagError(s))}),t.k0s()()()(),t.j41(36,"div",6)(37,"div",7)(38,"h5",8),t.nrm(39,"i",23),t.EFF(40),t.k0s()(),t.j41(41,"div",10)(42,"div",11)(43,"label",12),t.EFF(44),t.k0s(),t.nrm(45,"input",24),t.DNE(46,Yt,2,1,"div",14),t.k0s(),t.j41(47,"div",11)(48,"label",12),t.EFF(49),t.k0s(),t.j41(50,"p-dropdown",25),t.bIt("onChange",function(s){return t.eBV(r),t.Njj(n.onBankCountryChange(s))}),t.DNE(51,Xt,4,2,"ng-template",26)(52,Wt,1,1,"ng-template",27),t.k0s(),t.DNE(53,zt,2,1,"div",28),t.k0s(),t.j41(54,"div",11)(55,"label",12),t.EFF(56),t.k0s(),t.nrm(57,"input",29),t.DNE(58,Ht,2,1,"div",14),t.k0s(),t.j41(59,"div",11)(60,"label",12),t.EFF(61),t.k0s(),t.nrm(62,"input",30),t.DNE(63,Jt,2,1,"div",14),t.j41(64,"div",15),t.EFF(65),t.k0s()(),t.j41(66,"div",21)(67,"label",18),t.EFF(68),t.j41(69,"span",19),t.EFF(70),t.k0s()(),t.nrm(71,"input",31),t.DNE(72,qt,2,1,"div",14),t.k0s()()(),t.DNE(73,Qt,9,7,"div",17),t.nrm(74,"input",32),t.j41(75,"div",33)(76,"div",34),t.nrm(77,"i",35),t.j41(78,"div")(79,"p",36),t.EFF(80),t.k0s(),t.j41(81,"p",37),t.EFF(82),t.k0s()()()(),t.j41(83,"div",38)(84,"button",39),t.bIt("click",function(){return t.eBV(r),t.Njj(n.goBack())}),t.EFF(85),t.k0s(),t.j41(86,"button",40),t.nI1(87,"async"),t.DNE(88,te,1,0,"span",41),t.nI1(89,"async"),t.EFF(90),t.k0s()()()()()(),t.j41(91,"p-dialog",42),t.mxI("visibleChange",function(s){return t.eBV(r),t.DH7(n.showTermsDialog,s)||(n.showTermsDialog=s),t.Njj(s)}),t.DNE(92,ee,8,3,"ng-template",43),t.j41(93,"div",44),t.DNE(94,ne,4,1,"div",45)(95,oe,1,1,"div",46)(96,ie,4,1,"div",47),t.k0s(),t.DNE(97,re,5,3,"ng-template",48),t.k0s(),t.j41(98,"app-otp-modal",49),t.mxI("visibleChange",function(s){return t.eBV(r),t.DH7(n.showOtpModal,s)||(n.showOtpModal=s),t.Njj(s)}),t.bIt("otpSubmit",function(s){return t.eBV(r),t.Njj(n.onOtpSubmit(s))})("otpResend",function(){return t.eBV(r),t.Njj(n.onOtpResend())})("modalCancel",function(){return t.eBV(r),t.Njj(n.onOtpCancel())})("modalClose",function(){return t.eBV(r),t.Njj(n.onOtpClose())}),t.k0s(),t.j41(99,"p-dialog",42),t.mxI("visibleChange",function(s){return t.eBV(r),t.DH7(n.showUnsavedChangesDialog,s)||(n.showUnsavedChangesDialog=s),t.Njj(s)}),t.DNE(100,ae,4,1,"ng-template",43),t.j41(101,"div",50)(102,"p",21),t.EFF(103),t.k0s()(),t.DNE(104,ue,5,2,"ng-template",48),t.k0s(),t.j41(105,"app-otp-modal",49),t.mxI("visibleChange",function(s){return t.eBV(r),t.DH7(n.showOtpModal,s)||(n.showOtpModal=s),t.Njj(s)}),t.bIt("otpSubmit",function(s){return t.eBV(r),t.Njj(n.onOtpSubmit(s))})("otpResend",function(){return t.eBV(r),t.Njj(n.onOtpResend())})("modalCancel",function(){return t.eBV(r),t.Njj(n.onOtpCancel())})("modalClose",function(){return t.eBV(r),t.Njj(n.onOtpClose())}),t.k0s()}if(2&i){let r,u;t.R7$(),t.Y8G("title","ar"===n.lang?"\u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628\u0643 \u0627\u0644\u0628\u0646\u0643\u064a":"Bank Transfer")("subtitle","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u062d\u0633\u0627\u0628\u0643 \u0627\u0644\u0628\u0646\u0643\u064a \u0644\u0627\u0633\u062a\u0642\u0628\u0627\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a":"Enter your bank account details to receive payments"),t.R7$(4),t.Y8G("formGroup",n.manualAccountForm),t.R7$(5),t.SpI(" ","ar"===n.lang?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f":"Beneficiary Information"," "),t.R7$(4),t.SpI(" ",n.getAccountNameLabel()," "),t.R7$(),t.AVh("is-invalid",n.getFieldError("account_name")),t.Y8G("placeholder",n.isCompanyAccount?"ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0642\u0627\u0646\u0648\u0646\u064a \u0644\u0644\u0634\u0631\u0643\u0629":"Enter company legal name":"ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644":"Enter full name"),t.R7$(),t.Y8G("ngIf",n.getFieldError("account_name")),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0627\u0644\u0627\u0633\u0645 \u0645\u0637\u0627\u0628\u0642\u0627\u064b \u062a\u0645\u0627\u0645\u0627\u064b \u0644\u0627\u0633\u0645 \u0627\u0644\u062d\u0633\u0627\u0628 \u0627\u0644\u0628\u0646\u0643\u064a":"Should be exactly as the name of the bank account"," "),t.R7$(),t.Y8G("ngIf",!n.isCompanyAccount),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629":"Billing Address"," "),t.R7$(2),t.JRh("ar"===n.lang?"(\u0627\u062e\u062a\u064a\u0627\u0631\u064a)":"(Optional)"),t.R7$(),t.AVh("is-invalid",n.getFieldError("account_address")),t.Y8G("placeholder","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u062d\u0633\u0627\u0628":"Enter account address"),t.R7$(),t.Y8G("ngIf",n.getFieldError("account_address")),t.R7$(3),t.SpI(" ",n.isCompanyAccount?"ar"===n.lang?"\u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0627\u0644\u0634\u0631\u0643\u0629":"Company Phone Number":"ar"===n.lang?"\u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0627\u0644\u0634\u062e\u0635\u064a":"Personal Phone Number"," "),t.R7$(2),t.JRh("ar"===n.lang?"(\u0627\u062e\u062a\u064a\u0627\u0631\u064a)":"(Optional)"),t.R7$(),t.Y8G("countries",n.countries)("placeholder","ar"===n.lang?"\u0631\u0642\u0645 \u0647\u0627\u062a\u0641\u0643":"Your phone number")("searchPlaceholder",t.bMT(35,95,"BANK_SETUP.FIELDS.PHONE_COUNTRY_CODE_SEARCH"))("lang",n.lang)("isRequired",!1)("showValidationErrors",!0)("countryCodeError",n.getFieldError("phoneCountryCode"))("phoneNumberError",n.getFieldError("phoneNumber"))("initialCountryCode",null==(r=n.manualAccountForm.get("phoneCountryCode"))?null:r.value)("initialPhoneNumber",null==(u=n.manualAccountForm.get("phoneNumber"))?null:u.value),t.R7$(7),t.SpI(" ","ar"===n.lang?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0628\u0646\u0643":"Bank Information"," "),t.R7$(4),t.SpI(" ","ar"===n.lang?"\u0627\u0633\u0645 \u0627\u0644\u0628\u0646\u0643":"Bank Name"," "),t.R7$(),t.AVh("is-invalid",n.getFieldError("bank_name")),t.Y8G("placeholder","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0628\u0646\u0643":"Enter bank name"),t.R7$(),t.Y8G("ngIf",n.getFieldError("bank_name")),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0628\u0644\u062f \u0627\u0644\u0628\u0646\u0643":"Bank Country"," "),t.R7$(),t.AVh("p-invalid",n.getFieldError("bank_country_id")),t.Y8G("options",n.countries)("filter",!0)("filterBy","name")("showClear",!0)("placeholder","ar"===n.lang?"\u0627\u062e\u062a\u0631 \u0628\u0644\u062f \u0627\u0644\u0628\u0646\u0643":"Select Bank Country")("filterPlaceholder","ar"===n.lang?"\u0627\u0628\u062d\u062b \u0639\u0646 \u0628\u0644\u062f...":"Search for a country..."),t.R7$(3),t.Y8G("ngIf",n.getFieldError("bank_country_id")),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0628\u0646\u0643":"Bank Address"," "),t.R7$(),t.AVh("is-invalid",n.getFieldError("bank_address")),t.Y8G("placeholder","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0628\u0646\u0643":"Enter bank address"),t.R7$(),t.Y8G("ngIf",n.getFieldError("bank_address")),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0631\u0642\u0645 \u0627\u0644\u0622\u064a\u0628\u0627\u0646 (IBAN)":"IBAN Number"," "),t.R7$(),t.AVh("is-invalid",n.getFieldError("bank_iban")),t.Y8G("placeholder","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0631\u0642\u0645 \u0627\u0644\u0622\u064a\u0628\u0627\u0646":"Enter IBAN number"),t.R7$(),t.Y8G("ngIf",n.getFieldError("bank_iban")),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u0645\u062b\u0627\u0644: SA03 8000 0000 6080 1016 7519":"Example: SA03 8000 0000 6080 1016 7519"," "),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0631\u0645\u0632 \u0627\u0644\u0633\u0648\u064a\u0641\u062a (SWIFT)":"SWIFT Code"," "),t.R7$(2),t.JRh("ar"===n.lang?"(\u0627\u062e\u062a\u064a\u0627\u0631\u064a)":"(Optional)"),t.R7$(),t.Y8G("placeholder","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0631\u0645\u0632 \u0627\u0644\u0633\u0648\u064a\u0641\u062a":"Enter SWIFT code"),t.R7$(),t.Y8G("ngIf",n.getFieldError("bank_swift_code")),t.R7$(),t.Y8G("ngIf",!n.acceptAgreement),t.R7$(7),t.SpI(" ","ar"===n.lang?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0647\u0627\u0645\u0629":"Important Information"," "),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u062a\u0623\u0643\u062f \u0645\u0646 \u0635\u062d\u0629 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u062f\u062e\u0644\u0629. \u0633\u064a\u062a\u0645 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0647\u0630\u0647 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0644\u062a\u062d\u0648\u064a\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0625\u0644\u064a\u0643.":"Please ensure the information is correct. These details will be used to transfer payments to you."," "),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0627\u0644\u0633\u0627\u0628\u0642":"Back"," "),t.R7$(),t.Y8G("disabled",t.bMT(87,97,n.paymentService.isLoading$)),t.R7$(2),t.Y8G("ngIf",t.bMT(89,99,n.paymentService.isLoading$)),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a":"Update Settings"," "),t.R7$(),t.Aen(t.lJ4(101,It)),t.R50("visible",n.showTermsDialog),t.Y8G("modal",!0)("closable",!0)("draggable",!1)("resizable",!1),t.R7$(3),t.Y8G("ngIf",n.isLoadingTerms),t.R7$(),t.Y8G("ngIf",!n.isLoadingTerms&&n.termsContent),t.R7$(),t.Y8G("ngIf",!n.isLoadingTerms&&!n.termsContent),t.R7$(2),t.R50("visible",n.showOtpModal),t.Y8G("config",n.otpModalConfig)("isSubmitting",!1)("isWaitingForRedirect",!1)("isResending",n.isResendingOtp),t.R7$(),t.Aen(t.lJ4(102,Et)),t.R50("visible",n.showUnsavedChangesDialog),t.Y8G("modal",!0)("closable",!1)("draggable",!1)("resizable",!1),t.R7$(4),t.SpI(" ","ar"===n.lang?"\u0644\u062f\u064a\u0643 \u062a\u063a\u064a\u064a\u0631\u0627\u062a \u063a\u064a\u0631 \u0645\u062d\u0641\u0648\u0638\u0629. \u0647\u0644 \u062a\u0631\u064a\u062f \u0627\u0644\u0645\u062a\u0627\u0628\u0639\u0629 \u0648\u0641\u0642\u062f\u0627\u0646 \u0647\u0630\u0647 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a\u061f":"You have unsaved changes. Do you want to continue and lose these changes?"," "),t.R7$(2),t.R50("visible",n.showOtpModal),t.Y8G("config",n.otpModalConfig)("isSubmitting",!1)("isWaitingForRedirect",!1)("isResending",n.isResendingOtp)}},dependencies:[d.bT,c.qT,c.me,c.Zm,c.BC,c.cb,c.j4,c.JD,b.y8,C.Ei,_.l,O.ms,Mt.D,S,v,d.Jj,E.D9],styles:['.card[_ngcontent-%COMP%]{border:none;box-shadow:0 .1rem 1rem #00000012}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#f8f9fa;border-bottom:1px solid #e4e6ef;padding:1.5rem}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{margin-bottom:0;font-weight:600;color:#181c32}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem}.card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:1px solid #e4e6ef;padding:1.5rem}.form-control[_ngcontent-%COMP%]{border-radius:.475rem;border:1px solid #e4e6ef;padding:.75rem 1rem;font-size:1rem;transition:border-color .15s ease,box-shadow .15s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#0978b9;box-shadow:0 0 0 .2rem #0978b940}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#f1416c}.form-control[_ngcontent-%COMP%]::placeholder{color:#a1a5b7}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#181c32;margin-bottom:.5rem}.form-label.required[_ngcontent-%COMP%]:after{content:"*";color:#f1416c;margin-left:.25rem}.invalid-feedback[_ngcontent-%COMP%]{font-size:.875rem;color:#f1416c}.form-text[_ngcontent-%COMP%]{font-size:.875rem;margin-top:.25rem}.btn-info[_ngcontent-%COMP%]{background-color:#0978b9;border-color:#0978b9}.btn-info[_ngcontent-%COMP%]:hover{background-color:#085a8a;border-color:#085a8a}.btn-info[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.btn-light[_ngcontent-%COMP%]{background-color:#f5f8fa;border-color:#e4e6ef;color:#7e8299}.btn-light[_ngcontent-%COMP%]:hover{background-color:#e9ecef;border-color:#d3d6db;color:#5e6278}.alert-light-info[_ngcontent-%COMP%]{background-color:#0978b90d;border:1px solid rgba(9,120,185,.2);color:#0978b9}.alert-light-info[_ngcontent-%COMP%]   .text-info[_ngcontent-%COMP%]{color:#0978b9!important}@media (max-width: 768px){.card-body[_ngcontent-%COMP%]{padding:1.5rem}.card-footer[_ngcontent-%COMP%]{padding:1.25rem}.d-flex.justify-content-between[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.d-flex.justify-content-between[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.d-flex.justify-content-between[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child{order:2}.d-flex.justify-content-between[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{order:1}}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}']})}return o})();const ce=()=>({width:"90vw",maxWidth:"500px"});function le(o,a){if(1&o&&(t.j41(0,"div")(1,"h4",27),t.EFF(2),t.k0s(),t.j41(3,"p",28),t.EFF(4),t.k0s(),t.j41(5,"p",12),t.EFF(6),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u062c\u0627\u0631\u064a \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe...":"Setting up Stripe account..."," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"Verification code sent to your email"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631 \u0642\u0644\u064a\u0644\u0627\u064b":"Please wait a moment"," ")}}function de(o,a){if(1&o&&(t.j41(0,"div")(1,"h4",27),t.EFF(2),t.k0s(),t.j41(3,"p",12),t.EFF(4),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(2),t.SpI(" ","ar"===e.lang?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u062d\u0627\u0644\u0629 \u0627\u0644\u062d\u0633\u0627\u0628...":"Checking account status..."," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631 \u0642\u0644\u064a\u0644\u0627\u064b":"Please wait a moment"," ")}}function pe(o,a){if(1&o&&(t.j41(0,"div",22)(1,"div",23)(2,"div",24)(3,"span",25),t.EFF(4,"Loading..."),t.k0s()(),t.DNE(5,le,7,3,"div",26)(6,de,5,2,"div",26),t.k0s()()),2&o){const e=t.XpG();t.R7$(5),t.Y8G("ngIf","refresh"===e.action),t.R7$(),t.Y8G("ngIf","refresh"!==e.action)}}function me(o,a){if(1&o&&(t.j41(0,"div",22)(1,"div",29)(2,"div",30),t.nrm(3,"i",31),t.k0s(),t.j41(4,"h4",32),t.EFF(5),t.k0s(),t.j41(6,"p",33),t.EFF(7),t.k0s(),t.j41(8,"div",34)(9,"span",25),t.EFF(10,"Loading..."),t.k0s()()()()),2&o){const e=t.XpG();t.R7$(5),t.SpI(" ","ar"===e.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u0627\u0644\u062d\u0633\u0627\u0628 \u0628\u0646\u062c\u0627\u062d!":"Account Setup Complete!"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 \u0628\u0646\u062c\u0627\u062d. \u0633\u064a\u062a\u0645 \u062a\u0648\u062c\u064a\u0647\u0643 \u0625\u0644\u0649 \u0627\u0644\u0635\u0641\u062d\u0629 \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629.":"Your Stripe account has been successfully set up. You will be redirected shortly."," ")}}function ge(o,a){1&o&&t.nrm(0,"span",45)}function he(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",35)(1,"div",36)(2,"div",37),t.nrm(3,"i",38),t.k0s(),t.j41(4,"h4",39),t.EFF(5),t.k0s(),t.j41(6,"p",40),t.EFF(7),t.k0s(),t.j41(8,"div",41)(9,"button",42),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.goToSetup())}),t.EFF(10),t.k0s(),t.j41(11,"button",43),t.nI1(12,"async"),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.completeAccount())}),t.DNE(13,ge,1,0,"span",44),t.nI1(14,"async"),t.EFF(15),t.k0s()()()()}if(2&o){const e=t.XpG();t.R7$(5),t.SpI(" ","ar"===e.lang?"\u064a\u062d\u062a\u0627\u062c \u0627\u0644\u062d\u0633\u0627\u0628 \u0625\u0644\u0649 \u0627\u0644\u0625\u0643\u0645\u0627\u0644":"Account Needs Completion"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0625\u0643\u0645\u0627\u0644 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 \u0628\u0627\u0644\u0643\u0627\u0645\u0644. \u064a\u0631\u062c\u0649 \u0627\u0644\u0646\u0642\u0631 \u0639\u0644\u0649 \u0627\u0644\u0632\u0631 \u0623\u062f\u0646\u0627\u0647 \u0644\u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u0639\u0645\u0644\u064a\u0629.":"Your Stripe account setup is not fully complete. Please click the button below to complete the process."," "),t.R7$(3),t.SpI(" ","ar"===e.lang?"\u0627\u0644\u0639\u0648\u062f\u0629 \u0644\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a":"Back to Setup"," "),t.R7$(),t.Y8G("disabled",t.bMT(12,6,e.paymentService.isLoading$)),t.R7$(2),t.Y8G("ngIf",t.bMT(14,8,e.paymentService.isLoading$)),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u062d\u0633\u0627\u0628":"Complete Account"," ")}}function _e(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",35)(1,"div",46)(2,"div",47),t.nrm(3,"i",48),t.k0s(),t.j41(4,"h4",49),t.EFF(5),t.k0s(),t.j41(6,"p",40),t.EFF(7),t.k0s(),t.j41(8,"div",41)(9,"button",42),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.goToSetup())}),t.EFF(10),t.k0s(),t.j41(11,"button",50),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.checkStripeStatus())}),t.EFF(12),t.k0s()()()()}if(2&o){const e=t.XpG();t.R7$(5),t.SpI(" ","ar"===e.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"Error Occurred"," "),t.R7$(2),t.SpI(" ",e.error," "),t.R7$(3),t.SpI(" ","ar"===e.lang?"\u0627\u0644\u0639\u0648\u062f\u0629 \u0644\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a":"Back to Setup"," "),t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629":"Try Again"," ")}}function fe(o,a){if(1&o){const e=t.RV6();t.j41(0,"span",51),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.resendOtp())}),t.nrm(1,"i",52),t.EFF(2),t.k0s()}if(2&o){const e=t.XpG();t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0625\u0639\u0627\u062f\u0629 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0631\u0645\u0632":"Resend Code"," ")}}function be(o,a){if(1&o&&(t.j41(0,"span",12),t.nrm(1,"i",53),t.EFF(2),t.k0s()),2&o){const e=t.XpG();t.R7$(2),t.E5c(" ","ar"===e.lang?"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0645\u062a\u0627\u062d\u0629 \u062e\u0644\u0627\u0644":"Resend available in"," ",e.resendCooldown,"","ar"===e.lang?"\u062b":"s"," ")}}function ye(o,a){1&o&&t.nrm(0,"span",45)}function Ce(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",54)(1,"button",55),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeOtpDialog())}),t.EFF(2),t.k0s(),t.j41(3,"button",43),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.submitOtp())}),t.DNE(4,ye,1,0,"span",44),t.EFF(5),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(2),t.SpI(" ","ar"===e.lang?"\u0625\u0644\u063a\u0627\u0621":"Cancel"," "),t.R7$(),t.Y8G("disabled",e.isSubmittingOtp||!e.otpCode.trim()),t.R7$(),t.Y8G("ngIf",e.isSubmittingOtp),t.R7$(),t.SpI(" ","ar"===e.lang?"\u062a\u0623\u0643\u064a\u062f":"Verify"," ")}}let k=(()=>{class o extends f.${router;route;paymentService;paymentCountryService;isLoading=!0;isCompleted=!1;needsCompletion=!1;error="";action="";stripeAccountExists=null;isRefreshScenario=!1;showOtpDialog=!1;otpCode="";resendCooldown=0;canResendOtp=!0;isSubmittingOtp=!1;constructor(e,i,n,r,u){super(e),this.router=i,this.route=n,this.paymentService=r,this.paymentCountryService=u}ngOnInit(){this.action=this.route.snapshot.data.action||"","return"===this.action?this.performReturn():"refresh"===this.action?this.performRefresh():this.performStripeStatusCheck()}checkStripeStatus(){this.isLoading=!0,this.error="",this.performStripeStatusCheck()}performStripeStatusCheck(){this.paymentService.getPaymentAccountDetails().subscribe({next:e=>{this.isLoading=!1;const i=this.paymentService.getProviderAccount(e.data);this.stripeAccountExists=i?.stripe_account||!1,i?.details_submitted_at?this.completeStripeOnboarding():this.needsCompletion=!0},error:e=>{this.isLoading=!1,this.error="ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u062d\u0627\u0644\u0629 \u0627\u0644\u062d\u0633\u0627\u0628":"Error checking account status",this.handleServerErrors(e)}})}completeStripeOnboarding(){this.isLoading=!0,this.paymentService.completeStripeAccount().subscribe({next:e=>{this.isLoading=!1,this.isCompleted=!0,this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u0625\u0643\u0645\u0627\u0644 \u0628\u0646\u062c\u0627\u062d":"Successfully Completed","ar"===this.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0628\u0646\u062c\u0627\u062d \u0648\u0647\u0648 \u062c\u0627\u0647\u0632 \u0644\u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645":"Stripe account setup completed successfully and ready to use"),setTimeout(()=>{this.router.navigate(["/app/setup-payment-info/success"],{queryParams:{type:"provider"}})},2e3)},error:e=>{this.isLoading=!1,this.needsCompletion=!0,this.error="ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0643\u0645\u0627\u0644 \u0625\u0639\u062f\u0627\u062f \u0627\u0644\u062d\u0633\u0627\u0628":"Error completing account setup",this.handleServerErrors(e)}})}completeAccount(){null!==this.stripeAccountExists?(this.showOtpDialog=!0,this.isRefreshScenario&&setTimeout(()=>{this.autoResendOtp()},500)):this.paymentService.getPaymentAccountDetails().subscribe({next:e=>{const i=this.paymentService.getProviderAccount(e.data);this.stripeAccountExists=i?.stripe_account||!1,this.showOtpDialog=!0,this.isRefreshScenario&&setTimeout(()=>{this.autoResendOtp()},500)},error:e=>{this.showOtpDialog=!0,this.isRefreshScenario&&setTimeout(()=>{this.autoResendOtp()},500)}})}completeAccountWithOtp(e){this.isSubmittingOtp=!0;let i=148;this.paymentService.getPaymentAccountDetails().subscribe({next:n=>{const r=this.paymentService.getProviderAccount(n.data);r?.country?.id&&(i=r.country.id);const u={country_id:i,code:e,accept_terms:!0};!0===this.stripeAccountExists?this.paymentService.linkStripeAccount(u).subscribe({next:s=>{this.handleStripeResponse(s)},error:s=>{this.isSubmittingOtp=!1,this.handleServerErrors(s)}}):this.paymentService.createStripeAccount(u).subscribe({next:s=>{this.handleStripeResponse(s)},error:s=>{this.isSubmittingOtp=!1,this.handleServerErrors(s)}})},error:()=>{this.paymentService.createStripeAccount({country_id:i,code:e,accept_terms:!0}).subscribe({next:r=>{this.handleStripeResponse(r)},error:r=>{this.isSubmittingOtp=!1,this.handleServerErrors(r)}})}})}handleStripeResponse(e){this.isSubmittingOtp=!1,this.showOtpDialog=!1,e?.data?.stripe_account_link?.url?(this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u062a\u062d\u0642\u0642 \u0628\u0646\u062c\u0627\u062d":"Successfully Verified","ar"===this.lang?"\u0633\u064a\u062a\u0645 \u062a\u0648\u062c\u064a\u0647\u0643 \u0625\u0644\u0649 Stripe \u0644\u0625\u0643\u0645\u0627\u0644 \u0625\u0639\u062f\u0627\u062f \u0627\u0644\u062d\u0633\u0627\u0628":"Redirecting to Stripe to complete account setup"),window.location.href=e.data.stripe_account_link.url):this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"Error","ar"===this.lang?"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0631\u0627\u0628\u0637 \u0627\u0644\u062d\u0633\u0627\u0628":"Account link not found")}performReturn(){this.isLoading=!0,this.error="",this.completeStripeOnboarding()}performRefresh(){this.isLoading=!0,this.error="",this.isRefreshScenario=!0,this.paymentService.getPaymentAccountDetails().subscribe({next:e=>{this.isLoading=!1;const i=this.paymentService.getProviderAccount(e.data);this.stripeAccountExists=i?.stripe_account||!1;const n=i?.details_submitted_at,r=i?.charges_enable_at;null===n&&null===r?this.needsCompletion=!0:n?this.completeStripeOnboarding():this.needsCompletion=!0},error:e=>{this.isLoading=!1,this.error="ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u062d\u0627\u0644\u0629 \u0627\u0644\u062d\u0633\u0627\u0628":"Error checking account status",this.handleServerErrors(e)}})}autoResendOtp(){this.paymentService.generatePaymentOTP().subscribe({next:e=>{this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0628\u0646\u062c\u0627\u062d":"Successfully Sent","ar"===this.lang?"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0627\u0644\u062c\u062f\u064a\u062f \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"New verification code sent to your email")},error:e=>{console.warn("Auto-resend OTP failed:",e)}})}goToSetup(){this.router.navigate(["/app/setup-payment-info"])}closeOtpDialog(){this.showOtpDialog=!1,this.otpCode=""}submitOtp(){this.otpCode.trim().length>=4?this.completeAccountWithOtp(this.otpCode.trim()):this.showError("ar"===this.lang?"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642":"Verification Error","ar"===this.lang?"\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642":"Please enter the verification code")}resendOtp(){this.canResendOtp&&this.paymentService.generatePaymentOTP().subscribe({next:e=>{this.showSuccess("ar"===this.lang?"\u062a\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0628\u0646\u062c\u0627\u062d":"Successfully Sent","ar"===this.lang?"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0627\u0644\u062c\u062f\u064a\u062f \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"New verification code sent to your email"),this.startCooldown()},error:e=>{this.handleServerErrors(e)}})}startCooldown(){this.canResendOtp=!1,this.resendCooldown=30;const e=setInterval(()=>{this.resendCooldown--,this.resendCooldown<=0&&(this.canResendOtp=!0,clearInterval(e))},1e3)}handleServerErrors(e){if(e?.error)if(e.error.errors){const i=e.error.errors;for(const n in i)if(i.hasOwnProperty(n)){const r=i[n];this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",Array.isArray(r)?r.join(", "):r)}}else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred",e.error.message?e.error.message:"ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639":"An unexpected error occurred.");else this.showError("ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623":"An error occurred","ar"===this.lang?"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639":"An unexpected error occurred.")}static \u0275fac=function(i){return new(i||o)(t.rXU(t.zZn),t.rXU(g.Ix),t.rXU(g.nX),t.rXU(y.W),t.rXU(M))};static \u0275cmp=t.VBU({type:o,selectors:[["app-stripe-callback"]],features:[t.Vt3],decls:29,vars:23,consts:[[3,"title","subtitle"],[1,"container-fluid","gradient-background",2,"padding-top","50px"],[1,"row","justify-content-center"],[1,"col-lg-6","col-xl-5"],[1,"card"],["class","card-body text-center py-10",4,"ngIf"],["class","card-body text-center py-8",4,"ngIf"],[3,"visibleChange","visible","modal","closable","draggable","resizable","header"],[1,"otp-content"],[1,"text-center","mb-4"],[1,"fas","fa-shield-check","text-info","fs-2","mb-3"],[1,"mb-2"],[1,"text-muted"],[1,"mb-4"],[1,"form-label","required"],["type","text","maxlength","10",1,"form-control","text-center",3,"ngModelChange","ngModel","placeholder"],[1,"form-text","text-muted","mt-2"],[1,"fas","fa-envelope","me-1"],[1,"text-center","mb-3"],["class","text-info text-decoration-underline","style","cursor: pointer;",3,"click",4,"ngIf"],["class","text-muted",4,"ngIf"],["pTemplate","footer"],[1,"card-body","text-center","py-10"],[1,"loading-container"],["role","status",1,"spinner-border","text-info","mb-4",2,"width","3rem","height","3rem"],[1,"visually-hidden"],[4,"ngIf"],[1,"mb-3"],[1,"text-muted","mb-2"],[1,"success-container"],[1,"success-icon","mb-4"],[1,"fas","fa-check-circle","text-success"],[1,"text-success","mb-3"],[1,"text-muted","mb-4"],["role","status",1,"spinner-border","spinner-border-sm","text-info"],[1,"card-body","text-center","py-8"],[1,"completion-container"],[1,"warning-icon","mb-4"],[1,"fas","fa-exclamation-triangle","text-warning"],[1,"text-warning","mb-3"],[1,"text-muted","mb-6"],[1,"d-flex","justify-content-center","gap-3"],["type","button",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-info",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"error-container"],[1,"error-icon","mb-4"],[1,"fas","fa-times-circle","text-danger"],[1,"text-danger","mb-3"],["type","button",1,"btn","btn-info",3,"click"],[1,"text-info","text-decoration-underline",2,"cursor","pointer",3,"click"],[1,"fas","fa-paper-plane","me-1"],[1,"fas","fa-clock","me-1"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-outline-secondary",3,"click"]],template:function(i,n){1&i&&(t.nrm(0,"p-toast")(1,"app-payment-header",0),t.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),t.DNE(6,pe,7,2,"div",5)(7,me,11,2,"div",5)(8,he,16,10,"div",6)(9,_e,13,4,"div",6),t.k0s()()()(),t.j41(10,"p-dialog",7),t.mxI("visibleChange",function(u){return t.DH7(n.showOtpDialog,u)||(n.showOtpDialog=u),u}),t.j41(11,"div",8)(12,"div",9),t.nrm(13,"i",10),t.j41(14,"h5",11),t.EFF(15),t.k0s(),t.j41(16,"p",12),t.EFF(17),t.k0s()(),t.j41(18,"div",13)(19,"label",14),t.EFF(20),t.k0s(),t.j41(21,"input",15),t.mxI("ngModelChange",function(u){return t.DH7(n.otpCode,u)||(n.otpCode=u),u}),t.k0s(),t.j41(22,"div",16),t.nrm(23,"i",17),t.EFF(24),t.k0s()(),t.j41(25,"div",18),t.DNE(26,fe,3,1,"span",19)(27,be,3,3,"span",20),t.k0s()(),t.DNE(28,Ce,6,4,"ng-template",21),t.k0s()),2&i&&(t.R7$(),t.Y8G("title","ar"===n.lang?"\u0645\u0639\u0627\u0644\u062c Stripe":"Stripe Processing")("subtitle","ar"===n.lang?"\u062c\u0627\u0631\u064a \u0645\u0639\u0627\u0644\u062c\u0629 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643":"Processing your Stripe account setup"),t.R7$(5),t.Y8G("ngIf",n.isLoading),t.R7$(),t.Y8G("ngIf",n.isCompleted&&!n.isLoading),t.R7$(),t.Y8G("ngIf",n.needsCompletion&&!n.isLoading),t.R7$(),t.Y8G("ngIf",n.error&&!n.isLoading),t.R7$(),t.Aen(t.lJ4(22,ce)),t.FS9("header","ar"===n.lang?"\u062a\u062d\u0642\u0642 \u0645\u0646 \u0647\u0648\u064a\u062a\u0643":"Verify Your Identity"),t.R50("visible",n.showOtpDialog),t.Y8G("modal",!0)("closable",!0)("draggable",!1)("resizable",!1),t.R7$(5),t.SpI(" ","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642":"Enter Verification Code"," "),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u0644\u0642\u062f \u0623\u0631\u0633\u0644\u0646\u0627 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":"We sent a verification code to your email"," "),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642":"Verification Code"," "),t.R7$(),t.R50("ngModel",n.otpCode),t.Y8G("placeholder","ar"===n.lang?"\u0623\u062f\u062e\u0644 \u0627\u0644\u0631\u0645\u0632":"Enter code"),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u062a\u062d\u0642\u0642 \u0645\u0646 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0648\u0645\u062c\u0644\u062f \u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0645\u0632\u0639\u062c\u0629 (\u062a\u0646\u062a\u0647\u064a \u0641\u0639\u0627\u0644\u064a\u0629 \u0627\u0644\u0643\u0648\u062f \u0641\u064a 1 \u0633\u0627\u0639\u0629)":"Check your email and spam folder (Code expires in 1 hour)"," "),t.R7$(2),t.Y8G("ngIf",n.canResendOtp),t.R7$(),t.Y8G("ngIf",!n.canResendOtp))},dependencies:[d.bT,c.me,c.BC,c.tU,c.vS,b.y8,C.Ei,_.l,v,d.Jj],styles:[".card[_ngcontent-%COMP%]{border:none;box-shadow:0 .1rem 1rem #00000012}.loading-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.loading-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#181c32;font-weight:600}.success-container[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#50cd89!important}.success-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#50cd89!important;font-weight:600}.completion-container[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#ffc700!important}.completion-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#ffc700!important;font-weight:600}.error-container[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#f1416c!important}.error-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#f1416c!important;font-weight:600}.btn-info[_ngcontent-%COMP%]{background-color:#0978b9;border-color:#0978b9}.btn-info[_ngcontent-%COMP%]:hover{background-color:#085a8a;border-color:#085a8a}.btn-info[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.btn-light[_ngcontent-%COMP%]{background-color:#f5f8fa;border-color:#e4e6ef;color:#7e8299}.btn-light[_ngcontent-%COMP%]:hover{background-color:#e9ecef;border-color:#d3d6db;color:#5e6278}@media (max-width: 768px){.d-flex.justify-content-center.gap-3[_ngcontent-%COMP%]{flex-direction:column;gap:1rem!important}.d-flex.justify-content-center.gap-3[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}.loading-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%], .success-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%], .completion-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}.loading-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .success-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .completion-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem!important}.loading-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .success-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .completion-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.25rem}}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem}.visually-hidden[_ngcontent-%COMP%]{position:absolute!important;width:1px!important;height:1px!important;padding:0!important;margin:-1px!important;overflow:hidden!important;clip:rect(0,0,0,0)!important;white-space:nowrap!important;border:0!important}.text-muted[_ngcontent-%COMP%]{color:#a1a5b7!important}.text-success[_ngcontent-%COMP%]{color:#50cd89!important}.text-warning[_ngcontent-%COMP%]{color:#ffc700!important}.text-danger[_ngcontent-%COMP%]{color:#f1416c!important}.text-info[_ngcontent-%COMP%]{color:#0978b9!important}"]})}return o})();function ve(o,a){if(1&o&&(t.j41(0,"div",31),t.nrm(1,"i",32),t.j41(2,"div",33),t.EFF(3),t.k0s()()),2&o){const e=t.XpG();t.R7$(3),t.SpI(" ",e.getVerificationMessage()," ")}}let Ae=(()=>{class o extends f.${route;router;paymentType="";countdown=5;countdownInterval;constructor(e,i,n){super(e),this.route=i,this.router=n}ngOnInit(){this.route.queryParams.subscribe(e=>{this.paymentType=e.type||"manual"})}ngOnDestroy(){this.countdownInterval&&clearInterval(this.countdownInterval),super.ngOnDestroy()}navigateToAddKnowledge(){this.countdownInterval&&clearInterval(this.countdownInterval),this.router.navigate(["/app/add-knowledge/stepper"])}navigateToLibrary(){this.countdownInterval&&clearInterval(this.countdownInterval),this.router.navigate(["/app/insighter-dashboard/my-knowledge/general"])}getSuccessMessage(){return"provider"===this.paymentType?{title:"ar"===this.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0628\u0646\u062c\u0627\u062d!":"Stripe Account Setup Complete!",subtitle:"ar"===this.lang?"\u0645\u0628\u0631\u0648\u0643! \u062a\u0645 \u0631\u0628\u0637 \u062d\u0633\u0627\u0628\u0643 \u0628\u0646\u062c\u0627\u062d":"Congratulations! Your account has been successfully linked",description:"ar"===this.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628 Stripe \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 \u0628\u0646\u062c\u0627\u062d. \u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u0622\u0646 \u0627\u0633\u062a\u0642\u0628\u0627\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0645\u0646 \u0627\u0644\u0639\u0645\u0644\u0627\u0621 \u0628\u0637\u0631\u064a\u0642\u0629 \u0622\u0645\u0646\u0629 \u0648\u0645\u0636\u0645\u0648\u0646\u0629.":"Your Stripe account has been successfully set up. You can now receive payments from clients securely and reliably."}:{title:"ar"===this.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u062d\u0633\u0627\u0628\u0643 \u0627\u0644\u0628\u0646\u0643\u064a \u0628\u0646\u062c\u0627\u062d!":"Bank Account Setup Complete!",subtitle:"ar"===this.lang?"\u0645\u0628\u0631\u0648\u0643! \u062a\u0645 \u062d\u0641\u0638 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u062d\u0633\u0627\u0628\u0643":"Congratulations! Your account information has been saved",description:"ar"===this.lang?"\u062a\u0645 \u062d\u0641\u0638 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062d\u0633\u0627\u0628 \u0627\u0644\u064a\u062f\u0648\u064a \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 \u0628\u0646\u062c\u0627\u062d. \u0633\u064a\u062a\u0645 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0647\u0630\u0647 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0644\u062a\u062d\u0648\u064a\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0625\u0644\u064a\u0643.":"Your manual account information has been successfully saved. This information will be used to transfer payments to you."}}getVerificationMessage(){return"provider"===this.paymentType?"ar"===this.lang?"\u062d\u0633\u0627\u0628\u0643 \u0627\u0644\u0622\u0646 \u0642\u064a\u062f \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629 \u0645\u0646 \u0642\u0628\u0644 \u0645\u0642\u062f\u0645 \u0627\u0644\u062e\u062f\u0645\u0629. \u0642\u062f \u062a\u0633\u062a\u063a\u0631\u0642 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 1-7 \u0623\u064a\u0627\u0645 \u0639\u0645\u0644 \u0644\u062a\u0641\u0639\u064a\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u064a\u0632\u0627\u062a.":"Your account is now under verification by the provider. The verification process may take 1-7 business days to activate all features.":""}getPaymentTypeIcon(){return"provider"===this.paymentType?"fab fa-stripe-s":"fas fa-university"}showVerificationMessage(){return"provider"===this.paymentType}getPaymentTypeColor(){return"provider"===this.paymentType?"text-primary":"text-info"}getCountdownText(){return"ar"===this.lang?`\u0633\u064a\u062a\u0645 \u0627\u0644\u062a\u0648\u062c\u064a\u0647 \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b \u062e\u0644\u0627\u0644 ${this.countdown} \u062b\u0648\u0627\u0646`:`Auto redirecting in ${this.countdown} seconds`}static \u0275fac=function(i){return new(i||o)(t.rXU(t.zZn),t.rXU(g.nX),t.rXU(g.Ix))};static \u0275cmp=t.VBU({type:o,selectors:[["app-payment-success"]],features:[t.Vt3],decls:54,vars:15,consts:[[3,"title","subtitle"],[1,"container-fluid","gradient-background",2,"padding-top","50px"],[1,"row","justify-content-center"],[1,"col-lg-7","col-xl-6"],[1,"card","success-card"],[1,"card-body","text-center","py-10"],[1,"success-animation","mb-6"],["src","https://lottie.host/fe2c060d-6387-4674-a21f-55d6e9a8f0c0/9Aun5jI4fu.json","background","transparent","speed","1","autoplay","","direction","1","mode","normal",2,"width","160px","height","160px"],[1,"payment-type-badge","mb-4"],[1,"badge","badge-light-success","fs-6","px-4","py-2"],[1,"mx-2"],[1,"success-content","mb-8"],[1,"text-success","mb-3","fw-bold"],[1,"text-gray-600","mb-4"],[1,"text-muted","fs-6","mb-4","px-4"],["class","alert alert-warning d-flex align-items-center mb-0 mx-4","role","alert",4,"ngIf"],[1,"features-list","mb-8"],[1,"row","g-4"],[1,"col-md-4"],[1,"feature-item"],[1,"feature-icon","mb-3"],[1,"fas","fa-shield-alt","text-success"],[1,"mb-2"],[1,"text-muted","fs-7","mb-0"],[1,"fas","fa-bolt","text-warning"],[1,"fas","fa-headset","text-info"],[1,"action-buttons"],["type","button",1,"btn","btn-success","btn-lg","me-3","mb-3",3,"click"],[1,"fas","fa-plus","me-2"],["type","button",1,"btn","btn-info","btn-lg","mb-3",3,"click"],[1,"fas","fa-book","me-2"],["role","alert",1,"alert","alert-warning","d-flex","align-items-center","mb-0","mx-4"],[1,"fas","fa-clock","me-2","text-warning"],[1,"fs-7"]],template:function(i,n){1&i&&(t.nrm(0,"p-toast")(1,"app-payment-header",0),t.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),t.nrm(8,"lottie-player",7),t.k0s(),t.j41(9,"div",8)(10,"span",9)(11,"span",10),t.EFF(12),t.k0s()()(),t.j41(13,"div",11)(14,"h2",12),t.EFF(15),t.k0s(),t.j41(16,"h5",13),t.EFF(17),t.k0s(),t.j41(18,"p",14),t.EFF(19),t.k0s(),t.DNE(20,ve,4,1,"div",15),t.k0s(),t.j41(21,"div",16)(22,"div",17)(23,"div",18)(24,"div",19)(25,"div",20),t.nrm(26,"i",21),t.k0s(),t.j41(27,"h6",22),t.EFF(28),t.k0s(),t.j41(29,"p",23),t.EFF(30),t.k0s()()(),t.j41(31,"div",18)(32,"div",19)(33,"div",20),t.nrm(34,"i",24),t.k0s(),t.j41(35,"h6",22),t.EFF(36),t.k0s(),t.j41(37,"p",23),t.EFF(38),t.k0s()()(),t.j41(39,"div",18)(40,"div",19)(41,"div",20),t.nrm(42,"i",25),t.k0s(),t.j41(43,"h6",22),t.EFF(44),t.k0s(),t.j41(45,"p",23),t.EFF(46),t.k0s()()()()(),t.j41(47,"div",26)(48,"button",27),t.bIt("click",function(){return n.navigateToAddKnowledge()}),t.nrm(49,"i",28),t.EFF(50),t.k0s(),t.j41(51,"button",29),t.bIt("click",function(){return n.navigateToLibrary()}),t.nrm(52,"i",30),t.EFF(53),t.k0s()()()()()()()),2&i&&(t.R7$(),t.Y8G("title","ar"===n.lang?"\u062a\u0645 \u0627\u0644\u0625\u0639\u062f\u0627\u062f \u0628\u0646\u062c\u0627\u062d!":"Setup Complete!")("subtitle","ar"===n.lang?"\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u0645\u062d\u0641\u0638\u0629 \u0627\u0644\u062f\u0641\u0639 \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u0643 \u0628\u0646\u062c\u0627\u062d":"Your payment wallet has been successfully set up"),t.R7$(11),t.SpI(" ","provider"===n.paymentType?"Provider":"ar"===n.lang?"\u062d\u0633\u0627\u0628 \u064a\u062f\u0648\u064a":"Manual Account"," "),t.R7$(3),t.SpI(" ",n.getSuccessMessage().title," "),t.R7$(2),t.SpI(" ",n.getSuccessMessage().subtitle," "),t.R7$(2),t.SpI(" ",n.getSuccessMessage().description," "),t.R7$(),t.Y8G("ngIf",n.showVerificationMessage()),t.R7$(8),t.SpI(" ","ar"===n.lang?"\u0622\u0645\u0646 \u0648\u0645\u0636\u0645\u0648\u0646":"Secure & Safe"," "),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a\u0643 \u0645\u062d\u0645\u064a\u0629":"Your information is protected"," "),t.R7$(6),t.SpI(" ","ar"===n.lang?"\u0633\u0631\u064a\u0639 \u0648\u0641\u0639\u0627\u0644":"Fast & Efficient"," "),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u0645\u0639\u0627\u0644\u062c\u0629 \u0633\u0631\u064a\u0639\u0629":"Quick processing"," "),t.R7$(6),t.SpI(" ","ar"===n.lang?"\u062f\u0639\u0645 \u0639\u0644\u0649 \u0645\u062f\u0627\u0631 \u0627\u0644\u0633\u0627\u0639\u0629":"24/7 Support"," "),t.R7$(2),t.SpI(" ","ar"===n.lang?"\u0646\u062d\u0646 \u0647\u0646\u0627 \u0644\u0645\u0633\u0627\u0639\u062f\u062a\u0643":"We are here to help"," "),t.R7$(4),t.SpI(" ","ar"===n.lang?"\u0625\u0636\u0627\u0641\u0629 \u0645\u0639\u0631\u0641\u0629 \u062c\u062f\u064a\u062f\u0629":"Add Knowledge"," "),t.R7$(3),t.SpI(" ","ar"===n.lang?"\u0627\u0644\u062a\u0648\u062c\u0647 \u0644\u0645\u0643\u062a\u0628\u062a\u064a":"Go to Library"," "))},dependencies:[d.bT,b.y8,v],styles:[".success-card[_ngcontent-%COMP%]{border:none;box-shadow:0 .2rem 2rem #50cd8926;border-top:4px solid #50cd89}.success-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:3rem 2rem}@keyframes _ngcontent-%COMP%_fadeUp{0%{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}.success-animation[_ngcontent-%COMP%]{position:relative;display:inline-block;animation:_ngcontent-%COMP%_fadeUp .6s ease-out both}.success-animation[_ngcontent-%COMP%]   lottie-player[_ngcontent-%COMP%]{margin:0 auto;display:block}.payment-type-badge[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{border:1px solid rgba(80,205,137,.3)}.success-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.success-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:500}.features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]{padding:1rem}.features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:600;color:#181c32}.action-buttons[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{background-color:#50cd89;border-color:#50cd89;padding:.75rem 2rem}.action-buttons[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]:hover{background-color:#47b881;border-color:#47b881}.action-buttons[_ngcontent-%COMP%]   .countdown-text[_ngcontent-%COMP%]{margin-top:1rem}@media (max-width: 768px){.success-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem 1.5rem}.success-animation[_ngcontent-%COMP%]   lottie-player[_ngcontent-%COMP%]{width:120px!important;height:120px!important}.success-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]{margin-bottom:1rem}.features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.action-buttons[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{width:100%;margin-right:0!important}}.text-success[_ngcontent-%COMP%]{color:#50cd89!important}.text-gray-600[_ngcontent-%COMP%]{color:#7e8299!important}.text-muted[_ngcontent-%COMP%]{color:#a1a5b7!important}.text-primary[_ngcontent-%COMP%]{color:#635bff!important}.text-info[_ngcontent-%COMP%]{color:#0978b9!important}.text-warning[_ngcontent-%COMP%]{color:#ffc700!important}"]})}return o})();var F=l(7673),ke=l(6354),Fe=l(9437);let A=(()=>{class o{paymentService;router;constructor(e,i){this.paymentService=e,this.router=i}canActivate(e,i){const n=this.getExpectedTypeFromRoute(i.url);return n&&"provider"!==n?this.paymentService.getPaymentAccountDetails().pipe((0,ke.T)(r=>{const u=r?.data??[];if("manual"===n){const h=u.find(m=>"manual"===m.type),P="true"===e.queryParamMap.get("edit");if(!h||"active"!==h.status||P)return!0}const s=u.find(h=>h.primary);return!(s&&s.type!==n&&!u.some(h=>h.type===n)&&(this.router.navigate(["/app/setup-payment-info"]),1))}),(0,Fe.W)(()=>(this.router.navigate(["/app/setup-payment-info"]),(0,F.of)(!1)))):(0,F.of)(!0)}getExpectedTypeFromRoute(e){return e.includes("manual-account")?"manual":e.includes("stripe-callback")?"provider":null}static \u0275fac=function(i){return new(i||o)(t.KVO(y.W),t.KVO(g.Ix))};static \u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Pe=l(4185),xe=l(8870),Oe=l(3887);let Me=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=t.$C({type:o});static \u0275inj=t.G2t({imports:[d.MD,c.YN,c.X1,b.MB,_.P,O.kr,xe.W,E.h,Oe.G,g.iI.forChild([{path:"",component:Ft},{path:"manual-account",component:se,canActivate:[A],canDeactivate:[Pe.y]},{path:"stripe-callback",component:k,canActivate:[A]},{path:"stripe-callback/return",component:k,canActivate:[A],data:{action:"return"}},{path:"stripe-callback/refresh",component:k,canActivate:[A],data:{action:"refresh"}},{path:"success",component:Ae}])]})}return o})()}}]);