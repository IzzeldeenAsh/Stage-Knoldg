"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[1740],{8688:(H,A,p)=>{p.d(A,{M:()=>c});var u=p(1626),T=p(4412),j=p(8810),e=p(6354),q=p(9437),k=p(980),y=p(4438),b=p(779);let c=(()=>{class R{http;translationService;apiUrl="https://api.foresighta.co/api/common/setting/consulting-field/tree/list";apiList="https://api.foresighta.co/api/common/setting/consulting-field/list";isLoadingSubject=new T.t(!1);isLoading$=this.isLoadingSubject.asObservable();currentLang="en";constructor(h,g){this.http=h,this.translationService=g,this.translationService.onLanguageChange().subscribe(v=>{this.currentLang=v||"en"})}setLoading(h){this.isLoadingSubject.next(h)}handleError(h){return(0,j.$)(h)}transformToTreeNode(h){return h.map(g=>({key:g.key,label:g.names[this.currentLang],data:{key:g.key,code:g.code,label:g.label,status:g.status,nameEn:g.names.en,nameAr:g.names.ar},children:g.children?this.transformToTreeNode(g.children):[]}))}transformToTreeNodeParent(h){return h.map(g=>({key:g.key,label:g.label,data:{key:g.key,code:g.code,label:g.label},children:g.children?this.transformToTreeNodeParent(g.children):[]}))}getConsultingCodesTree(h){const g=new u.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":h});return this.setLoading(!0),this.http.get(this.apiUrl,{headers:g}).pipe((0,e.T)(v=>this.transformToTreeNode(v)),(0,q.W)(v=>this.handleError(v)),(0,k.j)(()=>this.setLoading(!1)))}getConsultingCodesTreeParent(h){const g=new u.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":h});return this.setLoading(!0),this.http.get("https://api.foresighta.co/api/common/setting/consulting-field/tree/parent",{headers:g}).pipe((0,e.T)(v=>this.transformToTreeNodeParent(v)),(0,q.W)(v=>this.handleError(v)),(0,k.j)(()=>this.setLoading(!1)))}getConsultingList(h){const g=new u.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":h});return this.setLoading(!0),this.http.get(this.apiList,{headers:g}).pipe((0,e.T)(v=>v.data),(0,q.W)(v=>this.handleError(v)),(0,k.j)(()=>this.setLoading(!1)))}createConsultingField(h,g){const v=new u.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":g});return this.setLoading(!0),this.http.post("https://api.foresighta.co/api/admin/setting/consulting-field",h,{headers:v}).pipe((0,q.W)(this.handleError),(0,k.j)(()=>this.setLoading(!1)))}updateConsultingField(h,g,v){const x=new u.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":v});return this.setLoading(!0),this.http.put(`https://api.foresighta.co/api/admin/setting/consulting-field/${h}`,g,{headers:x}).pipe((0,q.W)(this.handleError),(0,k.j)(()=>this.setLoading(!1)))}deleteIsicCode(h){const g=new u.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.delete(`https://api.foresighta.co/api/admin/setting/consulting-field/${h}`,{headers:g}).pipe((0,q.W)(this.handleError),(0,k.j)(()=>this.setLoading(!1)))}static \u0275fac=function(g){return new(g||R)(y.KVO(u.Qq),y.KVO(b.L))};static \u0275prov=y.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})()},90:(H,A,p)=>{p.r(A),p.d(A,{DashbordModule:()=>ku});var u=p(177),T=p(1579),j=p(2791),e=p(4438),q=p(9998);let k=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275cmp=e.VBU({type:i,selectors:[["app-dashboard"]],decls:4,vars:0,consts:[[1,"px-15","d-flex","flex-column","flex-md-row","gap-10","justify-content-between","align-items-center"],[1,"wrap"]],template:function(s,n){1&s&&(e.nrm(0,"p-toast")(1,"div",0),e.j41(2,"div",1),e.nrm(3,"router-outlet"),e.k0s())},dependencies:[j.n3,q.y8],styles:[".notifications[_ngcontent-%COMP%]{width:80%;margin:20px auto;padding:20px 0;border-bottom:1px dashed #E4E7F0;border-top:1px dashed #E4E7F0}.sub-bar[_ngcontent-%COMP%]{position:fixed;top:106px;z-index:11;overflow-x:scroll;left:30px}.div-dashbar[_ngcontent-%COMP%]{position:fixed;top:105px;z-index:11;left:30px}"]})}return i})();var y=p(8032),b=p.n(y),c=p(9417),R=p(4127),f=p(5779),h=p(6781),g=p(1141),v=p(8542),x=p(2242),w=p(2609),$=p(4582);const Pe=["dt"],Xe=()=>({height:"4px"}),Oe=()=>({width:"40rem"}),ze=()=>["name","names.en","names.ar"],He=()=>({width:"100%"});function Ue(i,r){1&i&&e.nrm(0,"p-progressBar",3),2&i&&e.Aen(e.lJ4(2,Xe))}function Ke(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",32),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function Je(i,r){1&i&&(e.j41(0,"div",34),e.EFF(1," Arabic Name is required. "),e.k0s())}function Qe(i,r){if(1&i&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.arabicName.errors.serverError," ")}}function We(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Je,2,0,"div",33)(2,Qe,2,1,"div",33),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.arabicName.errors.required),e.R7$(),e.Y8G("ngIf",t.arabicName.errors.serverError)}}function Ze(i,r){1&i&&(e.j41(0,"div",34),e.EFF(1," English Name is required. "),e.k0s())}function et(i,r){if(1&i&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.englishName.errors.serverError," ")}}function tt(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Ze,2,0,"div",33)(2,et,2,1,"div",33),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.englishName.errors.required),e.R7$(),e.Y8G("ngIf",t.englishName.errors.serverError)}}function nt(i,r){1&i&&(e.qex(0),e.j41(1,"span",35),e.EFF(2,"Save"),e.k0s(),e.bVm())}function it(i,r){1&i&&(e.qex(0),e.j41(1,"span",36),e.EFF(2," Please wait "),e.nrm(3,"span",37),e.k0s(),e.bVm()),2&i&&(e.R7$(),e.xc7("display","block"))}function st(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",32),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function ot(i,r){1&i&&(e.j41(0,"tr")(1,"th",42),e.EFF(2,"ID"),e.k0s(),e.j41(3,"th",43),e.EFF(4,"Name"),e.k0s(),e.j41(5,"th",43),e.EFF(6,"Name (English)"),e.k0s(),e.j41(7,"th",43),e.EFF(8,"Name (Arabic)"),e.k0s(),e.nrm(9,"th",44),e.k0s())}function rt(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"span",45),e.EFF(3),e.k0s()(),e.j41(4,"td")(5,"span",46),e.EFF(6),e.k0s()(),e.j41(7,"td")(8,"span",47),e.EFF(9),e.k0s()(),e.j41(10,"td")(11,"span",47),e.EFF(12),e.k0s()(),e.j41(13,"td")(14,"div",48)(15,"button",49),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(3);return e.Njj(o.editDepartment(n))}),e.k0s(),e.j41(16,"button",50),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(3);return e.Njj(o.deleteDepartment(n.id))}),e.k0s()()()()}if(2&i){const t=r.$implicit;e.R7$(3),e.SpI("#",t.id,""),e.R7$(3),e.JRh(t.name),e.R7$(3),e.JRh(t.names.en),e.R7$(3),e.JRh(t.names.ar)}}function at(i,r){1&i&&(e.j41(0,"tr")(1,"td",51)(2,"div",52),e.nrm(3,"i",53),e.j41(4,"div",45),e.EFF(5,"No departments found"),e.k0s(),e.j41(6,"div",54),e.EFF(7,"No departments match your search criteria."),e.k0s()()()())}function lt(i,r){if(1&i&&(e.qex(0),e.j41(1,"p-table",38,0),e.nI1(3,"async"),e.DNE(4,ot,10,0,"ng-template",39)(5,rt,17,4,"ng-template",40)(6,at,8,0,"ng-template",41),e.k0s(),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("value",t.filteredDepartments)("paginator",!0)("rows",10)("loading",e.bMT(3,7,t.isLoading$))("globalFilterFields",e.lJ4(9,ze))("rowHover",!0)("tableStyle",e.lJ4(10,He))}}function ct(i,r){1&i&&(e.qex(0),e.j41(1,"div",52),e.nrm(2,"i",53),e.j41(3,"div",45),e.EFF(4,"No departments available"),e.k0s(),e.j41(5,"div",54),e.EFF(6,"No departments have been created yet."),e.k0s()(),e.bVm())}function dt(i,r){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h1",8),e.EFF(6," Departments "),e.k0s(),e.j41(7,"div",9),e.EFF(8),e.k0s()(),e.j41(9,"div",10)(10,"div",11),e.nrm(11,"i",12),e.j41(12,"input",13),e.bIt("input",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.applyFilter(n))}),e.k0s()(),e.j41(13,"button",14),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showDialog())}),e.nrm(14,"i",15),e.j41(15,"span",16),e.EFF(16,"Create"),e.k0s()()()()()(),e.j41(17,"p-dialog",17),e.mxI("visibleChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.visible,n)||(o.visible=n),e.Njj(n)}),e.DNE(18,Ke,1,2,"p-messages",18),e.j41(19,"span",19),e.EFF(20),e.k0s(),e.j41(21,"form",20)(22,"div",21)(23,"label",22),e.EFF(24,"Arabic Name"),e.k0s(),e.j41(25,"div",23),e.nrm(26,"input",24),e.DNE(27,We,3,2,"div",2),e.k0s()(),e.j41(28,"div",21)(29,"label",25),e.EFF(30,"English Name"),e.k0s(),e.j41(31,"div",23),e.nrm(32,"input",26),e.DNE(33,tt,3,2,"div",2),e.k0s()()(),e.j41(34,"div",27)(35,"button",28),e.nI1(36,"async"),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.submit())}),e.DNE(37,nt,3,0,"ng-container",2),e.nI1(38,"async"),e.DNE(39,it,4,2,"ng-container",2),e.nI1(40,"async"),e.k0s(),e.j41(41,"button",29),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onCancel())}),e.EFF(42," Cancel "),e.k0s()()(),e.j41(43,"div",30)(44,"div",31),e.DNE(45,st,1,2,"p-messages",18)(46,lt,7,11,"ng-container",2),e.nI1(47,"async"),e.DNE(48,ct,7,0,"ng-container",2),e.nI1(49,"async"),e.k0s()(),e.bVm()}if(2&i){const t=e.XpG();e.R7$(8),e.SpI("",t.listOfDepartments.length," Department"),e.R7$(9),e.Aen(e.lJ4(27,Oe)),e.Y8G("header",t.isEditMode?"Edit Department":"Add Department")("modal",!0),e.R50("visible",t.visible),e.R7$(),e.Y8G("ngIf",t.hasErrorMessage),e.R7$(2),e.SpI("",t.isEditMode?"Edit Department Details":"Add Department Details","."),e.R7$(),e.Y8G("formGroup",t.departmentForm),e.R7$(6),e.Y8G("ngIf",t.arabicName&&t.arabicName.errors&&(t.arabicName.touched||t.arabicName.dirty)),e.R7$(6),e.Y8G("ngIf",t.englishName&&t.englishName.errors&&(t.englishName.touched||t.englishName.dirty)),e.R7$(2),e.Y8G("disabled",t.departmentForm.invalid||e.bMT(36,17,t.isLoading$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(38,19,t.isLoading$)),e.R7$(2),e.Y8G("ngIf",e.bMT(40,21,t.isLoading$)),e.R7$(6),e.Y8G("ngIf",t.hasSuccessMessage),e.R7$(),e.Y8G("ngIf",!1===e.bMT(47,23,t.isLoading$)&&t.listOfDepartments.length>0),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(49,25,t.isLoading$)&&0===t.listOfDepartments.length)}}let ut=(()=>{class i{_departments;cdr;fb;messageService;messages=[];unsubscribe=[];listOfDepartments=[];filteredDepartments=[];isEditMode=!1;isLoading$;selectedDepartmentId=null;visible=!1;departmentForm;constructor(t,s,n,o){this._departments=t,this.cdr=s,this.fb=n,this.messageService=o,this.isLoading$=this._departments.isLoading$}ngOnInit(){this.departmentForm=this.fb.group({arabicName:["",c.k0.required],englishName:["",c.k0.required]}),this.getDepartmentsList()}showDialog(){this.visible=!0,this.selectedDepartmentId=null,this.isEditMode=!1,this.departmentForm.reset()}editDepartment(t){this.visible=!0,this.selectedDepartmentId=t.id,this.isEditMode=!0,this.departmentForm.patchValue({arabicName:t.names.ar,englishName:t.names.en})}handleServerErrors(t){if(t.error&&t.error.errors){const s=t.error.errors,n={"name.en":"englishName","name.ar":"arabicName"};for(const o in s)if(s.hasOwnProperty(o)){const a=s[o],l=n[o];if(l){const d=this.departmentForm.get(l);d&&(d.setErrors({serverError:a[0]}),d.markAsTouched())}else this.messages.push({severity:"error",summary:"",detail:a.join(", ")})}}else this.messages.push({severity:"error",summary:"Error",detail:"An unexpected error occurred."})}getDepartmentsList(){const t=this._departments.getDepartments().subscribe({next:s=>{this.listOfDepartments=s,this.filteredDepartments=s,this.cdr.detectChanges()},error:s=>{this.messages=[],s.validationMessages?this.messages=s.validationMessages:this.messages.push({severity:"error",summary:"Error",detail:"An unexpected error occurred."})}});this.unsubscribe.push(t)}table;applyFilter(t){const s=t.target.value.toLowerCase();this.filteredDepartments=s?this.listOfDepartments.filter(n=>n.name?.toLowerCase().includes(s)||n.names?.en?.toLowerCase().includes(s)||n.names?.ar?.toLowerCase().includes(s)):this.listOfDepartments}get hasSuccessMessage(){return this.messages.some(t=>"success"===t.severity)}get hasErrorMessage(){return this.messages.some(t=>"error"===t.severity)}onCancel(){this.visible=!1,this.departmentForm.reset()}get arabicName(){return this.departmentForm.get("arabicName")}get englishName(){return this.departmentForm.get("englishName")}submit(){if(this.messages=[],this.departmentForm.invalid)return void this.departmentForm.markAllAsTouched();const t=this.departmentForm.value;if(this.selectedDepartmentId){const n=this._departments.updateDepartment(this.selectedDepartmentId,{name:{en:t.englishName,ar:t.arabicName}}).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:"Department updated successfully."}),this.getDepartmentsList(),this.visible=!1,this.departmentForm.reset()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}else{const n=this._departments.createDepartment({name:{en:t.englishName,ar:t.arabicName}}).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:"Department created successfully."}),this.getDepartmentsList(),this.visible=!1,this.departmentForm.reset()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}}deleteDepartment(t){this.messages=[],b().fire({title:"Are you sure?",text:"Do you want to delete this department? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(s=>{s.isConfirmed&&this._departments.deleteDepartment(t).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:"Department created successfully."}),this.getDepartmentsList()},error:o=>{this.handleServerErrors(o)}})})}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}static \u0275fac=function(s){return new(s||i)(e.rXU(R.f),e.rXU(e.gRc),e.rXU(c.ok),e.rXU(f.bg))};static \u0275cmp=e.VBU({type:i,selectors:[["app-department"]],viewQuery:function(s,n){if(1&s&&e.GBs(Pe,5),2&s){let o;e.mGM(o=e.lsd())&&(n.table=o.first)}},decls:4,vars:6,consts:[["dt",""],["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],["id","kt_app_toolbar",1,"app-toolbar","pt-10","px-10","pb-0","mb-0"],["id","kt_app_toolbar_container",1,"app-container","container-fluid","d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","flex-column","justify-content-center","gap-1","me-3"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],[1,"fw-semibold","fs-7","my-0","text-muted"],[1,"d-flex","align-items-center","gap-3"],[1,"d-flex","align-items-center","position-relative"],[1,"pi","pi-search","position-absolute","ms-3",2,"font-size","14px","color","#6c757d"],["type","text","pInputText","","placeholder","Search",1,"form-control","ps-10",2,"width","240px","height","36px","border","1px solid #cbd5e1","box-shadow","0 0 #0000,0 0 #0000,0 1px 2px 0 rgba(18,18,23,0.05)","border-radius","6px",3,"input"],[1,"btn","btn-sm",2,"background","white","border","1px solid #cbd5e1","box-shadow","0 0 #0000,0 0 #0000,0 1px 2px 0 rgba(18,18,23,0.05)","border-radius","6px","padding","6px 12px","height","36px",3,"click"],[1,"ki-outline","ki-plus","fs-5",2,"color","#3b82f6"],[1,"ms-1",2,"font-size","13px","font-weight","500","color","#374151"],["appendTo","body",3,"visibleChange","header","modal","visible"],[3,"value","enableService","valueChange",4,"ngIf"],[1,"text-muted","mb-3","d-block"],[3,"formGroup"],[1,"mb-3","row"],["for","arabicName",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["pInputText","","id","arabicName","formControlName","arabicName","autocomplete","off",1,"form-control"],["for","englishName",1,"col-sm-3","col-form-label"],["pInputText","","id","englishName","formControlName","englishName","autocomplete","off",1,"form-control"],[1,"d-flex","justify-content-end","gap-2"],["type","submit",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],["id","kt_app_content",1,"app-content","px-10","pb-10","pt-5","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-fluid"],[3,"valueChange","value","enableService"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],["responsiveLayout","scroll",3,"value","paginator","rows","loading","globalFilterFields","rowHover","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","10%"],[2,"width","25%"],[2,"width","15%"],[1,"text-gray-600","fw-semibold"],[1,"text-gray-800","fw-semibold"],[1,"text-gray-700"],[1,"d-flex","justify-content-end","gap-1"],["pButton","","icon","pi pi-pencil","pTooltip","Edit","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"width","28px","height","28px","background","#3b82f6","color","white","border-radius","6px",3,"click"],["pButton","","icon","pi pi-trash","pTooltip","Delete","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"width","28px","height","28px","background","#ef4444","color","white","border-radius","6px",3,"click"],["colspan","5"],[1,"d-flex","flex-column","align-items-center","justify-content-center","py-8"],[1,"pi","pi-inbox","text-gray-400","mb-2",2,"font-size","48px"],[1,"text-gray-500",2,"font-size","14px"]],template:function(s,n){1&s&&(e.DNE(0,Ue,1,3,"p-progressBar",1),e.nI1(1,"async"),e.DNE(2,dt,50,28,"ng-container",2),e.nI1(3,"async")),2&s&&(e.Y8G("ngIf",e.bMT(1,2,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!e.bMT(3,4,n.isLoading$)))},dependencies:[u.bT,h.l,f.Ei,g._f,v.m,T.z,x.S,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,w.B,$.XI,u.Jj],styles:[".p-datatable{border:1px solid #dadddf;border-radius:.75rem;overflow:hidden}  .p-datatable .p-datatable-table{border:none}  .p-datatable .p-datatable-thead>tr>th{background:transparent;border-bottom:1px solid #e5e5e5;padding:.5rem 1rem;font-weight:700;color:#a1a5b7;font-size:.75rem;text-transform:uppercase;letter-spacing:.05em}  .p-datatable .p-datatable-tbody>tr>td{border-bottom:1px solid #dadddf;padding:.7rem 1rem;font-size:.875rem;color:#5e6278;font-weight:600}  .p-datatable .p-datatable-tbody>tr:hover{background-color:#f8f9fa}  .p-datatable .p-datatable-tbody>tr:last-child>td{border-bottom:none}"]})}return i})();var pt=p(7684);const mt=["dt"],gt=()=>({height:"4px"}),_t=()=>({width:"40rem"}),ht=()=>["name","names.en","names.ar"],ft=()=>({width:"100%"});function bt(i,r){1&i&&e.nrm(0,"p-progressBar",3),2&i&&e.Aen(e.lJ4(2,gt))}function vt(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",32),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function Ct(i,r){1&i&&(e.j41(0,"div",34),e.EFF(1," Arabic Name is required. "),e.k0s())}function yt(i,r){if(1&i&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.arabicName.errors.serverError," ")}}function Tt(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Ct,2,0,"div",33)(2,yt,2,1,"div",33),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.arabicName.errors.required),e.R7$(),e.Y8G("ngIf",t.arabicName.errors.serverError)}}function Ft(i,r){1&i&&(e.j41(0,"div",34),e.EFF(1," English Name is required. "),e.k0s())}function Et(i,r){if(1&i&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.englishName.errors.serverError," ")}}function kt(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Ft,2,0,"div",33)(2,Et,2,1,"div",33),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.englishName.errors.required),e.R7$(),e.Y8G("ngIf",t.englishName.errors.serverError)}}function xt(i,r){1&i&&(e.qex(0),e.j41(1,"span",35),e.EFF(2,"Save"),e.k0s(),e.bVm())}function It(i,r){1&i&&(e.qex(0),e.j41(1,"span",36),e.EFF(2," Please wait "),e.nrm(3,"span",37),e.k0s(),e.bVm()),2&i&&(e.R7$(),e.xc7("display","block"))}function Rt(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",32),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function St(i,r){1&i&&(e.j41(0,"tr")(1,"th",42),e.EFF(2,"ID"),e.k0s(),e.j41(3,"th",43),e.EFF(4,"Name"),e.k0s(),e.j41(5,"th",43),e.EFF(6,"Name (English)"),e.k0s(),e.j41(7,"th",43),e.EFF(8,"Name (Arabic)"),e.k0s(),e.nrm(9,"th",44),e.k0s())}function wt(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"span",45),e.EFF(3),e.k0s()(),e.j41(4,"td")(5,"span",46),e.EFF(6),e.k0s()(),e.j41(7,"td")(8,"span",47),e.EFF(9),e.k0s()(),e.j41(10,"td")(11,"span",47),e.EFF(12),e.k0s()(),e.j41(13,"td")(14,"div",48)(15,"button",49),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(3);return e.Njj(o.editPosition(n))}),e.k0s(),e.j41(16,"button",50),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(3);return e.Njj(o.deletePosition(n.id))}),e.k0s()()()()}if(2&i){const t=r.$implicit;e.R7$(3),e.SpI("#",t.id,""),e.R7$(3),e.JRh(t.name),e.R7$(3),e.JRh(t.names.en),e.R7$(3),e.JRh(t.names.ar)}}function jt(i,r){1&i&&(e.j41(0,"tr")(1,"td",51)(2,"div",52),e.nrm(3,"i",53),e.j41(4,"div",45),e.EFF(5,"No positions found"),e.k0s(),e.j41(6,"div",54),e.EFF(7,"No positions match your search criteria."),e.k0s()()()())}function Nt(i,r){if(1&i&&(e.qex(0),e.j41(1,"p-table",38,0),e.nI1(3,"async"),e.DNE(4,St,10,0,"ng-template",39)(5,wt,17,4,"ng-template",40)(6,jt,8,0,"ng-template",41),e.k0s(),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("value",t.filteredPositions)("paginator",!0)("rows",10)("loading",e.bMT(3,7,t.isLoading$))("globalFilterFields",e.lJ4(9,ht))("rowHover",!0)("tableStyle",e.lJ4(10,ft))}}function Dt(i,r){1&i&&(e.qex(0),e.j41(1,"div",52),e.nrm(2,"i",53),e.j41(3,"div",45),e.EFF(4,"No positions available"),e.k0s(),e.j41(5,"div",54),e.EFF(6,"No positions have been created yet."),e.k0s()(),e.bVm())}function Gt(i,r){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h1",8),e.EFF(6," Positions "),e.k0s(),e.j41(7,"div",9),e.EFF(8),e.k0s()(),e.j41(9,"div",10)(10,"div",11),e.nrm(11,"i",12),e.j41(12,"input",13),e.bIt("input",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.applyFilter(n))}),e.k0s()(),e.j41(13,"button",14),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showDialog())}),e.nrm(14,"i",15),e.j41(15,"span",16),e.EFF(16,"Create"),e.k0s()()()()()(),e.j41(17,"p-dialog",17),e.mxI("visibleChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.visible,n)||(o.visible=n),e.Njj(n)}),e.DNE(18,vt,1,2,"p-messages",18),e.j41(19,"span",19),e.EFF(20),e.k0s(),e.j41(21,"form",20)(22,"div",21)(23,"label",22),e.EFF(24,"Arabic Name"),e.k0s(),e.j41(25,"div",23),e.nrm(26,"input",24),e.DNE(27,Tt,3,2,"div",2),e.k0s()(),e.j41(28,"div",21)(29,"label",25),e.EFF(30,"English Name"),e.k0s(),e.j41(31,"div",23),e.nrm(32,"input",26),e.DNE(33,kt,3,2,"div",2),e.k0s()()(),e.j41(34,"div",27)(35,"button",28),e.nI1(36,"async"),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.submit())}),e.DNE(37,xt,3,0,"ng-container",2),e.nI1(38,"async"),e.DNE(39,It,4,2,"ng-container",2),e.nI1(40,"async"),e.k0s(),e.j41(41,"button",29),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onCancel())}),e.EFF(42," Cancel "),e.k0s()()(),e.j41(43,"div",30)(44,"div",31),e.DNE(45,Rt,1,2,"p-messages",18)(46,Nt,7,11,"ng-container",2),e.nI1(47,"async"),e.DNE(48,Dt,7,0,"ng-container",2),e.nI1(49,"async"),e.k0s()(),e.bVm()}if(2&i){const t=e.XpG();e.R7$(8),e.Lme("Total: ",t.paginator.total," Position",1!==t.paginator.total?"s":"",""),e.R7$(9),e.Aen(e.lJ4(28,_t)),e.Y8G("header",t.isEditMode?"Edit Position":"Add Position")("modal",!0),e.R50("visible",t.visible),e.R7$(),e.Y8G("ngIf",t.hasErrorMessage),e.R7$(2),e.SpI("",t.isEditMode?"Edit Position Details":"Add Position Details","."),e.R7$(),e.Y8G("formGroup",t.positionForm),e.R7$(6),e.Y8G("ngIf",t.arabicName&&t.arabicName.errors&&(t.arabicName.touched||t.arabicName.dirty)),e.R7$(6),e.Y8G("ngIf",t.englishName&&t.englishName.errors&&(t.englishName.touched||t.englishName.dirty)),e.R7$(2),e.Y8G("disabled",t.positionForm.invalid||e.bMT(36,18,t.isLoading$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(38,20,t.isLoading$)),e.R7$(2),e.Y8G("ngIf",e.bMT(40,22,t.isLoading$)),e.R7$(6),e.Y8G("ngIf",t.hasSuccessMessage),e.R7$(),e.Y8G("ngIf",!1===e.bMT(47,24,t.isLoading$)&&t.listOfPositions.length>0),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(49,26,t.isLoading$)&&0===t.listOfPositions.length)}}let qt=(()=>{class i{positionsService;cdr;fb;messageService;messages=[];unsubscribe=[];listOfPositions=[];filteredPositions=[];isEditMode=!1;isLoading$;selectedPositionId=null;visible=!1;positionForm;paginator={page:1,pageSize:10,pageSizes:[10,20,30,50,100],total:0};searchTerm="";table;constructor(t,s,n,o){this.positionsService=t,this.cdr=s,this.fb=n,this.messageService=o,this.isLoading$=this.positionsService.isLoading$}ngOnInit(){this.filteredPositions=[],this.positionForm=this.fb.group({arabicName:["",c.k0.required],englishName:["",c.k0.required]}),this.getPositionsList()}showDialog(){this.visible=!0,this.selectedPositionId=null,this.isEditMode=!1,this.positionForm.reset()}editPosition(t){this.visible=!0,this.selectedPositionId=t.id,this.isEditMode=!0,this.positionForm.patchValue({arabicName:t.names.ar,englishName:t.names.en})}get hasSuccessMessage(){return this.messages.some(t=>"success"===t.severity)}get hasErrorMessage(){return this.messages.some(t=>"error"===t.severity)}getPositionsList(){const t=this.positionsService.getPositions(this.paginator.page,this.paginator.pageSize).subscribe({next:s=>{this.listOfPositions=s.data,this.filteredPositions=s.data,this.paginator.total=s.meta.total,this.cdr.detectChanges()},error:s=>{this.messages=[],s.validationMessages?this.messages=s.validationMessages:this.messages.push({severity:"error",summary:"Error",detail:"An unexpected error occurred."})}});this.unsubscribe.push(t)}pageChange(t){this.paginator.page=t,this.getPositionsList()}pageSizeChange(t){const s=t.target;if(s){const n=parseInt(s.value,10);this.paginator.pageSize=n,this.paginator.page=1,this.getPositionsList()}}applyFilter(t){const s=t.target.value.toLowerCase();this.filteredPositions=s?this.listOfPositions.filter(n=>n.name?.toLowerCase().includes(s)||n.names?.en?.toLowerCase().includes(s)||n.names?.ar?.toLowerCase().includes(s)):this.listOfPositions}onLazyLoad(t){this.paginator.page=Math.floor(t.first/t.rows)+1,this.paginator.pageSize=t.rows,this.getPositionsList()}get arabicName(){return this.positionForm.get("arabicName")}get englishName(){return this.positionForm.get("englishName")}submit(){if(this.messages=[],this.positionForm.invalid)return void this.positionForm.markAllAsTouched();const t=this.positionForm.value;if(this.selectedPositionId){const n=this.positionsService.updatePosition(this.selectedPositionId,{name:{en:t.englishName,ar:t.arabicName}}).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:"Position updated successfully."}),this.getPositionsList(),this.visible=!1,this.positionForm.reset()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}else{const n=this.positionsService.createPosition({name:{en:t.englishName,ar:t.arabicName}}).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:"Position created successfully."}),this.getPositionsList(),this.visible=!1,this.positionForm.reset()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}}onCancel(){this.visible=!1,this.positionForm.reset()}deletePosition(t){this.messages=[],b().fire({title:"Are you sure?",text:"Do you want to delete this position? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(s=>{if(s.isConfirmed){const n=this.positionsService.deletePosition(t).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:"Position deleted successfully."}),this.getPositionsList()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}})}handleServerErrors(t){if(t.error&&t.error.errors){const s=t.error.errors,n={"name.en":"englishName","name.ar":"arabicName"};for(const o in s)if(s.hasOwnProperty(o)){const a=s[o],l=n[o];if(l){const d=this.positionForm.get(l);d&&(d.setErrors({serverError:a[0]}),d.markAsTouched())}else this.messages.push({severity:"error",summary:"",detail:a.join(", ")})}}else this.messages.push({severity:"error",summary:"Error",detail:"An unexpected error occurred."})}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}Math=Math;static \u0275fac=function(s){return new(s||i)(e.rXU(pt.c),e.rXU(e.gRc),e.rXU(c.ok),e.rXU(f.bg))};static \u0275cmp=e.VBU({type:i,selectors:[["app-positions"]],viewQuery:function(s,n){if(1&s&&e.GBs(mt,5),2&s){let o;e.mGM(o=e.lsd())&&(n.table=o.first)}},decls:4,vars:6,consts:[["dt",""],["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],["id","kt_app_toolbar",1,"app-toolbar","pt-10","px-10","pb-0","mb-0"],["id","kt_app_toolbar_container",1,"app-container","container-fluid","d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","flex-column","justify-content-center","gap-1","me-3"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],[1,"fw-semibold","fs-7","my-0","text-muted"],[1,"d-flex","align-items-center","gap-3"],[1,"d-flex","align-items-center","position-relative"],[1,"pi","pi-search","position-absolute","ms-3",2,"font-size","14px","color","#6c757d"],["type","text","pInputText","","placeholder","Search",1,"form-control","ps-10",2,"width","240px","height","36px","border","1px solid #cbd5e1","box-shadow","0 0 #0000,0 0 #0000,0 1px 2px 0 rgba(18,18,23,0.05)","border-radius","6px",3,"input"],[1,"btn","btn-sm",2,"background","white","border","1px solid #cbd5e1","box-shadow","0 0 #0000,0 0 #0000,0 1px 2px 0 rgba(18,18,23,0.05)","border-radius","6px","padding","6px 12px","height","36px",3,"click"],[1,"ki-outline","ki-plus","fs-5",2,"color","#3b82f6"],[1,"ms-1",2,"font-size","13px","font-weight","500","color","#374151"],["appendTo","body",3,"visibleChange","header","modal","visible"],[3,"value","enableService","valueChange",4,"ngIf"],[1,"text-muted","mb-3","d-block"],[3,"formGroup"],[1,"mb-3","row"],["for","arabicName",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["pInputText","","id","arabicName","formControlName","arabicName","autocomplete","off",1,"form-control"],["for","englishName",1,"col-sm-3","col-form-label"],["pInputText","","id","englishName","formControlName","englishName","autocomplete","off",1,"form-control"],[1,"d-flex","justify-content-end","gap-2"],["type","submit",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],["id","kt_app_content",1,"app-content","px-10","pb-10","pt-5","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-fluid"],[3,"valueChange","value","enableService"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],["responsiveLayout","scroll",3,"value","paginator","rows","loading","globalFilterFields","rowHover","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","10%"],[2,"width","25%"],[2,"width","15%"],[1,"text-gray-600","fw-semibold"],[1,"text-gray-800","fw-semibold"],[1,"text-gray-700"],[1,"d-flex","justify-content-end","gap-1"],["pButton","","icon","pi pi-pencil","pTooltip","Edit","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"width","28px","height","28px","background","#3b82f6","color","white","border-radius","6px",3,"click"],["pButton","","icon","pi pi-trash","pTooltip","Delete","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"width","28px","height","28px","background","#ef4444","color","white","border-radius","6px",3,"click"],["colspan","5"],[1,"d-flex","flex-column","align-items-center","justify-content-center","py-8"],[1,"pi","pi-inbox","text-gray-400","mb-2",2,"font-size","48px"],[1,"text-gray-500",2,"font-size","14px"]],template:function(s,n){1&s&&(e.DNE(0,bt,1,3,"p-progressBar",1),e.nI1(1,"async"),e.DNE(2,Gt,50,29,"ng-container",2),e.nI1(3,"async")),2&s&&(e.Y8G("ngIf",e.bMT(1,2,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!e.bMT(3,4,n.isLoading$)))},dependencies:[u.bT,h.l,f.Ei,g._f,v.m,T.z,x.S,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,w.B,$.XI,u.Jj],styles:[".p-datatable{border:1px solid #dadddf;border-radius:.75rem;overflow:hidden}  .p-datatable .p-datatable-table{border:none}  .p-datatable .p-datatable-thead>tr>th{background:transparent;border-bottom:1px solid #e5e5e5;padding:.5rem 1rem;font-weight:700;color:#a1a5b7;font-size:.75rem;text-transform:uppercase;letter-spacing:.05em}  .p-datatable .p-datatable-tbody>tr>td{border-bottom:1px solid #dadddf;padding:.7rem 1rem;font-size:.875rem;color:#5e6278;font-weight:600}  .p-datatable .p-datatable-tbody>tr:hover{background-color:#f8f9fa}  .p-datatable .p-datatable-tbody>tr:last-child>td{border-bottom:none}"]})}return i})();var $t=p(2016),pe=p(5899),Q=p(4035),V=p(8833);const Mt=["dt"],Lt=()=>({height:"4px"}),me=()=>({height:"36px","min-width":"120px",border:"1px solid #cbd5e1","border-radius":"6px"}),At=()=>({width:"40rem"}),Vt=()=>["name","names.en","names.ar","iso2","iso3"],Bt=()=>({width:"100%"}),Yt=(i,r)=>({"background-color":i,color:r});function Pt(i,r){1&i&&e.nrm(0,"p-progressBar",3),2&i&&e.Aen(e.lJ4(2,Lt))}function Xt(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",50),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function Ot(i,r){1&i&&(e.j41(0,"div",52),e.EFF(1," English Name is required. "),e.k0s())}function zt(i,r){if(1&i&&(e.j41(0,"div",52),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.countryEn.errors.serverError," ")}}function Ht(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Ot,2,0,"div",51)(2,zt,2,1,"div",51),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.countryEn.errors.required),e.R7$(),e.Y8G("ngIf",t.countryEn.errors.serverError)}}function Ut(i,r){1&i&&(e.j41(0,"div",52),e.EFF(1," Arabic Name is required. "),e.k0s())}function Kt(i,r){if(1&i&&(e.j41(0,"div",52),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.countryAr.errors.serverError," ")}}function Jt(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Ut,2,0,"div",51)(2,Kt,2,1,"div",51),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.countryAr.errors.required),e.R7$(),e.Y8G("ngIf",t.countryAr.errors.serverError)}}function Qt(i,r){1&i&&(e.j41(0,"div",52),e.EFF(1," Region is required. "),e.k0s())}function Wt(i,r){if(1&i&&(e.j41(0,"div",52),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.regionId.errors.serverError," ")}}function Zt(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Qt,2,0,"div",51)(2,Wt,2,1,"div",51),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.regionId.errors.required),e.R7$(),e.Y8G("ngIf",t.regionId.errors.serverError)}}function en(i,r){1&i&&(e.j41(0,"div",52),e.EFF(1," International Code is required. "),e.k0s())}function tn(i,r){if(1&i&&(e.j41(0,"div",52),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.internationalCode.errors.serverError," ")}}function nn(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,en,2,0,"div",51)(2,tn,2,1,"div",51),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.internationalCode.errors.required),e.R7$(),e.Y8G("ngIf",t.internationalCode.errors.serverError)}}function sn(i,r){1&i&&(e.j41(0,"div",52),e.EFF(1," ISO2 is required. "),e.k0s())}function on(i,r){if(1&i&&(e.j41(0,"div",52),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.iso2.errors.serverError," ")}}function rn(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,sn,2,0,"div",51)(2,on,2,1,"div",51),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.iso2.errors.required),e.R7$(),e.Y8G("ngIf",t.iso2.errors.serverError)}}function an(i,r){1&i&&(e.j41(0,"div",52),e.EFF(1," ISO3 is required. "),e.k0s())}function ln(i,r){if(1&i&&(e.j41(0,"div",52),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.iso3.errors.serverError," ")}}function cn(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,an,2,0,"div",51)(2,ln,2,1,"div",51),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.iso3.errors.required),e.R7$(),e.Y8G("ngIf",t.iso3.errors.serverError)}}function dn(i,r){1&i&&(e.j41(0,"div",52),e.EFF(1," Nationality (English) is required. "),e.k0s())}function un(i,r){if(1&i&&(e.j41(0,"div",52),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.nationalityEn.errors.serverError," ")}}function pn(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,dn,2,0,"div",51)(2,un,2,1,"div",51),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.nationalityEn.errors.required),e.R7$(),e.Y8G("ngIf",t.nationalityEn.errors.serverError)}}function mn(i,r){1&i&&(e.j41(0,"div",52),e.EFF(1," Nationality (Arabic) is required. "),e.k0s())}function gn(i,r){if(1&i&&(e.j41(0,"div",52),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.nationalityAr.errors.serverError," ")}}function _n(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,mn,2,0,"div",51)(2,gn,2,1,"div",51),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.nationalityAr.errors.required),e.R7$(),e.Y8G("ngIf",t.nationalityAr.errors.serverError)}}function hn(i,r){1&i&&(e.j41(0,"div",52),e.EFF(1," Status is required. "),e.k0s())}function fn(i,r){if(1&i&&(e.j41(0,"div",52),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.status.errors.serverError," ")}}function bn(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,hn,2,0,"div",51)(2,fn,2,1,"div",51),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.status.errors.required),e.R7$(),e.Y8G("ngIf",t.status.errors.serverError)}}function vn(i,r){1&i&&(e.j41(0,"div",52),e.EFF(1," Flag is required. "),e.k0s())}function Cn(i,r){if(1&i&&(e.j41(0,"div",52),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.flag.errors.serverError," ")}}function yn(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,vn,2,0,"div",51)(2,Cn,2,1,"div",51),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.flag.errors.required),e.R7$(),e.Y8G("ngIf",t.flag.errors.serverError)}}function Tn(i,r){1&i&&(e.qex(0),e.j41(1,"span",53),e.EFF(2,"Save"),e.k0s(),e.bVm())}function Fn(i,r){1&i&&(e.qex(0),e.j41(1,"span",54),e.EFF(2," Please wait "),e.nrm(3,"span",55),e.k0s(),e.bVm()),2&i&&(e.R7$(),e.xc7("display","block"))}function En(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",50),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function kn(i,r){1&i&&(e.j41(0,"tr")(1,"th",60),e.EFF(2,"Flag"),e.k0s(),e.j41(3,"th",61),e.EFF(4,"Name (English)"),e.k0s(),e.j41(5,"th",61),e.EFF(6,"Name (Arabic)"),e.k0s(),e.j41(7,"th",62),e.EFF(8,"ISO2"),e.k0s(),e.j41(9,"th",62),e.EFF(10,"ISO3"),e.k0s(),e.j41(11,"th",63),e.EFF(12,"Status"),e.k0s(),e.nrm(13,"th",61),e.k0s())}function xn(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"div",64),e.nrm(3,"span",65),e.k0s()(),e.j41(4,"td")(5,"span",66),e.EFF(6),e.k0s()(),e.j41(7,"td")(8,"span",67),e.EFF(9),e.k0s()(),e.j41(10,"td")(11,"span",68),e.EFF(12),e.k0s()(),e.j41(13,"td")(14,"span",68),e.EFF(15),e.k0s()(),e.j41(16,"td")(17,"span",69),e.EFF(18),e.k0s()(),e.j41(19,"td")(20,"div",70)(21,"button",71),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(3);return e.Njj(o.editCountry(n))}),e.k0s(),e.j41(22,"button",72),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(3);return e.Njj(o.deleteCountry(n.id))}),e.k0s()()()()}if(2&i){const t=r.$implicit;e.R7$(3),e.Y8G("inlineSVG","./assets/media/flags/"+t.flag+".svg"),e.R7$(3),e.JRh(t.names.en),e.R7$(3),e.JRh(t.names.ar),e.R7$(3),e.JRh(t.iso2),e.R7$(3),e.JRh(t.iso3),e.R7$(2),e.Y8G("ngStyle",e.l_i(7,Yt,"active"===t.status?"#d1eddb":"#f8d7da","active"===t.status?"#155724":"#721c24")),e.R7$(),e.SpI(" ",t.status," ")}}function In(i,r){1&i&&(e.j41(0,"tr")(1,"td",73)(2,"div",74),e.nrm(3,"i",75),e.j41(4,"div",76),e.EFF(5,"No countries found"),e.k0s(),e.j41(6,"div",77),e.EFF(7,"No countries match your search criteria."),e.k0s()()()())}function Rn(i,r){if(1&i&&(e.qex(0),e.j41(1,"p-table",56,0),e.nI1(3,"async"),e.DNE(4,kn,14,0,"ng-template",57)(5,xn,23,10,"ng-template",58)(6,In,8,0,"ng-template",59),e.k0s(),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("value",t.filteredCountries)("paginator",!0)("rows",10)("loading",e.bMT(3,7,t.isLoading$))("globalFilterFields",e.lJ4(9,Vt))("rowHover",!0)("tableStyle",e.lJ4(10,Bt))}}function Sn(i,r){1&i&&(e.qex(0),e.j41(1,"div",74),e.nrm(2,"i",75),e.j41(3,"div",76),e.EFF(4,"No countries available"),e.k0s(),e.j41(5,"div",77),e.EFF(6,"No countries have been created yet."),e.k0s()(),e.bVm())}function wn(i,r){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h1",8),e.EFF(6," Countries "),e.k0s(),e.j41(7,"div",9),e.EFF(8),e.k0s()(),e.j41(9,"div",10)(10,"div",11),e.nrm(11,"i",12),e.j41(12,"input",13),e.bIt("input",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.applyFilter(n))}),e.k0s()(),e.j41(13,"p-dropdown",14),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.selectedStatus,n)||(o.selectedStatus=n),e.Njj(n)}),e.bIt("onChange",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.filterCountries())}),e.k0s(),e.j41(14,"p-dropdown",15),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.selectedRegionId,n)||(o.selectedRegionId=n),e.Njj(n)}),e.bIt("onChange",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.filterCountriesByRegion())}),e.k0s(),e.j41(15,"button",16),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showDialog())}),e.nrm(16,"i",17),e.j41(17,"span",18),e.EFF(18,"Create"),e.k0s()()()()()(),e.j41(19,"p-dialog",19),e.mxI("visibleChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.visible,n)||(o.visible=n),e.Njj(n)}),e.DNE(20,Xt,1,2,"p-messages",20),e.j41(21,"span",21),e.EFF(22),e.k0s(),e.j41(23,"form",22)(24,"div",23)(25,"label",24),e.EFF(26,"Name (English)"),e.k0s(),e.j41(27,"div",25),e.nrm(28,"input",26),e.DNE(29,Ht,3,2,"div",2),e.k0s()(),e.j41(30,"div",23)(31,"label",27),e.EFF(32,"Name (Arabic)"),e.k0s(),e.j41(33,"div",25),e.nrm(34,"input",28),e.DNE(35,Jt,3,2,"div",2),e.k0s()(),e.j41(36,"div",23)(37,"label",29),e.EFF(38,"Region"),e.k0s(),e.j41(39,"div",25),e.nrm(40,"p-dropdown",30),e.DNE(41,Zt,3,2,"div",2),e.k0s()(),e.j41(42,"div",23)(43,"label",31),e.EFF(44,"International Code"),e.k0s(),e.j41(45,"div",25),e.nrm(46,"input",32),e.DNE(47,nn,3,2,"div",2),e.k0s()(),e.j41(48,"div",23)(49,"label",33),e.EFF(50,"ISO2"),e.k0s(),e.j41(51,"div",25),e.nrm(52,"input",34),e.DNE(53,rn,3,2,"div",2),e.k0s()(),e.j41(54,"div",23)(55,"label",35),e.EFF(56,"ISO3"),e.k0s(),e.j41(57,"div",25),e.nrm(58,"input",36),e.DNE(59,cn,3,2,"div",2),e.k0s()(),e.j41(60,"div",23)(61,"label",37),e.EFF(62,"Nationality (English)"),e.k0s(),e.j41(63,"div",25),e.nrm(64,"input",38),e.DNE(65,pn,3,2,"div",2),e.k0s()(),e.j41(66,"div",23)(67,"label",39),e.EFF(68,"Nationality (Arabic)"),e.k0s(),e.j41(69,"div",25),e.nrm(70,"input",40),e.DNE(71,_n,3,2,"div",2),e.k0s()(),e.j41(72,"div",23)(73,"label",41),e.EFF(74,"Status"),e.k0s(),e.j41(75,"div",25),e.nrm(76,"p-dropdown",42),e.DNE(77,bn,3,2,"div",2),e.k0s()(),e.j41(78,"div",23)(79,"label",43),e.EFF(80,"Flag"),e.k0s(),e.j41(81,"div",25),e.nrm(82,"input",44),e.DNE(83,yn,3,2,"div",2),e.k0s()()(),e.j41(84,"div",45)(85,"button",46),e.nI1(86,"async"),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.submit())}),e.DNE(87,Tn,3,0,"ng-container",2),e.nI1(88,"async"),e.DNE(89,Fn,4,2,"ng-container",2),e.nI1(90,"async"),e.k0s(),e.j41(91,"button",47),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onCancel())}),e.EFF(92," Cancel "),e.k0s()()(),e.j41(93,"div",48)(94,"div",49),e.DNE(95,En,1,2,"p-messages",20)(96,Rn,7,11,"ng-container",2),e.nI1(97,"async"),e.DNE(98,Sn,7,0,"ng-container",2),e.nI1(99,"async"),e.k0s()(),e.bVm()}if(2&i){const t=e.XpG();e.R7$(8),e.SpI("",t.listOfCountries.length," Countries"),e.R7$(5),e.Aen(e.lJ4(45,me)),e.Y8G("options",t.statusOptions),e.R50("ngModel",t.selectedStatus),e.R7$(),e.Aen(e.lJ4(46,me)),e.Y8G("options",t.regionOptions),e.R50("ngModel",t.selectedRegionId),e.R7$(5),e.Aen(e.lJ4(47,At)),e.Y8G("header",t.isEditMode?"Edit Country":"Add Country")("modal",!0),e.R50("visible",t.visible),e.R7$(),e.Y8G("ngIf",t.hasErrorMessage),e.R7$(2),e.SpI("",t.isEditMode?"Edit Country Details":"Add Country Details","."),e.R7$(),e.Y8G("formGroup",t.countryForm),e.R7$(6),e.Y8G("ngIf",t.countryEn&&t.countryEn.errors&&(t.countryEn.touched||t.countryEn.dirty)),e.R7$(6),e.Y8G("ngIf",t.countryAr&&t.countryAr.errors&&(t.countryAr.touched||t.countryAr.dirty)),e.R7$(5),e.Y8G("options",t.regionOptions),e.R7$(),e.Y8G("ngIf",t.regionId&&t.regionId.errors&&(t.regionId.touched||t.regionId.dirty)),e.R7$(6),e.Y8G("ngIf",t.internationalCode&&t.internationalCode.errors&&(t.internationalCode.touched||t.internationalCode.dirty)),e.R7$(6),e.Y8G("ngIf",t.iso2&&t.iso2.errors&&(t.iso2.touched||t.iso2.dirty)),e.R7$(6),e.Y8G("ngIf",t.iso3&&t.iso3.errors&&(t.iso3.touched||t.iso3.dirty)),e.R7$(6),e.Y8G("ngIf",t.nationalityEn&&t.nationalityEn.errors&&(t.nationalityEn.touched||t.nationalityEn.dirty)),e.R7$(6),e.Y8G("ngIf",t.nationalityAr&&t.nationalityAr.errors&&(t.nationalityAr.touched||t.nationalityAr.dirty)),e.R7$(5),e.Y8G("options",t.statusOptions),e.R7$(),e.Y8G("ngIf",t.status&&t.status.errors&&(t.status.touched||t.status.dirty)),e.R7$(6),e.Y8G("ngIf",t.flag&&t.flag.errors&&(t.flag.touched||t.flag.dirty)),e.R7$(2),e.Y8G("disabled",t.countryForm.invalid||e.bMT(86,35,t.isLoading$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(88,37,t.isLoading$)),e.R7$(2),e.Y8G("ngIf",e.bMT(90,39,t.isLoading$)),e.R7$(6),e.Y8G("ngIf",t.hasSuccessMessage),e.R7$(),e.Y8G("ngIf",!1===e.bMT(97,41,t.isLoading$)&&t.listOfCountries.length>0),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(99,43,t.isLoading$)&&0===t.listOfCountries.length)}}let jn=(()=>{class i{countriesService;regionsService;cdr;fb;messageService;messages=[];unsubscribe=[];listOfCountries=[];filteredCountries=[];selectedStatus=null;isEditMode=!1;isLoading$;noOfActiveCountries=0;noOfInactiveCountries=0;selectedCountryId=null;visible=!1;regionOptions=[];selectedRegionId=0;statusOptions=[{label:"All Statuses",value:null},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}];countryForm;table;constructor(t,s,n,o,a){this.countriesService=t,this.regionsService=s,this.cdr=n,this.fb=o,this.messageService=a,this.isLoading$=this.countriesService.isLoading$}ngOnInit(){this.initializeForm(),this.getCountriesList(),this.getRegionsList()}initializeForm(){this.countryForm=this.fb.group({countryEn:["",c.k0.required],countryAr:["",c.k0.required],regionId:[null,c.k0.required],internationalCode:["",c.k0.required],iso2:["",c.k0.required],iso3:["",c.k0.required],nationalityEn:["",c.k0.required],nationalityAr:["",c.k0.required],status:["active",c.k0.required],flag:["",c.k0.required]})}filterCountries(){this.applyAllFilters()}getRegionsList(){this.regionsService.getRegions().subscribe({next:t=>{this.regionOptions=t.map(s=>({label:s.names.en,value:s.id})),this.regionOptions.unshift({label:"All Regions",value:0})},error:t=>{this.messages=t.validationMessages||[{severity:"error",summary:"Error",detail:"Failed to fetch regions."}]}})}showDialog(){this.visible=!0,this.selectedCountryId=null,this.isEditMode=!1,this.countryForm.reset({status:"active"})}editCountry(t){this.visible=!0,this.selectedCountryId=t.id,this.isEditMode=!0,this.countryForm.patchValue({countryEn:t.names.en,countryAr:t.names.ar,regionId:t.region_id,internationalCode:t.international_code,iso2:t.iso2,iso3:t.iso3,nationalityEn:t.nationalities.en,nationalityAr:t.nationalities.ar,status:t.status,flag:t.flag})}getCountriesList(){const t=this.countriesService.getCountries().subscribe({next:s=>{this.listOfCountries=s,this.noOfActiveCountries=this.listOfCountries.filter(n=>"active"===n.status).length,this.noOfInactiveCountries=this.listOfCountries.filter(n=>"inactive"===n.status).length,this.filteredCountries=[...this.listOfCountries],this.cdr.detectChanges()},error:s=>{this.messages=s.validationMessages||[{severity:"error",summary:"Error",detail:"Failed to fetch countries."}]}});this.unsubscribe.push(t)}filterCountriesByRegion(){this.applyAllFilters()}applyFilter(t){const s=t.target.value.toLowerCase();this.applyAllFilters(s)}applyAllFilters(t=""){let s=[...this.listOfCountries];t&&(s=s.filter(n=>n.names?.en?.toLowerCase().includes(t)||n.names?.ar?.toLowerCase().includes(t)||n.iso2?.toLowerCase().includes(t)||n.iso3?.toLowerCase().includes(t))),this.selectedRegionId&&(s=s.filter(n=>n.region_id===this.selectedRegionId)),this.selectedStatus&&(s=s.filter(n=>n.status===this.selectedStatus)),this.filteredCountries=s}submit(){if(this.messages=[],this.countryForm.invalid)return void this.countryForm.markAllAsTouched();const t=this.countryForm.value,s={name:{en:t.countryEn,ar:t.countryAr},region_id:t.regionId,iso2:t.iso2,iso3:t.iso3,nationality:{en:t.nationalityEn,ar:t.nationalityAr},international_code:t.internationalCode,flag:t.flag,status:t.status};if(this.selectedCountryId){const n=this.countriesService.updateCountry(this.selectedCountryId,s).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:"Country updated successfully."}),this.getCountriesList(),this.visible=!1,this.countryForm.reset({status:"active"})},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}else{const n=this.countriesService.createCountry(s).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:"Country created successfully."}),this.getCountriesList(),this.visible=!1,this.countryForm.reset({status:"active"})},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}}onCancel(){this.visible=!1,this.countryForm.reset({status:"active"})}deleteCountry(t){this.messages=[],b().fire({title:"Are you sure?",text:"Do you want to delete this country? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(s=>{if(s.isConfirmed){const n=this.countriesService.deleteCountry(t).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:"Country deleted successfully."}),this.getCountriesList()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}})}get hasSuccessMessage(){return this.messages.some(t=>"success"===t.severity)}get hasErrorMessage(){return this.messages.some(t=>"error"===t.severity)}get countryEn(){return this.countryForm.get("countryEn")}get countryAr(){return this.countryForm.get("countryAr")}get regionId(){return this.countryForm.get("regionId")}get internationalCode(){return this.countryForm.get("internationalCode")}get iso2(){return this.countryForm.get("iso2")}get iso3(){return this.countryForm.get("iso3")}get nationalityEn(){return this.countryForm.get("nationalityEn")}get nationalityAr(){return this.countryForm.get("nationalityAr")}get status(){return this.countryForm.get("status")}get flag(){return this.countryForm.get("flag")}handleServerErrors(t){if(t.error&&t.error.errors){const s=t.error.errors,n={"name.en":"countryEn","name.ar":"countryAr",region_id:"regionId",international_code:"internationalCode",iso2:"iso2",iso3:"iso3","nationality.en":"nationalityEn","nationality.ar":"nationalityAr",status:"status",flag:"flag"};for(const o in s)if(s.hasOwnProperty(o)){const a=s[o],l=n[o];if(l){const d=this.countryForm.get(l);d&&(d.setErrors({serverError:a[0]}),d.markAsTouched())}else this.messages.push({severity:"error",summary:"",detail:a.join(", ")})}}else this.messages.push({severity:"error",summary:"Error",detail:"An unexpected error occurred."})}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}static \u0275fac=function(s){return new(s||i)(e.rXU($t.C),e.rXU(pe.F),e.rXU(e.gRc),e.rXU(c.ok),e.rXU(f.bg))};static \u0275cmp=e.VBU({type:i,selectors:[["app-countries"]],viewQuery:function(s,n){if(1&s&&e.GBs(Mt,5),2&s){let o;e.mGM(o=e.lsd())&&(n.table=o.first)}},decls:4,vars:6,consts:[["dt",""],["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],["id","kt_app_toolbar",1,"app-toolbar","pt-10","px-10","pb-0","mb-0"],["id","kt_app_toolbar_container",1,"app-container","container-fluid","d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","flex-column","justify-content-center","gap-1","me-3"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],[1,"fw-semibold","fs-7","my-0","text-muted"],[1,"d-flex","align-items-center","gap-3"],[1,"d-flex","align-items-center","position-relative"],[1,"pi","pi-search","position-absolute","ms-3",2,"font-size","14px","color","#6c757d"],["type","text","pInputText","","placeholder","Search",1,"form-control","ps-10",2,"width","240px","height","36px","border","1px solid #cbd5e1","border-radius","6px",3,"input"],["appendTo","body","id","statusFilter","placeholder","Status",3,"ngModelChange","onChange","options","ngModel"],["appendTo","body","id","regionFilter","placeholder","Region",3,"ngModelChange","onChange","options","ngModel"],[1,"btn","btn-sm","d-flex","align-items-center",2,"background","white","border","1px solid #cbd5e1","border-radius","6px","padding","6px 12px","height","36px","white-space","nowrap",3,"click"],[1,"ki-outline","ki-plus","fs-5",2,"color","#3b82f6"],[1,"ms-1",2,"font-size","13px","font-weight","500","color","#374151"],["appendTo","body",3,"visibleChange","header","modal","visible"],[3,"value","enableService","valueChange",4,"ngIf"],[1,"text-muted","mb-3","d-block"],[3,"formGroup"],[1,"mb-3","row"],["for","countryEn",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["pInputText","","id","countryEn","formControlName","countryEn","autocomplete","off",1,"form-control"],["for","countryAr",1,"col-sm-3","col-form-label"],["pInputText","","id","countryAr","formControlName","countryAr","autocomplete","off",1,"form-control"],["for","regionId",1,"col-sm-3","col-form-label"],["id","regionId","formControlName","regionId","placeholder","Select Region","appendTo","body",3,"options"],["for","internationalCode",1,"col-sm-3","col-form-label"],["pInputText","","id","internationalCode","formControlName","internationalCode","autocomplete","off",1,"form-control"],["for","iso2",1,"col-sm-3","col-form-label"],["pInputText","","id","iso2","formControlName","iso2","autocomplete","off",1,"form-control"],["for","iso3",1,"col-sm-3","col-form-label"],["pInputText","","id","iso3","formControlName","iso3","autocomplete","off",1,"form-control"],["for","nationalityEn",1,"col-sm-3","col-form-label"],["pInputText","","id","nationalityEn","formControlName","nationalityEn","autocomplete","off",1,"form-control"],["for","nationalityAr",1,"col-sm-3","col-form-label"],["pInputText","","id","nationalityAr","formControlName","nationalityAr","autocomplete","off",1,"form-control"],["for","status",1,"col-sm-3","col-form-label"],["id","status","formControlName","status","appendTo","body","placeholder","Select Status",3,"options"],["for","flag",1,"col-sm-3","col-form-label"],["pInputText","","id","flag","formControlName","flag","autocomplete","off",1,"form-control"],[1,"d-flex","justify-content-end","gap-2"],["type","submit",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],["id","kt_app_content",1,"app-content","px-10","pb-10","pt-5","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-fluid"],[3,"valueChange","value","enableService"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],["responsiveLayout","scroll",3,"value","paginator","rows","loading","globalFilterFields","rowHover","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","8%"],[2,"width","20%"],[2,"width","10%"],[2,"width","12%"],[1,"symbol","symbol-20px"],[1,"symbol-label","fw-bold",3,"inlineSVG"],[1,"text-gray-800","fw-semibold"],[1,"text-gray-700"],[1,"text-gray-600"],[1,"px-3","py-1","rounded","fw-semibold",2,"font-size","12px",3,"ngStyle"],[1,"d-flex","justify-content-end","gap-1"],["pButton","","icon","pi pi-pencil","pTooltip","Edit","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"width","28px","height","28px","background","#3b82f6","color","white","border-radius","6px",3,"click"],["pButton","","icon","pi pi-trash","pTooltip","Delete","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"width","28px","height","28px","background","#ef4444","color","white","border-radius","6px",3,"click"],["colspan","7"],[1,"d-flex","flex-column","align-items-center","justify-content-center","py-8"],[1,"pi","pi-inbox","text-gray-400","mb-2",2,"font-size","48px"],[1,"text-gray-600","fw-semibold"],[1,"text-gray-500",2,"font-size","14px"]],template:function(s,n){1&s&&(e.DNE(0,Pt,1,3,"p-progressBar",1),e.nI1(1,"async"),e.DNE(2,wn,100,48,"ng-container",2),e.nI1(3,"async")),2&s&&(e.Y8G("ngIf",e.bMT(1,2,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!e.bMT(3,4,n.isLoading$)))},dependencies:[u.bT,u.B3,h.l,f.Ei,g._f,v.m,T.z,Q.ll,V.ms,x.S,c.qT,c.me,c.BC,c.cb,c.vS,c.j4,c.JD,w.B,$.XI,u.Jj],styles:[".p-datatable{border:1px solid #cbd5e1;border-radius:.75rem;overflow:hidden}  .p-datatable .p-datatable-table{border:none}  .p-datatable .p-datatable-thead>tr>th{background:transparent;border-bottom:1px solid #cbd5e1;padding:.5rem 1rem;font-weight:700;color:#a1a5b7;font-size:.75rem;text-transform:uppercase;letter-spacing:.05em}  .p-datatable .p-datatable-tbody>tr>td{border-bottom:1px solid #cbd5e1;padding:.7rem 1rem;font-size:.875rem;color:#5e6278;font-weight:600}  .p-datatable .p-datatable-tbody>tr:hover{background-color:#f8f9fa}  .p-datatable .p-datatable-tbody>tr:last-child>td{border-bottom:none}"]})}return i})();const Nn=["dt"],Dn=()=>({height:"4px"}),Gn=()=>({width:"40rem"}),qn=()=>["name","names.en","names.ar"],$n=()=>({width:"100%"});function Mn(i,r){1&i&&e.nrm(0,"p-progressBar",3),2&i&&e.Aen(e.lJ4(2,Dn))}function Ln(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",32),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function An(i,r){1&i&&(e.j41(0,"div",34),e.EFF(1," English Name is required. "),e.k0s())}function Vn(i,r){if(1&i&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",null==t.regionEn||null==t.regionEn.errors?null:t.regionEn.errors.serverError," ")}}function Bn(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,An,2,0,"div",33)(2,Vn,2,1,"div",33),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==t.regionEn||null==t.regionEn.errors?null:t.regionEn.errors.required),e.R7$(),e.Y8G("ngIf",null==t.regionEn||null==t.regionEn.errors?null:t.regionEn.errors.serverError)}}function Yn(i,r){1&i&&(e.j41(0,"div",34),e.EFF(1," Arabic Name is required. "),e.k0s())}function Pn(i,r){if(1&i&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",null==t.regionAr||null==t.regionAr.errors?null:t.regionAr.errors.serverError," ")}}function Xn(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Yn,2,0,"div",33)(2,Pn,2,1,"div",33),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==t.regionAr||null==t.regionAr.errors?null:t.regionAr.errors.required),e.R7$(),e.Y8G("ngIf",null==t.regionAr||null==t.regionAr.errors?null:t.regionAr.errors.serverError)}}function On(i,r){1&i&&(e.qex(0),e.j41(1,"span",35),e.EFF(2,"Save"),e.k0s(),e.bVm())}function zn(i,r){1&i&&(e.qex(0),e.j41(1,"span",36),e.EFF(2," Please wait "),e.nrm(3,"span",37),e.k0s(),e.bVm()),2&i&&(e.R7$(),e.xc7("display","block"))}function Hn(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",32),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function Un(i,r){1&i&&(e.j41(0,"tr")(1,"th",42),e.EFF(2,"Name (English)"),e.k0s(),e.j41(3,"th",42),e.EFF(4,"Name (Arabic)"),e.k0s(),e.nrm(5,"th",43),e.k0s())}function Kn(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"span",44),e.EFF(3),e.k0s()(),e.j41(4,"td")(5,"span",45),e.EFF(6),e.k0s()(),e.j41(7,"td")(8,"div",46)(9,"button",47),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(3);return e.Njj(o.editRegion(n))}),e.k0s(),e.j41(10,"button",48),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(3);return e.Njj(o.deleteRegion(n.id))}),e.k0s()()()()}if(2&i){const t=r.$implicit;e.R7$(3),e.JRh(t.names.en),e.R7$(3),e.JRh(t.names.ar)}}function Jn(i,r){1&i&&(e.j41(0,"tr")(1,"td",49)(2,"div",50),e.nrm(3,"i",51),e.j41(4,"div",52),e.EFF(5,"No regions found"),e.k0s(),e.j41(6,"div",53),e.EFF(7,"No regions match your search criteria."),e.k0s()()()())}function Qn(i,r){if(1&i&&(e.qex(0),e.j41(1,"p-table",38,0),e.nI1(3,"async"),e.DNE(4,Un,6,0,"ng-template",39)(5,Kn,11,2,"ng-template",40)(6,Jn,8,0,"ng-template",41),e.k0s(),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("value",t.listOfRegions)("paginator",!0)("rows",10)("loading",e.bMT(3,7,t.isLoading$))("globalFilterFields",e.lJ4(9,qn))("rowHover",!0)("tableStyle",e.lJ4(10,$n))}}function Wn(i,r){1&i&&(e.qex(0),e.j41(1,"div",50),e.nrm(2,"i",51),e.j41(3,"div",52),e.EFF(4,"No regions available"),e.k0s(),e.j41(5,"div",53),e.EFF(6,"No regions have been created yet."),e.k0s()(),e.bVm())}function Zn(i,r){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h1",8),e.EFF(6," Regions "),e.k0s(),e.j41(7,"div",9),e.EFF(8),e.k0s()(),e.j41(9,"div",10)(10,"div",11),e.nrm(11,"i",12),e.j41(12,"input",13),e.bIt("input",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.applyFilter(n))}),e.k0s()(),e.j41(13,"button",14),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showDialog())}),e.nrm(14,"i",15),e.j41(15,"span",16),e.EFF(16,"Create"),e.k0s()()()()()(),e.j41(17,"p-dialog",17),e.mxI("visibleChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.visible,n)||(o.visible=n),e.Njj(n)}),e.DNE(18,Ln,1,2,"p-messages",18),e.j41(19,"span",19),e.EFF(20),e.k0s(),e.j41(21,"form",20)(22,"div",21)(23,"label",22),e.EFF(24,"Name (English)"),e.k0s(),e.j41(25,"div",23),e.nrm(26,"input",24),e.DNE(27,Bn,3,2,"div",2),e.k0s()(),e.j41(28,"div",21)(29,"label",25),e.EFF(30,"Name (Arabic)"),e.k0s(),e.j41(31,"div",23),e.nrm(32,"input",26),e.DNE(33,Xn,3,2,"div",2),e.k0s()()(),e.j41(34,"div",27)(35,"button",28),e.nI1(36,"async"),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.submit())}),e.DNE(37,On,3,0,"ng-container",2),e.nI1(38,"async"),e.DNE(39,zn,4,2,"ng-container",2),e.nI1(40,"async"),e.k0s(),e.j41(41,"button",29),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onCancel())}),e.EFF(42," Cancel "),e.k0s()()(),e.j41(43,"div",30)(44,"div",31),e.DNE(45,Hn,1,2,"p-messages",18)(46,Qn,7,11,"ng-container",2),e.nI1(47,"async"),e.DNE(48,Wn,7,0,"ng-container",2),e.nI1(49,"async"),e.k0s()(),e.bVm()}if(2&i){const t=e.XpG();e.R7$(8),e.SpI("",t.listOfRegions.length," Regions"),e.R7$(9),e.Aen(e.lJ4(27,Gn)),e.Y8G("header",t.isEditMode?"Edit Region":"Add Region")("modal",!0),e.R50("visible",t.visible),e.R7$(),e.Y8G("ngIf",t.hasErrorMessage),e.R7$(2),e.SpI("",t.isEditMode?"Edit Region Details":"Add Region Details","."),e.R7$(),e.Y8G("formGroup",t.regionForm),e.R7$(6),e.Y8G("ngIf",(null==t.regionEn?null:t.regionEn.invalid)&&((null==t.regionEn?null:t.regionEn.dirty)||(null==t.regionEn?null:t.regionEn.touched))),e.R7$(6),e.Y8G("ngIf",(null==t.regionAr?null:t.regionAr.invalid)&&((null==t.regionAr?null:t.regionAr.dirty)||(null==t.regionAr?null:t.regionAr.touched))),e.R7$(2),e.Y8G("disabled",t.regionForm.invalid||e.bMT(36,17,t.isLoading$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(38,19,t.isLoading$)),e.R7$(2),e.Y8G("ngIf",e.bMT(40,21,t.isLoading$)),e.R7$(6),e.Y8G("ngIf",t.hasSuccessMessage),e.R7$(),e.Y8G("ngIf",!1===e.bMT(47,23,t.isLoading$)&&t.listOfRegions.length>0),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(49,25,t.isLoading$)&&0===t.listOfRegions.length)}}let ei=(()=>{class i{regionsService;cdr;fb;messageService;messages=[];unsubscribe=[];listOfRegions=[];isEditMode=!1;isLoading$;selectedRegionId=null;visible=!1;regionForm;table;constructor(t,s,n,o){this.regionsService=t,this.cdr=s,this.fb=n,this.messageService=o,this.isLoading$=this.regionsService.isLoading$}ngOnInit(){this.initializeForm(),this.getRegionsList()}initializeForm(){this.regionForm=this.fb.group({regionEn:["",c.k0.required],regionAr:["",c.k0.required]})}showDialog(){this.visible=!0,this.selectedRegionId=null,this.isEditMode=!1,this.regionForm.reset()}editRegion(t){this.visible=!0,this.selectedRegionId=t.id,this.isEditMode=!0,this.regionForm.patchValue({regionEn:t.names.en,regionAr:t.names.ar})}getRegionsList(){const t=this.regionsService.getRegions().subscribe({next:s=>{this.listOfRegions=s,this.cdr.detectChanges()},error:s=>{this.messages=s.validationMessages||[{severity:"error",summary:"Error",detail:"An unexpected error occurred."}]}});this.unsubscribe.push(t)}applyFilter(t){const s=t.target.value.trim().toLowerCase();this.table.filterGlobal(s,"contains")}get hasSuccessMessage(){return this.messages.some(t=>"success"===t.severity)}get hasErrorMessage(){return this.messages.some(t=>"error"===t.severity)}get regionEn(){return this.regionForm.get("regionEn")}get regionAr(){return this.regionForm.get("regionAr")}submit(){if(this.messages=[],this.regionForm.invalid)return void this.regionForm.markAllAsTouched();const t=this.regionForm.value,s={name:{en:t.regionEn,ar:t.regionAr}};if(this.selectedRegionId){const n=this.regionsService.updateRegion(this.selectedRegionId,s).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:"Region updated successfully."}),this.getRegionsList(),this.visible=!1,this.regionForm.reset()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}else{const n=this.regionsService.createRegion(s).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:"Region created successfully."}),this.getRegionsList(),this.visible=!1,this.regionForm.reset()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}}deleteRegion(t){this.messages=[],b().fire({title:"Are you sure?",text:"Do you want to delete this region? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(s=>{if(s.isConfirmed){const n=this.regionsService.deleteRegion(t).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:"Region deleted successfully."}),this.getRegionsList()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}})}handleServerErrors(t){if(t.error&&t.error.errors){const s=t.error.errors,n={"name.en":"regionEn","name.ar":"regionAr"};for(const o in s)if(s.hasOwnProperty(o)){const a=s[o],l=n[o];if(l){const d=this.regionForm.get(l);d&&(d.setErrors({serverError:a[0]}),d.markAsTouched())}else this.messages.push({severity:"error",summary:"",detail:a.join(", ")})}}else this.messages.push({severity:"error",summary:"Error",detail:"An unexpected error occurred."})}onCancel(){this.visible=!1,this.regionForm.reset()}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}static \u0275fac=function(s){return new(s||i)(e.rXU(pe.F),e.rXU(e.gRc),e.rXU(c.ok),e.rXU(f.bg))};static \u0275cmp=e.VBU({type:i,selectors:[["app-regions"]],viewQuery:function(s,n){if(1&s&&e.GBs(Nn,5),2&s){let o;e.mGM(o=e.lsd())&&(n.table=o.first)}},decls:4,vars:6,consts:[["dt",""],["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],["id","kt_app_toolbar",1,"app-toolbar","pt-10","px-10","pb-0","mb-0"],["id","kt_app_toolbar_container",1,"app-container","container-fluid","d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","flex-column","justify-content-center","gap-1","me-3"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],[1,"fw-semibold","fs-7","my-0","text-muted"],[1,"d-flex","align-items-center","gap-3"],[1,"d-flex","align-items-center","position-relative"],[1,"pi","pi-search","position-absolute","ms-3",2,"font-size","14px","color","#6c757d"],["type","text","pInputText","","placeholder","Search",1,"form-control","ps-10",2,"width","240px","height","36px","border","1px solid #cbd5e1","border-radius","6px",3,"input"],[1,"btn","btn-sm","d-flex","align-items-center",2,"background","white","border","1px solid #cbd5e1","border-radius","6px","padding","6px 12px","height","36px","white-space","nowrap",3,"click"],[1,"ki-outline","ki-plus","fs-5",2,"color","#3b82f6"],[1,"ms-1",2,"font-size","13px","font-weight","500","color","#374151"],["appendTo","body",3,"visibleChange","header","modal","visible"],[3,"value","enableService","valueChange",4,"ngIf"],[1,"text-muted","mb-3","d-block"],[3,"formGroup"],[1,"mb-3","row"],["for","regionEn",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["pInputText","","id","regionEn","formControlName","regionEn","autocomplete","off",1,"form-control"],["for","regionAr",1,"col-sm-3","col-form-label"],["pInputText","","id","regionAr","formControlName","regionAr","autocomplete","off",1,"form-control"],[1,"d-flex","justify-content-end","gap-2"],["type","submit",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],["id","kt_app_content",1,"app-content","px-10","pb-10","pt-5","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-fluid"],[3,"valueChange","value","enableService"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],["responsiveLayout","scroll",3,"value","paginator","rows","loading","globalFilterFields","rowHover","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","35%"],[2,"width","30%"],[1,"text-gray-800","fw-semibold"],[1,"text-gray-700"],[1,"d-flex","justify-content-end","gap-1"],["pButton","","icon","pi pi-pencil","pTooltip","Edit","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"width","28px","height","28px","background","#3b82f6","color","white","border-radius","6px",3,"click"],["pButton","","icon","pi pi-trash","pTooltip","Delete","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"width","28px","height","28px","background","#ef4444","color","white","border-radius","6px",3,"click"],["colspan","3"],[1,"d-flex","flex-column","align-items-center","justify-content-center","py-8"],[1,"pi","pi-inbox","text-gray-400","mb-2",2,"font-size","48px"],[1,"text-gray-600","fw-semibold"],[1,"text-gray-500",2,"font-size","14px"]],template:function(s,n){1&s&&(e.DNE(0,Mn,1,3,"p-progressBar",1),e.nI1(1,"async"),e.DNE(2,Zn,50,28,"ng-container",2),e.nI1(3,"async")),2&s&&(e.Y8G("ngIf",e.bMT(1,2,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!e.bMT(3,4,n.isLoading$)))},dependencies:[u.bT,h.l,f.Ei,g._f,v.m,T.z,x.S,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,w.B,$.XI,u.Jj],styles:[".p-datatable{border:1px solid #cbd5e1;border-radius:.75rem;overflow:hidden}  .p-datatable .p-datatable-table{border:none}  .p-datatable .p-datatable-thead>tr>th{background:transparent;border-bottom:1px solid #cbd5e1;padding:.5rem 1rem;font-weight:700;color:#a1a5b7;font-size:.75rem;text-transform:uppercase;letter-spacing:.05em}  .p-datatable .p-datatable-tbody>tr>td{border-bottom:1px solid #cbd5e1;padding:.7rem 1rem;font-size:.875rem;color:#5e6278;font-weight:600}  .p-datatable .p-datatable-tbody>tr:hover{background-color:#f8f9fa}  .p-datatable .p-datatable-tbody>tr:last-child>td{border-bottom:none}"]})}return i})();var ti=p(8688),W=p(4133),X=p(185),m=p(1455),ge=p(4249),_e=p(2886),ni=p(3306),he=p(2423),fe=p(8807),ii=p(5434),si=p(6439),oi=p(1470),ri=p(2950),be=p(8757),Z=p(6627),ve=p(563),ee=p(9071),F=p(4420),O=p(1413);const ai=["container"],li=["resizeHelper"],ci=["reorderIndicatorUp"],di=["reorderIndicatorDown"],ui=["table"],pi=["scrollableView"],mi=["scrollableFrozenView"],gi=(i,r,t,s,n)=>({"p-treetable p-component":!0,"p-treetable-hoverable-rows":i,"p-treetable-auto-layout":r,"p-treetable-resizable":t,"p-treetable-resizable-fit":s,"p-treetable-flex-scrollable":n}),M=i=>({$implicit:i}),_i=(i,r)=>({left:i,width:r}),hi=i=>({width:i}),te=()=>({display:"none"});function fi(i,r){if(1&i&&e.nrm(0,"i"),2&i){const t=e.XpG(2);e.HbH("p-treetable-loading-icon pi-spin "+t.loadingIcon)}}function bi(i,r){1&i&&e.nrm(0,"SpinnerIcon",24),2&i&&e.Y8G("spin",!0)("styleClass","p-treetable-loading-icon")}function vi(i,r){}function Ci(i,r){1&i&&e.DNE(0,vi,0,0,"ng-template")}function yi(i,r){if(1&i&&(e.j41(0,"span",25),e.DNE(1,Ci,1,0,null,26),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.Y8G("ngTemplateOutlet",t.loadingIconTemplate)}}function Ti(i,r){if(1&i&&(e.qex(0),e.DNE(1,bi,1,2,"SpinnerIcon",22)(2,yi,2,1,"span",23),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.loadingIconTemplate),e.R7$(),e.Y8G("ngIf",t.loadingIconTemplate)}}function Fi(i,r){if(1&i&&(e.j41(0,"div",18)(1,"div",19),e.DNE(2,fi,1,2,"i",20)(3,Ti,3,2,"ng-container",21),e.k0s()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",t.loadingIcon),e.R7$(),e.Y8G("ngIf",!t.loadingIcon)}}function Ei(i,r){1&i&&e.eu8(0)}function ki(i,r){if(1&i&&(e.j41(0,"div",27),e.DNE(1,Ei,1,0,"ng-container",26),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",t.captionTemplate)}}function xi(i,r){1&i&&e.eu8(0)}function Ii(i,r){if(1&i&&e.DNE(0,xi,1,0,"ng-container",26),2&i){const t=e.XpG(3);e.Y8G("ngTemplateOutlet",t.paginatorFirstPageLinkIconTemplate)}}function Ri(i,r){1&i&&e.DNE(0,Ii,1,1,"ng-template",29)}function Si(i,r){1&i&&e.eu8(0)}function wi(i,r){if(1&i&&e.DNE(0,Si,1,0,"ng-container",26),2&i){const t=e.XpG(3);e.Y8G("ngTemplateOutlet",t.paginatorPreviousPageLinkIconTemplate)}}function ji(i,r){1&i&&e.DNE(0,wi,1,1,"ng-template",30)}function Ni(i,r){1&i&&e.eu8(0)}function Di(i,r){if(1&i&&e.DNE(0,Ni,1,0,"ng-container",26),2&i){const t=e.XpG(3);e.Y8G("ngTemplateOutlet",t.paginatorLastPageLinkIconTemplate)}}function Gi(i,r){1&i&&e.DNE(0,Di,1,1,"ng-template",31)}function qi(i,r){1&i&&e.eu8(0)}function $i(i,r){if(1&i&&e.DNE(0,qi,1,0,"ng-container",26),2&i){const t=e.XpG(3);e.Y8G("ngTemplateOutlet",t.paginatorNextPageLinkIconTemplate)}}function Mi(i,r){1&i&&e.DNE(0,$i,1,1,"ng-template",32)}function Li(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-paginator",28),e.bIt("onPageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onPageChange(n))}),e.DNE(1,Ri,1,0,null,21)(2,ji,1,0,null,21)(3,Gi,1,0,null,21)(4,Mi,1,0,null,21),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("rows",t.rows)("first",t.first)("totalRecords",t.totalRecords)("pageLinkSize",t.pageLinks)("alwaysShow",t.alwaysShowPaginator)("rowsPerPageOptions",t.rowsPerPageOptions)("templateLeft",t.paginatorLeftTemplate)("templateRight",t.paginatorRightTemplate)("dropdownAppendTo",t.paginatorDropdownAppendTo)("currentPageReportTemplate",t.currentPageReportTemplate)("showFirstLastIcon",t.showFirstLastIcon)("dropdownItemTemplate",t.paginatorDropdownItemTemplate)("showCurrentPageReport",t.showCurrentPageReport)("showJumpToPageDropdown",t.showJumpToPageDropdown)("showPageLinks",t.showPageLinks)("styleClass",t.paginatorStyleClass)("locale",t.paginatorLocale),e.R7$(),e.Y8G("ngIf",t.paginatorFirstPageLinkIconTemplate),e.R7$(),e.Y8G("ngIf",t.paginatorPreviousPageLinkIconTemplate),e.R7$(),e.Y8G("ngIf",t.paginatorLastPageLinkIconTemplate),e.R7$(),e.Y8G("ngIf",t.paginatorNextPageLinkIconTemplate)}}function Ai(i,r){1&i&&e.eu8(0)}function Vi(i,r){1&i&&e.eu8(0)}function Bi(i,r){1&i&&e.eu8(0)}function Yi(i,r){if(1&i&&(e.j41(0,"div",33)(1,"table",34,1),e.DNE(3,Ai,1,0,"ng-container",35),e.j41(4,"thead",36),e.DNE(5,Vi,1,0,"ng-container",35),e.k0s(),e.nrm(6,"tbody",37),e.j41(7,"tfoot",38),e.DNE(8,Bi,1,0,"ng-container",35),e.k0s()()()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngClass",t.tableStyleClass)("ngStyle",t.tableStyle),e.R7$(2),e.Y8G("ngTemplateOutlet",t.colGroupTemplate)("ngTemplateOutletContext",e.eq3(10,M,t.columns)),e.R7$(2),e.Y8G("ngTemplateOutlet",t.headerTemplate)("ngTemplateOutletContext",e.eq3(12,M,t.columns)),e.R7$(),e.Y8G("pTreeTableBody",t.columns)("pTreeTableBodyTemplate",t.bodyTemplate),e.R7$(2),e.Y8G("ngTemplateOutlet",t.footerTemplate)("ngTemplateOutletContext",e.eq3(14,M,t.columns))}}function Pi(i,r){if(1&i&&e.nrm(0,"div",42,3),2&i){const t=e.XpG(2);e.Y8G("ttScrollableView",t.frozenColumns)("frozen",!0)("ngStyle",e.eq3(4,hi,t.frozenWidth))("scrollHeight",t.scrollHeight)}}function Xi(i,r){if(1&i&&(e.j41(0,"div",39),e.DNE(1,Pi,2,6,"div",40),e.nrm(2,"div",41,2),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.frozenColumns||t.frozenBodyTemplate),e.R7$(),e.Y8G("ttScrollableView",t.columns)("frozen",!1)("scrollHeight",t.scrollHeight)("ngStyle",e.l_i(5,_i,t.frozenWidth,"calc(100% - "+t.frozenWidth+")"))}}function Oi(i,r){1&i&&e.eu8(0)}function zi(i,r){if(1&i&&e.DNE(0,Oi,1,0,"ng-container",26),2&i){const t=e.XpG(3);e.Y8G("ngTemplateOutlet",t.paginatorFirstPageLinkIconTemplate)}}function Hi(i,r){1&i&&e.DNE(0,zi,1,1,"ng-template",29)}function Ui(i,r){1&i&&e.eu8(0)}function Ki(i,r){if(1&i&&e.DNE(0,Ui,1,0,"ng-container",26),2&i){const t=e.XpG(3);e.Y8G("ngTemplateOutlet",t.paginatorPreviousPageLinkIconTemplate)}}function Ji(i,r){1&i&&e.DNE(0,Ki,1,1,"ng-template",30)}function Qi(i,r){1&i&&e.eu8(0)}function Wi(i,r){if(1&i&&e.DNE(0,Qi,1,0,"ng-container",26),2&i){const t=e.XpG(3);e.Y8G("ngTemplateOutlet",t.paginatorLastPageLinkIconTemplate)}}function Zi(i,r){1&i&&e.DNE(0,Wi,1,1,"ng-template",31)}function es(i,r){1&i&&e.eu8(0)}function ts(i,r){if(1&i&&e.DNE(0,es,1,0,"ng-container",26),2&i){const t=e.XpG(3);e.Y8G("ngTemplateOutlet",t.paginatorNextPageLinkIconTemplate)}}function ns(i,r){1&i&&e.DNE(0,ts,1,1,"ng-template",32)}function is(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-paginator",43),e.bIt("onPageChange",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.onPageChange(n))}),e.DNE(1,Hi,1,0,null,21)(2,Ji,1,0,null,21)(3,Zi,1,0,null,21)(4,ns,1,0,null,21),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("rows",t.rows)("first",t.first)("totalRecords",t.totalRecords)("pageLinkSize",t.pageLinks)("alwaysShow",t.alwaysShowPaginator)("rowsPerPageOptions",t.rowsPerPageOptions)("templateLeft",t.paginatorLeftTemplate)("templateRight",t.paginatorRightTemplate)("dropdownAppendTo",t.paginatorDropdownAppendTo)("currentPageReportTemplate",t.currentPageReportTemplate)("showFirstLastIcon",t.showFirstLastIcon)("dropdownItemTemplate",t.paginatorDropdownItemTemplate)("showCurrentPageReport",t.showCurrentPageReport)("showJumpToPageDropdown",t.showJumpToPageDropdown)("showPageLinks",t.showPageLinks)("styleClass",t.paginatorStyleClass)("locale",t.paginatorLocale),e.R7$(),e.Y8G("ngIf",t.paginatorFirstPageLinkIconTemplate),e.R7$(),e.Y8G("ngIf",t.paginatorPreviousPageLinkIconTemplate),e.R7$(),e.Y8G("ngIf",t.paginatorLastPageLinkIconTemplate),e.R7$(),e.Y8G("ngIf",t.paginatorNextPageLinkIconTemplate)}}function ss(i,r){1&i&&e.eu8(0)}function os(i,r){if(1&i&&(e.j41(0,"div",44),e.DNE(1,ss,1,0,"ng-container",26),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",t.summaryTemplate)}}function rs(i,r){1&i&&e.nrm(0,"div",45,4),2&i&&e.Y8G("ngStyle",e.lJ4(1,te))}function as(i,r){1&i&&e.nrm(0,"ArrowDownIcon")}function ls(i,r){}function cs(i,r){1&i&&e.DNE(0,ls,0,0,"ng-template")}function ds(i,r){if(1&i&&(e.j41(0,"span",46,5),e.DNE(2,as,1,0,"ArrowDownIcon",21)(3,cs,1,0,null,26),e.k0s()),2&i){const t=e.XpG();e.Y8G("ngStyle",e.lJ4(3,te)),e.R7$(2),e.Y8G("ngIf",!t.reorderIndicatorUpIconTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",t.reorderIndicatorUpIconTemplate)}}function us(i,r){1&i&&e.nrm(0,"ArrowUpIcon")}function ps(i,r){}function ms(i,r){1&i&&e.DNE(0,ps,0,0,"ng-template")}function gs(i,r){if(1&i&&(e.j41(0,"span",47,6),e.DNE(2,us,1,0,"ArrowUpIcon",21)(3,ms,1,0,null,26),e.k0s()),2&i){const t=e.XpG();e.Y8G("ngStyle",e.lJ4(3,te)),e.R7$(2),e.Y8G("ngIf",!t.reorderIndicatorDownIconTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",t.reorderIndicatorDownIconTemplate)}}const _s=["pTreeTableBody",""],hs=(i,r,t,s)=>({$implicit:i,node:r,rowData:t,columns:s}),fs=(i,r)=>({$implicit:i,frozen:r});function bs(i,r){1&i&&e.eu8(0)}function vs(i,r){if(1&i&&(e.qex(0),e.DNE(1,bs,1,0,"ng-container",2),e.bVm()),2&i){const t=e.XpG().$implicit,s=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",s.template)("ngTemplateOutletContext",e.ziG(2,hs,t,t.node,t.node.data,s.columns))}}function Cs(i,r){1&i&&e.DNE(0,vs,2,7,"ng-container",1),2&i&&e.Y8G("ngIf",r.$implicit.visible)}function ys(i,r){1&i&&e.eu8(0)}function Ts(i,r){if(1&i&&(e.qex(0),e.DNE(1,ys,1,0,"ng-container",2),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",t.tt.emptyMessageTemplate)("ngTemplateOutletContext",e.l_i(2,fs,t.columns,t.frozen))}}const Fs=["scrollHeader"],Es=["scrollHeaderBox"],ks=["scrollBody"],xs=["scrollTable"],Is=["loadingTable"],Rs=["scrollFooter"],Ss=["scrollFooterBox"],ws=["scrollableAligner"],js=["scroller"],Ns=["ttScrollableView",""],Ds=i=>({height:i}),Ce=(i,r)=>({$implicit:i,options:r}),Gs=i=>({options:i}),qs=(i,r)=>({"max-height":i,"overflow-y":r}),$s=()=>({}),Ms=()=>({"background-color":"transparent"});function Ls(i,r){1&i&&e.eu8(0)}function As(i,r){1&i&&e.eu8(0)}function Vs(i,r){1&i&&e.eu8(0)}function Bs(i,r){if(1&i&&e.DNE(0,Vs,1,0,"ng-container",12),2&i){const t=r.$implicit,s=r.options;e.XpG(2);const n=e.sdS(11);e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.l_i(2,Ce,t,s))}}function Ys(i,r){1&i&&e.eu8(0)}function Ps(i,r){if(1&i&&e.DNE(0,Ys,1,0,"ng-container",12),2&i){const t=r.options,s=e.XpG(3);e.Y8G("ngTemplateOutlet",s.loaderTemplate)("ngTemplateOutletContext",e.eq3(2,Gs,t))}}function Xs(i,r){1&i&&(e.qex(0),e.DNE(1,Ps,1,4,"ng-template",19),e.bVm())}function Os(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-scroller",17,3),e.bIt("onLazyLoad",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.tt.onLazyItemLoad(n))}),e.DNE(2,Bs,1,5,"ng-template",18)(3,Xs,2,0,"ng-container",15),e.k0s()}if(2&i){const t=e.XpG();e.Aen(e.eq3(8,Ds,"flex"!==t.tt.scrollHeight?t.tt.scrollHeight:void 0)),e.Y8G("items",t.tt.serializedValue)("scrollHeight","flex"!==t.scrollHeight?void 0:"100%")("itemSize",t.tt.virtualScrollItemSize||t.tt._virtualRowHeight)("lazy",t.tt.lazy)("options",t.tt.virtualScrollOptions),e.R7$(3),e.Y8G("ngIf",t.loaderTemplate)}}function zs(i,r){1&i&&e.eu8(0)}function Hs(i,r){if(1&i&&(e.qex(0),e.j41(1,"div",20,4),e.DNE(3,zs,1,0,"ng-container",12),e.k0s(),e.bVm()),2&i){const t=e.XpG(),s=e.sdS(11);e.R7$(),e.Y8G("ngStyle",e.l_i(3,qs,"flex"!==t.tt.scrollHeight?t.scrollHeight:void 0,!t.frozen&&t.tt.scrollHeight?"scroll":void 0)),e.R7$(2),e.Y8G("ngTemplateOutlet",s)("ngTemplateOutletContext",e.l_i(7,Ce,t.serializedValue,e.lJ4(6,$s)))}}function Us(i,r){1&i&&e.eu8(0)}function Ks(i,r){1&i&&e.nrm(0,"div",24,6),2&i&&e.Y8G("ngStyle",e.lJ4(1,Ms))}function Js(i,r){if(1&i&&(e.j41(0,"table",21,5),e.DNE(2,Us,1,0,"ng-container",12),e.nrm(3,"tbody",22),e.k0s(),e.DNE(4,Ks,2,2,"div",23)),2&i){const t=r.$implicit,s=r.options,n=e.XpG();e.HbH(n.tt.tableStyleClass),e.Y8G("ngClass",s.contentStyleClass)("ngStyle",n.getMergedTableStyles(s.contentStyle)),e.R7$(2),e.Y8G("ngTemplateOutlet",n.frozen&&n.tt.frozenColGroupTemplate||n.tt.colGroupTemplate)("ngTemplateOutletContext",e.eq3(11,M,n.columns)),e.R7$(),e.Y8G("pTreeTableBody",n.columns)("pTreeTableBodyTemplate",n.frozen&&n.tt.frozenBodyTemplate||n.tt.bodyTemplate)("serializedNodes",t)("frozen",n.frozen),e.R7$(),e.Y8G("ngIf",n.frozen)}}function Qs(i,r){1&i&&e.eu8(0)}function Ws(i,r){1&i&&e.eu8(0)}function Zs(i,r){if(1&i&&(e.j41(0,"div",25,7)(2,"div",26,8)(4,"table",27),e.DNE(5,Qs,1,0,"ng-container",12),e.j41(6,"tfoot",28),e.DNE(7,Ws,1,0,"ng-container",12),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(4),e.Y8G("ngClass",t.tt.tableStyleClass)("ngStyle",t.tt.tableStyle),e.R7$(),e.Y8G("ngTemplateOutlet",t.frozen&&t.tt.frozenColGroupTemplate||t.tt.colGroupTemplate)("ngTemplateOutletContext",e.eq3(6,M,t.columns)),e.R7$(2),e.Y8G("ngTemplateOutlet",t.frozen&&t.tt.frozenFooterTemplate||t.tt.footerTemplate)("ngTemplateOutletContext",e.eq3(8,M,t.columns))}}const ho=(i,r)=>({visibility:i,"margin-left":r});function fo(i,r){1&i&&e.nrm(0,"ChevronDownIcon"),2&i&&e.BMQ("aria-hidden",!0)}function bo(i,r){1&i&&e.nrm(0,"ChevronRightIcon"),2&i&&e.BMQ("aria-hidden",!0)}function vo(i,r){if(1&i&&(e.qex(0),e.DNE(1,fo,1,1,"ChevronDownIcon",1)(2,bo,1,1,"ChevronRightIcon",1),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.rowNode.node.expanded),e.R7$(),e.Y8G("ngIf",!t.rowNode.node.expanded)}}function Co(i,r){}function yo(i,r){1&i&&e.DNE(0,Co,0,0,"ng-template")}let ne=(()=>{class i{sortSource=new O.B;selectionSource=new O.B;contextMenuSource=new O.B;uiUpdateSource=new O.B;totalRecordsSource=new O.B;sortSource$=this.sortSource.asObservable();selectionSource$=this.selectionSource.asObservable();contextMenuSource$=this.contextMenuSource.asObservable();uiUpdateSource$=this.uiUpdateSource.asObservable();totalRecordsSource$=this.totalRecordsSource.asObservable();onSort(t){this.sortSource.next(t)}onSelectionChange(){this.selectionSource.next(null)}onContextMenu(t){this.contextMenuSource.next(t)}onUIUpdate(t){this.uiUpdateSource.next(t)}onTotalRecordsChange(t){this.totalRecordsSource.next(t)}static \u0275fac=function(s){return new(s||i)};static \u0275prov=e.jDH({token:i,factory:i.\u0275fac})}return i})(),P=(()=>{class i{document;renderer;el;cd;zone;tableService;filterService;config;columns;style;styleClass;tableStyle;tableStyleClass;autoLayout;lazy=!1;lazyLoadOnInit=!0;paginator;rows;first=0;pageLinks=5;rowsPerPageOptions;alwaysShowPaginator=!0;paginatorPosition="bottom";paginatorStyleClass;paginatorDropdownAppendTo;currentPageReportTemplate="{currentPage} of {totalPages}";showCurrentPageReport;showJumpToPageDropdown;showFirstLastIcon=!0;showPageLinks=!0;defaultSortOrder=1;sortMode="single";resetPageOnSort=!0;customSort;selectionMode;contextMenuSelection;contextMenuSelectionMode="separate";dataKey;metaKeySelection=!1;compareSelectionBy="deepEquals";rowHover;loading;loadingIcon;showLoader=!0;scrollable;scrollHeight;virtualScroll;virtualScrollItemSize;virtualScrollOptions;virtualScrollDelay=150;frozenWidth;frozenColumns;resizableColumns;columnResizeMode="fit";reorderableColumns;contextMenu;rowTrackBy=(t,s)=>s;filters={};globalFilterFields;filterDelay=300;filterMode="lenient";filterLocale;paginatorLocale;get totalRecords(){return this._totalRecords}set totalRecords(t){this._totalRecords=t,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(t){this._sortField=t}get sortOrder(){return this._sortOrder}set sortOrder(t){this._sortOrder=t}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(t){this._multiSortMeta=t}get selection(){return this._selection}set selection(t){this._selection=t}get value(){return this._value}set value(t){this._value=t}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(t){this._virtualRowHeight=t,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}get selectionKeys(){return this._selectionKeys}set selectionKeys(t){this._selectionKeys=t,this.selectionKeysChange.emit(this._selectionKeys)}selectionChange=new e.bkB;contextMenuSelectionChange=new e.bkB;onFilter=new e.bkB;onNodeExpand=new e.bkB;onNodeCollapse=new e.bkB;onPage=new e.bkB;onSort=new e.bkB;onLazyLoad=new e.bkB;sortFunction=new e.bkB;onColResize=new e.bkB;onColReorder=new e.bkB;onNodeSelect=new e.bkB;onNodeUnselect=new e.bkB;onContextMenuSelect=new e.bkB;onHeaderCheckboxToggle=new e.bkB;onEditInit=new e.bkB;onEditComplete=new e.bkB;onEditCancel=new e.bkB;selectionKeysChange=new e.bkB;containerViewChild;resizeHelperViewChild;reorderIndicatorUpViewChild;reorderIndicatorDownViewChild;tableViewChild;scrollableViewChild;scrollableFrozenViewChild;templates;_value=[];_virtualRowHeight=28;_selectionKeys;serializedValue;_totalRecords=0;_multiSortMeta;_sortField;_sortOrder=1;filteredNodes;filterTimeout;colGroupTemplate;captionTemplate;headerTemplate;bodyTemplate;footerTemplate;summaryTemplate;emptyMessageTemplate;paginatorLeftTemplate;paginatorRightTemplate;paginatorDropdownItemTemplate;frozenHeaderTemplate;frozenBodyTemplate;frozenFooterTemplate;frozenColGroupTemplate;loadingIconTemplate;reorderIndicatorUpIconTemplate;reorderIndicatorDownIconTemplate;sortIconTemplate;checkboxIconTemplate;headerCheckboxIconTemplate;togglerIconTemplate;paginatorFirstPageLinkIconTemplate;paginatorLastPageLinkIconTemplate;paginatorPreviousPageLinkIconTemplate;paginatorNextPageLinkIconTemplate;lastResizerHelperX;reorderIconWidth;reorderIconHeight;draggedColumn;dropPosition;preventSelectionSetterPropagation;_selection;selectedKeys={};rowTouched;editingCell;editingCellData;editingCellField;editingCellClick;documentEditListener;initialized;toggleRowIndex;ngOnInit(){this.lazy&&this.lazyLoadOnInit&&!this.virtualScroll&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"caption":this.captionTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"body":this.bodyTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"summary":this.summaryTemplate=t.template;break;case"colgroup":this.colGroupTemplate=t.template;break;case"emptymessage":this.emptyMessageTemplate=t.template;break;case"paginatorleft":this.paginatorLeftTemplate=t.template;break;case"paginatorright":this.paginatorRightTemplate=t.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=t.template;break;case"frozenheader":this.frozenHeaderTemplate=t.template;break;case"frozenbody":this.frozenBodyTemplate=t.template;break;case"frozenfooter":this.frozenFooterTemplate=t.template;break;case"frozencolgroup":this.frozenColGroupTemplate=t.template;break;case"loadingicon":this.loadingIconTemplate=t.template;break;case"reorderindicatorupicon":this.reorderIndicatorUpIconTemplate=t.template;break;case"reorderindicatordownicon":this.reorderIndicatorDownIconTemplate=t.template;break;case"sorticon":this.sortIconTemplate=t.template;break;case"checkboxicon":this.checkboxIconTemplate=t.template;break;case"headercheckboxicon":this.headerCheckboxIconTemplate=t.template;break;case"togglericon":this.togglerIconTemplate=t.template;break;case"paginatorfirstpagelinkicon":this.paginatorFirstPageLinkIconTemplate=t.template;break;case"paginatorlastpagelinkicon":this.paginatorLastPageLinkIconTemplate=t.template;break;case"paginatorpreviouspagelinkicon":this.paginatorPreviousPageLinkIconTemplate=t.template;break;case"paginatornextpagelinkicon":this.paginatorNextPageLinkIconTemplate=t.template}})}constructor(t,s,n,o,a,l,d,_){this.document=t,this.renderer=s,this.el=n,this.cd=o,this.zone=a,this.tableService=l,this.filterService=d,this.config=_}ngOnChanges(t){t.value&&(this._value=t.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&this.sortField?this.sortSingle():"multiple"==this.sortMode&&this.multiSortMeta?this.sortMultiple():this.hasFilter()&&this._filter()),this.updateSerializedValue(),this.tableService.onUIUpdate(this.value)),t.sortField&&(this._sortField=t.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),t.sortOrder&&(this._sortOrder=t.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),t.multiSortMeta&&(this._multiSortMeta=t.multiSortMeta.currentValue,"multiple"===this.sortMode&&this.sortMultiple()),t.selection&&(this._selection=t.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateselectedKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1)}updateSerializedValue(){this.serializedValue=[],this.paginator?this.serializePageNodes():this.serializeNodes(null,this.filteredNodes||this.value,0,!0)}serializeNodes(t,s,n,o){if(s&&s.length)for(let a of s){a.parent=t;const l={node:a,parent:t,level:n,visible:o&&(!t||t.expanded)};this.serializedValue.push(l),l.visible&&a.expanded&&this.serializeNodes(a,a.children,n+1,l.visible)}}serializePageNodes(){let t=this.filteredNodes||this.value;if(this.serializedValue=[],t&&t.length){const s=this.lazy?0:this.first;for(let n=s;n<s+this.rows;n++){let o=t[n];o&&(this.serializedValue.push({node:o,parent:null,level:0,visible:!0}),this.serializeNodes(o,o.children,1,!0))}}}updateselectedKeys(){if(this.dataKey&&this._selection)if(this.selectedKeys={},Array.isArray(this._selection))for(let t of this._selection)this.selectedKeys[String(F.BF.resolveFieldData(t.data,this.dataKey))]=1;else this.selectedKeys[String(F.BF.resolveFieldData(this._selection.data,this.dataKey))]=1}onPageChange(t){this.first=t.first,this.rows=t.rows,this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.serializePageNodes(),this.onPage.emit({first:this.first,rows:this.rows}),this.tableService.onUIUpdate(this.value),this.scrollable&&this.resetScrollTop()}sort(t){let s=t.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===t.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=t.field,this.sortSingle(),this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()),"multiple"===this.sortMode){let n=s.metaKey||s.ctrlKey,o=this.getSortMeta(t.field);o?n?o.order=-1*o.order:(this._multiSortMeta=[{field:t.field,order:-1*o.order}],this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()):((!n||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()),this.multiSortMeta.push({field:t.field,order:this.defaultSortOrder})),this.sortMultiple()}}sortSingle(){if(this.sortField&&this.sortOrder){this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.sortNodes(this.value),this.hasFilter()&&this._filter());let t={field:this.sortField,order:this.sortOrder};this.onSort.emit(t),this.tableService.onSort(t),this.updateSerializedValue()}}sortNodes(t){if(t&&0!==t.length){this.customSort?this.sortFunction.emit({data:t,mode:this.sortMode,field:this.sortField,order:this.sortOrder}):t.sort((s,n)=>{let o=F.BF.resolveFieldData(s.data,this.sortField),a=F.BF.resolveFieldData(n.data,this.sortField),l=null;return l=null==o&&null!=a?-1:null!=o&&null==a?1:null==o&&null==a?0:"string"==typeof o&&"string"==typeof a?o.localeCompare(a,void 0,{numeric:!0}):o<a?-1:o>a?1:0,this.sortOrder*l});for(let s of t)this.sortNodes(s.children)}}sortMultiple(){this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.sortMultipleNodes(this.value),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.updateSerializedValue(),this.tableService.onSort(this.multiSortMeta))}sortMultipleNodes(t){if(t&&0!==t.length){this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):t.sort((s,n)=>this.multisortField(s,n,this.multiSortMeta,0));for(let s of t)this.sortMultipleNodes(s.children)}}multisortField(t,s,n,o){if(F.BF.isEmpty(this.multiSortMeta)||F.BF.isEmpty(n[o]))return 0;let a=F.BF.resolveFieldData(t.data,n[o].field),l=F.BF.resolveFieldData(s.data,n[o].field),d=null;if(null==a&&null!=l?d=-1:null!=a&&null==l?d=1:null==a&&null==l&&(d=0),"string"==typeof a||a instanceof String){if(a.localeCompare&&a!=l)return n[o].order*a.localeCompare(l,void 0,{numeric:!0})}else d=a<l?-1:1;return a==l?n.length-1>o?this.multisortField(t,s,n,o+1):0:n[o].order*d}getSortMeta(t){if(this.multiSortMeta&&this.multiSortMeta.length)for(let s=0;s<this.multiSortMeta.length;s++)if(this.multiSortMeta[s].field===t)return this.multiSortMeta[s];return null}isSorted(t){if("single"===this.sortMode)return this.sortField&&this.sortField===t;if("multiple"===this.sortMode){let s=!1;if(this.multiSortMeta)for(let n=0;n<this.multiSortMeta.length;n++)if(this.multiSortMeta[n].field==t){s=!0;break}return s}}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}onLazyItemLoad(t){this.onLazyLoad.emit({...this.createLazyLoadMetadata(),...t,rows:t.last-t.first})}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(t){this.scrollableViewChild&&this.scrollableViewChild.scrollToVirtualIndex(t),this.scrollableFrozenViewChild&&this.scrollableViewChild.scrollToVirtualIndex(t)}scrollTo(t){this.scrollableViewChild&&this.scrollableViewChild.scrollTo(t),this.scrollableFrozenViewChild&&this.scrollableViewChild.scrollTo(t)}isEmpty(){let t=this.filteredNodes||this.value;return null==t||0==t.length}getBlockableElement(){return this.el.nativeElement.children[0]}onColumnResizeBegin(t){let s=m.D.getOffset(this.containerViewChild?.nativeElement).left;this.lastResizerHelperX=t.pageX-s+this.containerViewChild?.nativeElement.scrollLeft,t.preventDefault()}onColumnResize(t){let s=m.D.getOffset(this.containerViewChild?.nativeElement).left;m.D.addClass(this.containerViewChild?.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild?.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=t.pageX-s+this.containerViewChild?.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(t,s){let n=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,o=s.offsetWidth,a=o+n;if(o+n>parseInt(s.style.minWidth||15)){if("fit"===this.columnResizeMode){let d=s.nextElementSibling;for(;!d.offsetParent;)d=d.nextElementSibling;if(d){let _=d.offsetWidth-n;if(a>15&&_>parseInt(d.style.minWidth||15))if(this.scrollable){let E=this.findParentScrollableView(s),I=m.D.findSingle(E,".p-treetable-scrollable-body table")||m.D.findSingle(E,".p-scroller-viewport table"),B=m.D.findSingle(E,"table.p-treetable-scrollable-header-table"),Y=m.D.findSingle(E,"table.p-treetable-scrollable-footer-table"),L=m.D.index(s);this.resizeColGroup(B,L,a,_),this.resizeColGroup(I,L,a,_),this.resizeColGroup(Y,L,a,_)}else s.style.width=a+"px",d&&(d.style.width=_+"px")}}else if("expand"===this.columnResizeMode)if(this.scrollable){let d=this.findParentScrollableView(s),_=m.D.findSingle(d,".p-treetable-scrollable-body")||m.D.findSingle(d,".p-scroller-viewport"),C=m.D.findSingle(d,".p-treetable-scrollable-header"),E=m.D.findSingle(d,".p-treetable-scrollable-footer"),I=m.D.findSingle(d,".p-treetable-scrollable-body table")||m.D.findSingle(d,".p-scroller-viewport table"),B=m.D.findSingle(d,"table.p-treetable-scrollable-header-table"),Y=m.D.findSingle(d,"table.p-treetable-scrollable-footer-table"),L=m.D.index(s);const K=s?I.offsetWidth+n:a,J=s?B.offsetWidth+n:a,de=this.containerViewChild?.nativeElement.offsetWidth>=K;let ue=(Ve,Be,Ye,xu)=>{Ve&&Be&&(Ve.style.width=xu?Ye+m.D.calculateScrollbarWidth(_)+"px":"auto",Be.style.width=Ye+"px")};ue(_,I,K,de),ue(C,B,J,de),ue(E,Y,J,de),this.resizeColGroup(B,L,a,null),this.resizeColGroup(I,L,a,null),this.resizeColGroup(Y,L,a,null)}else{this.tableViewChild.nativeElement.style.width=this.tableViewChild?.nativeElement.offsetWidth+n+"px",s.style.width=a+"px";let d=this.tableViewChild?.nativeElement.style.width;this.containerViewChild.nativeElement.style.width=d+"px"}this.onColResize.emit({element:s,delta:n})}this.resizeHelperViewChild.nativeElement.style.display="none",m.D.removeClass(this.containerViewChild?.nativeElement,"p-unselectable-text")}findParentScrollableView(t){if(t){let s=t.parentElement;for(;s&&!m.D.hasClass(s,"p-treetable-scrollable-view");)s=s.parentElement;return s}return null}resizeColGroup(t,s,n,o){if(t){let a="COLGROUP"===t.children[0].nodeName?t.children[0]:null;if(!a)throw"Scrollable tables require a colgroup to support resizable columns";{let l=a.children[s],d=l.nextElementSibling;l.style.width=n+"px",d&&o&&(d.style.width=o+"px")}}}onColumnDragStart(t,s){this.reorderIconWidth=m.D.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild?.nativeElement),this.reorderIconHeight=m.D.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild?.nativeElement),this.draggedColumn=s,t.dataTransfer.setData("text","b")}onColumnDragEnter(t,s){if(this.reorderableColumns&&this.draggedColumn&&s){t.preventDefault();let n=m.D.getOffset(this.containerViewChild?.nativeElement),o=m.D.getOffset(s);if(this.draggedColumn!=s){let a=o.left-n.left,d=o.left+s.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=o.top-n.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=o.top-n.top+s.offsetHeight+"px",t.pageX>d?(this.reorderIndicatorUpViewChild.nativeElement.style.left=a+s.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=a+s.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=a-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=a-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block"}else t.dataTransfer.dropEffect="none"}}onColumnDragLeave(t){this.reorderableColumns&&this.draggedColumn&&(t.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(t,s){if(t.preventDefault(),this.draggedColumn){let n=m.D.indexWithinGroup(this.draggedColumn,"ttreorderablecolumn"),o=m.D.indexWithinGroup(s,"ttreorderablecolumn"),a=n!=o;a&&(o-n==1&&-1===this.dropPosition||n-o==1&&1===this.dropPosition)&&(a=!1),a&&o<n&&1===this.dropPosition&&(o+=1),a&&o>n&&-1===this.dropPosition&&(o-=1),a&&(F.BF.reorderArray(this.columns,n,o),this.onColReorder.emit({dragIndex:n,dropIndex:o,columns:this.columns})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}handleRowClick(t){let s=t.originalEvent.target.nodeName;if("INPUT"!=s&&"BUTTON"!=s&&"A"!=s&&!m.D.hasClass(t.originalEvent.target,"p-clickable")){if(this.selectionMode){this.preventSelectionSetterPropagation=!0;let n=t.rowNode,o=this.isSelected(n.node),a=!this.rowTouched&&this.metaKeySelection,l=this.dataKey?String(F.BF.resolveFieldData(n.node.data,this.dataKey)):null;if(a){let d=t.originalEvent,_=d.metaKey||d.ctrlKey;if(o&&_){if(this.isSingleSelectionMode())this._selection=null,this.selectedKeys={},this.selectionChange.emit(null);else{let C=this.findIndexInSelection(n.node);this._selection=this.selection.filter((E,I)=>I!=C),this.selectionChange.emit(this.selection),l&&delete this.selectedKeys[l]}this.onNodeUnselect.emit({originalEvent:t.originalEvent,node:n.node,type:"row"})}else this.isSingleSelectionMode()?(this._selection=n.node,this.selectionChange.emit(n.node),l&&(this.selectedKeys={},this.selectedKeys[l]=1)):this.isMultipleSelectionMode()&&(_?this._selection=this.selection||[]:(this._selection=[],this.selectedKeys={}),this._selection=[...this.selection,n.node],this.selectionChange.emit(this.selection),l&&(this.selectedKeys[l]=1)),this.onNodeSelect.emit({originalEvent:t.originalEvent,node:n.node,type:"row",index:t.rowIndex})}else if("single"===this.selectionMode)o?(this._selection=null,this.selectedKeys={},this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:t.originalEvent,node:n.node,type:"row"})):(this._selection=n.node,this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:t.originalEvent,node:n.node,type:"row",index:t.rowIndex}),l&&(this.selectedKeys={},this.selectedKeys[l]=1));else if("multiple"===this.selectionMode)if(o){let d=this.findIndexInSelection(n.node);this._selection=this.selection.filter((_,C)=>C!=d),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:t.originalEvent,node:n.node,type:"row"}),l&&delete this.selectedKeys[l]}else this._selection=this.selection?[...this.selection,n.node]:[n.node],this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:t.originalEvent,node:n.node,type:"row",index:t.rowIndex}),l&&(this.selectedKeys[l]=1);this.tableService.onSelectionChange()}this.rowTouched=!1}}handleRowTouchEnd(t){this.rowTouched=!0}handleRowRightClick(t){if(this.contextMenu){const s=t.rowNode.node;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=s,this.contextMenuSelectionChange.emit(s),this.onContextMenuSelect.emit({originalEvent:t.originalEvent,node:s}),this.contextMenu.show(t.originalEvent),this.tableService.onContextMenu(s);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let n=this.isSelected(s),o=this.dataKey?String(F.BF.resolveFieldData(s.data,this.dataKey)):null;n||(this.isSingleSelectionMode()?(this.selection=s,this.selectionChange.emit(s)):this.isMultipleSelectionMode()&&(this.selection=[s],this.selectionChange.emit(this.selection)),o&&(this.selectedKeys[o]=1)),this.contextMenu.show(t.originalEvent),this.onContextMenuSelect.emit({originalEvent:t.originalEvent,node:s})}}}toggleNodeWithCheckbox(t){this.selection=this.selection||[],this.preventSelectionSetterPropagation=!0;let s=t.rowNode.node;this.isSelected(s)?(this.propagateSelectionDown(s,!1),t.rowNode.parent&&this.propagateSelectionUp(s.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:t,node:s})):(this.propagateSelectionDown(s,!0),t.rowNode.parent&&this.propagateSelectionUp(s.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:t,node:s})),this.tableService.onSelectionChange()}toggleNodesWithCheckbox(t,s){let n=this.filteredNodes||this.value;this._selection=s&&n?n.slice():[],this.toggleAll(s),s||(this._selection=[],this.selectedKeys={}),this.preventSelectionSetterPropagation=!0,this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:t,checked:s})}toggleAll(t){let s=this.filteredNodes||this.value;if(this.selectionKeys){if(s&&s.length){for(let n of s)this.propagateDown(n,t);this.selectionKeysChange.emit(this.selectionKeys)}}else if(s&&s.length)for(let n of s)this.propagateSelectionDown(n,t)}propagateSelectionUp(t,s){if(t.children&&t.children.length){let o=0,a=!1,l=this.dataKey?String(F.BF.resolveFieldData(t.data,this.dataKey)):null;for(let d of t.children)this.isSelected(d)?o++:d.partialSelected&&(a=!0);if(s&&o==t.children.length)this._selection=[...this.selection||[],t],t.partialSelected=!1,l&&(this.selectedKeys[l]=1);else{if(!s){let d=this.findIndexInSelection(t);d>=0&&(this._selection=this.selection.filter((_,C)=>C!=d),l&&delete this.selectedKeys[l])}t.partialSelected=!!(a||o>0&&o!=t.children.length)}}let n=t.parent;t.checked=s,n&&this.propagateSelectionUp(n,s)}propagateSelectionDown(t,s){let n=this.findIndexInSelection(t),o=this.dataKey?String(F.BF.resolveFieldData(t.data,this.dataKey)):null;if(s&&-1==n?(this._selection=[...this.selection||[],t],o&&(this.selectedKeys[o]=1)):!s&&n>-1&&(this._selection=this.selection.filter((a,l)=>l!=n),o&&delete this.selectedKeys[o]),t.partialSelected=!1,t.checked=s,t.children&&t.children.length)for(let a of t.children)this.propagateSelectionDown(a,s)}isSelected(t){return!(!t||!this.selection)&&(this.dataKey?t.hasOwnProperty("checked")?t.checked:void 0!==this.selectedKeys[F.BF.resolveFieldData(t.data,this.dataKey)]:Array.isArray(this.selection)?this.findIndexInSelection(t)>-1:this.equals(t,this.selection))}isNodeSelected(t){return!(!this.selectionMode||!this.selectionKeys)&&!0===this.selectionKeys[this.nodeKey(t)]?.checked}isNodePartialSelected(t){return!(!this.selectionMode||!this.selectionKeys)&&!0===this.selectionKeys[this.nodeKey(t)]?.partialChecked}nodeKey(t){return F.BF.resolveFieldData(t,this.dataKey)||F.BF.resolveFieldData(t?.data,this.dataKey)}toggleCheckbox(t){let{rowNode:s,check:n,originalEvent:o}=t,a=s.node;this.selectionKeys?(this.propagateDown(a,n),a.parent&&this.propagateUp(a.parent,n),this.selectionKeysChange.emit(this.selectionKeys)):this.toggleNodeWithCheckbox({originalEvent:o,rowNode:s}),this.tableService.onSelectionChange()}propagateDown(t,s){if(s?this.selectionKeys[this.nodeKey(t)]={checked:!0,partialChecked:!1}:delete this.selectionKeys[this.nodeKey(t)],t.children&&t.children.length)for(let n of t.children)this.propagateDown(n,s)}propagateUp(t,s){let n=0,o=!1;for(let l of t.children)this.selectionKeys[this.nodeKey(l)]&&this.selectionKeys[this.nodeKey(l)].checked?n++:this.selectionKeys[this.nodeKey(l)]&&this.selectionKeys[this.nodeKey(l)].partialChecked&&(o=!0);s&&n===t.children.length?this.selectionKeys[this.nodeKey(t)]={checked:!0,partialChecked:!1}:(s||delete this.selectionKeys[this.nodeKey(t)],this.selectionKeys[this.nodeKey(t)]=o||n>0&&n!==t.children.length?{checked:!1,partialChecked:!0}:{checked:!1,partialChecked:!1});let a=t.parent;a&&this.propagateUp(a,s)}findIndexInSelection(t){let s=-1;if(this.selection&&this.selection.length)for(let n=0;n<this.selection.length;n++)if(this.equals(t,this.selection[n])){s=n;break}return s}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}equals(t,s){return"equals"===this.compareSelectionBy?F.BF.equals(t,s):F.BF.equals(t.data,s.data,this.dataKey)}filter(t,s,n){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(t)?this.filters[s]&&delete this.filters[s]:this.filters[s]={value:t,matchMode:n},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay)}filterGlobal(t,s){this.filter(t,"global",s)}isFilterBlank(t){return null==t||!!("string"==typeof t&&0==t.trim().length||Array.isArray(t)&&0==t.length)}_filter(){if(this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let s;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");s=this.globalFilterFields||this.columns}this.filteredNodes=[];const n="strict"===this.filterMode;let o=!1;for(let a of this.value){let C,l={...a},d=!0,_=!1;for(let I in this.filters)if(this.filters.hasOwnProperty(I)&&"global"!==I){let B=this.filters[I];if(C={filterField:I,filterValue:B.value,filterConstraint:this.filterService.filters[B.matchMode||"startsWith"],isStrictMode:n},(n&&!(this.findFilteredNodes(l,C)||this.isFilterMatched(l,C))||!n&&!(this.isFilterMatched(l,C)||this.findFilteredNodes(l,C)))&&(d=!1),!d)break}if(this.filters.global&&!_&&s){let B,I={...l};C={filterField:B,filterValue:this.filters.global.value,filterConstraint:this.filterService.filters[this.filters.global.matchMode],isStrictMode:n,globalFilterFieldsArray:s},(n&&(this.findFilteredNodes(I,C)||this.isFilterMatched(I,C))||!n&&(this.isFilterMatched(I,C)||this.findFilteredNodes(I,C)))&&(_=!0,l=I)}let E=d;this.filters.global&&(E=d&&_),E&&this.filteredNodes.push(l),o=o||!d||_||d&&this.filteredNodes.length>0||!_&&0===this.filteredNodes.length}o||(this.filteredNodes=null),this.paginator&&(this.totalRecords=this.filteredNodes?this.filteredNodes.length:this.value?this.value.length:0)}else this.filteredNodes=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0);this.cd.markForCheck()}this.first=0;const t=this.filteredNodes||this.value;this.onFilter.emit({filters:this.filters,filteredValue:t}),this.tableService.onUIUpdate(t),this.updateSerializedValue(),this.scrollable&&this.resetScrollTop()}findFilteredNodes(t,s){if(t){let n=!1;if(t.children){let o=[...t.children];t.children=[];for(let a of o){let l={...a};this.isFilterMatched(l,s)&&(n=!0,t.children.push(l))}}if(n)return!0}}isFilterMatched(t,s){let{filterField:n,filterValue:o,filterConstraint:a,isStrictMode:l,globalFilterFieldsArray:d}=s,_=!1;const C=E=>a(F.BF.resolveFieldData(t.data,E),o,this.filterLocale);return _=d?.length?d.some(E=>C(E.field||E)):C(n),(!_||l&&!this.isNodeLeaf(t))&&(_=this.findFilteredNodes(t,{filterField:n,filterValue:o,filterConstraint:a,isStrictMode:l,globalFilterFieldsArray:d})||_),_}isNodeLeaf(t){return!1!==t.leaf&&!(t.children&&t.children.length)}hasFilter(){let t=!0;for(let s in this.filters)if(this.filters.hasOwnProperty(s)){t=!1;break}return!t}reset(){this._sortField=null,this._sortOrder=1,this._multiSortMeta=null,this.tableService.onSort(null),this.filteredNodes=null,this.filters={},this.first=0,this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}updateEditingCell(t,s,n){this.editingCell=t,this.editingCellData=s,this.editingCellField=n,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===m.D.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=this.renderer.listen(this.document,"click",t=>{this.editingCell&&!this.editingCellClick&&this.isEditingCellValid()&&(m.D.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData}),this.editingCellField=null,this.editingCellData=null,this.unbindDocumentEditListener()),this.editingCellClick=!1}))}unbindDocumentEditListener(){this.documentEditListener&&(this.documentEditListener(),this.documentEditListener=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.editingCellField=null,this.editingCellData=null,this.initialized=null}static \u0275fac=function(s){return new(s||i)(e.rXU(u.qQ),e.rXU(e.sFG),e.rXU(e.aKT),e.rXU(e.gRc),e.rXU(e.SKi),e.rXU(ne),e.rXU(f.E),e.rXU(f.r1))};static \u0275cmp=e.VBU({type:i,selectors:[["p-treeTable"]],contentQueries:function(s,n,o){if(1&s&&e.wni(o,f.Ei,4),2&s){let a;e.mGM(a=e.lsd())&&(n.templates=a)}},viewQuery:function(s,n){if(1&s&&(e.GBs(ai,5),e.GBs(li,5),e.GBs(ci,5),e.GBs(di,5),e.GBs(ui,5),e.GBs(pi,5),e.GBs(mi,5)),2&s){let o;e.mGM(o=e.lsd())&&(n.containerViewChild=o.first),e.mGM(o=e.lsd())&&(n.resizeHelperViewChild=o.first),e.mGM(o=e.lsd())&&(n.reorderIndicatorUpViewChild=o.first),e.mGM(o=e.lsd())&&(n.reorderIndicatorDownViewChild=o.first),e.mGM(o=e.lsd())&&(n.tableViewChild=o.first),e.mGM(o=e.lsd())&&(n.scrollableViewChild=o.first),e.mGM(o=e.lsd())&&(n.scrollableFrozenViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{columns:"columns",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",autoLayout:[e.Mj6.HasDecoratorInputTransform,"autoLayout","autoLayout",e.L39],lazy:[e.Mj6.HasDecoratorInputTransform,"lazy","lazy",e.L39],lazyLoadOnInit:[e.Mj6.HasDecoratorInputTransform,"lazyLoadOnInit","lazyLoadOnInit",e.L39],paginator:[e.Mj6.HasDecoratorInputTransform,"paginator","paginator",e.L39],rows:[e.Mj6.HasDecoratorInputTransform,"rows","rows",e.Udg],first:[e.Mj6.HasDecoratorInputTransform,"first","first",e.Udg],pageLinks:[e.Mj6.HasDecoratorInputTransform,"pageLinks","pageLinks",e.Udg],rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:[e.Mj6.HasDecoratorInputTransform,"alwaysShowPaginator","alwaysShowPaginator",e.L39],paginatorPosition:"paginatorPosition",paginatorStyleClass:"paginatorStyleClass",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:[e.Mj6.HasDecoratorInputTransform,"showCurrentPageReport","showCurrentPageReport",e.L39],showJumpToPageDropdown:[e.Mj6.HasDecoratorInputTransform,"showJumpToPageDropdown","showJumpToPageDropdown",e.L39],showFirstLastIcon:[e.Mj6.HasDecoratorInputTransform,"showFirstLastIcon","showFirstLastIcon",e.L39],showPageLinks:[e.Mj6.HasDecoratorInputTransform,"showPageLinks","showPageLinks",e.L39],defaultSortOrder:[e.Mj6.HasDecoratorInputTransform,"defaultSortOrder","defaultSortOrder",e.Udg],sortMode:"sortMode",resetPageOnSort:[e.Mj6.HasDecoratorInputTransform,"resetPageOnSort","resetPageOnSort",e.L39],customSort:[e.Mj6.HasDecoratorInputTransform,"customSort","customSort",e.L39],selectionMode:"selectionMode",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:[e.Mj6.HasDecoratorInputTransform,"metaKeySelection","metaKeySelection",e.L39],compareSelectionBy:"compareSelectionBy",rowHover:[e.Mj6.HasDecoratorInputTransform,"rowHover","rowHover",e.L39],loading:[e.Mj6.HasDecoratorInputTransform,"loading","loading",e.L39],loadingIcon:"loadingIcon",showLoader:[e.Mj6.HasDecoratorInputTransform,"showLoader","showLoader",e.L39],scrollable:[e.Mj6.HasDecoratorInputTransform,"scrollable","scrollable",e.L39],scrollHeight:"scrollHeight",virtualScroll:[e.Mj6.HasDecoratorInputTransform,"virtualScroll","virtualScroll",e.L39],virtualScrollItemSize:[e.Mj6.HasDecoratorInputTransform,"virtualScrollItemSize","virtualScrollItemSize",e.Udg],virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:[e.Mj6.HasDecoratorInputTransform,"virtualScrollDelay","virtualScrollDelay",e.Udg],frozenWidth:"frozenWidth",frozenColumns:"frozenColumns",resizableColumns:[e.Mj6.HasDecoratorInputTransform,"resizableColumns","resizableColumns",e.L39],columnResizeMode:"columnResizeMode",reorderableColumns:[e.Mj6.HasDecoratorInputTransform,"reorderableColumns","reorderableColumns",e.L39],contextMenu:"contextMenu",rowTrackBy:"rowTrackBy",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:[e.Mj6.HasDecoratorInputTransform,"filterDelay","filterDelay",e.Udg],filterMode:"filterMode",filterLocale:"filterLocale",paginatorLocale:"paginatorLocale",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",value:"value",virtualRowHeight:"virtualRowHeight",selectionKeys:"selectionKeys"},outputs:{selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onFilter:"onFilter",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onPage:"onPage",onSort:"onSort",onLazyLoad:"onLazyLoad",sortFunction:"sortFunction",onColResize:"onColResize",onColReorder:"onColReorder",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onContextMenuSelect:"onContextMenuSelect",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",selectionKeysChange:"selectionKeysChange"},features:[e.Jv_([ne]),e.GFd,e.OA$],decls:12,vars:20,consts:[["container",""],["table",""],["scrollableView",""],["scrollableFrozenView",""],["resizeHelper",""],["reorderIndicatorUp",""],["reorderIndicatorDown",""],["data-scrollselectors",".p-treetable-scrollable-body",3,"ngStyle","ngClass"],["class","p-treetable-loading",4,"ngIf"],["class","p-treetable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","styleClass","locale","onPageChange",4,"ngIf"],["class","p-treetable-wrapper",4,"ngIf"],["class","p-treetable-scrollable-wrapper",4,"ngIf"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","styleClass","locale","onPageChange",4,"ngIf"],["class","p-treetable-footer",4,"ngIf"],["class","p-column-resizer-helper",3,"ngStyle",4,"ngIf"],["class","p-treetable-reorder-indicator-up",3,"ngStyle",4,"ngIf"],["class","p-treetable-reorder-indicator-down",3,"ngStyle",4,"ngIf"],[1,"p-treetable-loading"],[1,"p-treetable-loading-overlay","p-component-overlay"],[3,"class",4,"ngIf"],[4,"ngIf"],[3,"spin","styleClass",4,"ngIf"],["class","p-treetable-loading-icon",4,"ngIf"],[3,"spin","styleClass"],[1,"p-treetable-loading-icon"],[4,"ngTemplateOutlet"],[1,"p-treetable-header"],["styleClass","p-paginator-top",3,"onPageChange","rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","styleClass","locale"],["pTemplate","firstpagelinkicon"],["pTemplate","previouspagelinkicon"],["pTemplate","lastpagelinkicon"],["pTemplate","nextpagelinkicon"],[1,"p-treetable-wrapper"],["role","table",3,"ngClass","ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","rowgroup",1,"p-treetable-thead"],["role","rowgroup",1,"p-treetable-tbody",3,"pTreeTableBody","pTreeTableBodyTemplate"],["role","rowgroup",1,"p-treetable-tfoot"],[1,"p-treetable-scrollable-wrapper"],["class","p-treetable-scrollable-view p-treetable-frozen-view",3,"ttScrollableView","frozen","ngStyle","scrollHeight",4,"ngIf"],[1,"p-treetable-scrollable-view",3,"ttScrollableView","frozen","scrollHeight","ngStyle"],[1,"p-treetable-scrollable-view","p-treetable-frozen-view",3,"ttScrollableView","frozen","ngStyle","scrollHeight"],["styleClass","p-paginator-bottom",3,"onPageChange","rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","styleClass","locale"],[1,"p-treetable-footer"],[1,"p-column-resizer-helper",3,"ngStyle"],[1,"p-treetable-reorder-indicator-up",3,"ngStyle"],[1,"p-treetable-reorder-indicator-down",3,"ngStyle"]],template:function(s,n){1&s&&(e.j41(0,"div",7,0),e.DNE(2,Fi,4,2,"div",8)(3,ki,2,1,"div",9)(4,Li,5,21,"p-paginator",10)(5,Yi,9,16,"div",11)(6,Xi,4,8,"div",12)(7,is,5,21,"p-paginator",13)(8,os,2,1,"div",14)(9,rs,2,2,"div",15)(10,ds,4,4,"span",16)(11,gs,4,4,"span",17),e.k0s()),2&s&&(e.HbH(n.styleClass),e.Y8G("ngStyle",n.style)("ngClass",e.s1E(14,gi,n.rowHover||"single"===n.selectionMode||"multiple"===n.selectionMode,n.autoLayout,n.resizableColumns,n.resizableColumns&&"fit"===n.columnResizeMode,n.scrollable&&"flex"===n.scrollHeight)),e.R7$(2),e.Y8G("ngIf",n.loading&&n.showLoader),e.R7$(),e.Y8G("ngIf",n.captionTemplate),e.R7$(),e.Y8G("ngIf",n.paginator&&("top"===n.paginatorPosition||"both"==n.paginatorPosition)),e.R7$(),e.Y8G("ngIf",!n.scrollable),e.R7$(),e.Y8G("ngIf",n.scrollable),e.R7$(),e.Y8G("ngIf",n.paginator&&("bottom"===n.paginatorPosition||"both"==n.paginatorPosition)),e.R7$(),e.Y8G("ngIf",n.summaryTemplate),e.R7$(),e.Y8G("ngIf",n.resizableColumns),e.R7$(),e.Y8G("ngIf",n.reorderableColumns),e.R7$(),e.Y8G("ngIf",n.reorderableColumns))},dependencies:()=>[u.YU,u.bT,u.T3,u.B3,Z.m,f.Ei,be.N,ge.Z,_e.K,To,ye],styles:["@layer primeng{.p-treetable{position:relative}.p-treetable table{border-collapse:collapse;width:100%;table-layout:fixed}.p-treetable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-treetable .p-sortable-column .p-column-title,.p-treetable .p-sortable-column .p-sortable-column-icon,.p-treetable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-treetable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-treetable-auto-layout>.p-treetable-wrapper{overflow-x:auto}.p-treetable-auto-layout>.p-treetable-wrapper>table{table-layout:auto}.p-treetable-hoverable-rows .p-treetable-tbody>tr{cursor:pointer}.p-treetable-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;vertical-align:middle;overflow:hidden;position:relative}p-treetabletoggler+p-treetablecheckbox .p-checkbox{vertical-align:middle}p-treetabletoggler+p-treetablecheckbox+span{vertical-align:middle}.p-treetable-scrollable-wrapper{position:relative}.p-treetable-scrollable-header,.p-treetable-scrollable-footer{overflow:hidden;flex-shrink:0}.p-treetable-scrollable-body{overflow:auto;position:relative}.p-treetable-scrollable-body>table>.p-treetable-tbody>tr:first-child>td{border-top:0 none}.p-treetable-virtual-table{position:absolute}.p-treetable-frozen-view .p-treetable-scrollable-body{overflow:hidden}.p-treetable-frozen-view>.p-treetable-scrollable-body>table>.p-treetable-tbody>tr>td:last-child{border-right:0 none}.p-treetable-unfrozen-view{position:absolute;top:0}.p-treetable-flex-scrollable,.p-treetable-flex-scrollable .p-treetable-scrollable-wrapper,.p-treetable-flex-scrollable .p-treetable-scrollable-view{display:flex;flex-direction:column;flex:1;height:100%}.p-treetable-flex-scrollable .p-treetable-virtual-scrollable-body{flex:1}.p-treetable-resizable>.p-treetable-wrapper{overflow-x:auto}.p-treetable-resizable .p-treetable-thead>tr>th,.p-treetable-resizable .p-treetable-tfoot>tr>td,.p-treetable-resizable .p-treetable-tbody>tr>td{overflow:hidden}.p-treetable-resizable .p-resizable-column{background-clip:padding-box;position:relative}.p-treetable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-treetable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-treetable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-treetable .p-row-editor-init,.p-treetable .p-row-editor-save,.p-treetable .p-row-editor-cancel,.p-treetable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-treetable-reorder-indicator-up,.p-treetable-reorder-indicator-down{position:absolute;display:none}[ttReorderableColumn]{cursor:move}.p-treetable .p-treetable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-treetable .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}}\n"],encapsulation:2})}return i})(),ye=(()=>{class i{tt;treeTableService;cd;columns;template;frozen;serializedNodes;scrollerOptions;subscription;constructor(t,s,n){this.tt=t,this.treeTableService=s,this.cd=n,this.subscription=this.tt.tableService.uiUpdateSource$.subscribe(()=>{this.tt.virtualScroll&&this.cd.detectChanges()})}getScrollerOption(t,s){return this.tt.virtualScroll&&(s=s||this.scrollerOptions)?s[t]:null}getRowIndex(t){const s=this.getScrollerOption("getItemOptions");return s?s(t).index:t}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static \u0275fac=function(s){return new(s||i)(e.rXU(P),e.rXU(ne),e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:i,selectors:[["","pTreeTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:[e.Mj6.None,"pTreeTableBody","columns"],template:[e.Mj6.None,"pTreeTableBodyTemplate","template"],frozen:[e.Mj6.HasDecoratorInputTransform,"frozen","frozen",e.L39],serializedNodes:"serializedNodes",scrollerOptions:"scrollerOptions"},features:[e.GFd],attrs:_s,decls:2,vars:3,consts:[["ngFor","",3,"ngForOf","ngForTrackBy"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(s,n){1&s&&e.DNE(0,Cs,1,1,"ng-template",0)(1,Ts,2,5,"ng-container",1),2&s&&(e.Y8G("ngForOf",n.serializedNodes||n.tt.serializedValue)("ngForTrackBy",n.tt.rowTrackBy),e.R7$(),e.Y8G("ngIf",n.tt.isEmpty()))},dependencies:[u.Sq,u.bT,u.T3],encapsulation:2})}return i})(),To=(()=>{class i{platformId;renderer;tt;el;zone;columns;frozen;scrollHeaderViewChild;scrollHeaderBoxViewChild;scrollBodyViewChild;scrollTableViewChild;scrollLoadingTableViewChild;scrollFooterViewChild;scrollFooterBoxViewChild;scrollableAlignerViewChild;scroller;headerScrollListener;bodyScrollListener;footerScrollListener;frozenSiblingBody;totalRecordsSubscription;_scrollHeight;preventBodyScrollPropagation;getMergedTableStyles(t){return{...this.tt.tableStyle,...t}}get scrollHeight(){return this._scrollHeight}set scrollHeight(t){this._scrollHeight=t,null!=t&&(t.includes("%")||t.includes("calc"))&&console.log('Percentage scroll height calculation is removed in favor of the more performant CSS based flex mode, use scrollHeight="flex" instead.')}constructor(t,s,n,o,a){this.platformId=t,this.renderer=s,this.tt=n,this.el=o,this.zone=a}ngAfterViewInit(){if((0,u.UE)(this.platformId)){if(this.frozen)this.scrollableAlignerViewChild&&this.scrollableAlignerViewChild.nativeElement&&(this.scrollableAlignerViewChild.nativeElement.style.height=m.D.calculateScrollbarHeight()+"px");else{(this.tt.frozenColumns||this.tt.frozenBodyTemplate)&&m.D.addClass(this.el.nativeElement,"p-treetable-unfrozen-view");let t=this.el.nativeElement.previousElementSibling;t&&(this.frozenSiblingBody=m.D.findSingle(t,this.tt.virtualScroll?".p-scroller-viewport":".p-treetable-scrollable-body"));let s=m.D.calculateScrollbarWidth();this.scrollHeaderBoxViewChild.nativeElement.style.paddingRight=s+"px",this.scrollFooterBoxViewChild&&this.scrollFooterBoxViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.paddingRight=s+"px")}this.bindEvents()}}bindEvents(){(0,u.UE)(this.platformId)&&this.zone.runOutsideAngular(()=>{this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.headerScrollListener=this.renderer.listen(this.scrollHeaderBoxViewChild?.nativeElement,"scroll",this.onHeaderScroll.bind(this))),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.footerScrollListener=this.renderer.listen(this.scrollFooterViewChild.nativeElement,"scroll",this.onFooterScroll.bind(this))),this.frozen||(this.bodyScrollListener=this.renderer.listen(this.tt.virtualScroll?(this.scroller?.getElementRef()).nativeElement:this.scrollBodyViewChild?.nativeElement,"scroll",this.onBodyScroll.bind(this)))})}unbindEvents(){(0,u.UE)(this.platformId)&&(this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&this.headerScrollListener&&(this.headerScrollListener(),this.headerScrollListener=null),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&this.footerScrollListener&&(this.footerScrollListener(),this.footerScrollListener=null),this.scrollBodyViewChild&&this.scrollBodyViewChild.nativeElement&&this.bodyScrollListener&&(this.bodyScrollListener(),this.bodyScrollListener=null),this.scroller&&this.scroller.getElementRef()&&this.bodyScrollListener&&(this.bodyScrollListener(),this.bodyScrollListener=null))}onHeaderScroll(){const t=this.scrollHeaderViewChild?.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=t,this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterViewChild.nativeElement.scrollLeft=t),this.preventBodyScrollPropagation=!0}onFooterScroll(){const t=this.scrollFooterViewChild?.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=t,this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderViewChild.nativeElement.scrollLeft=t),this.preventBodyScrollPropagation=!0}onBodyScroll(t){this.preventBodyScrollPropagation?this.preventBodyScrollPropagation=!1:(this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderBoxViewChild.nativeElement.style.marginLeft=-1*t.target.scrollLeft+"px"),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.marginLeft=-1*t.target.scrollLeft+"px"),this.frozenSiblingBody&&(this.frozenSiblingBody.scrollTop=t.target.scrollTop))}scrollToVirtualIndex(t){this.scroller&&this.scroller.scrollToIndex(t)}scrollTo(t){this.scroller?this.scroller.scrollTo(t):this.scrollBodyViewChild?.nativeElement.scrollTo?this.scrollBodyViewChild.nativeElement.scrollTo(t):(this.scrollBodyViewChild.nativeElement.scrollLeft=t.left,this.scrollBodyViewChild.nativeElement.scrollTop=t.top)}ngOnDestroy(){this.unbindEvents(),this.frozenSiblingBody=null}static \u0275fac=function(s){return new(s||i)(e.rXU(e.Agw),e.rXU(e.sFG),e.rXU(P),e.rXU(e.aKT),e.rXU(e.SKi))};static \u0275cmp=e.VBU({type:i,selectors:[["","ttScrollableView",""]],viewQuery:function(s,n){if(1&s&&(e.GBs(Fs,5),e.GBs(Es,5),e.GBs(ks,5),e.GBs(xs,5),e.GBs(Is,5),e.GBs(Rs,5),e.GBs(Ss,5),e.GBs(ws,5),e.GBs(js,5)),2&s){let o;e.mGM(o=e.lsd())&&(n.scrollHeaderViewChild=o.first),e.mGM(o=e.lsd())&&(n.scrollHeaderBoxViewChild=o.first),e.mGM(o=e.lsd())&&(n.scrollBodyViewChild=o.first),e.mGM(o=e.lsd())&&(n.scrollTableViewChild=o.first),e.mGM(o=e.lsd())&&(n.scrollLoadingTableViewChild=o.first),e.mGM(o=e.lsd())&&(n.scrollFooterViewChild=o.first),e.mGM(o=e.lsd())&&(n.scrollFooterBoxViewChild=o.first),e.mGM(o=e.lsd())&&(n.scrollableAlignerViewChild=o.first),e.mGM(o=e.lsd())&&(n.scroller=o.first)}},hostAttrs:[1,"p-element"],inputs:{columns:[e.Mj6.None,"ttScrollableView","columns"],frozen:[e.Mj6.HasDecoratorInputTransform,"frozen","frozen",e.L39],scrollHeight:"scrollHeight"},features:[e.GFd],attrs:Ns,decls:13,vars:13,consts:[["scrollHeader",""],["scrollHeaderBox",""],["buildInItems",""],["scroller",""],["scrollBody",""],["scrollTable",""],["scrollableAligner",""],["scrollFooter",""],["scrollFooterBox",""],[1,"p-treetable-scrollable-header"],[1,"p-treetable-scrollable-header-box"],[1,"p-treetable-scrollable-header-table",3,"ngClass","ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","rowgroup",1,"p-treetable-thead"],["styleClass","p-treetable-scrollable-body",3,"items","style","scrollHeight","itemSize","lazy","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["class","p-treetable-scrollable-footer",4,"ngIf"],["styleClass","p-treetable-scrollable-body",3,"onLazyLoad","items","scrollHeight","itemSize","lazy","options"],["pTemplate","content"],["pTemplate","loader"],[1,"p-treetable-scrollable-body",3,"ngStyle"],["role","table",3,"ngClass","ngStyle"],["role","rowgroup",1,"p-treetable-tbody",3,"pTreeTableBody","pTreeTableBodyTemplate","serializedNodes","frozen"],[3,"ngStyle",4,"ngIf"],[3,"ngStyle"],[1,"p-treetable-scrollable-footer"],[1,"p-treetable-scrollable-footer-box"],[1,"p-treetable-scrollable-footer-table",3,"ngClass","ngStyle"],["role","rowgroup",1,"p-treetable-tfoot"]],template:function(s,n){1&s&&(e.j41(0,"div",9,0)(2,"div",10,1)(4,"table",11),e.DNE(5,Ls,1,0,"ng-container",12),e.j41(6,"thead",13),e.DNE(7,As,1,0,"ng-container",12),e.k0s()()()(),e.DNE(8,Os,4,10,"p-scroller",14)(9,Hs,4,10,"ng-container",15)(10,Js,5,13,"ng-template",null,2,e.C5r)(12,Zs,8,10,"div",16)),2&s&&(e.R7$(4),e.Y8G("ngClass",n.tt.tableStyleClass)("ngStyle",n.tt.tableStyle),e.R7$(),e.Y8G("ngTemplateOutlet",n.frozen&&n.tt.frozenColGroupTemplate||n.tt.colGroupTemplate)("ngTemplateOutletContext",e.eq3(9,M,n.columns)),e.R7$(2),e.Y8G("ngTemplateOutlet",n.frozen&&n.tt.frozenHeaderTemplate||n.tt.headerTemplate)("ngTemplateOutletContext",e.eq3(11,M,n.columns)),e.R7$(),e.Y8G("ngIf",n.tt.virtualScroll),e.R7$(),e.Y8G("ngIf",!n.tt.virtualScroll),e.R7$(3),e.Y8G("ngIf",n.tt.footerTemplate))},dependencies:[u.YU,u.bT,u.T3,u.B3,f.Ei,ee.H,ye],encapsulation:2})}return i})(),ie=(()=>{class i{tt;el;zone;get level(){return this.rowNode?.level+1}get styleClass(){return this.rowNode?.node.styleClass||""}get expanded(){return this.rowNode?.node.expanded}rowNode;constructor(t,s,n){this.tt=t,this.el=s,this.zone=n}onKeyDown(t){switch(t.code){case"ArrowDown":this.onArrowDownKey(t);break;case"ArrowUp":this.onArrowUpKey(t);break;case"ArrowRight":this.onArrowRightKey(t);break;case"ArrowLeft":this.onArrowLeftKey(t);break;case"Tab":this.onTabKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t)}}onArrowDownKey(t){let s=this.el?.nativeElement?.nextElementSibling;s&&this.focusRowChange(t.currentTarget,s),t.preventDefault()}onArrowUpKey(t){let s=this.el?.nativeElement?.previousElementSibling;s&&this.focusRowChange(t.currentTarget,s),t.preventDefault()}onArrowRightKey(t){const s=t.currentTarget;!("hidden"===m.D.findSingle(s,"button").style.visibility)&&!this.expanded&&this.rowNode.node.children&&(this.expand(t),s.tabIndex=-1),t.preventDefault()}onArrowLeftKey(t){const s=this.tt.containerViewChild?.nativeElement,n=m.D.find(s,'[aria-expanded="true"]'),o=n[n.length-1];this.expanded&&this.collapse(t),o&&(this.tt.toggleRowIndex=m.D.index(o)),this.restoreFocus(),t.preventDefault()}onHomeKey(t){const s=m.D.findSingle(this.tt.containerViewChild?.nativeElement,`tr[aria-level="${this.level}"]`);s&&m.D.focus(s),t.preventDefault()}onEndKey(t){const s=m.D.find(this.tt.containerViewChild?.nativeElement,`tr[aria-level="${this.level}"]`);m.D.focus(s[s.length-1]),t.preventDefault()}onTabKey(t){const s=this.el.nativeElement?[...m.D.find(this.el.nativeElement.parentNode,"tr")]:void 0;if(s&&F.BF.isNotEmpty(s)){const n=s.some(o=>m.D.getAttribute(o,"data-p-highlight")||"true"===o.getAttribute("aria-checked"));if(s.forEach(o=>{o.tabIndex=-1}),n)return void(s.filter(a=>m.D.getAttribute(a,"data-p-highlight")||"true"===a.getAttribute("aria-checked"))[0].tabIndex=0);s[0].tabIndex=0}}expand(t){this.tt.toggleRowIndex=m.D.index(this.el.nativeElement),this.rowNode.node.expanded=!0,this.tt.updateSerializedValue(),this.tt.tableService.onUIUpdate(this.tt.value),this.rowNode.node.children?this.restoreFocus(this.tt.toggleRowIndex+1):this.restoreFocus(),this.tt.onNodeExpand.emit({originalEvent:t,node:this.rowNode.node})}collapse(t){this.rowNode.node.expanded=!1,this.tt.updateSerializedValue(),this.tt.tableService.onUIUpdate(this.tt.value),this.tt.onNodeCollapse.emit({originalEvent:t,node:this.rowNode.node})}focusRowChange(t,s,n){t.tabIndex="-1",s.tabIndex="0",m.D.focus(s)}restoreFocus(t){this.zone.runOutsideAngular(()=>{setTimeout(()=>{const s=this.tt.containerViewChild?.nativeElement,n=m.D.findSingle(s,".p-treetable-tbody").children[t||this.tt.toggleRowIndex],o=[...m.D.find(s,"tr")];o&&o.forEach(a=>{n.isSameNode(a)||(a.tabIndex=-1)}),n&&(n.tabIndex=0,n.focus())},25)})}static \u0275fac=function(s){return new(s||i)(e.rXU(P),e.rXU(e.aKT),e.rXU(e.SKi))};static \u0275dir=e.FsC({type:i,selectors:[["","ttRow",""]],hostAttrs:[1,"p-element"],hostVars:7,hostBindings:function(s,n){1&s&&e.bIt("keydown",function(a){return n.onKeyDown(a)}),2&s&&(e.BMQ("tabindex","0")("aria-expanded",n.expanded)("aria-level",n.level)("data-pc-section",n.row)("role",n.row),e.HbH("p-element "+n.styleClass))},inputs:{rowNode:[e.Mj6.None,"ttRow","rowNode"]}})}return i})(),se=(()=>{class i{tt;config;rowNode;constructor(t,s){this.tt=t,this.config=s}get toggleButtonAriaLabel(){return this.config.translation?this.rowNode.expanded?this.config.translation.aria.collapseRow:this.config.translation.aria.expandRow:void 0}onClick(t){this.rowNode.node.expanded=!this.rowNode.node.expanded,this.rowNode.node.expanded?this.tt.onNodeExpand.emit({originalEvent:t,node:this.rowNode.node}):this.tt.onNodeCollapse.emit({originalEvent:t,node:this.rowNode.node}),this.tt.updateSerializedValue(),this.tt.tableService.onUIUpdate(this.tt.value),t.preventDefault()}static \u0275fac=function(s){return new(s||i)(e.rXU(P),e.rXU(f.r1))};static \u0275cmp=e.VBU({type:i,selectors:[["p-treeTableToggler"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode"},decls:3,vars:12,consts:[["type","button","tabindex","-1","pRipple","",1,"p-treetable-toggler","p-link",3,"click","ngStyle"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(s,n){1&s&&(e.j41(0,"button",0),e.bIt("click",function(a){return n.onClick(a)}),e.DNE(1,vo,3,2,"ng-container",1)(2,yo,1,0,null,2),e.k0s()),2&s&&(e.Y8G("ngStyle",e.l_i(7,ho,!1===n.rowNode.node.leaf||n.rowNode.node.children&&n.rowNode.node.children.length?"visible":"hidden",16*n.rowNode.level+"px")),e.BMQ("data-pc-section","rowtoggler")("data-pc-group-section","rowactionbutton")("aria-label",n.toggleButtonAriaLabel),e.R7$(),e.Y8G("ngIf",!n.tt.togglerIconTemplate),e.R7$(),e.Y8G("ngTemplateOutlet",n.tt.togglerIconTemplate)("ngTemplateOutletContext",e.eq3(10,M,n.rowNode.node.expanded)))},dependencies:()=>[u.bT,u.T3,u.B3,ve.n,he.D,fe.v],encapsulation:2})}return i})(),Fo=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275mod=e.$C({type:i});static \u0275inj=e.G2t({imports:[u.MD,Z.I,ve.Z,ee.h,be.N,ge.Z,_e.K,si.J,ri.w,oi.S,ni.S,ii.Q,he.D,fe.v,f.Gg,ee.h]})}return i})();const Eo=["tt"],ko=()=>({width:"40rem"}),xo=()=>({label:"Active",value:"active"}),Io=()=>({label:"Inactive",value:"inactive"}),Ro=()=>({label:"Suggestion",value:"suggestion"}),So=(i,r,t)=>[i,r,t],Te=()=>({height:"4px"}),wo=()=>({"min-width":"50rem"}),jo=()=>["data.code","data.label","data.status","data.nameEn","data.nameAr"],No=(i,r,t)=>({"badge-light-success":i,"badge-light-danger":r,"badge-light-warning":t});function Do(i,r){1&i&&e.nrm(0,"p-progressBar",41),2&i&&e.Aen(e.lJ4(2,Te))}function Go(i,r){if(1&i&&(e.j41(0,"div",42),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",t.isicnodes.length||0," Consulting Fields ")}}function qo(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",46),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function $o(i,r){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Name (EN)"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Name (AR)"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Status"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Actions"),e.k0s()())}function Mo(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr",47)(1,"td"),e.nrm(2,"p-treeTableToggler",48),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td")(7,"div",49),e.EFF(8),e.k0s()(),e.j41(9,"td")(10,"a",50),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.editIsicCode(n))}),e.j41(11,"i",51),e.nrm(12,"span",52)(13,"span",53),e.k0s()(),e.j41(14,"a",54),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.deleteIsicCode(n))}),e.j41(15,"i",55),e.nrm(16,"span",52)(17,"span",53)(18,"span",56)(19,"span",57)(20,"span",58),e.k0s()()()()}if(2&i){const t=r.$implicit,s=r.rowData;e.Y8G("ttRow",t),e.R7$(2),e.Y8G("rowNode",t),e.R7$(),e.SpI(" ",s.nameEn," "),e.R7$(2),e.JRh(s.nameAr),e.R7$(2),e.Y8G("ngClass",e.sMw(6,No,"active"===s.status,"inactive"===s.status,"suggestion"===s.status)),e.R7$(),e.JRh(s.status)}}function Lo(i,r){if(1&i&&(e.qex(0),e.DNE(1,qo,1,2,"p-messages",25),e.j41(2,"p-treeTable",43,0),e.DNE(4,$o,9,0,"ng-template",44)(5,Mo,21,10,"ng-template",45),e.k0s(),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.hasSuccessMessage),e.R7$(),e.Y8G("value",t.isicnodes)("scrollable",!0)("tableStyle",e.lJ4(5,wo))("globalFilterFields",e.lJ4(6,jo))}}function Ao(i,r){1&i&&e.nrm(0,"p-progressBar",41),2&i&&e.Aen(e.lJ4(2,Te))}function Vo(i,r){1&i&&(e.qex(0),e.j41(1,"div",59),e.EFF(2," No Available Data "),e.k0s(),e.bVm())}function Bo(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",46),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG();e.R50("value",t.messages),e.Y8G("enableService",!1)}}function Yo(i,r){1&i&&(e.j41(0,"div",61),e.EFF(1," Name in English is required. "),e.k0s())}function Po(i,r){if(1&i&&(e.j41(0,"div",61),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.nameEn.errors.serverError," ")}}function Xo(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Yo,2,0,"div",60)(2,Po,2,1,"div",60),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.nameEn.errors.required),e.R7$(),e.Y8G("ngIf",t.nameEn.errors.serverError)}}function Oo(i,r){1&i&&(e.j41(0,"div",61),e.EFF(1," Name in Arabic is required. "),e.k0s())}function zo(i,r){if(1&i&&(e.j41(0,"div",61),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.nameAr.errors.serverError," ")}}function Ho(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Oo,2,0,"div",60)(2,zo,2,1,"div",60),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.nameAr.errors.required),e.R7$(),e.Y8G("ngIf",t.nameAr.errors.serverError)}}function Uo(i,r){1&i&&(e.j41(0,"div",61),e.EFF(1," Status is required. "),e.k0s())}function Ko(i,r){if(1&i&&(e.j41(0,"div",61),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.status.errors.serverError," ")}}function Jo(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Uo,2,0,"div",60)(2,Ko,2,1,"div",60),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.status.errors.required),e.R7$(),e.Y8G("ngIf",t.status.errors.serverError)}}function Qo(i,r){if(1&i&&(e.j41(0,"div",61),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.parentNode.errors.serverError," ")}}function Wo(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Qo,2,1,"div",60),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.parentNode.errors.serverError)}}function Zo(i,r){1&i&&(e.qex(0),e.j41(1,"span",62),e.EFF(2,"Save"),e.k0s(),e.bVm())}function er(i,r){1&i&&(e.qex(0),e.j41(1,"span",63),e.EFF(2," Please wait "),e.nrm(3,"span",64),e.k0s(),e.bVm()),2&i&&(e.R7$(),e.xc7("display","block"))}let tr=(()=>{class i{cdr;fb;messageService;isicCodesService;trans;isicForm;isicnodes;originalIsicNodes;isicTreeData;selectedNodeId=null;displayDialog=!1;isUpdate=!1;parentsOnlyTreeData;statusOptions=[{label:"All",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Suggestion",value:"suggestion"}];selectedStatus="";searchTerm="";isLoading$;messages=[];selectedParentNode=0;unsubscribe=[];treeTable;constructor(t,s,n,o,a){this.cdr=t,this.fb=s,this.messageService=n,this.isicCodesService=o,this.trans=a,this.isLoading$=this.isicCodesService.isLoading$}ngOnInit(){this.isicForm=this.fb.group({nameEn:["",c.k0.required],nameAr:["",c.k0.required],status:["",c.k0.required],parentNode:[0]}),this.loadIsicCodes()}loadIsicCodes(){const t=this.isicCodesService.getConsultingCodesTree("en").subscribe({next:s=>{this.isicnodes=s,this.originalIsicNodes=[...s],this.isicTreeData=this.changeKeyToValue([...s]),this.parentsOnlyTreeData=this.isicTreeData.map(n=>({...n,children:[]})),this.cdr.detectChanges()},error:s=>{this.handleServerErrors(s)}});this.unsubscribe.push(t)}changeKeyToValue(t){return t.map(s=>{const n={...s,value:s.data.key,children:s.children?this.changeKeyToValue(s.children):[]};return delete n.key,n.data&&void 0!==n.data.key&&(n.data={...n.data,value:n.data.key},delete n.data.key),n})}showDialog(){this.displayDialog=!0,this.isUpdate=!1,this.selectedParentNode=0,this.isicForm.reset()}editIsicCode(t){this.displayDialog=!0,this.selectedParentNode=0,this.isUpdate=!0;const s=t.node.data;this.selectedNodeId=s.key;const n=t.node.parent?t.node.parent.data.key:0;n&&(this.selectedParentNode=this.parentsOnlyTreeData.find(o=>o.value===n)||0),this.isicForm.patchValue({nameEn:s.nameEn,nameAr:s.nameAr,status:s.status,parentNode:this.selectedParentNode})}submit(){if(this.messages=[],this.isicForm.invalid)return void this.isicForm.markAllAsTouched();const t=this.isicForm.value,s={name:{en:t.nameEn,ar:t.nameAr},status:t.status,parent_id:t.parentNode?t.parentNode.value:0};if(this.isUpdate&&null!==this.selectedNodeId){const n=this.isicCodesService.updateConsultingField(this.selectedNodeId,s,"en").subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Consulting field updated successfully."}),this.loadIsicCodes(),this.displayDialog=!1,this.isicForm.reset()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}else{const n=this.isicCodesService.createConsultingField(s,"en").subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Consulting field created successfully."}),this.loadIsicCodes(),this.displayDialog=!1,this.isicForm.reset()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}}deleteIsicCode(t){const s=t.node.data.key;b().fire({title:"Are you sure?",text:"Do you want to delete this field? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(n=>{if(n.isConfirmed){const o=this.isicCodesService.deleteIsicCode(s).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Consulting field deleted successfully."}),this.loadIsicCodes()},error:a=>{this.handleServerErrors(a)}});this.unsubscribe.push(o)}})}applyFilter(t){this.searchTerm=t.target.value.trim().toLowerCase(),this.applyFilters()}applyStatusFilter(){this.applyFilters()}applyFilters(){this.isicnodes=this.filterNodesRecursively(this.originalIsicNodes,this.selectedStatus,this.searchTerm.toLowerCase())}filterNodesRecursively(t,s,n){const o=[];for(const a of t){const l=a.children?this.filterNodesRecursively(a.children,s,n):[];(this.isNodeMatch(a,s,n)||l.length>0)&&o.push({...a,children:l})}return o}isNodeMatch(t,s,n){const{status:o,code:a,label:l,nameEn:d,nameAr:_}=t.data,C=!s||o===s,E=!n||a&&a.toLowerCase().includes(n)||l&&l.toLowerCase().includes(n)||d&&d.toLowerCase().includes(n)||_&&_.toLowerCase().includes(n);return C&&E}onCancel(){this.displayDialog=!1,this.selectedParentNode=0,this.isicForm.reset()}handleServerErrors(t){if(this.messages=[],t.error&&t.error.errors){const s=t.error.errors,n={"name.en":"nameEn","name.ar":"nameAr",status:"status",parent_id:"parentNode"};for(const o in s)if(s.hasOwnProperty(o)){const a=s[o],l=n[o];if(l){const d=this.isicForm.get(l);d&&(d.setErrors({serverError:a[0]}),d.markAsTouched())}else this.messages.push({severity:"error",summary:"",detail:a.join(", ")})}}else this.messages.push({severity:"error",summary:"Error",detail:"An unexpected error occurred."})}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}get nameEn(){return this.isicForm.get("nameEn")}get nameAr(){return this.isicForm.get("nameAr")}get status(){return this.isicForm.get("status")}get parentNode(){return this.isicForm.get("parentNode")}get hasSuccessMessage(){return this.messages.some(t=>"success"===t.severity)}get hasErrorMessage(){return this.messages.some(t=>"error"===t.severity)}static \u0275fac=function(s){return new(s||i)(e.rXU(e.gRc),e.rXU(c.ok),e.rXU(f.bg),e.rXU(ti.M),e.rXU(W.L))};static \u0275cmp=e.VBU({type:i,selectors:[["app-consulting-fields"]],viewQuery:function(s,n){if(1&s&&e.GBs(Eo,5),2&s){let o;e.mGM(o=e.lsd())&&(n.treeTable=o.first)}},decls:69,vars:48,consts:[["tt",""],["mode","indeterminate",3,"style",4,"ngIf"],["id","kt_app_toolbar",1,"app-toolbar","pt-10","mb-0"],["id","kt_app_toolbar_container",1,"app-container","container-fluid","d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","flex-column","justify-content-center","gap-1","me-3"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],["class","fw-semibold fs-7 my-0 text-muted",4,"ngIf"],["id","kt_app_content",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-fluid"],[1,"card"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"pi","pi-search","fs-3","position-absolute","ms-5"],["type","text","pInputText","","placeholder","Search Consulting Field",1,"form-control","w-250px","ps-12",3,"input"],[1,"ms-3"],["appendTo","body","placeholder","Filter by Status",1,"w-150px",3,"ngModelChange","onChange","options","ngModel"],[1,"card-tooltip"],[1,"d-flex","align-items-center","gap-2","gap-lg-3"],[1,"btn","btn-md","btn-flex","btn-primary",3,"click"],[1,"ki-outline","ki-plus","text-white","fs-4"],[1,"card-body","pt-0"],[4,"ngIf"],["appendTo","body",3,"visibleChange","header","modal","visible"],[3,"value","enableService","valueChange",4,"ngIf"],[1,"text-muted","mb-3","d-block"],[3,"formGroup"],[1,"mb-3","row"],["for","nameEn",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["pInputText","","id","nameEn","formControlName","nameEn","autocomplete","off",1,"form-control"],["for","nameAr",1,"col-sm-3","col-form-label"],["pInputText","","id","nameAr","formControlName","nameAr","autocomplete","off",1,"form-control"],["for","status",1,"col-sm-3","col-form-label"],["id","status","appendTo","body","formControlName","status","placeholder","Select Status",1,"w-100",3,"options"],["for","parentId",1,"col-sm-3","col-form-label"],["appendTo","body","id","parentNode","formControlName","parentNode","selectionMode","single","optionLabel","label","optionValue","value","placeholder","Select Parent","filterBy","label",1,"w-100",3,"options","showClear","filter"],[1,"d-flex","justify-content-end","gap-2"],["type","submit",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],["mode","indeterminate"],[1,"fw-semibold","fs-7","my-0","text-muted"],[3,"value","scrollable","tableStyle","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],[3,"valueChange","value","enableService"],[3,"ttRow"],[3,"rowNode"],[1,"badge",3,"ngClass"],["pTooltip","Edit Consulting Field","tooltipPosition","top",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"ki-duotone","ki-pencil","fs-2"],[1,"path1"],[1,"path2"],["pTooltip","Delete Consulting Field","tooltipPosition","top",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"ki-duotone","ki-trash","fs-2"],[1,"path3"],[1,"path4"],[1,"path5"],[1,"d-flex","align-items-center","justify-content-center","h-400px","text-muted"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(s,n){1&s&&(e.DNE(0,Do,1,3,"p-progressBar",1),e.nI1(1,"async"),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),e.EFF(7," Consulting Field "),e.k0s(),e.DNE(8,Go,2,1,"div",7),e.k0s()()()(),e.j41(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),e.nrm(15,"i",14),e.j41(16,"input",15),e.bIt("input",function(a){return n.applyFilter(a)}),e.k0s()(),e.j41(17,"div",16)(18,"p-dropdown",17),e.mxI("ngModelChange",function(a){return e.DH7(n.selectedStatus,a)||(n.selectedStatus=a),a}),e.bIt("onChange",function(){return n.applyStatusFilter()}),e.k0s()()(),e.j41(19,"div",18)(20,"div",19)(21,"a",20),e.bIt("click",function(){return n.showDialog()}),e.nrm(22,"i",21),e.EFF(23," Create "),e.k0s()()()(),e.j41(24,"div",22),e.DNE(25,Lo,6,7,"ng-container",23),e.nI1(26,"async"),e.k0s()(),e.DNE(27,Ao,1,3,"p-progressBar",1),e.nI1(28,"async"),e.k0s()(),e.DNE(29,Vo,3,0,"ng-container",23),e.nI1(30,"async"),e.j41(31,"p-dialog",24),e.mxI("visibleChange",function(a){return e.DH7(n.displayDialog,a)||(n.displayDialog=a),a}),e.DNE(32,Bo,1,2,"p-messages",25),e.j41(33,"span",26),e.EFF(34),e.k0s(),e.j41(35,"form",27)(36,"div",28)(37,"label",29),e.EFF(38,"Name (EN)"),e.k0s(),e.j41(39,"div",30),e.nrm(40,"input",31),e.DNE(41,Xo,3,2,"div",23),e.k0s()(),e.j41(42,"div",28)(43,"label",32),e.EFF(44,"Name (AR)"),e.k0s(),e.j41(45,"div",30),e.nrm(46,"input",33),e.DNE(47,Ho,3,2,"div",23),e.k0s()(),e.j41(48,"div",28)(49,"label",34),e.EFF(50,"Status"),e.k0s(),e.j41(51,"div",30),e.nrm(52,"p-dropdown",35),e.DNE(53,Jo,3,2,"div",23),e.k0s()(),e.j41(54,"div",28)(55,"label",36),e.EFF(56,"Parent Consulting Field"),e.k0s(),e.j41(57,"div",30),e.nrm(58,"p-treeSelect",37),e.DNE(59,Wo,2,1,"div",23),e.k0s()()(),e.j41(60,"div",38)(61,"button",39),e.nI1(62,"async"),e.bIt("click",function(){return n.submit()}),e.DNE(63,Zo,3,0,"ng-container",23),e.nI1(64,"async"),e.DNE(65,er,4,2,"ng-container",23),e.nI1(66,"async"),e.k0s(),e.j41(67,"button",40),e.bIt("click",function(){return n.onCancel()}),e.EFF(68," Cancel "),e.k0s()()()),2&s&&(e.Y8G("ngIf",e.bMT(1,26,n.isLoading$)),e.R7$(8),e.Y8G("ngIf",n.isicnodes&&n.isicnodes.length>0),e.R7$(10),e.Y8G("options",n.statusOptions),e.R50("ngModel",n.selectedStatus),e.R7$(7),e.Y8G("ngIf",!1===e.bMT(26,28,n.isLoading$)&&n.isicnodes),e.R7$(2),e.Y8G("ngIf",e.bMT(28,30,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(30,32,n.isLoading$)&&0===(null==n.isicnodes?null:n.isicnodes.length)),e.R7$(2),e.Aen(e.lJ4(40,ko)),e.Y8G("header",n.isUpdate?"Edit Consulting Field":"Add Consulting Field")("modal",!0),e.R50("visible",n.displayDialog),e.R7$(),e.Y8G("ngIf",n.hasErrorMessage),e.R7$(2),e.SpI(" ",n.isUpdate?"Edit Consulting Field":"Add Consulting Field",". "),e.R7$(),e.Y8G("formGroup",n.isicForm),e.R7$(6),e.Y8G("ngIf",n.nameEn&&n.nameEn.errors&&(n.nameEn.touched||n.nameEn.dirty)),e.R7$(6),e.Y8G("ngIf",n.nameAr&&n.nameAr.errors&&(n.nameAr.touched||n.nameAr.dirty)),e.R7$(5),e.Y8G("options",e.sMw(44,So,e.lJ4(41,xo),e.lJ4(42,Io),e.lJ4(43,Ro))),e.R7$(),e.Y8G("ngIf",n.status&&n.status.errors&&(n.status.touched||n.status.dirty)),e.R7$(5),e.Y8G("options",n.parentsOnlyTreeData)("showClear",!0)("filter",!0),e.R7$(),e.Y8G("ngIf",n.parentNode&&n.parentNode.errors&&(n.parentNode.touched||n.parentNode.dirty)),e.R7$(2),e.Y8G("disabled",n.isicForm.invalid||e.bMT(62,34,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(64,36,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",e.bMT(66,38,n.isLoading$)))},dependencies:[u.YU,u.bT,h.l,f.Ei,v.m,T.z,V.ms,x.S,c.qT,c.me,c.BC,c.cb,c.vS,X.f7,P,se,ie,c.j4,c.JD,w.B,u.Jj]})}return i})();var oe=p(7673),Fe=p(2653);const nr=["tt"],ir=()=>({width:"40rem"}),sr=()=>({standalone:!0}),or=()=>({"min-width":"50rem"}),rr=()=>["data.nameEn","data.nameAr"],ar=(i,r)=>({"badge-light-success":i,"badge-light-danger":r}),lr=()=>({height:"4px"});function cr(i,r){if(1&i&&(e.j41(0,"div",41),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",t.isicnodes.length||0," ISIC Codes ")}}function dr(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",45),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function ur(i,r){1&i&&(e.j41(0,"tr"),e.nrm(1,"th"),e.j41(2,"th"),e.EFF(3,"Name (EN)"),e.k0s(),e.j41(4,"th"),e.EFF(5,"Name (AR)"),e.k0s(),e.j41(6,"th"),e.EFF(7,"Status"),e.k0s(),e.j41(8,"th"),e.EFF(9,"Actions"),e.k0s()())}function pr(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr",46)(1,"td"),e.nrm(2,"p-treeTableToggler",47),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td")(9,"div",48),e.EFF(10),e.k0s()(),e.j41(11,"td")(12,"a",49),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.editIsicCode(n))}),e.j41(13,"i",50),e.nrm(14,"span",51)(15,"span",52),e.k0s()(),e.j41(16,"a",53),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.deleteIsicCode(n))}),e.j41(17,"i",54),e.nrm(18,"span",51)(19,"span",52)(20,"span",55)(21,"span",56)(22,"span",57),e.k0s()()()()}if(2&i){const t=r.$implicit,s=r.rowData;e.Y8G("ttRow",t),e.R7$(2),e.Y8G("rowNode",t),e.R7$(),e.SpI(" ",s.code," "),e.R7$(2),e.JRh(s.nameEn),e.R7$(2),e.JRh(s.nameAr),e.R7$(2),e.Y8G("ngClass",e.l_i(7,ar,"active"===s.status,"inactive"===s.status)),e.R7$(),e.SpI(" ",s.status," ")}}function mr(i,r){if(1&i&&(e.qex(0),e.DNE(1,dr,1,2,"p-messages",23),e.j41(2,"p-treeTable",42,0),e.DNE(4,ur,10,0,"ng-template",43)(5,pr,23,10,"ng-template",44),e.k0s(),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.hasSuccessMessage),e.R7$(),e.Y8G("value",t.isicnodes)("scrollable",!0)("tableStyle",e.lJ4(5,or))("globalFilterFields",e.lJ4(6,rr))}}function gr(i,r){1&i&&e.nrm(0,"p-progressBar",58),2&i&&e.Aen(e.lJ4(2,lr))}function _r(i,r){1&i&&(e.qex(0),e.j41(1,"div",59),e.EFF(2," No Available Data "),e.k0s(),e.bVm())}function hr(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",45),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG();e.R50("value",t.messages),e.Y8G("enableService",!1)}}function fr(i,r){1&i&&(e.j41(0,"div",61),e.EFF(1," Code is required. "),e.k0s())}function br(i,r){if(1&i&&(e.j41(0,"div",61),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.code.errors.serverError," ")}}function vr(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,fr,2,0,"div",60)(2,br,2,1,"div",60),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.code.errors.required),e.R7$(),e.Y8G("ngIf",t.code.errors.serverError)}}function Cr(i,r){1&i&&(e.j41(0,"div",61),e.EFF(1," Name in English is required. "),e.k0s())}function yr(i,r){if(1&i&&(e.j41(0,"div",61),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.nameEn.errors.serverError," ")}}function Tr(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Cr,2,0,"div",60)(2,yr,2,1,"div",60),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.nameEn.errors.required),e.R7$(),e.Y8G("ngIf",t.nameEn.errors.serverError)}}function Fr(i,r){1&i&&(e.j41(0,"div",61),e.EFF(1," Name in Arabic is required. "),e.k0s())}function Er(i,r){if(1&i&&(e.j41(0,"div",61),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.nameAr.errors.serverError," ")}}function kr(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Fr,2,0,"div",60)(2,Er,2,1,"div",60),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.nameAr.errors.required),e.R7$(),e.Y8G("ngIf",t.nameAr.errors.serverError)}}function xr(i,r){1&i&&(e.j41(0,"div",61),e.EFF(1," Status is required. "),e.k0s())}function Ir(i,r){if(1&i&&(e.j41(0,"div",61),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.status.errors.serverError," ")}}function Rr(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,xr,2,0,"div",60)(2,Ir,2,1,"div",60),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.status.errors.required),e.R7$(),e.Y8G("ngIf",t.status.errors.serverError)}}function Sr(i,r){if(1&i&&(e.j41(0,"div",61),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.parentId.errors.serverError," ")}}function wr(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Sr,2,1,"div",60),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.parentId.errors.serverError)}}function jr(i,r){1&i&&(e.qex(0),e.j41(1,"span",62),e.EFF(2,"Save"),e.k0s(),e.bVm())}function Nr(i,r){1&i&&(e.qex(0),e.j41(1,"span",63),e.EFF(2," Please wait "),e.nrm(3,"span",64),e.k0s(),e.bVm()),2&i&&(e.R7$(),e.xc7("display","block"))}let Dr=(()=>{class i{cdr;isicCodesService;fb;messageService;messages=[];unsubscribe=[];isicnodes;originalIsicNodes;isicTreeData;statusOptions=[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}];isicForm;selectedParentId=0;displayDialog=!1;selectedNode;isUpdate=!1;selectedNodeId=null;isLoading$;parentKey=0;treeTable;constructor(t,s,n,o){this.cdr=t,this.isicCodesService=s,this.fb=n,this.messageService=o,this.isLoading$=this.isicCodesService.isLoading$}ngOnInit(){this.isicForm=this.fb.group({code:["",c.k0.required],nameEn:["",c.k0.required],nameAr:["",c.k0.required],status:["",c.k0.required],parentId:[0]}),this.loadIsicCodes()}loadIsicCodes(){this.isLoading$=(0,oe.of)(!0);const t=this.isicCodesService.getIsicCodesTree("en").subscribe({next:s=>{this.isicnodes=s,this.originalIsicNodes=[...s],this.isicTreeData=this.changeKeyToValue([...s]),this.isLoading$=(0,oe.of)(!1),this.cdr.detectChanges()},error:s=>{this.isLoading$=(0,oe.of)(!1),this.handleServerErrors(s)}});this.unsubscribe.push(t)}changeKeyToValue(t){return t.map(s=>{const n={...s,value:s.data.key,children:s.children?this.changeKeyToValue(s.children):[]};return delete n.key,n.data&&void 0!==n.data.key&&(n.data={...n.data,value:n.data.key},delete n.data.key),n})}showDialog(){this.displayDialog=!0,this.selectedNodeId=null,this.parentKey=0,this.selectedNode=null,this.isUpdate=!1,this.isicForm.reset()}editIsicCode(t){this.displayDialog=!0,this.selectedNodeId=t.node.data.key,this.isUpdate=!0;const s=t.node.parent?t.node.parent.key:0;this.parentKey=s,this.selectedNode=this.findNodeByValue(this.isicTreeData,this.parentKey),this.isicForm.patchValue({code:t.node.data.code,nameEn:t.node.data.nameEn,nameAr:t.node.data.nameAr,status:t.node.data.status,parentId:s})}findNodeByValue(t,s){for(const n of t){if(n.data.value===s)return n;if(n.children&&n.children.length>0){const o=this.findNodeByValue(n.children,s);if(o)return o}}return null}handleServerErrors(t){if(this.messages=[],t.error&&t.error.errors){const s=t.error.errors,n={code:"code","name.en":"nameEn","name.ar":"nameAr",status:"status",parent_id:"parentId"};for(const o in s)if(s.hasOwnProperty(o)){const a=s[o],l=n[o];if(l){const d=this.isicForm.get(l);d&&(d.setErrors({serverError:a[0]}),d.markAsTouched())}else this.messages.push({severity:"error",summary:"",detail:a.join(", ")})}}else this.messages.push({severity:"error",summary:"Error",detail:"An unexpected error occurred."})}get code(){return this.isicForm.get("code")}get nameEn(){return this.isicForm.get("nameEn")}get nameAr(){return this.isicForm.get("nameAr")}get status(){return this.isicForm.get("status")}get parentId(){return this.isicForm.get("parentId")}submit(){if(this.messages=[],this.isicForm.invalid)return void this.isicForm.markAllAsTouched();const t=this.isicForm.value,s={code:t.code,name:{en:t.nameEn,ar:t.nameAr},status:t.status,parent_id:this.selectedNode?this.selectedNode.value:0};if(this.isUpdate&&null!==this.selectedNodeId){const n=this.isicCodesService.updateIsicCode(this.selectedNodeId,s).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"ISIC Code updated successfully."}),this.loadIsicCodes(),this.displayDialog=!1,this.parentKey=0,this.selectedNode=null,this.isicForm.reset()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}else{const n=this.isicCodesService.createIsicCode(s).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"ISIC Code created successfully."}),this.loadIsicCodes(),this.displayDialog=!1,this.parentKey=0,this.selectedNode=null,this.isicForm.reset()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}}deleteIsicCode(t){const s=t.node.data.key;b().fire({title:"Are you sure?",text:"Do you want to delete this ISIC Code? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(n=>{if(n.isConfirmed){const o=this.isicCodesService.deleteIsicCode(s).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"ISIC Code deleted successfully."}),this.loadIsicCodes()},error:a=>{this.handleServerErrors(a)}});this.unsubscribe.push(o)}})}applyFilter(t){const s=t.target.value.trim().toLowerCase();if(!s)return this.isicnodes=[...this.originalIsicNodes],void this.cdr.detectChanges();const n=this.filterNodes([...this.originalIsicNodes],s);this.isicnodes=n,this.cdr.detectChanges()}filterNodes(t,s){if(!t)return[];const n=[];for(const o of t){const a=o.data?.nameEn?.toLowerCase()||"",l=o.data?.nameAr?.toLowerCase()||"",d=a.includes(s)||l.includes(s),_=this.filterNodes(o.children||[],s);if(d||_.length>0){const C={...o};_.length>0&&(C.children=_),n.push(C)}}return n}onCancel(){this.displayDialog=!1,this.parentKey=0,this.selectedNode=null,this.isicForm.reset()}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}get hasSuccessMessage(){return this.messages.some(t=>"success"===t.severity)}get hasErrorMessage(){return this.messages.some(t=>"error"===t.severity)}static \u0275fac=function(s){return new(s||i)(e.rXU(e.gRc),e.rXU(Fe.O),e.rXU(c.ok),e.rXU(f.bg))};static \u0275cmp=e.VBU({type:i,selectors:[["app-isic-code-managment"]],viewQuery:function(s,n){if(1&s&&e.GBs(nr,5),2&s){let o;e.mGM(o=e.lsd())&&(n.treeTable=o.first)}},decls:71,vars:40,consts:[["tt",""],["id","kt_app_toolbar",1,"app-toolbar","pt-10","mb-0"],["id","kt_app_toolbar_container",1,"app-container","container-fluid","d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","flex-column","justify-content-center","gap-1","me-3"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],["class","fw-semibold fs-7 my-0 text-muted",4,"ngIf"],["id","kt_app_content",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-fluid"],[1,"card"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"pi","pi-search","fs-3","position-absolute","ms-5"],["type","text","pInputText","","placeholder","Search ISIC Code",1,"form-control","w-250px","ps-12",3,"input"],[1,"card-tooltip"],[1,"d-flex","align-items-center","gap-2","gap-lg-3"],[1,"btn","btn-md","btn-flex","btn-primary",3,"click"],[1,"ki-outline","ki-plus","text-white","fs-4"],[1,"card-body","pt-0"],[4,"ngIf"],["mode","indeterminate",3,"style",4,"ngIf"],["appendTo","body",3,"visibleChange","header","modal","visible"],[3,"value","enableService","valueChange",4,"ngIf"],[1,"text-muted","mb-3","d-block"],[3,"formGroup"],[1,"mb-3","row"],["for","code",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["pInputText","","id","code","formControlName","code","autocomplete","off",1,"form-control"],["for","nameEn",1,"col-sm-3","col-form-label"],["pInputText","","id","nameEn","formControlName","nameEn","autocomplete","off",1,"form-control"],["for","nameAr",1,"col-sm-3","col-form-label"],["pInputText","","id","nameAr","formControlName","nameAr","autocomplete","off",1,"form-control"],["for","status",1,"col-sm-3","col-form-label"],["appendTo","body","id","status","formControlName","status","placeholder","Select Status",1,"w-100",3,"options"],["for","parentId",1,"col-sm-3","col-form-label"],["appendTo","body","id","parentId","placeholder","Select Parent","optionLabel","label","optionValue","value","filterBy","label",1,"w-100",3,"ngModelChange","options","ngModel","ngModelOptions","showClear","filter"],[1,"d-flex","justify-content-end","gap-2"],["type","submit",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"fw-semibold","fs-7","my-0","text-muted"],[3,"value","scrollable","tableStyle","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],[3,"valueChange","value","enableService"],[3,"ttRow"],[3,"rowNode"],[1,"badge",3,"ngClass"],["pTooltip","Edit ISIC Code","tooltipPosition","top",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"ki-duotone","ki-pencil","fs-2"],[1,"path1"],[1,"path2"],["pTooltip","Delete ISIC Code","tooltipPosition","top",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"ki-duotone","ki-trash","fs-2"],[1,"path3"],[1,"path4"],[1,"path5"],["mode","indeterminate"],[1,"d-flex","align-items-center","justify-content-center","h-400px","text-muted"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(s,n){1&s&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h1",5),e.EFF(5," ISIC Codes "),e.k0s(),e.DNE(6,cr,2,1,"div",6),e.k0s()()()(),e.j41(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12),e.nrm(13,"i",13),e.j41(14,"input",14),e.bIt("input",function(a){return n.applyFilter(a)}),e.k0s()()(),e.j41(15,"div",15)(16,"div",16)(17,"a",17),e.bIt("click",function(){return n.showDialog()}),e.nrm(18,"i",18),e.EFF(19," Create "),e.k0s()()()(),e.j41(20,"div",19),e.DNE(21,mr,6,7,"ng-container",20),e.nI1(22,"async"),e.k0s()(),e.DNE(23,gr,1,3,"p-progressBar",21),e.nI1(24,"async"),e.k0s()(),e.DNE(25,_r,3,0,"ng-container",20),e.nI1(26,"async"),e.j41(27,"p-dialog",22),e.mxI("visibleChange",function(a){return e.DH7(n.displayDialog,a)||(n.displayDialog=a),a}),e.DNE(28,hr,1,2,"p-messages",23),e.j41(29,"span",24),e.EFF(30),e.k0s(),e.j41(31,"form",25)(32,"div",26)(33,"label",27),e.EFF(34,"Code"),e.k0s(),e.j41(35,"div",28),e.nrm(36,"input",29),e.DNE(37,vr,3,2,"div",20),e.k0s()(),e.j41(38,"div",26)(39,"label",30),e.EFF(40,"Name (EN)"),e.k0s(),e.j41(41,"div",28),e.nrm(42,"input",31),e.DNE(43,Tr,3,2,"div",20),e.k0s()(),e.j41(44,"div",26)(45,"label",32),e.EFF(46,"Name (AR)"),e.k0s(),e.j41(47,"div",28),e.nrm(48,"input",33),e.DNE(49,kr,3,2,"div",20),e.k0s()(),e.j41(50,"div",26)(51,"label",34),e.EFF(52,"Status"),e.k0s(),e.j41(53,"div",28),e.nrm(54,"p-dropdown",35),e.DNE(55,Rr,3,2,"div",20),e.k0s()(),e.j41(56,"div",26)(57,"label",36),e.EFF(58,"Parent ISIC Code"),e.k0s(),e.j41(59,"div",28)(60,"p-treeSelect",37),e.mxI("ngModelChange",function(a){return e.DH7(n.selectedNode,a)||(n.selectedNode=a),a}),e.k0s(),e.DNE(61,wr,2,1,"div",20),e.k0s()()(),e.j41(62,"div",38)(63,"button",39),e.nI1(64,"async"),e.bIt("click",function(){return n.submit()}),e.DNE(65,jr,3,0,"ng-container",20),e.nI1(66,"async"),e.DNE(67,Nr,4,2,"ng-container",20),e.nI1(68,"async"),e.k0s(),e.j41(69,"button",40),e.bIt("click",function(){return n.onCancel()}),e.EFF(70," Cancel "),e.k0s()()()),2&s&&(e.R7$(6),e.Y8G("ngIf",n.isicnodes&&n.isicnodes.length>0),e.R7$(15),e.Y8G("ngIf",!1===e.bMT(22,26,n.isLoading$)&&n.isicnodes),e.R7$(2),e.Y8G("ngIf",e.bMT(24,28,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(26,30,n.isLoading$)&&0===(null==n.isicnodes?null:n.isicnodes.length)),e.R7$(2),e.Aen(e.lJ4(38,ir)),e.Y8G("header",n.isUpdate?"Edit ISIC Code":"Add ISIC Code")("modal",!0),e.R50("visible",n.displayDialog),e.R7$(),e.Y8G("ngIf",n.hasErrorMessage),e.R7$(2),e.SpI(" ",n.isUpdate?"Edit ISIC Code Details":"Add ISIC Code Details",". "),e.R7$(),e.Y8G("formGroup",n.isicForm),e.R7$(6),e.Y8G("ngIf",n.code&&n.code.errors&&(n.code.touched||n.code.dirty)),e.R7$(6),e.Y8G("ngIf",n.nameEn&&n.nameEn.errors&&(n.nameEn.touched||n.nameEn.dirty)),e.R7$(6),e.Y8G("ngIf",n.nameAr&&n.nameAr.errors&&(n.nameAr.touched||n.nameAr.dirty)),e.R7$(5),e.Y8G("options",n.statusOptions),e.R7$(),e.Y8G("ngIf",n.status&&n.status.errors&&(n.status.touched||n.status.dirty)),e.R7$(5),e.Y8G("options",n.isicTreeData),e.R50("ngModel",n.selectedNode),e.Y8G("ngModelOptions",e.lJ4(39,sr))("showClear",!0)("filter",!0),e.R7$(),e.Y8G("ngIf",n.parentId&&n.parentId.errors&&(n.parentId.touched||n.parentId.dirty)),e.R7$(2),e.Y8G("disabled",n.isicForm.invalid||e.bMT(64,32,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(66,34,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",e.bMT(68,36,n.isLoading$)))},dependencies:[u.YU,u.bT,h.l,f.Ei,v.m,T.z,V.ms,x.S,c.qT,c.me,c.BC,c.cb,c.vS,X.f7,P,se,ie,c.j4,c.JD,w.B,u.Jj],changeDetection:0})}return i})();var Gr=p(8696),Ee=p(6296);const qr=["dt"],$r=()=>({height:"4px"}),Mr=()=>({height:"36px","min-width":"120px",border:"1px solid #cbd5e1","border-radius":"6px"}),Lr=()=>({width:"40rem"}),Ar=()=>({label:"Active",value:"active"}),Vr=()=>({label:"Inactive",value:"inactive"}),Br=()=>({label:"Suggestion",value:"suggestion"}),Yr=(i,r,t)=>[i,r,t],Pr=()=>({standalone:!0}),Xr=()=>["names.en","names.ar","status"],Or=()=>({width:"100%"}),zr=(i,r)=>({"background-color":i,color:r});function Hr(i,r){1&i&&e.nrm(0,"p-progressBar",4),2&i&&e.Aen(e.lJ4(2,$r))}function Ur(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",40),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function Kr(i,r){1&i&&(e.j41(0,"div",41),e.EFF(1," English Name is required. "),e.k0s())}function Jr(i,r){if(1&i&&(e.j41(0,"div",41),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",null==t.englishName||null==t.englishName.errors?null:t.englishName.errors.serverError," ")}}function Qr(i,r){1&i&&(e.j41(0,"div",41),e.EFF(1," Arabic Name is required. "),e.k0s())}function Wr(i,r){if(1&i&&(e.j41(0,"div",41),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",null==t.arabicName||null==t.arabicName.errors?null:t.arabicName.errors.serverError," ")}}function Zr(i,r){1&i&&(e.j41(0,"div",41),e.EFF(1," Status is required. "),e.k0s())}function ea(i,r){if(1&i&&(e.j41(0,"div",41),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",null==t.status||null==t.status.errors?null:t.status.errors.serverError," ")}}function ta(i,r){if(1&i&&(e.j41(0,"div",41),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",null==t.industries||null==t.industries.errors?null:t.industries.errors.serverError," ")}}function na(i,r){if(1&i&&(e.qex(0),e.j41(1,"span",42),e.EFF(2),e.k0s(),e.bVm()),2&i){const t=e.XpG(2);e.R7$(2),e.JRh(t.isEditMode?"Update":"Create")}}function ia(i,r){1&i&&(e.qex(0),e.j41(1,"span",43),e.EFF(2," Please wait "),e.nrm(3,"span",44),e.k0s(),e.bVm())}function sa(i,r){1&i&&(e.j41(0,"tr")(1,"th",49),e.EFF(2,"Name (English)"),e.k0s(),e.j41(3,"th",49),e.EFF(4,"Name (Arabic)"),e.k0s(),e.j41(5,"th",50),e.EFF(6,"Status"),e.k0s(),e.j41(7,"th",51),e.EFF(8,"Associated Industries"),e.k0s(),e.nrm(9,"th",52),e.k0s())}function oa(i,r){if(1&i&&(e.j41(0,"span",63),e.EFF(1),e.k0s()),2&i){const t=r.$implicit;e.R7$(),e.SpI(" ",t," ")}}function ra(i,r){if(1&i&&(e.j41(0,"span",64),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2).$implicit;e.Y8G("pTooltip",t.industryNames.slice(3).join(", ")),e.R7$(),e.SpI(" +",t.industryNames.length-3," more ")}}function aa(i,r){if(1&i&&(e.j41(0,"div",60),e.DNE(1,oa,2,1,"span",61)(2,ra,2,2,"span",62),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngForOf",t.industryNames.slice(0,3)),e.R7$(),e.Y8G("ngIf",t.industryNames.length>3)}}function la(i,r){1&i&&(e.j41(0,"span",65),e.EFF(1,"No industries assigned"),e.k0s())}function ca(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"span",53),e.EFF(3),e.k0s()(),e.j41(4,"td")(5,"span",54),e.EFF(6),e.k0s()(),e.j41(7,"td")(8,"span",55),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.DNE(11,aa,3,2,"div",56)(12,la,2,0,"ng-template",null,1,e.C5r),e.k0s(),e.j41(14,"td")(15,"div",57)(16,"button",58),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(3);return e.Njj(o.editTag(n))}),e.k0s(),e.j41(17,"button",59),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(3);return e.Njj(o.deleteTag(n.id))}),e.k0s()()()()}if(2&i){const t=r.$implicit,s=e.sdS(13);e.R7$(3),e.JRh(t.names.en),e.R7$(3),e.JRh(t.names.ar),e.R7$(2),e.Y8G("ngStyle",e.l_i(6,zr,"active"===t.status?"#d1eddb":"inactive"===t.status?"#f8d7da":"#fff3cd","active"===t.status?"#155724":"inactive"===t.status?"#721c24":"#856404")),e.R7$(),e.SpI(" ",t.status," "),e.R7$(2),e.Y8G("ngIf",t.industryNames.length>0)("ngIfElse",s)}}function da(i,r){1&i&&(e.j41(0,"tr")(1,"td",66)(2,"div",67),e.nrm(3,"i",68),e.j41(4,"div",69),e.EFF(5,"No tags found"),e.k0s(),e.j41(6,"div",70),e.EFF(7,"No tags match your search criteria."),e.k0s()()()())}function ua(i,r){if(1&i&&(e.qex(0),e.j41(1,"p-table",45,0),e.nI1(3,"async"),e.DNE(4,sa,10,0,"ng-template",46)(5,ca,18,9,"ng-template",47)(6,da,8,0,"ng-template",48),e.k0s(),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("value",t.tagsWithIndustries)("paginator",!0)("rows",10)("loading",e.bMT(3,7,t.isLoading$))("globalFilterFields",e.lJ4(9,Xr))("rowHover",!0)("tableStyle",e.lJ4(10,Or))}}function pa(i,r){1&i&&(e.qex(0),e.j41(1,"div",67),e.nrm(2,"i",68),e.j41(3,"div",69),e.EFF(4,"No tags available"),e.k0s(),e.j41(5,"div",70),e.EFF(6,"No tags have been created yet."),e.k0s()(),e.bVm())}function ma(i,r){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"h1",9),e.EFF(6," Tags "),e.k0s(),e.j41(7,"div",10),e.EFF(8),e.k0s()(),e.j41(9,"div",11)(10,"div",12),e.nrm(11,"i",13),e.j41(12,"input",14),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.searchKeyword,n)||(o.searchKeyword=n),e.Njj(n)}),e.bIt("keyup.enter",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onSearch())}),e.k0s()(),e.j41(13,"p-dropdown",15),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.statusFilter,n)||(o.statusFilter=n),e.Njj(n)}),e.bIt("onChange",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onStatusFilterChange())}),e.k0s(),e.j41(14,"button",16),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showDialog())}),e.nrm(15,"i",17),e.j41(16,"span",18),e.EFF(17,"Create"),e.k0s()()()()()(),e.j41(18,"p-dialog",19),e.mxI("visibleChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.visible,n)||(o.visible=n),e.Njj(n)}),e.DNE(19,Ur,1,2,"p-messages",20),e.j41(20,"span",21),e.EFF(21),e.k0s(),e.j41(22,"form",22),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.submit())}),e.j41(23,"div",23)(24,"label",24),e.EFF(25,"English Name "),e.j41(26,"span",25),e.EFF(27,"*"),e.k0s()(),e.j41(28,"div",26),e.nrm(29,"input",27),e.DNE(30,Kr,2,0,"div",28)(31,Jr,2,1,"div",28),e.k0s()(),e.j41(32,"div",23)(33,"label",29),e.EFF(34,"Arabic Name "),e.j41(35,"span",25),e.EFF(36,"*"),e.k0s()(),e.j41(37,"div",26),e.nrm(38,"input",30),e.DNE(39,Qr,2,0,"div",28)(40,Wr,2,1,"div",28),e.k0s()(),e.j41(41,"div",23)(42,"label",31),e.EFF(43,"Status "),e.j41(44,"span",25),e.EFF(45,"*"),e.k0s()(),e.j41(46,"div",26),e.nrm(47,"p-dropdown",32),e.DNE(48,Zr,2,0,"div",28)(49,ea,2,1,"div",28),e.k0s()(),e.j41(50,"div",23)(51,"label",33),e.EFF(52,"Industries"),e.k0s(),e.j41(53,"div",26)(54,"p-multiSelect",34),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.selectedIndustries,n)||(o.selectedIndustries=n),e.Njj(n)}),e.k0s(),e.DNE(55,ta,2,1,"div",28),e.k0s()()(),e.j41(56,"div",35)(57,"button",36),e.nI1(58,"async"),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.submit())}),e.DNE(59,na,3,1,"ng-container",3),e.nI1(60,"async"),e.DNE(61,ia,4,0,"ng-container",3),e.nI1(62,"async"),e.k0s(),e.j41(63,"button",37),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onCancel())}),e.EFF(64," Cancel "),e.k0s()()(),e.j41(65,"div",38)(66,"div",39),e.DNE(67,ua,7,11,"ng-container",3),e.nI1(68,"async"),e.DNE(69,pa,7,0,"ng-container",3),e.nI1(70,"async"),e.k0s()(),e.bVm()}if(2&i){const t=e.XpG();e.R7$(8),e.SpI("",(null==t.paginationData?null:t.paginationData.totalRecords)||0," Tags"),e.R7$(4),e.R50("ngModel",t.searchKeyword),e.R7$(),e.Aen(e.lJ4(43,Mr)),e.R50("ngModel",t.statusFilter),e.Y8G("options",t.statusOptions),e.R7$(5),e.Aen(e.lJ4(44,Lr)),e.Y8G("header",t.isEditMode?"Edit Tag":"Add Tag")("modal",!0),e.R50("visible",t.visible),e.R7$(),e.Y8G("ngIf",t.hasErrorMessage),e.R7$(2),e.SpI(" ",t.isEditMode?"Edit Tag Details":"Add Tag Details",". "),e.R7$(),e.Y8G("formGroup",t.tagForm),e.R7$(8),e.Y8G("ngIf",(null==t.englishName||null==t.englishName.errors?null:t.englishName.errors.required)&&(null==t.englishName?null:t.englishName.touched)),e.R7$(),e.Y8G("ngIf",null==t.englishName||null==t.englishName.errors?null:t.englishName.errors.serverError),e.R7$(8),e.Y8G("ngIf",(null==t.arabicName||null==t.arabicName.errors?null:t.arabicName.errors.required)&&(null==t.arabicName?null:t.arabicName.touched)),e.R7$(),e.Y8G("ngIf",null==t.arabicName||null==t.arabicName.errors?null:t.arabicName.errors.serverError),e.R7$(7),e.Y8G("options",e.sMw(48,Yr,e.lJ4(45,Ar),e.lJ4(46,Vr),e.lJ4(47,Br))),e.R7$(),e.Y8G("ngIf",(null==t.status||null==t.status.errors?null:t.status.errors.required)&&(null==t.status?null:t.status.touched)),e.R7$(),e.Y8G("ngIf",null==t.status||null==t.status.errors?null:t.status.errors.serverError),e.R7$(5),e.R50("ngModel",t.selectedIndustries),e.Y8G("ngModelOptions",e.lJ4(52,Pr))("options",t.industriesList)("showToggleAll",!0)("filter",!0)("maxSelectedLabels",3),e.R7$(),e.Y8G("ngIf",null==t.industries||null==t.industries.errors?null:t.industries.errors.serverError),e.R7$(2),e.Y8G("disabled",t.tagForm.invalid||e.bMT(58,33,t.isLoading$)),e.R7$(2),e.Y8G("ngIf",!e.bMT(60,35,t.isLoading$)),e.R7$(2),e.Y8G("ngIf",e.bMT(62,37,t.isLoading$)),e.R7$(6),e.Y8G("ngIf",!1===e.bMT(68,39,t.isLoading$)&&t.tagsWithIndustries.length>0),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(70,41,t.isLoading$)&&0===t.tagsWithIndustries.length)}}let ga=(()=>{class i{_tags;cdr;fb;messageService;messages=[];unsubscribe=[];tagsWithIndustries=[];industriesList=[];paginationData;isLoading$;isEditMode=!1;selectedTagId=null;visible=!1;tagForm;currentPage=1;searchKeyword="";statusFilter="";statusOptions=[{label:"All Statuses",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Suggestion",value:"suggestion"}];selectedIndustries=[];table;Math=Math;constructor(t,s,n,o){this._tags=t,this.cdr=s,this.fb=n,this.messageService=o,this.isLoading$=this._tags.isLoading$}ngOnInit(){this.initializeForm(),this.loadIndustries()}initializeForm(){this.tagForm=this.fb.group({englishName:["",c.k0.required],arabicName:["",c.k0.required],status:["active",c.k0.required],industries:[[]]})}loadIndustries(){const t=this._tags.getIndustriesList().subscribe({next:s=>{this.industriesList=s.data,this.loadTags()},error:s=>{this.handleError(s,"Failed to load industries")}});this.unsubscribe.push(t)}loadTags(){if(!this.industriesList||0===this.industriesList.length)return void console.warn("Industries not loaded yet, skipping tags load");const t=this._tags.getAdminTags(this.currentPage,this.searchKeyword,this.statusFilter).subscribe({next:s=>{this.tagsWithIndustries=s.data.map(n=>({...n,industryNames:this.getIndustryNamesByIds(n.industries)})),this.paginationData={currentPage:s.meta.current_page,totalPages:s.meta.last_page,totalRecords:s.meta.total,perPage:s.meta.per_page},this.cdr.detectChanges()},error:s=>{this.handleError(s,"Failed to load tags")}});this.unsubscribe.push(t)}getIndustryNamesByIds(t){return t.map(s=>{const n=this.industriesList.find(o=>o.id===s);return n?n.name:`Unknown (ID: ${s})`})}onSearch(){this.currentPage=1,this.ensureIndustriesLoadedThenLoadTags()}onStatusFilterChange(){this.currentPage=1,this.ensureIndustriesLoadedThenLoadTags()}ensureIndustriesLoadedThenLoadTags(){this.industriesList&&0!==this.industriesList.length?this.loadTags():this.loadIndustries()}onPageChange(t){this.currentPage=t.page+1,this.ensureIndustriesLoadedThenLoadTags()}showDialog(){this.visible=!0,this.selectedTagId=null,this.isEditMode=!1,this.selectedIndustries=[],this.tagForm.reset({status:"active",industries:[]}),this.clearMessages()}editTag(t){this.visible=!0,this.selectedTagId=t.id,this.isEditMode=!0,this.selectedIndustries=this.industriesList.filter(s=>t.industries.includes(s.id)),this.tagForm.patchValue({englishName:t.names.en,arabicName:t.names.ar,status:t.status,industries:this.selectedIndustries}),this.clearMessages()}onCancel(){this.visible=!1,this.selectedIndustries=[],this.tagForm.reset({status:"active",industries:[]}),this.clearMessages()}submit(){if(this.clearMessages(),this.tagForm.invalid)return void this.tagForm.markAllAsTouched();const t=this.tagForm.value,s={name:{en:t.englishName.trim(),ar:t.arabicName.trim()},status:t.status,industries:this.selectedIndustries.map(n=>n.id)};this.selectedTagId?this.updateTag(s):this.createTag(s)}createTag(t){const s=this._tags.createTag(t).subscribe({next:n=>{this.messageService.add({severity:"success",summary:"Success",detail:"Tag created successfully."}),this.ensureIndustriesLoadedThenLoadTags(),this.onCancel()},error:n=>{this.handleServerErrors(n)}});this.unsubscribe.push(s)}updateTag(t){const s=this._tags.updateTag(this.selectedTagId,t).subscribe({next:n=>{this.messageService.add({severity:"success",summary:"Success",detail:"Tag updated successfully."}),this.ensureIndustriesLoadedThenLoadTags(),this.onCancel()},error:n=>{this.handleServerErrors(n)}});this.unsubscribe.push(s)}deleteTag(t){b().fire({title:"Are you sure?",text:"Do you want to delete this tag? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(s=>{if(s.isConfirmed){const n=this._tags.deleteTag(t).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:"Tag deleted successfully."}),this.ensureIndustriesLoadedThenLoadTags()},error:o=>{this.handleError(o,"Failed to delete tag")}});this.unsubscribe.push(n)}})}handleError(t,s){this.messages=[{severity:"error",summary:"Error",detail:t?.error?.message||s}]}handleServerErrors(t){if(t.error&&t.error.errors){const s=t.error.errors,n={"name.en":"englishName","name.ar":"arabicName",status:"status",industries:"industries"};for(const o in s)if(s.hasOwnProperty(o)){const a=s[o],l=n[o];if(l){const d=this.tagForm.get(l);d&&(d.setErrors({serverError:a[0]}),d.markAsTouched())}else this.messages.push({severity:"error",summary:"Error",detail:a.join(", ")})}}else this.handleError(t,"An unexpected error occurred")}clearMessages(){this.messages=[]}get englishName(){return this.tagForm.get("englishName")}get arabicName(){return this.tagForm.get("arabicName")}get status(){return this.tagForm.get("status")}get industries(){return this.tagForm.get("industries")}get hasErrorMessage(){return this.messages.some(t=>"error"===t.severity)}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}static \u0275fac=function(s){return new(s||i)(e.rXU(Gr.D),e.rXU(e.gRc),e.rXU(c.ok),e.rXU(f.bg))};static \u0275cmp=e.VBU({type:i,selectors:[["app-tags"]],viewQuery:function(s,n){if(1&s&&e.GBs(qr,5),2&s){let o;e.mGM(o=e.lsd())&&(n.table=o.first)}},decls:4,vars:6,consts:[["dt",""],["noIndustries",""],["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],["id","kt_app_toolbar",1,"app-toolbar","pt-10","px-10","pb-0","mb-0"],["id","kt_app_toolbar_container",1,"app-container","container-fluid","d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","flex-column","justify-content-center","gap-1","me-3"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],[1,"fw-semibold","fs-7","my-0","text-muted"],[1,"d-flex","align-items-center","gap-3"],[1,"d-flex","align-items-center","position-relative"],[1,"pi","pi-search","position-absolute","ms-3",2,"font-size","14px","color","#6c757d"],["type","text","pInputText","","placeholder","Search",1,"form-control","ps-10",2,"width","240px","height","36px","border","1px solid #cbd5e1","border-radius","6px",3,"ngModelChange","keyup.enter","ngModel"],["appendTo","body","id","statusFilter","optionLabel","label","optionValue","value","placeholder","Status",3,"ngModelChange","onChange","ngModel","options"],[1,"btn","btn-sm","d-flex","align-items-center",2,"background","white","border","1px solid #cbd5e1","border-radius","6px","padding","6px 12px","height","36px","white-space","nowrap",3,"click"],[1,"ki-outline","ki-plus","fs-5",2,"color","#3b82f6"],[1,"ms-1",2,"font-size","13px","font-weight","500","color","#374151"],["appendTo","body",3,"visibleChange","header","modal","visible"],[3,"value","enableService","valueChange",4,"ngIf"],[1,"text-muted","mb-3","d-block"],[3,"ngSubmit","formGroup"],[1,"mb-3","row"],["for","englishName",1,"col-sm-3","col-form-label"],[1,"text-danger"],[1,"col-sm-9"],["pInputText","","id","englishName","formControlName","englishName","autocomplete","off","placeholder","Enter English name",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],["for","arabicName",1,"col-sm-3","col-form-label"],["pInputText","","id","arabicName","formControlName","arabicName","autocomplete","off","placeholder","Enter Arabic name",1,"form-control"],["for","status",1,"col-sm-3","col-form-label"],["id","status","formControlName","status","optionLabel","label","optionValue","value","placeholder","Select Status","styleClass","w-100",3,"options"],["for","industries",1,"col-sm-3","col-form-label"],["id","industries","optionLabel","name","appendTo","body","placeholder","Select Industries","filterPlaceholder","Search industries...","styleClass","w-100","selectedItemsLabel","{0} industries selected",3,"ngModelChange","ngModel","ngModelOptions","options","showToggleAll","filter","maxSelectedLabels"],[1,"d-flex","justify-content-end","gap-2","mt-4"],["type","button",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],["id","kt_app_content",1,"app-content","px-10","pb-10","pt-5","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-fluid"],[3,"valueChange","value","enableService"],[1,"text-danger","mt-1"],[1,"indicator-label"],[1,"indicator-progress",2,"display","block"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],["responsiveLayout","scroll",3,"value","paginator","rows","loading","globalFilterFields","rowHover","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","20%"],[2,"width","12%"],[2,"width","33%"],[2,"width","15%"],[1,"text-gray-800","fw-semibold"],[1,"text-gray-700"],[1,"px-3","py-1","rounded","fw-semibold",2,"font-size","12px",3,"ngStyle"],["class","d-flex flex-wrap gap-1",4,"ngIf","ngIfElse"],[1,"d-flex","justify-content-end","gap-1"],["pButton","","icon","pi pi-pencil","pTooltip","Edit","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"width","28px","height","28px","background","#3b82f6","color","white","border-radius","6px",3,"click"],["pButton","","icon","pi pi-trash","pTooltip","Delete","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"width","28px","height","28px","background","#ef4444","color","white","border-radius","6px",3,"click"],[1,"d-flex","flex-wrap","gap-1"],["class","badge badge-light-primary fs-8 fw-semibold",4,"ngFor","ngForOf"],["class","badge badge-light fs-8 fw-semibold","tooltipPosition","top",3,"pTooltip",4,"ngIf"],[1,"badge","badge-light-primary","fs-8","fw-semibold"],["tooltipPosition","top",1,"badge","badge-light","fs-8","fw-semibold",3,"pTooltip"],[1,"text-gray-500",2,"font-size","13px"],["colspan","5"],[1,"d-flex","flex-column","align-items-center","justify-content-center","py-8"],[1,"pi","pi-inbox","text-gray-400","mb-2",2,"font-size","48px"],[1,"text-gray-600","fw-semibold"],[1,"text-gray-500",2,"font-size","14px"]],template:function(s,n){1&s&&(e.DNE(0,Hr,1,3,"p-progressBar",2),e.nI1(1,"async"),e.DNE(2,ma,71,53,"ng-container",3),e.nI1(3,"async")),2&s&&(e.Y8G("ngIf",e.bMT(1,2,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!e.bMT(3,4,n.isLoading$)))},dependencies:[u.Sq,u.bT,u.B3,h.l,f.Ei,g._f,v.m,T.z,V.ms,x.S,c.qT,c.me,c.BC,c.cb,c.vS,c.j4,c.JD,w.B,$.XI,Ee.KF,u.Jj],styles:[".p-datatable{border:1px solid #cbd5e1;border-radius:.75rem;overflow:hidden}  .p-datatable .p-datatable-table{border:none}  .p-datatable .p-datatable-thead>tr>th{background:transparent;border-bottom:1px solid #cbd5e1;padding:.5rem 1rem;font-weight:700;color:#a1a5b7;font-size:.75rem;text-transform:uppercase;letter-spacing:.05em}  .p-datatable .p-datatable-tbody>tr>td{border-bottom:1px solid #cbd5e1;padding:.7rem 1rem;font-size:.875rem;color:#5e6278;font-weight:600}  .p-datatable .p-datatable-tbody>tr:hover{background-color:#f8f9fa}  .p-datatable .p-datatable-tbody>tr:last-child>td{border-bottom:none}"]})}return i})();var _a=p(4776);const ha=["dt"],fa=()=>({width:"40rem"}),ba=()=>({standalone:!0}),va=()=>({height:"4px"}),Ca=()=>["name","names.en","names.ar","code","status"],ya=(i,r)=>({"badge-light-success":i,"badge-light-danger":r});function Ta(i,r){1&i&&e.nrm(0,"p-progressBar",41),2&i&&e.Aen(e.lJ4(2,va))}function Fa(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",42),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG();e.R50("value",t.messages),e.Y8G("enableService",!1)}}function Ea(i,r){1&i&&(e.j41(0,"div",44),e.EFF(1," Code is required. "),e.k0s())}function ka(i,r){if(1&i&&(e.j41(0,"div",44),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.code.errors.serverError," ")}}function xa(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Ea,2,0,"div",43)(2,ka,2,1,"div",43),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.code.errors.required),e.R7$(),e.Y8G("ngIf",t.code.errors.serverError)}}function Ia(i,r){1&i&&(e.j41(0,"div",44),e.EFF(1," Arabic Name is required. "),e.k0s())}function Ra(i,r){if(1&i&&(e.j41(0,"div",44),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.arabicName.errors.serverError," ")}}function Sa(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Ia,2,0,"div",43)(2,Ra,2,1,"div",43),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.arabicName.errors.required),e.R7$(),e.Y8G("ngIf",t.arabicName.errors.serverError)}}function wa(i,r){1&i&&(e.j41(0,"div",44),e.EFF(1," English Name is required. "),e.k0s())}function ja(i,r){if(1&i&&(e.j41(0,"div",44),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.englishName.errors.serverError," ")}}function Na(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,wa,2,0,"div",43)(2,ja,2,1,"div",43),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.englishName.errors.required),e.R7$(),e.Y8G("ngIf",t.englishName.errors.serverError)}}function Da(i,r){1&i&&(e.j41(0,"div",44),e.EFF(1," Status is required. "),e.k0s())}function Ga(i,r){if(1&i&&(e.j41(0,"div",44),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.status.errors.serverError," ")}}function qa(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Da,2,0,"div",43)(2,Ga,2,1,"div",43),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.status.errors.required),e.R7$(),e.Y8G("ngIf",t.status.errors.serverError)}}function $a(i,r){1&i&&(e.qex(0),e.j41(1,"span",45),e.EFF(2,"Save"),e.k0s(),e.bVm())}function Ma(i,r){1&i&&(e.qex(0),e.j41(1,"span",46),e.EFF(2," Please wait "),e.nrm(3,"span",47),e.k0s(),e.bVm()),2&i&&(e.R7$(),e.xc7("display","block"))}function La(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",42),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function Aa(i,r){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Code"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Name (English)"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Name (Arabic)"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Status"),e.k0s(),e.j41(9,"th",51),e.EFF(10,"Action"),e.k0s()())}function Va(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"div",52),e.EFF(9),e.k0s()(),e.j41(10,"td")(11,"a",53),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.editHSCode(n))}),e.j41(12,"i",54),e.nrm(13,"span",55)(14,"span",56),e.k0s()(),e.j41(15,"a",57),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.deleteHSCode(n.id))}),e.j41(16,"i",58),e.nrm(17,"span",55)(18,"span",56)(19,"span",59)(20,"span",60)(21,"span",61),e.k0s()()()()}if(2&i){const t=r.$implicit;e.R7$(2),e.JRh(t.code),e.R7$(2),e.JRh(t.names.en),e.R7$(2),e.JRh(t.names.ar),e.R7$(2),e.Y8G("ngClass",e.l_i(5,ya,"active"===t.status,"inactive"===t.status)),e.R7$(),e.SpI(" ",t.status," ")}}function Ba(i,r){if(1&i&&(e.qex(0),e.DNE(1,La,1,2,"p-messages",10),e.j41(2,"p-table",48,0),e.DNE(4,Aa,11,0,"ng-template",49)(5,Va,22,8,"ng-template",50),e.k0s(),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.hasSuccessMessage),e.R7$(),e.Y8G("value",t.listOfHSCodes)("paginator",!1)("rows",10)("globalFilterFields",e.lJ4(5,Ca))}}function Ya(i,r){1&i&&(e.qex(0),e.j41(1,"div",62),e.EFF(2," No Available Data "),e.k0s(),e.bVm())}let Pa=(()=>{class i{_hscodes;cdr;fb;isicCodesService;messageService;messages=[];unsubscribe=[];listOfHSCodes=[];isEditMode=!1;isicTreeData=[];selectedNode;isLoading$;selectedHSCodeId=null;visible=!1;hscodeForm;statusOptions=[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}];constructor(t,s,n,o,a){this._hscodes=t,this.cdr=s,this.fb=n,this.isicCodesService=o,this.messageService=a,this.isLoading$=this._hscodes.isLoading$}ngOnInit(){this.hscodeForm=this.fb.group({arabicName:["",c.k0.required],englishName:["",c.k0.required],code:["",c.k0.required],status:["",c.k0.required]}),this.loadIsicCodes(),this.getHSCodesList()}loadIsicCodes(){const t=this.isicCodesService.getIsicCodesTreeParent().subscribe({next:s=>{this.isicTreeData=this.changeKeyToValue([...s]),this.cdr.detectChanges()},error:s=>{this.handleServerErrors(s)}});this.unsubscribe.push(t)}changeKeyToValue(t){return t.map(s=>{const n={...s,value:s.data.key,children:s.children?this.changeKeyToValue(s.children):[]};return delete n.key,n.data&&void 0!==n.data.key&&(n.data={...n.data,value:n.data.key},delete n.data.key),n})}showDialog(){this.visible=!0,this.selectedHSCodeId=null,this.isEditMode=!1,this.hscodeForm.reset()}editHSCode(t){this.visible=!0,this.selectedHSCodeId=t.id,this.isEditMode=!0,this.selectedNode=this.findNodeById(this.isicTreeData,t.isic_code_id),this.hscodeForm.patchValue({arabicName:t.names.ar,englishName:t.names.en,code:t.code,status:t.status})}findNodeById(t,s){for(const n of t){if(n.value===s)return n;if(n.children){const o=this.findNodeById(n.children,s);if(o)return o}}return null}handleServerErrors(t){if(t.error&&t.error.errors){const s=t.error.errors,n={"name.en":"englishName","name.ar":"arabicName",code:"code",isic_code_id:"isic_code_id",status:"status"};for(const o in s)if(s.hasOwnProperty(o)){const a=s[o],l=n[o];if(l){const d=this.hscodeForm.get(l);d&&(d.setErrors({serverError:a[0]}),d.markAsTouched())}else this.messages.push({severity:"error",summary:"",detail:a.join(", ")})}}else this.messages.push({severity:"error",summary:"Error",detail:"An unexpected error occurred."})}getHSCodesList(){const t=this._hscodes.getHSCodes().subscribe({next:s=>{this.listOfHSCodes=s,this.cdr.detectChanges()},error:s=>{this.messages=[],s.validationMessages?this.messages=s.validationMessages:this.messages.push({severity:"error",summary:"Error",detail:"An unexpected error occurred."})}});this.unsubscribe.push(t)}table;applyFilter(t){const s=t.target.value.trim().toLowerCase();this.table.filterGlobal(s,"contains")}get hasSuccessMessage(){return this.messages.some(t=>"success"===t.severity)}get hasErrorMessage(){return this.messages.some(t=>"error"===t.severity)}onCancel(){this.visible=!1,this.hscodeForm.reset()}get arabicName(){return this.hscodeForm.get("arabicName")}get englishName(){return this.hscodeForm.get("englishName")}get code(){return this.hscodeForm.get("code")}get isic_code_id(){return this.hscodeForm.get("isic_code_id")}get status(){return this.hscodeForm.get("status")}submit(){if(this.messages=[],this.hscodeForm.invalid||!this.selectedNode)return void this.hscodeForm.markAllAsTouched();const t=this.hscodeForm.value;if(this.selectedHSCodeId){const n=this._hscodes.updateHSCode(this.selectedHSCodeId,{name:{en:t.englishName,ar:t.arabicName},code:t.code,isic_code_id:this.selectedNode.value,status:t.status}).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:"HSCode updated successfully."}),this.getHSCodesList(),this.visible=!1,this.hscodeForm.reset()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}else{const n=this._hscodes.createHSCode({name:{en:t.englishName,ar:t.arabicName},code:t.code,isic_code_id:this.selectedNode.value,status:t.status}).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:"HSCode created successfully."}),this.getHSCodesList(),this.visible=!1,this.hscodeForm.reset()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}}deleteHSCode(t){this.messages=[],b().fire({title:"Are you sure?",text:"Do you want to delete this HSCode? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(s=>{s.isConfirmed&&this._hscodes.deleteHSCode(t).subscribe({next:o=>{this.messageService.add({severity:"success",summary:"Success",detail:"HSCode deleted successfully."}),this.getHSCodesList()},error:o=>{this.handleServerErrors(o)}})})}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}static \u0275fac=function(s){return new(s||i)(e.rXU(_a.A),e.rXU(e.gRc),e.rXU(c.ok),e.rXU(Fe.O),e.rXU(f.bg))};static \u0275cmp=e.VBU({type:i,selectors:[["app-hscode"]],viewQuery:function(s,n){if(1&s&&e.GBs(ha,5),2&s){let o;e.mGM(o=e.lsd())&&(n.table=o.first)}},decls:71,vars:39,consts:[["dt",""],["mode","indeterminate",3,"style",4,"ngIf"],["id","kt_app_toolbar",1,"app-toolbar","pt-10","mb-0"],["id","kt_app_toolbar_container",1,"app-container","container-fluid","d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","flex-column","justify-content-center","gap-1","me-3"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],[1,"fw-semibold","fs-7","my-0","text-muted"],[1,"d-flex","align-items-center","gap-2","gap-lg-3"],["appendTo","body",3,"visibleChange","header","modal","visible"],[3,"value","enableService","valueChange",4,"ngIf"],[1,"text-muted","mb-3","d-block"],[3,"formGroup"],[1,"mb-3","row"],["for","code",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["pInputText","","id","code","formControlName","code","autocomplete","off",1,"form-control"],[4,"ngIf"],["for","arabicName",1,"col-sm-3","col-form-label"],["pInputText","","id","arabicName","formControlName","arabicName","autocomplete","off",1,"form-control"],["for","englishName",1,"col-sm-3","col-form-label"],["pInputText","","id","englishName","formControlName","englishName","autocomplete","off",1,"form-control"],["for","isic_code_id",1,"col-sm-3","col-form-label"],["appendTo","body","id","isic_code_id","placeholder","Select Parent ISIC Code","optionLabel","label","optionValue","value","filterBy","label",1,"w-100",3,"ngModelChange","options","ngModel","ngModelOptions","showClear","filter"],["for","status",1,"col-sm-3","col-form-label"],["id","status","formControlName","status","appendTo","body","placeholder","Select Status",3,"options"],[1,"d-flex","justify-content-end","gap-2"],["type","submit",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],["id","kt_app_content",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-fluid"],[1,"card"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"pi","pi-search","fs-3","position-absolute","ms-5"],["type","text","pInputText","","placeholder","Search HS Codes",1,"form-control","w-250px","ps-12",3,"input"],[1,"card-toolbar"],[1,"btn","btn-md","btn-flex","btn-primary",3,"click"],[1,"ki-outline","ki-plus","text-white","fs-4"],[1,"card-body","pt-0"],["mode","indeterminate"],[3,"valueChange","value","enableService"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"table-p",3,"value","paginator","rows","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],[1,"w-10"],[1,"badge","fs-8","fw-bold",3,"ngClass"],["pTooltip","Edit HSCode","tooltipPosition","top",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"ki-duotone","ki-pencil","fs-2"],[1,"path1"],[1,"path2"],["pTooltip","Delete HSCode","tooltipPosition","top",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"ki-duotone","ki-trash","fs-2"],[1,"path3"],[1,"path4"],[1,"path5"],[1,"d-flex","align-items-center","justify-content-center","h-400px","text-muted"]],template:function(s,n){1&s&&(e.DNE(0,Ta,1,3,"p-progressBar",1),e.nI1(1,"async"),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),e.EFF(7," HS Codes "),e.k0s(),e.j41(8,"div",7),e.EFF(9),e.k0s()(),e.j41(10,"div",8)(11,"p-dialog",9),e.mxI("visibleChange",function(a){return e.DH7(n.visible,a)||(n.visible=a),a}),e.DNE(12,Fa,1,2,"p-messages",10),e.j41(13,"span",11),e.EFF(14),e.k0s(),e.j41(15,"form",12)(16,"div",13)(17,"label",14),e.EFF(18,"Code"),e.k0s(),e.j41(19,"div",15),e.nrm(20,"input",16),e.DNE(21,xa,3,2,"div",17),e.k0s()(),e.j41(22,"div",13)(23,"label",18),e.EFF(24,"Arabic Name"),e.k0s(),e.j41(25,"div",15),e.nrm(26,"input",19),e.DNE(27,Sa,3,2,"div",17),e.k0s()(),e.j41(28,"div",13)(29,"label",20),e.EFF(30,"English Name"),e.k0s(),e.j41(31,"div",15),e.nrm(32,"input",21),e.DNE(33,Na,3,2,"div",17),e.k0s()(),e.j41(34,"div",13)(35,"label",22),e.EFF(36,"ISIC Code"),e.k0s(),e.j41(37,"div",15)(38,"p-treeSelect",23),e.mxI("ngModelChange",function(a){return e.DH7(n.selectedNode,a)||(n.selectedNode=a),a}),e.k0s()()(),e.j41(39,"div",13)(40,"label",24),e.EFF(41,"Status"),e.k0s(),e.j41(42,"div",15),e.nrm(43,"p-dropdown",25),e.DNE(44,qa,3,2,"div",17),e.k0s()()(),e.j41(45,"div",26)(46,"button",27),e.nI1(47,"async"),e.bIt("click",function(){return n.submit()}),e.DNE(48,$a,3,0,"ng-container",17),e.nI1(49,"async"),e.DNE(50,Ma,4,2,"ng-container",17),e.nI1(51,"async"),e.k0s(),e.j41(52,"button",28),e.bIt("click",function(){return n.onCancel()}),e.EFF(53," Cancel "),e.k0s()()()()()()(),e.j41(54,"div",29)(55,"div",30)(56,"div",31)(57,"div",32)(58,"div",33)(59,"div",34),e.nrm(60,"i",35),e.j41(61,"input",36),e.bIt("input",function(a){return n.applyFilter(a)}),e.k0s()()(),e.j41(62,"div",37)(63,"a",38),e.bIt("click",function(){return n.showDialog()}),e.nrm(64,"i",39),e.EFF(65," Create "),e.k0s()()(),e.j41(66,"div",40),e.DNE(67,Ba,6,6,"ng-container",17),e.nI1(68,"async"),e.k0s()()()(),e.DNE(69,Ya,3,0,"ng-container",17),e.nI1(70,"async")),2&s&&(e.Y8G("ngIf",e.bMT(1,25,n.isLoading$)),e.R7$(9),e.SpI(" ",n.listOfHSCodes.length," HS Codes "),e.R7$(2),e.Aen(e.lJ4(37,fa)),e.Y8G("header",n.isEditMode?"Edit HSCode":"Add HSCode")("modal",!0),e.R50("visible",n.visible),e.R7$(),e.Y8G("ngIf",n.hasErrorMessage),e.R7$(2),e.SpI(" ",n.isEditMode?"Edit HSCode Details":"Add HSCode Details",". "),e.R7$(),e.Y8G("formGroup",n.hscodeForm),e.R7$(6),e.Y8G("ngIf",n.code&&n.code.errors&&(n.code.touched||n.code.dirty)),e.R7$(6),e.Y8G("ngIf",n.arabicName&&n.arabicName.errors&&(n.arabicName.touched||n.arabicName.dirty)),e.R7$(6),e.Y8G("ngIf",n.englishName&&n.englishName.errors&&(n.englishName.touched||n.englishName.dirty)),e.R7$(5),e.Y8G("options",n.isicTreeData),e.R50("ngModel",n.selectedNode),e.Y8G("ngModelOptions",e.lJ4(38,ba))("showClear",!0)("filter",!0),e.R7$(5),e.Y8G("options",n.statusOptions),e.R7$(),e.Y8G("ngIf",n.status&&n.status.errors&&(n.status.touched||n.status.dirty)),e.R7$(2),e.Y8G("disabled",n.hscodeForm.invalid||e.bMT(47,27,n.isLoading$)||!n.selectedNode),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(49,29,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",e.bMT(51,31,n.isLoading$)),e.R7$(17),e.Y8G("ngIf",!1===e.bMT(68,33,n.isLoading$)&&n.listOfHSCodes.length>0),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(70,35,n.isLoading$)&&0===n.listOfHSCodes.length))},dependencies:[u.YU,u.bT,h.l,f.Ei,v.m,T.z,V.ms,x.S,c.qT,c.me,c.BC,c.cb,c.vS,X.f7,c.j4,c.JD,w.B,$.XI,u.Jj],styles:[".w-10[_ngcontent-%COMP%]{width:10%}"]})}return i})();var Xa=p(744),ke=p(992),re=p(2637);const Oa=()=>({height:"4px"});function za(i,r){1&i&&e.nrm(0,"p-progressBar",31),2&i&&e.Aen(e.lJ4(2,Oa))}function Ha(i,r){1&i&&(e.j41(0,"div",43),e.EFF(1," English Name is required. "),e.k0s())}function Ua(i,r){1&i&&(e.j41(0,"div",43),e.EFF(1," Arabic Name is required. "),e.k0s())}function Ka(i,r){1&i&&(e.j41(0,"div",43),e.EFF(1," English Guideline is required. "),e.k0s())}function Ja(i,r){1&i&&(e.j41(0,"div",43),e.EFF(1," Arabic Guideline is required. "),e.k0s())}function Qa(i,r){1&i&&(e.j41(0,"div",43),e.EFF(1," Version is required. "),e.k0s())}function Wa(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-accordionTab",32)(1,"form",12)(2,"div",33)(3,"label",34),e.EFF(4,"English Name"),e.k0s(),e.nrm(5,"input",35),e.DNE(6,Ha,2,0,"div",16),e.k0s(),e.j41(7,"div",33)(8,"label",34),e.EFF(9,"Arabic Name"),e.k0s(),e.nrm(10,"input",36),e.DNE(11,Ua,2,0,"div",16),e.k0s(),e.j41(12,"div",33)(13,"label"),e.EFF(14,"Guideline (English)"),e.k0s(),e.nrm(15,"editor",19),e.DNE(16,Ka,2,0,"div",16),e.k0s(),e.j41(17,"div",33)(18,"label"),e.EFF(19,"Guideline (Arabic)"),e.k0s(),e.nrm(20,"editor",20),e.DNE(21,Ja,2,0,"div",16),e.k0s(),e.j41(22,"div",33)(23,"label",34),e.EFF(24,"Version"),e.k0s(),e.nrm(25,"input",37),e.DNE(26,Qa,2,0,"div",16),e.k0s(),e.j41(27,"div",23)(28,"label",38),e.EFF(29,"English File"),e.k0s(),e.j41(30,"div",25)(31,"input",39),e.bIt("change",function(n){const o=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.onFileChange(n,"fileEn",o.id))}),e.k0s()()(),e.j41(32,"div",40)(33,"label",38),e.EFF(34,"Arabic File"),e.k0s(),e.j41(35,"div",25)(36,"input",39),e.bIt("change",function(n){const o=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.onFileChange(n,"fileAr",o.id))}),e.k0s()()(),e.j41(37,"div",29)(38,"button",41),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.saveGuideline(n.id))}),e.EFF(39," Save "),e.k0s(),e.j41(40,"button",42),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.deleteGuideline(n.id))}),e.EFF(41," Delete "),e.k0s()()()()}if(2&i){let t,s,n,o,a;const l=r.$implicit,d=e.XpG();e.Y8G("header",l.names.en+" - "+l.names.ar+" -  Version ("+l.version+")"),e.R7$(),e.Y8G("formGroup",d.getGuidelineForm(l.id)),e.R7$(2),e.Mz_("for","nameEn-",l.id,""),e.R7$(2),e.Mz_("id","nameEn-",l.id,""),e.R7$(),e.Y8G("ngIf",(null==(t=d.getGuidelineForm(l.id).get("nameEn"))?null:t.invalid)&&(null==(t=d.getGuidelineForm(l.id).get("nameEn"))?null:t.touched)),e.R7$(2),e.Mz_("for","nameAr-",l.id,""),e.R7$(2),e.Mz_("id","nameAr-",l.id,""),e.R7$(),e.Y8G("ngIf",(null==(s=d.getGuidelineForm(l.id).get("nameAr"))?null:s.invalid)&&(null==(s=d.getGuidelineForm(l.id).get("nameAr"))?null:s.touched)),e.R7$(5),e.Y8G("ngIf",(null==(n=d.getGuidelineForm(l.id).get("guidelineEn"))?null:n.invalid)&&(null==(n=d.getGuidelineForm(l.id).get("guidelineEn"))?null:n.touched)),e.R7$(5),e.Y8G("ngIf",(null==(o=d.getGuidelineForm(l.id).get("guidelineAr"))?null:o.invalid)&&(null==(o=d.getGuidelineForm(l.id).get("guidelineAr"))?null:o.touched)),e.R7$(2),e.Mz_("for","version-",l.id,""),e.R7$(2),e.Mz_("id","version-",l.id,""),e.R7$(),e.Y8G("ngIf",(null==(a=d.getGuidelineForm(l.id).get("version"))?null:a.invalid)&&(null==(a=d.getGuidelineForm(l.id).get("version"))?null:a.touched))}}function Za(i,r){1&i&&(e.j41(0,"div",43),e.EFF(1," English Name is required. "),e.k0s())}function el(i,r){1&i&&(e.j41(0,"div",43),e.EFF(1," Arabic Name is required. "),e.k0s())}function tl(i,r){1&i&&(e.j41(0,"div",43),e.EFF(1," English Guideline is required. "),e.k0s())}function nl(i,r){1&i&&(e.j41(0,"div",43),e.EFF(1," Arabic Guideline is required. "),e.k0s())}function il(i,r){1&i&&(e.j41(0,"div",43),e.EFF(1," Version is required. "),e.k0s())}let sl=(()=>{class i{guidelinesService;fb;messageService;guidelines=[];isLoading$;guidelineForms=new Map;newGuidelineForm;constructor(t,s,n){this.guidelinesService=t,this.fb=s,this.messageService=n,this.isLoading$=this.guidelinesService.isLoading$}ngOnInit(){this.newGuidelineForm=this.fb.group({nameEn:["",c.k0.required],nameAr:["",c.k0.required],guidelineEn:["",c.k0.required],guidelineAr:["",c.k0.required],fileEn:[null],fileAr:[null],version:["",c.k0.required]}),this.loadGuidelines()}loadGuidelines(){this.guidelinesService.getGuidelines().subscribe({next:t=>{this.guidelines=t,this.guidelines.forEach(s=>{const n=this.fb.group({nameEn:[s.names.en,c.k0.required],nameAr:[s.names.ar,c.k0.required],guidelineEn:[s.guidelines.en,c.k0.required],guidelineAr:[s.guidelines.ar,c.k0.required],fileEn:[null],fileAr:[null],version:[s.version,c.k0.required]});this.guidelineForms.set(s.id,n)})},error:t=>console.error(t)})}getGuidelineForm(t){return this.guidelineForms.get(t)||this.fb.group({})}saveGuideline(t){const s=this.getGuidelineForm(t);if(s.invalid)return void s.markAllAsTouched();const n=new FormData,o=s.value;n.append("name[en]",o.nameEn),n.append("name[ar]",o.nameAr),n.append("guideline[en]",o.guidelineEn),n.append("guideline[ar]",o.guidelineAr),n.append("version",o.version),o.fileEn&&n.append("file[en]",o.fileEn),o.fileAr&&n.append("file[ar]",o.fileAr),n.append("_method","put"),this.guidelinesService.createOrUpdateGuideline(n,t).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Guideline updated successfully."}),this.loadGuidelines()},error:a=>{console.error(a),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update guideline."})}})}createGuideline(){const t=this.newGuidelineForm;if(t.invalid)return void t.markAllAsTouched();const s=new FormData,n=t.value;s.append("name[en]",n.nameEn),s.append("name[ar]",n.nameAr),s.append("guideline[en]",n.guidelineEn),s.append("guideline[ar]",n.guidelineAr),s.append("version",n.version),n.fileEn&&s.append("file[en]",n.fileEn),n.fileAr&&s.append("file[ar]",n.fileAr),this.guidelinesService.createOrUpdateGuideline(s).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Guideline created successfully."}),this.loadGuidelines(),this.newGuidelineForm.reset()},error:o=>{console.error(o),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to create guideline."})}})}deleteGuideline(t){b().fire({title:"Are you sure?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(s=>{s.isConfirmed&&this.guidelinesService.deleteGuideline(t).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Guideline deleted successfully."}),this.loadGuidelines()},error:n=>{console.error(n),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to delete guideline."})}})})}onFileChange(t,s,n){const o=t.target.files[0];n?this.getGuidelineForm(n).patchValue({[s]:o}):this.newGuidelineForm.patchValue({[s]:o})}static \u0275fac=function(s){return new(s||i)(e.rXU(Xa.N),e.rXU(c.ok),e.rXU(f.bg))};static \u0275cmp=e.VBU({type:i,selectors:[["app-guideline"]],decls:54,vars:10,consts:[["mode","indeterminate",3,"style",4,"ngIf"],["id","kt_app_toolbar",1,"app-toolbar","pt-10","mb-0"],["id","kt_app_toolbar_container",1,"app-container","container-fluid","d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","flex-column","justify-content-center","gap-1","me-3"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],["id","kt_app_content",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-fluid"],[1,"card"],[1,"card-body"],[3,"header",4,"ngFor","ngForOf"],["header","Add New Guideline"],[3,"formGroup"],[1,"form-group"],["for","nameEn-new"],["id","nameEn-new","type","text","formControlName","nameEn",1,"form-control"],["class","text-danger",4,"ngIf"],["for","nameAr-new"],["id","nameAr-new","type","text","formControlName","nameAr",1,"form-control"],["apiKey","fovwl5u83es9vkiv7x6h34fynj0utg108qrb0edwwwlxevt9","formControlName","guidelineEn"],["apiKey","fovwl5u83es9vkiv7x6h34fynj0utg108qrb0edwwwlxevt9","formControlName","guidelineAr"],["for","version-new"],["id","version-new","type","text","formControlName","version",1,"form-control"],[1,"mb-3","mt-3","row"],["for","fileEn-new",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["type","file","pInputText","","id","englishFile","id","fileEn-new","accept",".png, .jpg, .jpeg, .pdf",1,"form-control",3,"change"],["for","fileAr-new",1,"col-sm-3","col-form-label"],["type","file","pInputText","","id","fileAr-new","pInputText","","id","englishFile","id","fileAr-new","type","file","accept",".png, .jpg, .jpeg, .pdf",1,"form-control",3,"change"],[1,"d-flex","justify-content-end","mt-3"],["type","button",1,"btn","btn-success",3,"click"],["mode","indeterminate"],[3,"header"],[1,"form-group","mt-3"],[3,"for"],["type","text","formControlName","nameEn",1,"form-control",3,"id"],["type","text","formControlName","nameAr",1,"form-control",3,"id"],["type","text","formControlName","version",1,"form-control",3,"id"],["for","englishFile",1,"col-sm-3","col-form-label"],["type","file","accept",".png, .jpg, .jpeg, .pdf","pInputText","","id","englishFile",1,"form-control",3,"change"],[1,"mb-3","row"],["type","button",1,"btn","btn-primary","me-2",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"text-danger"]],template:function(s,n){if(1&s&&(e.DNE(0,za,1,3,"p-progressBar",0),e.nI1(1,"async"),e.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h1",5),e.EFF(7," Guidelines "),e.k0s()()()()(),e.j41(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"p-accordion"),e.DNE(13,Wa,42,19,"p-accordionTab",10),e.j41(14,"p-accordionTab",11)(15,"form",12)(16,"div",13)(17,"label",14),e.EFF(18,"English Name"),e.k0s(),e.nrm(19,"input",15),e.DNE(20,Za,2,0,"div",16),e.k0s(),e.j41(21,"div",13)(22,"label",17),e.EFF(23,"Arabic Name"),e.k0s(),e.nrm(24,"input",18),e.DNE(25,el,2,0,"div",16),e.k0s(),e.j41(26,"div",13)(27,"label"),e.EFF(28,"Guideline (English)"),e.k0s(),e.nrm(29,"editor",19),e.DNE(30,tl,2,0,"div",16),e.k0s(),e.j41(31,"div",13)(32,"label"),e.EFF(33,"Guideline (Arabic)"),e.k0s(),e.nrm(34,"editor",20),e.DNE(35,nl,2,0,"div",16),e.k0s(),e.j41(36,"div",13)(37,"label",21),e.EFF(38,"Version"),e.k0s(),e.nrm(39,"input",22),e.DNE(40,il,2,0,"div",16),e.k0s(),e.j41(41,"div",23)(42,"label",24),e.EFF(43,"English File"),e.k0s(),e.j41(44,"div",25)(45,"input",26),e.bIt("change",function(a){return n.onFileChange(a,"fileEn")}),e.k0s()()(),e.j41(46,"div",23)(47,"label",27),e.EFF(48,"Arabic File"),e.k0s(),e.j41(49,"div",25)(50,"input",28),e.bIt("change",function(a){return n.onFileChange(a,"fileAr")}),e.k0s()()(),e.j41(51,"div",29)(52,"button",30),e.bIt("click",function(){return n.createGuideline()}),e.EFF(53," Create "),e.k0s()()()()()()()()()),2&s){let o,a,l,d,_;e.Y8G("ngIf",e.bMT(1,8,n.isLoading$)),e.R7$(13),e.Y8G("ngForOf",n.guidelines),e.R7$(2),e.Y8G("formGroup",n.newGuidelineForm),e.R7$(5),e.Y8G("ngIf",(null==(o=n.newGuidelineForm.get("nameEn"))?null:o.invalid)&&(null==(o=n.newGuidelineForm.get("nameEn"))?null:o.touched)),e.R7$(5),e.Y8G("ngIf",(null==(a=n.newGuidelineForm.get("nameAr"))?null:a.invalid)&&(null==(a=n.newGuidelineForm.get("nameAr"))?null:a.touched)),e.R7$(5),e.Y8G("ngIf",(null==(l=n.newGuidelineForm.get("guidelineEn"))?null:l.invalid)&&(null==(l=n.newGuidelineForm.get("guidelineEn"))?null:l.touched)),e.R7$(5),e.Y8G("ngIf",(null==(d=n.newGuidelineForm.get("guidelineAr"))?null:d.invalid)&&(null==(d=n.newGuidelineForm.get("guidelineAr"))?null:d.touched)),e.R7$(5),e.Y8G("ngIf",(null==(_=n.newGuidelineForm.get("version"))?null:_.invalid)&&(null==(_=n.newGuidelineForm.get("version"))?null:_.touched))}},dependencies:[u.Sq,u.bT,T.z,ke.xn,x.S,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,re.nD,re.gV,u.Jj]})}return i})();var ol=p(7468),rl=p(3250),xe=p(9634),ae=p(9664);const al=["tt"],ll=()=>({height:"4px"}),cl=()=>({height:"36px","min-width":"120px",border:"1px solid #cbd5e1","border-radius":"6px"}),dl=()=>({label:"All Status",value:""}),Ie=()=>({label:"Active",value:"active"}),Re=()=>({label:"Inactive",value:"inactive"}),Se=()=>({label:"Suggestion",value:"suggestion"}),ul=(i,r,t,s)=>[i,r,t,s],pl=()=>({width:"40rem"}),ml=(i,r,t)=>[i,r,t],we=()=>[188,13,1548],gl=()=>["names.en","names.ar","status"],_l=()=>({width:"100%"}),hl=(i,r)=>({"background-color":i,color:r});function fl(i,r){1&i&&e.nrm(0,"p-progressBar",3),2&i&&e.Aen(e.lJ4(2,ll))}function bl(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",44),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function vl(i,r){1&i&&(e.j41(0,"div",46),e.EFF(1," English Name is required. "),e.k0s())}function Cl(i,r){if(1&i&&(e.j41(0,"div",46),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.nameEn.errors.serverError," ")}}function yl(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,vl,2,0,"div",45)(2,Cl,2,1,"div",45),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.nameEn.errors.required),e.R7$(),e.Y8G("ngIf",t.nameEn.errors.serverError)}}function Tl(i,r){1&i&&(e.j41(0,"div",46),e.EFF(1," Arabic Name is required. "),e.k0s())}function Fl(i,r){if(1&i&&(e.j41(0,"div",46),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.nameAr.errors.serverError," ")}}function El(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Tl,2,0,"div",45)(2,Fl,2,1,"div",45),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.nameAr.errors.required),e.R7$(),e.Y8G("ngIf",t.nameAr.errors.serverError)}}function kl(i,r){1&i&&(e.j41(0,"div",46),e.EFF(1," Industry is required. "),e.k0s())}function xl(i,r){if(1&i&&(e.j41(0,"div",46),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.industryId.errors.serverError," ")}}function Il(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,kl,2,0,"div",45)(2,xl,2,1,"div",45),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.industryId.errors.required),e.R7$(),e.Y8G("ngIf",t.industryId.errors.serverError)}}function Rl(i,r){1&i&&(e.j41(0,"div",46),e.EFF(1," Status is required. "),e.k0s())}function Sl(i,r){if(1&i&&(e.j41(0,"div",46),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.status.errors.serverError," ")}}function wl(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Rl,2,0,"div",45)(2,Sl,2,1,"div",45),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.status.errors.required),e.R7$(),e.Y8G("ngIf",t.status.errors.serverError)}}function jl(i,r){if(1&i&&(e.j41(0,"div",46),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.keywordsEn.errors.serverError," ")}}function Nl(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,jl,2,1,"div",45),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.keywordsEn.errors.serverError)}}function Dl(i,r){if(1&i&&(e.j41(0,"div",46),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ",t.keywordsAr.errors.serverError," ")}}function Gl(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,Dl,2,1,"div",45),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.keywordsAr.errors.serverError)}}function ql(i,r){1&i&&(e.j41(0,"div",49),e.nrm(1,"i",50),e.j41(2,"span"),e.EFF(3,"The number of keywords in English and Arabic must match"),e.k0s()())}function $l(i,r){if(1&i&&(e.j41(0,"div",47),e.DNE(1,ql,4,0,"div",48),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",t.topicForm.errors.keywordsMismatch)}}function Ml(i,r){if(1&i&&(e.qex(0),e.j41(1,"span",51),e.EFF(2),e.k0s(),e.bVm()),2&i){const t=e.XpG(2);e.R7$(2),e.JRh(t.isUpdate?"Update":"Save")}}function Ll(i,r){1&i&&(e.qex(0),e.j41(1,"span",52),e.EFF(2," Please wait "),e.nrm(3,"span",53),e.k0s(),e.bVm()),2&i&&(e.R7$(),e.xc7("display","block"))}function Al(i,r){1&i&&(e.j41(0,"tr")(1,"th",58),e.EFF(2,"ID"),e.k0s(),e.j41(3,"th",59),e.EFF(4,"Name (English)"),e.k0s(),e.j41(5,"th",59),e.EFF(6,"Name (Arabic)"),e.k0s(),e.j41(7,"th",59),e.EFF(8,"Industry"),e.k0s(),e.j41(9,"th",60),e.EFF(10,"Status"),e.k0s(),e.nrm(11,"th",59),e.k0s())}function Vl(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"span",61),e.EFF(3),e.k0s()(),e.j41(4,"td")(5,"span",62),e.EFF(6),e.k0s()(),e.j41(7,"td")(8,"span",63),e.EFF(9),e.k0s()(),e.j41(10,"td")(11,"span",61),e.EFF(12),e.k0s()(),e.j41(13,"td")(14,"span",64),e.EFF(15),e.k0s()(),e.j41(16,"td")(17,"div",65)(18,"button",66),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(3);return e.Njj(o.editTopic(n))}),e.k0s(),e.j41(19,"button",67),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(3);return e.Njj(o.deleteTopic(n))}),e.k0s()()()()}if(2&i){const t=r.$implicit,s=e.XpG(3);e.R7$(3),e.JRh(t.id),e.R7$(3),e.JRh(t.names.en),e.R7$(3),e.JRh(t.names.ar),e.R7$(3),e.JRh(s.getIndustryName(t.industry_id)),e.R7$(2),e.Y8G("ngStyle",e.l_i(6,hl,"active"===t.status?"#d1eddb":"inactive"===t.status?"#f8d7da":"#fff3cd","active"===t.status?"#155724":"inactive"===t.status?"#721c24":"#856404")),e.R7$(),e.SpI(" ",t.status," ")}}function Bl(i,r){1&i&&(e.j41(0,"tr")(1,"td",68)(2,"div",69),e.nrm(3,"i",70),e.j41(4,"div",71),e.EFF(5,"No topics found"),e.k0s(),e.j41(6,"div",72),e.EFF(7,"No topics match your search criteria."),e.k0s()()()())}function Yl(i,r){if(1&i&&(e.qex(0),e.j41(1,"p-table",54,0),e.nI1(3,"async"),e.DNE(4,Al,12,0,"ng-template",55)(5,Vl,20,9,"ng-template",56)(6,Bl,8,0,"ng-template",57),e.k0s(),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("value",t.topics)("paginator",!0)("rows",10)("loading",e.bMT(3,7,t.isLoading$))("globalFilterFields",e.lJ4(9,gl))("rowHover",!0)("tableStyle",e.lJ4(10,_l))}}function Pl(i,r){1&i&&(e.qex(0),e.j41(1,"div",69),e.nrm(2,"i",70),e.j41(3,"div",71),e.EFF(4,"No topics available"),e.k0s(),e.j41(5,"div",72),e.EFF(6,"No topics have been created yet."),e.k0s()(),e.bVm())}function Xl(i,r){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h1",8),e.EFF(6," Topics "),e.k0s(),e.j41(7,"div",9),e.EFF(8),e.k0s()(),e.j41(9,"div",10)(10,"div",11),e.nrm(11,"i",12),e.j41(12,"input",13),e.bIt("input",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.applyFilter(n))}),e.k0s()(),e.j41(13,"p-dropdown",14),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.selectedStatus,n)||(o.selectedStatus=n),e.Njj(n)}),e.bIt("onChange",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.applyStatusFilter())}),e.k0s(),e.j41(14,"button",15),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.showDialog())}),e.nrm(15,"i",16),e.j41(16,"span",17),e.EFF(17,"Create"),e.k0s()()()()()(),e.j41(18,"p-dialog",18),e.mxI("visibleChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.displayDialog,n)||(o.displayDialog=n),e.Njj(n)}),e.bIt("onHide",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onCancel())}),e.DNE(19,bl,1,2,"p-messages",19),e.j41(20,"span",20),e.EFF(21),e.k0s(),e.j41(22,"form",21)(23,"div",22)(24,"label",23),e.EFF(25,"Name (English)"),e.k0s(),e.j41(26,"div",24),e.nrm(27,"input",25),e.DNE(28,yl,3,2,"div",2),e.k0s()(),e.j41(29,"div",22)(30,"label",26),e.EFF(31,"Name (Arabic)"),e.k0s(),e.j41(32,"div",24),e.nrm(33,"input",27),e.DNE(34,El,3,2,"div",2),e.k0s()(),e.j41(35,"div",22)(36,"label",28),e.EFF(37,"Industry"),e.k0s(),e.j41(38,"div",24),e.nrm(39,"p-treeSelect",29),e.DNE(40,Il,3,2,"div",2),e.k0s()(),e.j41(41,"div",22)(42,"label",30),e.EFF(43,"Status"),e.k0s(),e.j41(44,"div",24),e.nrm(45,"p-dropdown",31),e.DNE(46,wl,3,2,"div",2),e.k0s()(),e.j41(47,"div",22)(48,"label",32),e.EFF(49,"Keywords (English)"),e.k0s(),e.j41(50,"div",24)(51,"tag-input",33),e.nrm(52,"tag-input-dropdown",34),e.k0s(),e.j41(53,"div",35),e.EFF(54,"Enter keywords separated by commas"),e.k0s(),e.DNE(55,Nl,2,1,"div",2),e.k0s()(),e.j41(56,"div",22)(57,"label",36),e.EFF(58,"Keywords (Arabic)"),e.k0s(),e.j41(59,"div",24)(60,"tag-input",37),e.nrm(61,"tag-input-dropdown",34),e.k0s(),e.j41(62,"div",35),e.EFF(63,"Enter keywords separated by commas"),e.k0s(),e.DNE(64,Gl,2,1,"div",2),e.k0s()(),e.DNE(65,$l,2,1,"div",38),e.k0s(),e.j41(66,"div",39)(67,"button",40),e.nI1(68,"async"),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.submit())}),e.DNE(69,Ml,3,1,"ng-container",2),e.nI1(70,"async"),e.DNE(71,Ll,4,2,"ng-container",2),e.nI1(72,"async"),e.k0s(),e.j41(73,"button",41),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onCancel())}),e.EFF(74," Cancel "),e.k0s()()(),e.j41(75,"div",42)(76,"div",43),e.DNE(77,Yl,7,11,"ng-container",2),e.nI1(78,"async"),e.DNE(79,Pl,7,0,"ng-container",2),e.nI1(80,"async"),e.k0s()(),e.bVm()}if(2&i){const t=e.XpG();e.R7$(8),e.SpI("",t.paginatedTopics.meta.total||0," Topics"),e.R7$(5),e.Aen(e.lJ4(57,cl)),e.R50("ngModel",t.selectedStatus),e.Y8G("options",e.ziG(62,ul,e.lJ4(58,dl),e.lJ4(59,Ie),e.lJ4(60,Re),e.lJ4(61,Se))),e.R7$(5),e.Aen(e.lJ4(67,pl)),e.Y8G("header",t.isUpdate?"Edit Topic":"Add Topic")("modal",!0),e.R50("visible",t.displayDialog),e.R7$(),e.Y8G("ngIf",t.messages&&t.messages.length>0),e.R7$(2),e.SpI("",t.isUpdate?"Edit Topic Details":"Add Topic Details","."),e.R7$(),e.Y8G("formGroup",t.topicForm),e.R7$(6),e.Y8G("ngIf",t.nameEn&&t.nameEn.errors&&(t.nameEn.touched||t.nameEn.dirty)),e.R7$(6),e.Y8G("ngIf",t.nameAr&&t.nameAr.errors&&(t.nameAr.touched||t.nameAr.dirty)),e.R7$(5),e.Y8G("options",t.industries)("filter",!0)("showClear",!0),e.R7$(),e.Y8G("ngIf",t.industryId&&t.industryId.errors&&(t.industryId.touched||t.industryId.dirty)),e.R7$(5),e.Y8G("options",e.sMw(71,ml,e.lJ4(68,Ie),e.lJ4(69,Re),e.lJ4(70,Se))),e.R7$(),e.Y8G("ngIf",t.status&&t.status.errors&&(t.status.touched||t.status.dirty)),e.R7$(5),e.Y8G("secondaryPlaceholder","Enter keywords in English")("separatorKeyCodes",e.lJ4(75,we))("addOnBlur",!0)("placeholder","Enter keywords in English")("displayBy","display")("identifyBy","value")("modelAsStrings",!1),e.R7$(),e.Y8G("showDropdownIfEmpty",!0)("autocompleteItems",t.availableEnglishKeywords),e.R7$(3),e.Y8G("ngIf",t.keywordsEn&&t.keywordsEn.errors&&(t.keywordsEn.touched||t.keywordsEn.dirty)),e.R7$(5),e.Y8G("secondaryPlaceholder","Enter keywords in Arabic")("separatorKeyCodes",e.lJ4(76,we))("addOnBlur",!0)("placeholder","Enter keywords in Arabic")("displayBy","display")("identifyBy","value")("modelAsStrings",!1),e.R7$(),e.Y8G("showDropdownIfEmpty",!0)("autocompleteItems",t.availableArabicKeywords),e.R7$(3),e.Y8G("ngIf",t.keywordsAr&&t.keywordsAr.errors&&(t.keywordsAr.touched||t.keywordsAr.dirty)),e.R7$(),e.Y8G("ngIf",t.topicForm.errors&&(t.topicForm.touched||t.topicForm.dirty)),e.R7$(2),e.Y8G("disabled",t.topicForm.invalid||e.bMT(68,47,t.isLoading$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(70,49,t.isLoading$)),e.R7$(2),e.Y8G("ngIf",e.bMT(72,51,t.isLoading$)),e.R7$(6),e.Y8G("ngIf",!1===e.bMT(78,53,t.isLoading$)&&t.topics.length>0),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(80,55,t.isLoading$)&&0===t.topics.length)}}let Ol=(()=>{class i{cdr;topicsService;industriesService;fb;messageService;trans;messages=[];unsubscribe=[];topics=[];paginatedTopics;currentPage=1;totalPages=1;pageSize=10;statusOptions=[{label:"All",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Suggestion",value:"suggestion"}];industries=[];industryMap=new Map;topicForm;displayDialog=!1;isUpdate=!1;selectedTopicId=null;isLoading$;treeTable;lang="en";selectedStatus="";searchTerm="";debounceTimer;Math=Math;availableEnglishKeywords=[];availableArabicKeywords=[];constructor(t,s,n,o,a,l){this.cdr=t,this.topicsService=s,this.industriesService=n,this.fb=o,this.messageService=a,this.trans=l,this.isLoading$=this.topicsService.isLoading$}ngOnInit(){this.initForm(),this.loadInitialData()}initForm(){this.topicForm=this.fb.group({nameEn:["",c.k0.required],nameAr:["",c.k0.required],status:["",c.k0.required],industryId:[null,c.k0.required],keywordsEn:[[]],keywordsAr:[[]]},{validators:this.keywordsValidator})}selectIndustryForEditMode(){if(!this.isUpdate||!this.selectedTopicId||!this.industries||0===this.industries.length)return;const t=this.topics.find(o=>o.id===this.selectedTopicId);if(!t)return;console.log("Looking for industry with ID:",t.industry_id);const s=(o,a)=>{for(const l of o){if(console.log("Checking node:",l),l.value===a)return console.log("Found matching node:",l),l;if(l.children&&l.children.length){const d=s(l.children,a);if(d)return d}}return null},n=s(this.industries,t.industry_id);n?(console.log("Setting industry node:",n),this.topicForm.get("industryId")?.setValue(n),this.topicForm.get("industryId")?.updateValueAndValidity(),this.cdr.detectChanges()):console.log("No matching industry node found for ID:",t.industry_id)}loadInitialData(){const t=this.topicsService.getAdminTopics(1,this.selectedStatus,this.searchTerm),s=this.industriesService.getIsicCodesTree("en"),n=(0,ol.p)([t,s]).subscribe({next:([o,a])=>{this.paginatedTopics=o,this.topics=o.data,this.totalPages=Math.ceil(o.meta.total/this.pageSize),this.industries=this.prepareIndustriesForTreeSelect(a),this.buildIndustryMap(a),this.cdr.detectChanges(),this.selectIndustryForEditMode()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}buildIndustryMap(t){for(const s of t)s.data&&void 0!==s.data.key&&this.industryMap.set(s.data.key,s.data.nameEn),s.children&&s.children.length>0&&this.buildIndustryMap(s.children)}getIndustryName(t){return this.industryMap.get(t)||`ID: ${t}`}prepareIndustriesForTreeSelect(t){return t.map(s=>{const n={label:s.data.nameEn,value:s.data.key,key:s.data.key.toString(),data:s.data,selectable:!0};return n.children=s.children&&s.children.length>0?this.prepareIndustriesForTreeSelect(s.children):[],n})}loadTopics(t=1){this.currentPage=t;const s=this.topicsService.getAdminTopics(t,this.selectedStatus,this.searchTerm).subscribe({next:n=>{this.paginatedTopics=n,this.topics=n.data,this.totalPages=Math.ceil(n.meta.total/this.pageSize),this.cdr.detectChanges()},error:n=>{this.handleServerErrors(n)}});this.unsubscribe.push(s)}loadPage(t){t>=1&&t<=this.totalPages&&this.loadTopics(t)}getPages(){const t=[];let n=Math.max(1,this.currentPage-Math.floor(2.5)),o=Math.min(this.totalPages,n+5-1);o-n+1<5&&(n=Math.max(1,o-5+1));for(let a=n;a<=o;a++)t.push(a);return t}showDialog(){this.displayDialog=!0,this.isUpdate=!1,this.initForm()}editTopic(t){this.displayDialog=!0,this.isUpdate=!0,this.selectedTopicId=t.id;let s=[],n=[];t.keywords?"object"==typeof t.keywords&&!Array.isArray(t.keywords)&&"en"in t.keywords?(s=t.keywords.en,n=t.keywords.ar):Array.isArray(t.keywords)&&t.keywords.length>0&&(s=t.keywords.map(o=>o.en),n=t.keywords.map(o=>o.ar)):t.keyword&&Array.isArray(t.keyword)&&(s=t.keyword),this.availableEnglishKeywords=s.map(o=>({display:o,value:o})),this.availableArabicKeywords=n.map(o=>({display:o,value:o})),this.topicForm.patchValue({nameEn:t.names.en,nameAr:t.names.ar,status:t.status,keywordsEn:s.map(o=>({display:o,value:o})),keywordsAr:n.map(o=>({display:o,value:o}))}),console.log("Topic industry ID to select:",t.industry_id),console.log("Available industries:",this.industries),console.log("Keywords format:",t.keywords,t.keyword),this.industries&&this.industries.length>0&&this.selectIndustryForEditMode()}submit(){if(this.topicForm.invalid)return void Object.keys(this.topicForm.controls).forEach(l=>{const d=this.topicForm.get(l);d?.invalid&&d.markAsTouched()});const t=this.topicForm.value,s={name:{en:t.nameEn,ar:t.nameAr},industry_id:this.getIndustryIdFromSelection(t.industryId),status:t.status,keywords:[]},n=t.keywordsEn||[],o=t.keywordsAr||[],a=Math.max(n.length,o.length);for(let l=0;l<a;l++)s.keywords.push({en:l<n.length?"string"==typeof n[l]?n[l]:n[l].value||n[l].display:"",ar:l<o.length?"string"==typeof o[l]?o[l]:o[l].value||o[l].display:""});this.isUpdate&&null!==this.selectedTopicId?this.topicsService.updateTopic(this.selectedTopicId,s).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Topic updated successfully"}),this.loadTopics(),this.displayDialog=!1},error:l=>{this.handleServerErrors(l)}}):this.topicsService.createTopic(s).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Topic created successfully"}),this.loadTopics(),this.displayDialog=!1},error:l=>{this.handleServerErrors(l)}})}getIndustryIdFromSelection(t){return t?"number"==typeof t?t:void 0!==t.key?parseInt(t.key):t.data&&void 0!==t.data.key?t.data.key:0:0}deleteTopic(t){b().fire({title:"Are you sure?",text:"Do you want to delete this Topic? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(s=>{if(s.isConfirmed){const n=this.topicsService.deleteTopic(t.id).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Topic deleted successfully."}),this.loadTopics()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}})}applyFilter(t){this.debounceTimer&&clearTimeout(this.debounceTimer),this.searchTerm=t.target.value.trim(),this.debounceTimer=setTimeout(()=>{this.currentPage=1,this.loadTopics()},300)}applyStatusFilter(){this.currentPage=1,this.loadTopics()}onCancel(){this.displayDialog=!1,this.topicForm.reset(),this.messages=[]}handleServerErrors(t){if(this.messages=[],t.error&&t.error.errors){const s=t.error.errors,n={"name.en":"nameEn","name.ar":"nameAr",industry_id:"industryId",status:"status",keywords:"keywordsEn"};for(const o in s)if(s.hasOwnProperty(o)){const a=s[o],l=n[o];if(l){const d=this.topicForm.get(l);d&&(d.setErrors({serverError:a[0]}),d.markAsTouched())}this.messages.push({severity:"error",summary:"Validation Error",detail:a.join(", ")})}}else this.messages.push(t.error&&t.error.message?{severity:"error",summary:"Error",detail:t.error.message}:{severity:"error",summary:"Error",detail:"An unexpected error occurred."})}ngAfterViewInit(){setTimeout(()=>{if(this.isUpdate&&null!==this.selectedTopicId){const t=this.topicForm.get("industryId")?.value;t&&console.log("Setting industry in AfterViewInit:",t)}},0)}getIndustryNodeById(t){return t}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}get nameEn(){return this.topicForm.get("nameEn")}get nameAr(){return this.topicForm.get("nameAr")}get status(){return this.topicForm.get("status")}get industryId(){return this.topicForm.get("industryId")}get keywordsEn(){return this.topicForm.get("keywordsEn")}get keywordsAr(){return this.topicForm.get("keywordsAr")}get hasSuccessMessage(){return this.messages.some(t=>"success"===t.severity)}get hasErrorMessage(){return this.messages.some(t=>"error"===t.severity)}keywordsValidator(t){const s=t.get("keywordsEn")?.value||[],n=t.get("keywordsAr")?.value||[];return(s.length||n.length)&&(s.length&&!n.length||!s.length&&n.length||s.length!==n.length)?{keywordsMismatch:!0}:null}static \u0275fac=function(s){return new(s||i)(e.rXU(e.gRc),e.rXU(rl._),e.rXU(xe.I),e.rXU(c.ok),e.rXU(f.bg),e.rXU(W.L))};static \u0275cmp=e.VBU({type:i,selectors:[["app-topics"]],viewQuery:function(s,n){if(1&s&&e.GBs(al,5),2&s){let o;e.mGM(o=e.lsd())&&(n.treeTable=o.first)}},decls:4,vars:6,consts:[["dt",""],["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],["id","kt_app_toolbar",1,"app-toolbar","pt-10","px-10","pb-0","mb-0"],["id","kt_app_toolbar_container",1,"app-container","container-fluid","d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","flex-column","justify-content-center","gap-1","me-3"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],[1,"fw-semibold","fs-7","my-0","text-muted"],[1,"d-flex","align-items-center","gap-3"],[1,"d-flex","align-items-center","position-relative"],[1,"pi","pi-search","position-absolute","ms-3",2,"font-size","14px","color","#6c757d"],["type","text","pInputText","","placeholder","Search",1,"form-control","ps-10",2,"width","240px","height","36px","border","1px solid #cbd5e1","border-radius","6px",3,"input"],["appendTo","body","id","statusFilter","optionLabel","label","optionValue","value","placeholder","Status",3,"ngModelChange","onChange","ngModel","options"],[1,"btn","btn-sm","d-flex","align-items-center",2,"background","white","border","1px solid #cbd5e1","border-radius","6px","padding","6px 12px","height","36px","white-space","nowrap",3,"click"],[1,"ki-outline","ki-plus","fs-5",2,"color","#3b82f6"],[1,"ms-1",2,"font-size","13px","font-weight","500","color","#374151"],["appendTo","body",3,"visibleChange","onHide","header","modal","visible"],[3,"value","enableService","valueChange",4,"ngIf"],[1,"text-muted","mb-3","d-block"],[3,"formGroup"],[1,"mb-3","row"],["for","nameEn",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["pInputText","","id","nameEn","formControlName","nameEn","autocomplete","off",1,"form-control"],["for","nameAr",1,"col-sm-3","col-form-label"],["pInputText","","id","nameAr","formControlName","nameAr","autocomplete","off",1,"form-control"],["for","industryId",1,"col-sm-3","col-form-label"],["appendTo","body","formControlName","industryId","selectionMode","single","placeholder","Select Industry","optionLabel","label","styleClass","w-100",1,"w-100",3,"options","filter","showClear"],["for","status",1,"col-sm-3","col-form-label"],["id","status","optionLabel","label","optionValue","value","formControlName","status","appendTo","body","placeholder","Select Status",3,"options"],["for","keywordsEn",1,"col-sm-3","col-form-label"],["formControlName","keywordsEn",3,"secondaryPlaceholder","separatorKeyCodes","addOnBlur","placeholder","displayBy","identifyBy","modelAsStrings"],[3,"showDropdownIfEmpty","autocompleteItems"],[1,"form-text"],["for","keywordsAr",1,"col-sm-3","col-form-label"],["formControlName","keywordsAr",3,"secondaryPlaceholder","separatorKeyCodes","addOnBlur","placeholder","displayBy","identifyBy","modelAsStrings"],["class","alert alert-danger",4,"ngIf"],[1,"d-flex","justify-content-end","gap-2"],["type","submit",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],["id","kt_app_content",1,"app-content","px-10","pb-10","pt-5","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-fluid"],[3,"valueChange","value","enableService"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"alert","alert-danger"],["class","d-flex align-items-center",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"ki-duotone","ki-cross-circle","fs-2","me-2"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],["responsiveLayout","scroll",3,"value","paginator","rows","loading","globalFilterFields","rowHover","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","8%"],[2,"width","20%"],[2,"width","12%"],[1,"text-gray-600"],[1,"text-gray-800","fw-semibold"],[1,"text-gray-700"],[1,"px-3","py-1","rounded","fw-semibold",2,"font-size","12px",3,"ngStyle"],[1,"d-flex","justify-content-end","gap-1"],["pButton","","icon","pi pi-pencil","pTooltip","Edit","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"width","28px","height","28px","background","#3b82f6","color","white","border-radius","6px",3,"click"],["pButton","","icon","pi pi-trash","pTooltip","Delete","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"width","28px","height","28px","background","#ef4444","color","white","border-radius","6px",3,"click"],["colspan","6"],[1,"d-flex","flex-column","align-items-center","justify-content-center","py-8"],[1,"pi","pi-inbox","text-gray-400","mb-2",2,"font-size","48px"],[1,"text-gray-600","fw-semibold"],[1,"text-gray-500",2,"font-size","14px"]],template:function(s,n){1&s&&(e.DNE(0,fl,1,3,"p-progressBar",1),e.nI1(1,"async"),e.DNE(2,Xl,81,77,"ng-container",2),e.nI1(3,"async")),2&s&&(e.Y8G("ngIf",e.bMT(1,2,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!e.bMT(3,4,n.isLoading$)))},dependencies:[u.bT,u.B3,h.l,f.Ei,g._f,v.m,T.z,V.ms,x.S,c.qT,c.me,c.BC,c.cb,c.vS,X.f7,c.j4,c.JD,w.B,$.XI,ae.A3,ae.Ql,u.Jj],styles:[".p-datatable{border:1px solid #cbd5e1;border-radius:.75rem;overflow:hidden}  .p-datatable .p-datatable-table{border:none}  .p-datatable .p-datatable-thead>tr>th{background:transparent;border-bottom:1px solid #cbd5e1;padding:.5rem 1rem;font-weight:700;color:#a1a5b7;font-size:.75rem;text-transform:uppercase;letter-spacing:.05em}  .p-datatable .p-datatable-tbody>tr>td{border-bottom:1px solid #cbd5e1;padding:.7rem 1rem;font-size:.875rem;color:#5e6278;font-weight:600}  .p-datatable .p-datatable-tbody>tr:hover{background-color:#f8f9fa}  .p-datatable .p-datatable-tbody>tr:last-child>td{border-bottom:none}.root-node[_ngcontent-%COMP%]{font-weight:700}.disabled-node[_ngcontent-%COMP%]{color:#999;cursor:not-allowed}"]})}return i})();const zl=["tt"],Hl=()=>({width:"40rem"}),je=()=>({height:"4px"}),Ul=()=>({"min-width":"50rem"}),Kl=()=>["data.code","data.label","data.status","data.nameEn","data.nameAr"],Jl=(i,r,t)=>({"badge-light-success":i,"badge-light-danger":r,"badge-light-warning":t});function Ql(i,r){1&i&&e.nrm(0,"p-progressBar",41),2&i&&e.Aen(e.lJ4(2,je))}function Wl(i,r){if(1&i&&(e.j41(0,"div",42),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",t.isicnodes.length||0," Industries ")}}function Zl(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",46),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function ec(i,r){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Name (EN)"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Name (AR)"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Status"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Actions"),e.k0s()())}function tc(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr",47)(1,"td"),e.nrm(2,"p-treeTableToggler",48),e.EFF(3),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s(),e.j41(6,"td")(7,"div",49),e.EFF(8),e.k0s()(),e.j41(9,"td")(10,"a",50),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.editIsicCode(n))}),e.j41(11,"i",51),e.nrm(12,"span",52)(13,"span",53),e.k0s()(),e.j41(14,"a",54),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(2);return e.Njj(o.deleteIsicCode(n))}),e.j41(15,"i",55),e.nrm(16,"span",52)(17,"span",53)(18,"span",56)(19,"span",57)(20,"span",58),e.k0s()()()()}if(2&i){const t=r.$implicit,s=r.rowData;e.Y8G("ttRow",t),e.R7$(2),e.Y8G("rowNode",t),e.R7$(),e.SpI(" ",s.nameEn," "),e.R7$(2),e.JRh(s.nameAr),e.R7$(2),e.Y8G("ngClass",e.sMw(6,Jl,"active"===s.status,"inactive"===s.status,"suggestion"===s.status)),e.R7$(),e.JRh(s.status)}}function nc(i,r){if(1&i&&(e.qex(0),e.DNE(1,Zl,1,2,"p-messages",25),e.j41(2,"p-treeTable",43,0),e.DNE(4,ec,9,0,"ng-template",44)(5,tc,21,10,"ng-template",45),e.k0s(),e.bVm()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.hasSuccessMessage),e.R7$(),e.Y8G("value",t.isicnodes)("scrollable",!0)("tableStyle",e.lJ4(5,Ul))("globalFilterFields",e.lJ4(6,Kl))}}function ic(i,r){1&i&&e.nrm(0,"p-progressBar",41),2&i&&e.Aen(e.lJ4(2,je))}function sc(i,r){1&i&&(e.qex(0),e.j41(1,"div",59),e.EFF(2," No Available Data "),e.k0s(),e.bVm())}function oc(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",46),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG();e.R50("value",t.messages),e.Y8G("enableService",!1)}}function rc(i,r){1&i&&(e.j41(0,"div",61),e.EFF(1," Name in English is required. "),e.k0s())}function ac(i,r){if(1&i&&(e.j41(0,"div",61),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.nameEn.errors.serverError," ")}}function lc(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,rc,2,0,"div",60)(2,ac,2,1,"div",60),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.nameEn.errors.required),e.R7$(),e.Y8G("ngIf",t.nameEn.errors.serverError)}}function cc(i,r){1&i&&(e.j41(0,"div",61),e.EFF(1," Name in Arabic is required. "),e.k0s())}function dc(i,r){if(1&i&&(e.j41(0,"div",61),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.nameAr.errors.serverError," ")}}function uc(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,cc,2,0,"div",60)(2,dc,2,1,"div",60),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.nameAr.errors.required),e.R7$(),e.Y8G("ngIf",t.nameAr.errors.serverError)}}function pc(i,r){1&i&&(e.j41(0,"div",61),e.EFF(1," Status is required. "),e.k0s())}function mc(i,r){if(1&i&&(e.j41(0,"div",61),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.status.errors.serverError," ")}}function gc(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,pc,2,0,"div",60)(2,mc,2,1,"div",60),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.status.errors.required),e.R7$(),e.Y8G("ngIf",t.status.errors.serverError)}}function _c(i,r){if(1&i&&(e.j41(0,"div",61),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.parentNode.errors.serverError," ")}}function hc(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,_c,2,1,"div",60),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.parentNode.errors.serverError)}}function fc(i,r){1&i&&(e.qex(0),e.j41(1,"span",62),e.EFF(2,"Save"),e.k0s(),e.bVm())}function bc(i,r){1&i&&(e.qex(0),e.j41(1,"span",63),e.EFF(2," Please wait "),e.nrm(3,"span",64),e.k0s(),e.bVm()),2&i&&(e.R7$(),e.xc7("display","block"))}let vc=(()=>{class i{cdr;industriesService;fb;messageService;trans;messages=[];unsubscribe=[];isicnodes;originalIsicNodes;isicTreeData;parentsOnlyTreeData;statusOptions=[{label:"All",value:""},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Suggestion",value:"suggestion"}];isicForm;displayDialog=!1;isUpdate=!1;selectedNodeId=null;isLoading$;treeTable;lang="en";selectedStatus="";searchTerm="";selectedParentNode=0;constructor(t,s,n,o,a){this.cdr=t,this.industriesService=s,this.fb=n,this.messageService=o,this.trans=a,this.isLoading$=this.industriesService.isLoading$}ngOnInit(){this.isicForm=this.fb.group({nameEn:["",c.k0.required],nameAr:["",c.k0.required],status:["",c.k0.required],parentNode:[0]}),this.loadIndustries()}loadIndustries(){const t=this.industriesService.getIsicCodesTree("en").subscribe({next:s=>{this.isicnodes=s,this.originalIsicNodes=[...s],this.isicTreeData=this.changeKeyToValue([...s]),this.parentsOnlyTreeData=this.isicTreeData.map(n=>({...n,children:[]})),this.cdr.detectChanges()},error:s=>{this.handleServerErrors(s)}});this.unsubscribe.push(t)}changeKeyToValue(t){return t.map(s=>{const n={...s,value:s.data.key,children:s.children?this.changeKeyToValue(s.children):[]};return delete n.key,n.data&&void 0!==n.data.key&&(n.data={...n.data,value:n.data.key},delete n.data.key),n})}showDialog(){this.displayDialog=!0,this.isUpdate=!1,this.selectedParentNode=0,this.isicForm.reset()}editIsicCode(t){this.displayDialog=!0,this.isUpdate=!0,this.selectedParentNode=0;const s=t.node.data;this.selectedNodeId=s.key;const n=t.node.parent?t.node.parent.data.key:0;n&&(this.selectedParentNode=this.parentsOnlyTreeData.find(o=>o.value===n)||0),this.isicForm.patchValue({nameEn:s.nameEn,nameAr:s.nameAr,status:s.status,parentNode:this.selectedParentNode})}submit(){if(this.messages=[],this.isicForm.invalid)return void this.isicForm.markAllAsTouched();const t=this.isicForm.value,s={name:{en:t.nameEn,ar:t.nameAr},status:t.status,parent_id:t.parentNode?t.parentNode.value:0};if(this.isUpdate&&null!==this.selectedNodeId){const n=this.industriesService.updateIsicCode(this.selectedNodeId,s).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Industry updated successfully."}),this.loadIndustries(),this.displayDialog=!1,this.isicForm.reset()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}else{const n=this.industriesService.createIsicCode(s,"en").subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Industry created successfully."}),this.loadIndustries(),this.displayDialog=!1,this.isicForm.reset()},error:o=>{this.handleServerErrors(o)}});this.unsubscribe.push(n)}}deleteIsicCode(t){const s=t.node.data.key;b().fire({title:"Are you sure?",text:"Do you want to delete this Industry? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(n=>{if(n.isConfirmed){const o=this.industriesService.deleteIsicCode(s).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Industry deleted successfully."}),this.loadIndustries()},error:a=>{this.handleServerErrors(a)}});this.unsubscribe.push(o)}})}applyFilter(t){this.searchTerm=t.target.value.trim().toLowerCase(),this.applyFilters()}applyStatusFilter(){this.applyFilters()}applyFilters(){this.isicnodes=this.filterNodesRecursively(this.originalIsicNodes,this.selectedStatus,this.searchTerm.toLowerCase())}filterNodesRecursively(t,s,n){const o=[];for(const a of t){const l=a.children?this.filterNodesRecursively(a.children,s,n):[];(this.isNodeMatch(a,s,n)||l.length>0)&&o.push({...a,children:l})}return o}isNodeMatch(t,s,n){const{status:o,code:a,label:l,nameEn:d,nameAr:_}=t.data,C=!s||o===s,E=!n||a&&a.toLowerCase().includes(n)||l&&l.toLowerCase().includes(n)||d&&d.toLowerCase().includes(n)||_&&_.toLowerCase().includes(n);return C&&E}onCancel(){this.displayDialog=!1,this.selectedParentNode=0,this.isicForm.reset()}handleServerErrors(t){if(this.messages=[],t.error&&t.error.errors){const s=t.error.errors,n={"name.en":"nameEn","name.ar":"nameAr",status:"status",parent_id:"parentNode"};for(const o in s)if(s.hasOwnProperty(o)){const a=s[o],l=n[o];if(l){const d=this.isicForm.get(l);d&&(d.setErrors({serverError:a[0]}),d.markAsTouched())}else this.messages.push({severity:"error",summary:"",detail:a.join(", ")})}}else this.messages.push({severity:"error",summary:"Error",detail:"An unexpected error occurred."})}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}get nameEn(){return this.isicForm.get("nameEn")}get nameAr(){return this.isicForm.get("nameAr")}get status(){return this.isicForm.get("status")}get parentNode(){return this.isicForm.get("parentNode")}get hasSuccessMessage(){return this.messages.some(t=>"success"===t.severity)}get hasErrorMessage(){return this.messages.some(t=>"error"===t.severity)}static \u0275fac=function(s){return new(s||i)(e.rXU(e.gRc),e.rXU(xe.I),e.rXU(c.ok),e.rXU(f.bg),e.rXU(W.L))};static \u0275cmp=e.VBU({type:i,selectors:[["app-industries"]],viewQuery:function(s,n){if(1&s&&e.GBs(zl,5),2&s){let o;e.mGM(o=e.lsd())&&(n.treeTable=o.first)}},decls:69,vars:41,consts:[["tt",""],["mode","indeterminate",3,"style",4,"ngIf"],["id","kt_app_toolbar",1,"app-toolbar","pt-10","mb-0"],["id","kt_app_toolbar_container",1,"app-container","container-fluid","d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","flex-column","justify-content-center","gap-1","me-3"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],["class","fw-semibold fs-7 my-0 text-muted",4,"ngIf"],["id","kt_app_content",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-fluid"],[1,"card"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"pi","pi-search","fs-3","position-absolute","ms-5"],["type","text","pInputText","","placeholder","Search Industry",1,"form-control","w-250px","ps-12",3,"input"],[1,"ms-3"],["appendTo","body","placeholder","Filter by Status",1,"w-150px",3,"ngModelChange","onChange","options","ngModel"],[1,"card-tooltip"],[1,"d-flex","align-items-center","gap-2","gap-lg-3"],[1,"btn","btn-md","btn-flex","btn-primary",3,"click"],[1,"ki-outline","ki-plus","text-white","fs-4"],[1,"card-body","pt-0"],[4,"ngIf"],["appendTo","body",3,"visibleChange","header","modal","visible"],[3,"value","enableService","valueChange",4,"ngIf"],[1,"text-muted","mb-3","d-block"],[3,"formGroup"],[1,"mb-3","row"],["for","nameEn",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["pInputText","","id","nameEn","formControlName","nameEn","autocomplete","off",1,"form-control"],["for","nameAr",1,"col-sm-3","col-form-label"],["pInputText","","id","nameAr","formControlName","nameAr","autocomplete","off",1,"form-control"],["for","status",1,"col-sm-3","col-form-label"],["appendTo","body","id","status","formControlName","status","placeholder","Select Status",1,"w-100",3,"options"],["for","parentNode",1,"col-sm-3","col-form-label"],["appendTo","body","id","parentNode","formControlName","parentNode","selectionMode","single","optionLabel","label","optionValue","value","placeholder","Select Parent","filterBy","label",1,"w-100",3,"options","showClear","filter"],[1,"d-flex","justify-content-end","gap-2"],["type","submit",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],["mode","indeterminate"],[1,"fw-semibold","fs-7","my-0","text-muted"],[3,"value","scrollable","tableStyle","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],[3,"valueChange","value","enableService"],[3,"ttRow"],[3,"rowNode"],[1,"badge",3,"ngClass"],["pTooltip","Edit Industry","tooltipPosition","top",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"ki-duotone","ki-pencil","fs-2"],[1,"path1"],[1,"path2"],["pTooltip","Delete Industry","tooltipPosition","top",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"ki-duotone","ki-trash","fs-2"],[1,"path3"],[1,"path4"],[1,"path5"],[1,"d-flex","align-items-center","justify-content-center","h-400px","text-muted"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(s,n){1&s&&(e.DNE(0,Ql,1,3,"p-progressBar",1),e.nI1(1,"async"),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),e.EFF(7," Industry "),e.k0s(),e.DNE(8,Wl,2,1,"div",7),e.k0s()()()(),e.j41(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),e.nrm(15,"i",14),e.j41(16,"input",15),e.bIt("input",function(a){return n.applyFilter(a)}),e.k0s()(),e.j41(17,"div",16)(18,"p-dropdown",17),e.mxI("ngModelChange",function(a){return e.DH7(n.selectedStatus,a)||(n.selectedStatus=a),a}),e.bIt("onChange",function(){return n.applyStatusFilter()}),e.k0s()()(),e.j41(19,"div",18)(20,"div",19)(21,"a",20),e.bIt("click",function(){return n.showDialog()}),e.nrm(22,"i",21),e.EFF(23," Create "),e.k0s()()()(),e.j41(24,"div",22),e.DNE(25,nc,6,7,"ng-container",23),e.nI1(26,"async"),e.k0s()(),e.DNE(27,ic,1,3,"p-progressBar",1),e.nI1(28,"async"),e.k0s()(),e.DNE(29,sc,3,0,"ng-container",23),e.nI1(30,"async"),e.j41(31,"p-dialog",24),e.mxI("visibleChange",function(a){return e.DH7(n.displayDialog,a)||(n.displayDialog=a),a}),e.DNE(32,oc,1,2,"p-messages",25),e.j41(33,"span",26),e.EFF(34),e.k0s(),e.j41(35,"form",27)(36,"div",28)(37,"label",29),e.EFF(38,"Name (EN)"),e.k0s(),e.j41(39,"div",30),e.nrm(40,"input",31),e.DNE(41,lc,3,2,"div",23),e.k0s()(),e.j41(42,"div",28)(43,"label",32),e.EFF(44,"Name (AR)"),e.k0s(),e.j41(45,"div",30),e.nrm(46,"input",33),e.DNE(47,uc,3,2,"div",23),e.k0s()(),e.j41(48,"div",28)(49,"label",34),e.EFF(50,"Status"),e.k0s(),e.j41(51,"div",30),e.nrm(52,"p-dropdown",35),e.DNE(53,gc,3,2,"div",23),e.k0s()(),e.j41(54,"div",28)(55,"label",36),e.EFF(56,"Parent Industry"),e.k0s(),e.j41(57,"div",30),e.nrm(58,"p-treeSelect",37),e.DNE(59,hc,2,1,"div",23),e.k0s()()(),e.j41(60,"div",38)(61,"button",39),e.nI1(62,"async"),e.bIt("click",function(){return n.submit()}),e.DNE(63,fc,3,0,"ng-container",23),e.nI1(64,"async"),e.DNE(65,bc,4,2,"ng-container",23),e.nI1(66,"async"),e.k0s(),e.j41(67,"button",40),e.bIt("click",function(){return n.onCancel()}),e.EFF(68," Cancel "),e.k0s()()()),2&s&&(e.Y8G("ngIf",e.bMT(1,26,n.isLoading$)),e.R7$(8),e.Y8G("ngIf",n.isicnodes&&n.isicnodes.length>0),e.R7$(10),e.Y8G("options",n.statusOptions),e.R50("ngModel",n.selectedStatus),e.R7$(7),e.Y8G("ngIf",!1===e.bMT(26,28,n.isLoading$)&&n.isicnodes),e.R7$(2),e.Y8G("ngIf",e.bMT(28,30,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(30,32,n.isLoading$)&&0===(null==n.isicnodes?null:n.isicnodes.length)),e.R7$(2),e.Aen(e.lJ4(40,Hl)),e.Y8G("header",n.isUpdate?"Edit Industry":"Add Industry")("modal",!0),e.R50("visible",n.displayDialog),e.R7$(),e.Y8G("ngIf",n.hasErrorMessage),e.R7$(2),e.SpI(" ",n.isUpdate?"Edit Industry":"Add Industry",". "),e.R7$(),e.Y8G("formGroup",n.isicForm),e.R7$(6),e.Y8G("ngIf",n.nameEn&&n.nameEn.errors&&(n.nameEn.touched||n.nameEn.dirty)),e.R7$(6),e.Y8G("ngIf",n.nameAr&&n.nameAr.errors&&(n.nameAr.touched||n.nameAr.dirty)),e.R7$(5),e.Y8G("options",n.statusOptions),e.R7$(),e.Y8G("ngIf",n.status&&n.status.errors&&(n.status.touched||n.status.dirty)),e.R7$(5),e.Y8G("options",n.parentsOnlyTreeData)("showClear",!0)("filter",!0),e.R7$(),e.Y8G("ngIf",n.parentNode&&n.parentNode.errors&&(n.parentNode.touched||n.parentNode.dirty)),e.R7$(2),e.Y8G("disabled",n.isicForm.invalid||e.bMT(62,34,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(64,36,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",e.bMT(66,38,n.isLoading$)))},dependencies:[u.YU,u.bT,h.l,f.Ei,v.m,T.z,V.ms,x.S,c.qT,c.me,c.BC,c.cb,c.vS,X.f7,P,se,ie,c.j4,c.JD,w.B,u.Jj]})}return i})();var Ne=p(5098),S=p(1626),De=p(4412),N=p(6354),D=p(9437),G=p(980),Ge=p(8810),qe=p(779);let Cc=(()=>{class i{http;translationService;apiUrl="https://api.foresighta.co/api/admin/request";verificationQuestionsUrl="https://api.foresighta.co/api/common/setting/verification-question/list";isLoadingSubject=new De.t(!1);isLoading$=this.isLoadingSubject.asObservable();currentLang="en";constructor(t,s){this.http=t,this.translationService=s,this.translationService.onLanguageChange().subscribe(n=>{this.currentLang=n||"en"})}getRequestVerificationQuestion(t){const s=`https://api.foresighta.co/api/admin/request/verification/question/${t}`,n=new S.Lr({Accept:"application/json","Accept-Language":"en"});return this.setLoading(!0),this.http.get(s,{headers:n}).pipe((0,N.T)(o=>o),(0,D.W)(o=>this.handleError(o)),(0,G.j)(()=>this.setLoading(!1)))}sendVerificationAnswers(t,s){const n=`https://api.foresighta.co/api/admin/request/action/company/verified/question/${t}`,o={verification_answers:s},a=new S.Lr({Accept:"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.post(n,o,{headers:a}).pipe((0,N.T)(l=>l),(0,D.W)(l=>this.handleError(l)),(0,G.j)(()=>this.setLoading(!1)))}setLoading(t){this.isLoadingSubject.next(t)}handleError(t){return(0,Ge.$)(()=>t)}getRequests(t=1,s=10){const n=new S.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":"en"});let o=(new S.Nl).set("page",t.toString()).set("per_page",s.toString());return this.setLoading(!0),this.http.get(this.apiUrl,{headers:n,params:o}).pipe((0,N.T)(a=>a),(0,D.W)(a=>this.handleError(a)),(0,G.j)(()=>this.setLoading(!1)))}getListOfVerificationQuestions(){const t=new S.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":"en"});return this.setLoading(!0),this.http.get(this.verificationQuestionsUrl,{headers:t}).pipe((0,N.T)(s=>s),(0,D.W)(s=>this.handleError(s)),(0,G.j)(()=>this.setLoading(!1)))}activateCompanyRequest(t,s,n){const o=new S.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":"en"}),a=`${this.apiUrl}/action/company/activate/${t}`,l={staff_notes:s,status:n};return this.setLoading(!0),this.http.post(a,l,{headers:o}).pipe((0,N.T)(d=>d),(0,D.W)(d=>this.handleError(d)),(0,G.j)(()=>this.setLoading(!1)))}deactivateCompanyRequest(t,s,n){const o=new S.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":"en"}),a=`${this.apiUrl}/action/company/deactivate/${t}`,l={staff_notes:s,status:n};return this.setLoading(!0),this.http.post(a,l,{headers:o}).pipe((0,N.T)(d=>d),(0,D.W)(d=>this.handleError(d)),(0,G.j)(()=>this.setLoading(!1)))}verifyCompanyRequest(t,s,n){const o=new S.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":"en"}),a=`${this.apiUrl}/action/company/verified/${t}`,l={staff_notes:s,status:n};return this.setLoading(!0),this.http.post(a,l,{headers:o}).pipe((0,N.T)(d=>d),(0,D.W)(d=>this.handleError(d)),(0,G.j)(()=>this.setLoading(!1)))}deactivateDeleteRequest(t,s,n){const o=new S.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":"en"}),a=`https://api.foresighta.co/api/admin/request/action/company/deactivate-delete/${t}`,l={staff_notes:s,status:n};return this.setLoading(!0),this.http.post(a,l,{headers:o}).pipe((0,N.T)(d=>d),(0,D.W)(d=>this.handleError(d)),(0,G.j)(()=>this.setLoading(!1)))}static \u0275fac=function(s){return new(s||i)(e.KVO(S.Qq),e.KVO(qe.L))};static \u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const yc=()=>({height:"4px"}),U=()=>({width:"80rem",overflow:"auto"}),le=(i,r)=>({"text-success":i,"text-danger":r}),z=(i,r,t)=>({"bg-light-success text-success":i,"bg-light-danger text-danger":r,"bg-light-warning text-warning":t}),ce=(i,r,t)=>({"text-success":i,"text-danger":r,"text-warning":t}),Tc=()=>["requestable.legal_name","requestable.name","type.label","final_status"],Fc=()=>({width:"100%"}),Ec=(i,r)=>({"background-color":i,color:r}),$e=(i,r,t)=>({"bg-success":i,"bg-danger":r,"bg-warning":t});function kc(i,r){1&i&&e.nrm(0,"p-progressBar",6),2&i&&e.Aen(e.lJ4(2,yc))}function xc(i,r){1&i&&(e.j41(0,"tr")(1,"th",50),e.EFF(2,"ID"),e.k0s(),e.j41(3,"th",51),e.EFF(4,"Requestable"),e.k0s(),e.j41(5,"th",52),e.EFF(6,"Request Type"),e.k0s(),e.j41(7,"th",53),e.EFF(8,"Status"),e.k0s(),e.j41(9,"th",54),e.EFF(10,"Actions"),e.k0s()())}function Ic(i,r){if(1&i&&(e.j41(0,"div",66),e.nrm(1,"img",67),e.k0s()),2&i){const t=e.XpG(2).$implicit;e.R7$(),e.Y8G("src",t.requestable.logo,e.B4B)}}function Rc(i,r){if(1&i&&(e.j41(0,"span",68),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",t.requestable.verified_email," ")}}function Sc(i,r){if(1&i&&(e.j41(0,"div",61),e.DNE(1,Ic,2,1,"div",62),e.j41(2,"div",63)(3,"span",64),e.EFF(4),e.k0s(),e.DNE(5,Rc,2,1,"span",65),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",null==t.requestable?null:t.requestable.logo),e.R7$(3),e.JRh(t.requestable.legal_name),e.R7$(),e.Y8G("ngIf",null==t.requestable?null:t.requestable.verified_email)}}function wc(i,r){if(1&i&&(e.j41(0,"span",68),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",t.requestable.email," ")}}function jc(i,r){if(1&i&&(e.j41(0,"div",61)(1,"div",66)(2,"div",69),e.EFF(3),e.k0s()(),e.j41(4,"div",63)(5,"span",64),e.EFF(6),e.k0s(),e.DNE(7,wc,2,1,"span",65),e.k0s()()),2&i){const t=e.XpG().$implicit,s=e.XpG(3);e.R7$(3),e.SpI(" ",s.getInitials(t.requestable)," "),e.R7$(3),e.JRh(t.requestable.name),e.R7$(),e.Y8G("ngIf",null==t.requestable?null:t.requestable.email)}}function Nc(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"span",55),e.EFF(3),e.k0s()(),e.j41(4,"td"),e.DNE(5,Sc,6,3,"div",56)(6,jc,8,3,"div",56),e.k0s(),e.j41(7,"td")(8,"span",57),e.EFF(9),e.k0s()(),e.j41(10,"td")(11,"span",58),e.EFF(12),e.k0s()(),e.j41(13,"td",59)(14,"button",60),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG(3);return e.Njj(o.viewRequest(n))}),e.k0s()()()}if(2&i){const t=r.$implicit;e.R7$(3),e.SpI("#",t.id,""),e.R7$(2),e.Y8G("ngIf","company"===t.requestable_type),e.R7$(),e.Y8G("ngIf","userinsighter"===t.requestable_type),e.R7$(3),e.JRh(t.type.label),e.R7$(2),e.Y8G("ngStyle",e.l_i(6,Ec,"pending"===t.final_status?"#fff3cd":"approved"===t.final_status?"#d1eddb":"#f8d7da","pending"===t.final_status?"#856404":"approved"===t.final_status?"#155724":"#721c24")),e.R7$(),e.SpI(" ",t.final_status," ")}}function Dc(i,r){1&i&&(e.j41(0,"tr")(1,"td",70)(2,"div",71),e.nrm(3,"i",72),e.j41(4,"div",55),e.EFF(5,"No requests found"),e.k0s(),e.j41(6,"div",73),e.EFF(7,"No requests match your search criteria."),e.k0s()()()())}function Gc(i,r){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"p-table",46,2),e.nI1(3,"async"),e.bIt("onLazyLoad",function(n){e.eBV(t);const o=e.XpG(2);return e.Njj(o.onLazyLoad(n))}),e.DNE(4,xc,11,0,"ng-template",47)(5,Nc,15,9,"ng-template",48)(6,Dc,8,0,"ng-template",49),e.k0s(),e.bVm()}if(2&i){const t=e.XpG(2);e.R7$(),e.Y8G("value",t.filteredRequests)("paginator",!0)("rows",t.pageSize)("totalRecords",null==t.paginatedRequests||null==t.paginatedRequests.meta?null:t.paginatedRequests.meta.total)("lazy",!0)("loading",e.bMT(3,9,t.isLoading$))("globalFilterFields",e.lJ4(11,Tc))("rowHover",!0)("tableStyle",e.lJ4(12,Fc))}}function qc(i,r){1&i&&(e.qex(0),e.j41(1,"div",71),e.nrm(2,"i",72),e.j41(3,"div",55),e.EFF(4,"No requests available"),e.k0s(),e.j41(5,"div",73),e.EFF(6,"No requests have been submitted yet."),e.k0s()(),e.bVm())}function $c(i,r){if(1&i&&(e.qex(0),e.j41(1,"a",74),e.EFF(2),e.k0s(),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("href",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.website,e.B4B),e.R7$(),e.SpI(" ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.website," ")}}function Mc(i,r){1&i&&e.EFF(0,"N/A")}function Lc(i,r){if(1&i&&(e.qex(0),e.j41(1,"a",75),e.EFF(2," View Document "),e.k0s(),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("href",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.register_document,e.B4B)}}function Ac(i,r){1&i&&e.EFF(0,"N/A")}function Vc(i,r){if(1&i&&(e.j41(0,"div",76)(1,"h6"),e.EFF(2),e.k0s(),e.j41(3,"div",29)(4,"div",30),e.EFF(5,"Status:"),e.k0s(),e.j41(6,"div",31)(7,"div",77),e.EFF(8),e.k0s()()(),e.j41(9,"div",29)(10,"div",30),e.EFF(11,"Handled By:"),e.k0s(),e.j41(12,"div",31),e.EFF(13),e.k0s()(),e.j41(14,"div",29)(15,"div",30),e.EFF(16,"Handled At:"),e.k0s(),e.j41(17,"div",31),e.EFF(18),e.nI1(19,"date"),e.k0s()(),e.j41(20,"div",29)(21,"div",30),e.EFF(22,"Staff Notes:"),e.k0s(),e.j41(23,"div",31),e.EFF(24),e.k0s()(),e.j41(25,"div",29)(26,"div",30),e.EFF(27,"Client Comments:"),e.k0s(),e.j41(28,"div",31),e.EFF(29),e.k0s()()()),2&i){const t=r.$implicit,s=r.index;e.R7$(2),e.E5c("Request #",s+1," ",t.type.label," (ID: ",t.id,")"),e.R7$(5),e.Y8G("ngClass",e.sMw(12,z,"approved"===t.status,"declined"===t.status,"pending"===t.status)),e.R7$(),e.JRh(t.status),e.R7$(5),e.JRh(t.handel_by||"Unassigned"),e.R7$(5),e.SpI(" ",t.handel_at?e.i5U(19,9,t.handel_at,"medium"):"Not Handled Yet"," "),e.R7$(6),e.JRh(t.staff_notes||"None"),e.R7$(5),e.JRh(t.comments||"None")}}function Bc(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",78)(1,"h6",79),e.EFF(2,"Staff Notes"),e.k0s(),e.j41(3,"div",79)(4,"label",80),e.EFF(5,"Internal notes and comments:"),e.k0s(),e.j41(6,"textarea",81),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.staffNotes,n)||(o.staffNotes=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG(2);e.R7$(6),e.R50("ngModel",t.staffNotes)}}function Yc(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",82)(1,"div",83)(2,"button",84),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onActivate("approved"))}),e.EFF(3," Approve "),e.k0s(),e.j41(4,"button",85),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onActivate("declined"))}),e.EFF(5," Disapprove "),e.k0s()()()}if(2&i){const t=e.XpG(2);e.R7$(2),e.Y8G("disabled",!t.staffNotes),e.R7$(2),e.Y8G("disabled",!t.staffNotes)}}function Pc(i,r){if(1&i&&(e.j41(0,"div",83)(1,"div",94),e.nrm(2,"input",95),e.j41(3,"label",96),e.EFF(4,"Yes"),e.k0s()(),e.j41(5,"div",94),e.nrm(6,"input",97),e.j41(7,"label",96),e.EFF(8,"No"),e.k0s()()()),2&i){const t=e.XpG().$implicit;e.R7$(2),e.Y8G("formControlName","question_"+t.id)("id","question_"+t.id+"_yes"),e.R7$(4),e.Y8G("formControlName","question_"+t.id)("id","question_"+t.id+"_no")}}function Xc(i,r){if(1&i&&(e.j41(0,"div"),e.nrm(1,"input",98),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.Y8G("formControlName","question_"+t.id)}}function Oc(i,r){if(1&i&&(e.j41(0,"div",79)(1,"label",80),e.EFF(2),e.k0s(),e.j41(3,"div",91),e.DNE(4,Pc,9,4,"div",92)(5,Xc,2,1,"div",93),e.k0s()()),2&i){const t=r.$implicit;e.R7$(2),e.Lme(" ",t.id,". ",t.question," "),e.R7$(),e.Y8G("ngSwitch",t.type),e.R7$(),e.Y8G("ngSwitchCase","boolean"),e.R7$(),e.Y8G("ngSwitchCase","text")}}function zc(i,r){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"h5",79),e.EFF(2,"Please Answer These Questions"),e.k0s(),e.j41(3,"form",86),e.DNE(4,Oc,6,5,"div",87),e.k0s(),e.j41(5,"div",88)(6,"button",89),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.submitVerificationAnswers())}),e.EFF(7," Submit Answers "),e.k0s(),e.j41(8,"button",90),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onCancelVerification())}),e.EFF(9," Cancel "),e.k0s()()()}if(2&i){const t=e.XpG(2);e.R7$(3),e.Y8G("formGroup",t.verificationForm),e.R7$(),e.Y8G("ngForOf",t.verificationQuestions)}}function Hc(i,r){if(1&i&&(e.qex(0),e.j41(1,"a",74),e.EFF(2),e.k0s(),e.bVm()),2&i){const t=e.XpG(3);e.R7$(),e.Y8G("href",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.website,e.B4B),e.R7$(),e.SpI(" ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.website," ")}}function Uc(i,r){1&i&&e.EFF(0,"N/A")}function Kc(i,r){if(1&i&&(e.qex(0),e.j41(1,"a",75),e.EFF(2," View Document "),e.k0s(),e.bVm()),2&i){const t=e.XpG(3);e.R7$(),e.Y8G("href",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.register_document,e.B4B)}}function Jc(i,r){1&i&&e.EFF(0,"N/A")}function Qc(i,r){if(1&i&&(e.j41(0,"div",103)(1,"div",104),e.EFF(2),e.j41(3,"span",105),e.EFF(4),e.k0s()(),e.j41(5,"div"),e.EFF(6,"Answer: "),e.j41(7,"strong"),e.EFF(8),e.k0s()()()),2&i){const t=r.$implicit,s=e.XpG(4);e.R7$(2),e.SpI(" Question #",t.verification_question_id,": "),e.R7$(2),e.SpI(" ",s.getQuestionText(t.verification_question_id)," "),e.R7$(4),e.JRh(t.answer)}}function Wc(i,r){if(1&i&&(e.j41(0,"div",101),e.DNE(1,Qc,9,3,"div",102),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.Y8G("ngForOf",t.answeredQuestions)}}function Zc(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",106),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG(3);return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG(3);e.R50("value",t.messages),e.Y8G("enableService",!1)}}function ed(i,r){if(1&i&&(e.j41(0,"div",112)(1,"span",105),e.EFF(2,"Handled by:"),e.k0s(),e.EFF(3),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(3),e.SpI(" ",t.handel_by," ")}}function td(i,r){if(1&i&&(e.j41(0,"div",112)(1,"span",105),e.EFF(2,"Staff Notes:"),e.k0s(),e.EFF(3),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(3),e.SpI(" ",t.staff_notes," ")}}function nd(i,r){if(1&i&&(e.j41(0,"div")(1,"span",105),e.EFF(2,"Comments:"),e.k0s(),e.EFF(3),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(3),e.SpI(" ",t.comments," ")}}function id(i,r){if(1&i&&(e.j41(0,"div",107),e.nrm(1,"div",108),e.j41(2,"div",109)(3,"div",110)(4,"span",104),e.EFF(5,"Status: "),e.j41(6,"span",77),e.EFF(7),e.k0s()(),e.j41(8,"span",105),e.EFF(9),e.nI1(10,"date"),e.k0s()(),e.DNE(11,ed,4,1,"div",111)(12,td,4,1,"div",111)(13,nd,4,1,"div",5),e.k0s()()),2&i){const t=r.$implicit;e.R7$(),e.Y8G("ngClass",e.sMw(10,$e,"approved"===t.status,"declined"===t.status,"pending"===t.status)),e.R7$(5),e.Y8G("ngClass",e.sMw(14,z,"approved"===t.status,"declined"===t.status,"pending"===t.status)),e.R7$(),e.JRh(t.status),e.R7$(2),e.JRh(e.i5U(10,7,t.handel_at,"medium")),e.R7$(2),e.Y8G("ngIf",t.handel_by),e.R7$(),e.Y8G("ngIf",t.staff_notes),e.R7$(),e.Y8G("ngIf",t.comments)}}function sd(i,r){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"div",40)(2,"div",113)(3,"h6"),e.EFF(4,"Staff Notes"),e.k0s(),e.j41(5,"textarea",114),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(3);return e.DH7(o.staffNotes,n)||(o.staffNotes=n),e.Njj(n)}),e.k0s()()(),e.j41(6,"div",40)(7,"div",115)(8,"button",116),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.onVerify("approved"))}),e.EFF(9," Approve "),e.k0s()(),e.j41(10,"div",117)(11,"button",118),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.onVerify("declined"))}),e.EFF(12," Disapprove\n"),e.k0s()()()()}if(2&i){const t=e.XpG(3);e.R7$(5),e.R50("ngModel",t.staffNotes),e.R7$(3),e.Y8G("disabled",!t.staffNotes),e.R7$(3),e.Y8G("disabled",!t.staffNotes)}}function od(i,r){if(1&i&&(e.j41(0,"div")(1,"div",24)(2,"div",25)(3,"div",26)(4,"div",27)(5,"h5",28),e.EFF(6,"Company Information"),e.k0s(),e.j41(7,"div",29)(8,"div",30),e.EFF(9,"Legal Name:"),e.k0s(),e.j41(10,"div",31),e.EFF(11),e.k0s()(),e.j41(12,"div",29)(13,"div",30),e.EFF(14,"Request Type:"),e.k0s(),e.j41(15,"div",31),e.EFF(16),e.k0s()(),e.j41(17,"div",29)(18,"div",30),e.EFF(19,"Requestable Type:"),e.k0s(),e.j41(20,"div",31),e.EFF(21),e.k0s()(),e.j41(22,"div",29)(23,"div",30),e.EFF(24,"Status:"),e.k0s(),e.j41(25,"div",31),e.EFF(26),e.k0s()()()()(),e.j41(27,"div",25)(28,"div",26)(29,"div",27)(30,"h5",28),e.EFF(31,"Contact Details"),e.k0s(),e.j41(32,"div",29)(33,"div",30),e.EFF(34,"Website:"),e.k0s(),e.j41(35,"div",31),e.DNE(36,Hc,3,2,"ng-container",32)(37,Uc,1,0,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(39,"div",29)(40,"div",30),e.EFF(41,"Verified Email:"),e.k0s(),e.j41(42,"div",31),e.EFF(43),e.k0s()(),e.j41(44,"div",29)(45,"div",30),e.EFF(46,"Company Phone:"),e.k0s(),e.j41(47,"div",31),e.EFF(48),e.k0s()(),e.j41(49,"div",29)(50,"div",30),e.EFF(51,"Address:"),e.k0s(),e.j41(52,"div",31),e.EFF(53),e.k0s()()()()()(),e.j41(54,"div",33)(55,"div",27)(56,"h5",28),e.EFF(57,"Additional Information"),e.k0s(),e.j41(58,"div",29)(59,"div",30),e.EFF(60,"About Us:"),e.k0s(),e.j41(61,"div",31),e.EFF(62),e.k0s()(),e.j41(63,"div",29)(64,"div",30),e.EFF(65,"Register Document:"),e.k0s(),e.j41(66,"div",31),e.DNE(67,Kc,3,1,"ng-container",32)(68,Jc,1,0,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(70,"div",29)(71,"div",30),e.EFF(72,"Comments:"),e.k0s(),e.j41(73,"div",31),e.EFF(74),e.k0s()(),e.j41(75,"div",29)(76,"div",30),e.EFF(77,"Staff Notes:"),e.k0s(),e.j41(78,"div",31),e.EFF(79),e.k0s()()()(),e.j41(80,"h5"),e.EFF(81,"Submitted Q&A"),e.k0s(),e.DNE(82,Wc,2,1,"div",99)(83,Zc,1,2,"p-messages",100),e.j41(84,"div",78)(85,"h5",79),e.EFF(86,"Request History"),e.k0s(),e.j41(87,"div",44),e.DNE(88,id,14,18,"div",45),e.k0s()(),e.DNE(89,sd,13,3,"div",5),e.k0s()),2&i){const t=e.sdS(38),s=e.sdS(69),n=e.XpG(2);e.R7$(11),e.JRh(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.legal_name),e.R7$(5),e.JRh(null==n.selectedRequest||null==n.selectedRequest.type?null:n.selectedRequest.type.label),e.R7$(5),e.JRh(null==n.selectedRequest?null:n.selectedRequest.requestable_type),e.R7$(5),e.JRh(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.status),e.R7$(10),e.Y8G("ngIf",null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.website)("ngIfElse",t),e.R7$(7),e.SpI(" ",(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.verified_email)||"N/A"," "),e.R7$(5),e.SpI(" ",(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.company_phone)||"N/A"," "),e.R7$(5),e.SpI(" ",(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.address)||"N/A"," "),e.R7$(9),e.SpI(" ",(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.about_us)||"N/A"," "),e.R7$(5),e.Y8G("ngIf",null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.register_document)("ngIfElse",s),e.R7$(7),e.SpI(" ",(null==n.selectedRequest?null:n.selectedRequest.comments)||"None"," "),e.R7$(5),e.SpI(" ",(null==n.selectedRequest?null:n.selectedRequest.staff_notes)||"None"," "),e.R7$(3),e.Y8G("ngIf",n.answeredQuestions&&n.answeredQuestions.length>0),e.R7$(),e.Y8G("ngIf",n.hasErrorMessage),e.R7$(5),e.Y8G("ngForOf",n.selectedChain),e.R7$(),e.Y8G("ngIf","pending"===(null==n.selectedRequest?null:n.selectedRequest.status))}}function rd(i,r){if(1&i&&(e.j41(0,"div",33)(1,"div",27)(2,"h5",28),e.EFF(3,"Register Document"),e.k0s(),e.j41(4,"div",112)(5,"a",119)(6,"i",120),e.nrm(7,"span",121)(8,"span",122),e.k0s()()()()()),2&i){const t=e.XpG(2);e.R7$(5),e.Y8G("href",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.register_document,e.B4B)}}function ad(i,r){if(1&i&&(e.qex(0),e.j41(1,"a",74),e.EFF(2),e.k0s(),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("href",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.website,e.B4B),e.R7$(),e.SpI(" ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.website," ")}}function ld(i,r){1&i&&e.EFF(0,"N/A")}function cd(i,r){if(1&i&&(e.qex(0),e.j41(1,"a",75),e.EFF(2," View Document "),e.k0s(),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("href",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.register_document,e.B4B)}}function dd(i,r){1&i&&e.EFF(0,"N/A")}function ud(i,r){if(1&i&&(e.j41(0,"div",76)(1,"h6"),e.EFF(2),e.k0s(),e.j41(3,"div",29)(4,"div",30),e.EFF(5,"Status:"),e.k0s(),e.j41(6,"div",31)(7,"div",77),e.EFF(8),e.k0s()()(),e.j41(9,"div",29)(10,"div",30),e.EFF(11,"Handled By:"),e.k0s(),e.j41(12,"div",31),e.EFF(13),e.k0s()(),e.j41(14,"div",29)(15,"div",30),e.EFF(16,"Handled At:"),e.k0s(),e.j41(17,"div",31),e.EFF(18),e.nI1(19,"date"),e.k0s()(),e.j41(20,"div",29)(21,"div",30),e.EFF(22,"Staff Notes:"),e.k0s(),e.j41(23,"div",31),e.EFF(24),e.k0s()(),e.j41(25,"div",29)(26,"div",30),e.EFF(27,"Client Comments:"),e.k0s(),e.j41(28,"div",31),e.EFF(29),e.k0s()()()),2&i){const t=r.$implicit,s=r.index;e.R7$(2),e.E5c("Request #",s+1," ",t.type.label," (ID: ",t.id,")"),e.R7$(5),e.Y8G("ngClass",e.sMw(12,z,"approved"===t.status,"declined"===t.status,"pending"===t.status)),e.R7$(),e.JRh(t.status),e.R7$(5),e.JRh(t.handel_by||"Unassigned"),e.R7$(5),e.SpI(" ",t.handel_at?e.i5U(19,9,t.handel_at,"medium"):"Not Handled Yet"," "),e.R7$(6),e.JRh(t.staff_notes||"None"),e.R7$(5),e.JRh(t.comments||"None")}}function pd(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",78)(1,"h6",79),e.EFF(2,"Staff Notes"),e.k0s(),e.j41(3,"div",79)(4,"label",80),e.EFF(5,"Internal notes and comments:"),e.k0s(),e.j41(6,"textarea",81),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.staffNotes,n)||(o.staffNotes=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG(2);e.R7$(6),e.R50("ngModel",t.staffNotes)}}function md(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",82)(1,"div",83)(2,"button",84),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDeactivate("approved"))}),e.EFF(3," Approve "),e.k0s(),e.j41(4,"button",85),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDeactivate("declined"))}),e.EFF(5," Disapprove "),e.k0s()()()}if(2&i){const t=e.XpG(2);e.R7$(2),e.Y8G("disabled",!t.staffNotes),e.R7$(2),e.Y8G("disabled",!t.staffNotes)}}function gd(i,r){if(1&i&&e.nrm(0,"img",21),2&i){const t=e.XpG(3);e.Y8G("src",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.logo,e.B4B)("alt",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.legal_name)}}function _d(i,r){if(1&i&&(e.qex(0),e.DNE(1,gd,1,2,"img",123),e.bVm()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.logo)}}function hd(i,r){if(1&i&&e.nrm(0,"img",125),2&i){const t=e.XpG(3);e.Y8G("src",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.profile_photo_url,e.B4B)("alt",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.first_name)}}function fd(i,r){if(1&i&&(e.j41(0,"div",126),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.Lme(" ",null==t.selectedRequest||null==t.selectedRequest.requestable||null==t.selectedRequest.requestable.first_name?null:t.selectedRequest.requestable.first_name.charAt(0)," ",null==t.selectedRequest||null==t.selectedRequest.requestable||null==t.selectedRequest.requestable.last_name?null:t.selectedRequest.requestable.last_name.charAt(0)," ")}}function bd(i,r){if(1&i&&(e.qex(0),e.DNE(1,hd,1,2,"img",124)(2,fd,2,2,"ng-template",null,3,e.C5r),e.bVm()),2&i){const t=e.sdS(3),s=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==s.selectedRequest||null==s.selectedRequest.requestable?null:s.selectedRequest.requestable.profile_photo_url)("ngIfElse",t)}}function vd(i,r){if(1&i&&(e.j41(0,"p")(1,"strong"),e.EFF(2,"Register Document:"),e.k0s(),e.j41(3,"a",128),e.EFF(4,"View Document"),e.k0s()()),2&i){const t=e.XpG(3);e.R7$(3),e.Y8G("href",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.register_document,e.B4B)}}function Cd(i,r){if(1&i&&(e.qex(0),e.j41(1,"div",127)(2,"p")(3,"strong"),e.EFF(4,"Legal Name:"),e.k0s(),e.EFF(5),e.k0s(),e.j41(6,"p")(7,"strong"),e.EFF(8,"Email:"),e.k0s(),e.EFF(9),e.k0s(),e.j41(10,"p")(11,"strong"),e.EFF(12,"Website:"),e.k0s(),e.EFF(13),e.k0s(),e.j41(14,"p")(15,"strong"),e.EFF(16,"About Us:"),e.k0s(),e.EFF(17),e.k0s()(),e.j41(18,"div",127)(19,"p")(20,"strong"),e.EFF(21,"Phone:"),e.k0s(),e.EFF(22),e.k0s(),e.j41(23,"p")(24,"strong"),e.EFF(25,"Address:"),e.k0s(),e.EFF(26),e.k0s(),e.j41(27,"p")(28,"strong"),e.EFF(29,"Status:"),e.k0s(),e.EFF(30),e.k0s(),e.DNE(31,vd,5,1,"p",5),e.k0s(),e.bVm()),2&i){const t=e.XpG(2);e.R7$(5),e.SpI(" ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.legal_name,""),e.R7$(4),e.SpI(" ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.verified_email,""),e.R7$(4),e.SpI(" ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.website,""),e.R7$(4),e.SpI(" ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.about_us,""),e.R7$(5),e.SpI(" ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.company_phone,""),e.R7$(4),e.SpI(" ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.address,""),e.R7$(4),e.SpI(" ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.status,""),e.R7$(),e.Y8G("ngIf",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.register_document)}}function yd(i,r){if(1&i&&(e.qex(0),e.j41(1,"div",127)(2,"p")(3,"strong"),e.EFF(4,"Full Name:"),e.k0s(),e.EFF(5),e.k0s(),e.j41(6,"p")(7,"strong"),e.EFF(8,"Email:"),e.k0s(),e.EFF(9),e.k0s(),e.j41(10,"p")(11,"strong"),e.EFF(12,"Phone:"),e.k0s(),e.EFF(13),e.k0s()(),e.j41(14,"div",127)(15,"p")(16,"strong"),e.EFF(17,"Country:"),e.k0s(),e.EFF(18),e.k0s(),e.j41(19,"p")(20,"strong"),e.EFF(21,"Status:"),e.k0s(),e.EFF(22),e.k0s(),e.j41(23,"p")(24,"strong"),e.EFF(25,"Bio:"),e.k0s(),e.EFF(26),e.k0s()(),e.bVm()),2&i){const t=e.XpG(2);e.R7$(5),e.Lme(" ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.first_name," ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.last_name,""),e.R7$(4),e.SpI(" ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.email,""),e.R7$(4),e.SpI(" ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.phone,""),e.R7$(5),e.SpI(" ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.country,""),e.R7$(4),e.SpI(" ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.insighter_status,""),e.R7$(4),e.SpI(" ",null==t.selectedRequest||null==t.selectedRequest.requestable?null:t.selectedRequest.requestable.bio,"")}}function Td(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",41)(1,"div",27)(2,"h5",42),e.EFF(3,"Staff Notes"),e.k0s(),e.j41(4,"textarea",129),e.mxI("ngModelChange",function(n){e.eBV(t);const o=e.XpG(2);return e.DH7(o.staffNotes,n)||(o.staffNotes=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG(2);e.R7$(4),e.R50("ngModel",t.staffNotes)}}function Fd(i,r){if(1&i&&(e.j41(0,"div",112)(1,"span",105),e.EFF(2,"Handled by:"),e.k0s(),e.EFF(3),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(3),e.SpI(" ",t.handel_by," ")}}function Ed(i,r){if(1&i&&(e.j41(0,"div",112)(1,"span",105),e.EFF(2,"Staff Notes:"),e.k0s(),e.EFF(3),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(3),e.SpI(" ",t.staff_notes," ")}}function kd(i,r){if(1&i&&(e.j41(0,"div")(1,"span",105),e.EFF(2,"Comments:"),e.k0s(),e.EFF(3),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(3),e.SpI(" ",t.comments," ")}}function xd(i,r){if(1&i&&(e.j41(0,"div",107),e.nrm(1,"div",108),e.j41(2,"div",109)(3,"div",110)(4,"span",104),e.EFF(5,"Status: "),e.j41(6,"span",77),e.EFF(7),e.nI1(8,"titlecase"),e.k0s()(),e.j41(9,"span",105),e.EFF(10),e.nI1(11,"date"),e.k0s()(),e.DNE(12,Fd,4,1,"div",111)(13,Ed,4,1,"div",111)(14,kd,4,1,"div",5),e.k0s()()),2&i){const t=r.$implicit;e.R7$(),e.Y8G("ngClass",e.sMw(12,$e,"approved"===t.status,"declined"===t.status,"pending"===t.status)),e.R7$(5),e.Y8G("ngClass",e.sMw(16,z,"approved"===t.status,"declined"===t.status,"pending"===t.status)),e.R7$(),e.JRh(e.bMT(8,7,t.status)),e.R7$(3),e.JRh(e.i5U(11,9,t.handel_at,"medium")),e.R7$(2),e.Y8G("ngIf",t.handel_by),e.R7$(),e.Y8G("ngIf",t.staff_notes),e.R7$(),e.Y8G("ngIf",t.comments)}}function Id(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",82)(1,"div",83)(2,"button",84),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDeactivateDelete("approved"))}),e.EFF(3," Approve "),e.k0s(),e.j41(4,"button",85),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.onDeactivateDelete("declined"))}),e.EFF(5," Disapprove "),e.k0s()()()}if(2&i){const t=e.XpG(2);e.R7$(2),e.Y8G("disabled",!t.staffNotes),e.R7$(2),e.Y8G("disabled",!t.staffNotes)}}function Rd(i,r){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h1",11),e.EFF(6," Requests "),e.k0s(),e.j41(7,"div",12),e.EFF(8),e.k0s()(),e.j41(9,"div",13),e.nrm(10,"i",14),e.j41(11,"input",15),e.bIt("input",function(n){e.eBV(t);const o=e.XpG();return e.Njj(o.applyFilter(n))}),e.k0s()()()()(),e.j41(12,"div",16)(13,"div",17),e.DNE(14,Gc,7,13,"ng-container",5),e.nI1(15,"async"),e.DNE(16,qc,7,0,"ng-container",5),e.nI1(17,"async"),e.k0s()(),e.j41(18,"p-dialog",18),e.mxI("visibleChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.visible,n)||(o.visible=n),e.Njj(n)}),e.j41(19,"div",19)(20,"div",20),e.nrm(21,"img",21),e.k0s(),e.j41(22,"div",22),e.EFF(23),e.nrm(24,"br"),e.j41(25,"div",23),e.EFF(26),e.k0s()()(),e.j41(27,"div",24)(28,"div",25)(29,"div",26)(30,"div",27)(31,"h5",28),e.EFF(32,"Company Information"),e.k0s(),e.j41(33,"div",29)(34,"div",30),e.EFF(35,"Legal Name:"),e.k0s(),e.j41(36,"div",31),e.EFF(37),e.k0s()(),e.j41(38,"div",29)(39,"div",30),e.EFF(40,"Request Type:"),e.k0s(),e.j41(41,"div",31),e.EFF(42),e.k0s()(),e.j41(43,"div",29)(44,"div",30),e.EFF(45,"Requestable Type:"),e.k0s(),e.j41(46,"div",31),e.EFF(47),e.k0s()(),e.j41(48,"div",29)(49,"div",30),e.EFF(50,"Status:"),e.k0s(),e.j41(51,"div",31),e.EFF(52),e.k0s()()()()(),e.j41(53,"div",25)(54,"div",26)(55,"div",27)(56,"h5",28),e.EFF(57,"Contact Details"),e.k0s(),e.j41(58,"div",29)(59,"div",30),e.EFF(60,"Website:"),e.k0s(),e.j41(61,"div",31),e.DNE(62,$c,3,2,"ng-container",32)(63,Mc,1,0,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(65,"div",29)(66,"div",30),e.EFF(67,"Verified Email:"),e.k0s(),e.j41(68,"div",31),e.EFF(69),e.k0s()(),e.j41(70,"div",29)(71,"div",30),e.EFF(72,"Company Phone:"),e.k0s(),e.j41(73,"div",31),e.EFF(74),e.k0s()(),e.j41(75,"div",29)(76,"div",30),e.EFF(77,"Address:"),e.k0s(),e.j41(78,"div",31),e.EFF(79),e.k0s()()()()()(),e.j41(80,"div",33)(81,"div",27)(82,"h5",28),e.EFF(83,"Additional Information"),e.k0s(),e.j41(84,"div",29)(85,"div",30),e.EFF(86,"About Us:"),e.k0s(),e.j41(87,"div",31),e.EFF(88),e.k0s()(),e.j41(89,"div",29)(90,"div",30),e.EFF(91,"Register Document:"),e.k0s(),e.j41(92,"div",31),e.DNE(93,Lc,3,1,"ng-container",32)(94,Ac,1,0,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(96,"div",29)(97,"div",30),e.EFF(98,"Comments:"),e.k0s(),e.j41(99,"div",31),e.EFF(100),e.k0s()(),e.j41(101,"div",29)(102,"div",30),e.EFF(103,"Staff Notes:"),e.k0s(),e.j41(104,"div",31),e.EFF(105),e.k0s()()()(),e.j41(106,"div",33)(107,"div",27)(108,"h5",28),e.EFF(109,"Request History"),e.k0s(),e.DNE(110,Vc,30,16,"div",34),e.k0s()(),e.DNE(111,Bc,7,1,"div",35)(112,Yc,6,2,"div",36),e.k0s(),e.j41(113,"p-dialog",18),e.mxI("visibleChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.visibleVerification,n)||(o.visibleVerification=n),e.Njj(n)}),e.j41(114,"div",19)(115,"div",20),e.nrm(116,"img",21),e.k0s(),e.j41(117,"div",37),e.EFF(118),e.nrm(119,"br"),e.j41(120,"div",38),e.EFF(121),e.k0s()()(),e.DNE(122,zc,10,2,"div",5)(123,od,90,18,"div",5),e.k0s(),e.j41(124,"p-dialog",18),e.mxI("visibleChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.visibleDeactivate,n)||(o.visibleDeactivate=n),e.Njj(n)}),e.j41(125,"div",19)(126,"div",20),e.nrm(127,"img",21),e.k0s(),e.j41(128,"div",22),e.EFF(129),e.nrm(130,"br"),e.j41(131,"div",38),e.EFF(132),e.k0s()()(),e.DNE(133,rd,9,1,"div",39),e.j41(134,"div",40)(135,"div",25)(136,"div",26)(137,"div",27)(138,"h5",28),e.EFF(139,"Company Information"),e.k0s(),e.j41(140,"div",29)(141,"div",30),e.EFF(142,"Legal Name:"),e.k0s(),e.j41(143,"div",31),e.EFF(144),e.k0s()(),e.j41(145,"div",29)(146,"div",30),e.EFF(147,"Request Type:"),e.k0s(),e.j41(148,"div",31),e.EFF(149),e.k0s()(),e.j41(150,"div",29)(151,"div",30),e.EFF(152,"Requestable Type:"),e.k0s(),e.j41(153,"div",31),e.EFF(154),e.k0s()(),e.j41(155,"div",29)(156,"div",30),e.EFF(157,"Status:"),e.k0s(),e.j41(158,"div",31),e.EFF(159),e.k0s()()()()(),e.j41(160,"div",25)(161,"div",26)(162,"div",27)(163,"h5",28),e.EFF(164,"Contact Details"),e.k0s(),e.j41(165,"div",29)(166,"div",30),e.EFF(167,"Website:"),e.k0s(),e.j41(168,"div",31),e.DNE(169,ad,3,2,"ng-container",32)(170,ld,1,0,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(172,"div",29)(173,"div",30),e.EFF(174,"Verified Email:"),e.k0s(),e.j41(175,"div",31),e.EFF(176),e.k0s()(),e.j41(177,"div",29)(178,"div",30),e.EFF(179,"Company Phone:"),e.k0s(),e.j41(180,"div",31),e.EFF(181),e.k0s()(),e.j41(182,"div",29)(183,"div",30),e.EFF(184,"Address:"),e.k0s(),e.j41(185,"div",31),e.EFF(186),e.k0s()()()()()(),e.j41(187,"div",33)(188,"div",27)(189,"h5",28),e.EFF(190,"Additional Information"),e.k0s(),e.j41(191,"div",29)(192,"div",30),e.EFF(193,"About Us:"),e.k0s(),e.j41(194,"div",31),e.EFF(195),e.k0s()(),e.j41(196,"div",29)(197,"div",30),e.EFF(198,"Register Document:"),e.k0s(),e.j41(199,"div",31),e.DNE(200,cd,3,1,"ng-container",32)(201,dd,1,0,"ng-template",null,1,e.C5r),e.k0s()(),e.j41(203,"div",29)(204,"div",30),e.EFF(205,"Staff Notes:"),e.k0s(),e.j41(206,"div",31),e.EFF(207),e.k0s()()()(),e.j41(208,"div",33)(209,"div",27)(210,"h5",28),e.EFF(211,"Request History"),e.k0s(),e.DNE(212,ud,30,16,"div",34),e.k0s()(),e.DNE(213,pd,7,1,"div",35)(214,md,6,2,"div",36),e.k0s(),e.j41(215,"p-dialog",18),e.mxI("visibleChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.visibleDeactivateDelete,n)||(o.visibleDeactivateDelete=n),e.Njj(n)}),e.j41(216,"div",19)(217,"div",20),e.DNE(218,_d,2,1,"ng-container",5)(219,bd,4,2,"ng-container",5),e.k0s(),e.j41(220,"div",22),e.EFF(221),e.nrm(222,"br"),e.j41(223,"div",38),e.EFF(224),e.nI1(225,"titlecase"),e.k0s()()(),e.j41(226,"div",41)(227,"div",27)(228,"h5",42),e.EFF(229),e.k0s(),e.j41(230,"div",40),e.DNE(231,Cd,32,8,"ng-container",5)(232,yd,27,7,"ng-container",5),e.k0s()()(),e.j41(233,"div",41)(234,"div",27)(235,"h5",42),e.EFF(236,"Deactivation Reason"),e.k0s(),e.j41(237,"p"),e.EFF(238),e.k0s()()(),e.DNE(239,Td,5,1,"div",43),e.j41(240,"div",41)(241,"div",27)(242,"h5",28),e.EFF(243,"Request History"),e.k0s(),e.j41(244,"div",44),e.DNE(245,xd,15,20,"div",45),e.k0s()()(),e.DNE(246,Id,6,2,"div",36),e.k0s(),e.bVm()}if(2&i){const t=e.sdS(64),s=e.sdS(95),n=e.XpG();e.R7$(8),e.SpI("",(null==n.paginatedRequests||null==n.paginatedRequests.meta?null:n.paginatedRequests.meta.total)||0," Requests"),e.R7$(6),e.Y8G("ngIf",!1===e.bMT(15,93,n.isLoading$)&&n.requestsList&&n.requestsList.length>0),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(17,95,n.isLoading$)&&n.requestsList&&0===n.requestsList.length),e.R7$(2),e.Aen(e.lJ4(99,U)),e.Y8G("modal",!0),e.R50("visible",n.visible),e.Y8G("dismissableMask",!0)("maximizable",!0),e.R7$(3),e.Y8G("src",null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.logo,e.B4B)("alt",null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.legal_name),e.R7$(),e.Y8G("ngClass",e.l_i(100,le,"activate_company"===(null==n.selectedRequest||null==n.selectedRequest.type?null:n.selectedRequest.type.key),"deactivate_company"===(null==n.selectedRequest||null==n.selectedRequest.type?null:n.selectedRequest.type.key))),e.R7$(),e.SpI(" ",null==n.selectedRequest||null==n.selectedRequest.type?null:n.selectedRequest.type.label," Request "),e.R7$(2),e.Y8G("ngClass",e.sMw(103,z,"approved"===(null==n.selectedRequest?null:n.selectedRequest.status),"declined"===(null==n.selectedRequest?null:n.selectedRequest.status),"pending"===(null==n.selectedRequest?null:n.selectedRequest.status))),e.R7$(),e.SpI(" ",null==n.selectedRequest?null:n.selectedRequest.status," "),e.R7$(11),e.JRh(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.legal_name),e.R7$(5),e.JRh(null==n.selectedRequest||null==n.selectedRequest.type?null:n.selectedRequest.type.label),e.R7$(5),e.JRh(null==n.selectedRequest?null:n.selectedRequest.requestable_type),e.R7$(5),e.JRh(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.status),e.R7$(10),e.Y8G("ngIf",null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.website)("ngIfElse",t),e.R7$(7),e.SpI(" ",(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.verified_email)||"N/A"," "),e.R7$(5),e.SpI(" ",(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.company_phone)||"N/A"," "),e.R7$(5),e.SpI(" ",(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.address)||"N/A"," "),e.R7$(9),e.SpI(" ",(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.about_us)||"N/A"," "),e.R7$(5),e.Y8G("ngIf",null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.register_document)("ngIfElse",s),e.R7$(7),e.SpI(" ",(null==n.selectedRequest?null:n.selectedRequest.comments)||"None"," "),e.R7$(5),e.SpI(" ",(null==n.selectedRequest?null:n.selectedRequest.staff_notes)||"None"," "),e.R7$(5),e.Y8G("ngForOf",n.selectedChain),e.R7$(),e.Y8G("ngIf","pending"===(null==n.selectedRequest?null:n.selectedRequest.status)),e.R7$(),e.Y8G("ngIf","pending"===(null==n.selectedRequest?null:n.selectedRequest.status)),e.R7$(),e.Aen(e.lJ4(107,U)),e.Y8G("modal",!0),e.R50("visible",n.visibleVerification),e.Y8G("dismissableMask",!0)("maximizable",!0),e.R7$(3),e.Y8G("src",null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.logo,e.B4B)("alt",null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.legal_name),e.R7$(2),e.SpI(" ",null==n.selectedRequest||null==n.selectedRequest.type?null:n.selectedRequest.type.label," Request "),e.R7$(2),e.Y8G("ngClass",e.sMw(108,ce,"approved"===(null==n.selectedRequest?null:n.selectedRequest.status),"declined"===(null==n.selectedRequest?null:n.selectedRequest.status),"pending"===(null==n.selectedRequest?null:n.selectedRequest.status))),e.R7$(),e.SpI(" ",null==n.selectedRequest?null:n.selectedRequest.status," "),e.R7$(),e.Y8G("ngIf",n.showVerificationQuestions),e.R7$(),e.Y8G("ngIf",!n.showVerificationQuestions),e.R7$(),e.Aen(e.lJ4(112,U)),e.Y8G("modal",!0),e.R50("visible",n.visibleDeactivate),e.Y8G("dismissableMask",!0)("maximizable",!0),e.R7$(3),e.Y8G("src",null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.logo,e.B4B)("alt",null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.legal_name),e.R7$(),e.Y8G("ngClass",e.l_i(113,le,"activate_company"===(null==n.selectedRequest||null==n.selectedRequest.type?null:n.selectedRequest.type.key),"deactivate_company"===(null==n.selectedRequest||null==n.selectedRequest.type?null:n.selectedRequest.type.key))),e.R7$(),e.SpI(" ",null==n.selectedRequest||null==n.selectedRequest.type?null:n.selectedRequest.type.label," Request "),e.R7$(2),e.Y8G("ngClass",e.sMw(116,ce,"approved"===(null==n.selectedRequest?null:n.selectedRequest.status),"declined"===(null==n.selectedRequest?null:n.selectedRequest.status),"pending"===(null==n.selectedRequest?null:n.selectedRequest.status))),e.R7$(),e.SpI(" ",null==n.selectedRequest?null:n.selectedRequest.status,""),e.R7$(),e.Y8G("ngIf",(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.register_document)&&"activate_company"===(null==n.selectedRequest||null==n.selectedRequest.type?null:n.selectedRequest.type.key)),e.R7$(11),e.JRh(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.legal_name),e.R7$(5),e.JRh(null==n.selectedRequest||null==n.selectedRequest.type?null:n.selectedRequest.type.label),e.R7$(5),e.JRh(null==n.selectedRequest?null:n.selectedRequest.requestable_type),e.R7$(5),e.JRh(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.status),e.R7$(10),e.Y8G("ngIf",null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.website)("ngIfElse",t),e.R7$(7),e.SpI(" ",(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.verified_email)||"N/A"," "),e.R7$(5),e.SpI(" ",(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.company_phone)||"N/A"," "),e.R7$(5),e.SpI(" ",(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.address)||"N/A"," "),e.R7$(9),e.SpI(" ",(null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.about_us)||"N/A"," "),e.R7$(5),e.Y8G("ngIf",null==n.selectedRequest||null==n.selectedRequest.requestable?null:n.selectedRequest.requestable.register_document)("ngIfElse",s),e.R7$(7),e.SpI(" ",(null==n.selectedRequest?null:n.selectedRequest.staff_notes)||"None"," "),e.R7$(5),e.Y8G("ngForOf",n.selectedChain),e.R7$(),e.Y8G("ngIf","pending"===(null==n.selectedRequest?null:n.selectedRequest.status)),e.R7$(),e.Y8G("ngIf","pending"===(null==n.selectedRequest?null:n.selectedRequest.status)),e.R7$(),e.Aen(e.lJ4(120,U)),e.Y8G("modal",!0),e.R50("visible",n.visibleDeactivateDelete),e.Y8G("dismissableMask",!0)("maximizable",!0),e.R7$(3),e.Y8G("ngIf","company"===(null==n.selectedRequest?null:n.selectedRequest.requestable_type)),e.R7$(),e.Y8G("ngIf","userinsighter"===(null==n.selectedRequest?null:n.selectedRequest.requestable_type)),e.R7$(),e.Y8G("ngClass",e.l_i(121,le,"activate_company"===(null==n.selectedRequest||null==n.selectedRequest.type?null:n.selectedRequest.type.key),"deactivate_company"===(null==n.selectedRequest||null==n.selectedRequest.type?null:n.selectedRequest.type.key)||"deactivate_delete_insighter"===(null==n.selectedRequest||null==n.selectedRequest.type?null:n.selectedRequest.type.key))),e.R7$(),e.SpI(" ",null==n.selectedRequest||null==n.selectedRequest.type?null:n.selectedRequest.type.label," Request "),e.R7$(2),e.Y8G("ngClass",e.sMw(124,ce,"approved"===(null==n.selectedRequest?null:n.selectedRequest.status),"declined"===(null==n.selectedRequest?null:n.selectedRequest.status),"pending"===(null==n.selectedRequest?null:n.selectedRequest.status))),e.R7$(),e.SpI(" ",e.bMT(225,97,null==n.selectedRequest?null:n.selectedRequest.status)," "),e.R7$(5),e.SpI(" ","company"===(null==n.selectedRequest?null:n.selectedRequest.requestable_type)?"Company":"Insighter"," Details "),e.R7$(2),e.Y8G("ngIf","company"===(null==n.selectedRequest?null:n.selectedRequest.requestable_type)),e.R7$(),e.Y8G("ngIf","userinsighter"===(null==n.selectedRequest?null:n.selectedRequest.requestable_type)),e.R7$(6),e.JRh(null==n.selectedRequest?null:n.selectedRequest.comments),e.R7$(),e.Y8G("ngIf","pending"===(null==n.selectedRequest?null:n.selectedRequest.status)),e.R7$(6),e.Y8G("ngForOf",n.selectedChain),e.R7$(),e.Y8G("ngIf","pending"===(null==n.selectedRequest?null:n.selectedRequest.status))}}let Sd=(()=>{class i extends Ne.${requestsService;cdr;fb;messages=[];answeredQuestions=[];requestsList=[];filteredRequests=[];paginatedRequests;currentPage=1;totalPages=1;pageSize=10;isLoading$;visible=!1;visibleVerification=!1;visibleDeactivate=!1;visibleDeactivateDelete=!1;selectedRequest=null;selectedChain=[];verificationQuestions=[];loading=!1;verificationForm;staffNotes="";activateRequestsCount=0;deactivateRequestsCount=0;verifiedRequestsCount=0;showVerificationQuestions=!1;constructor(t,s,n,o){super(t),this.requestsService=s,this.cdr=n,this.fb=o,this.isLoading$=this.requestsService.isLoading$,this.verificationForm=this.fb.group({})}ngOnInit(){this.filteredRequests=[],this.loadData(),this.loadVerificationQuestions()}loadData(){this.loading=!0;const t=this.requestsService.getRequests(this.currentPage,this.pageSize).subscribe({next:s=>{this.paginatedRequests=s,this.requestsList=s.data,this.filteredRequests=s.data,this.totalPages=Math.ceil(s.meta.total/this.pageSize),this.cdr.detectChanges(),this.loading=!1},error:s=>{console.error("Error fetching data:",s),this.showError("Error","An unexpected error occurred."),this.loading=!1}});this.unsubscribe.push(t)}loadVerificationQuestions(){const t=this.requestsService.getListOfVerificationQuestions().subscribe({next:s=>{this.verificationQuestions=s.data,this.initializeVerificationForm()},error:s=>{console.error("Error fetching verification questions:",s)}});this.unsubscribe.push(t)}loadPage(t){t>=1&&t<=this.totalPages&&(this.currentPage=t,this.loadData())}getPages(){const t=[];let n=Math.max(1,this.currentPage-Math.floor(2.5)),o=Math.min(this.totalPages,n+5-1);o-n+1<5&&(n=Math.max(1,o-5+1));for(let a=n;a<=o;a++)t.push(a);return t}getQuestionText(t){const s=this.verificationQuestions.find(n=>n.id===t);return s?s.question:"Unknown Question"}initializeVerificationForm(){const t={};this.verificationQuestions.forEach(s=>{t["question_"+s.id]=["",c.k0.required]}),this.verificationForm=this.fb.group(t)}get hasErrorMessage(){return this.messages.some(t=>"error"===t.severity)}getRequestChain(t){const s=[t];let n=t;for(;n.children&&n.children.length>0;){const o=n.children[n.children.length-1];s.push(o),n=o}return s}viewRequest(t){this.selectedChain=this.getRequestChain(t),this.selectedRequest=this.selectedChain[this.selectedChain.length-1],"deactivate_delete_company"!==this.selectedRequest.type.key&&"deactivate_delete_insighter"!==this.selectedRequest.type.key?"verified_company"!==this.selectedRequest.type.key?"activate_company"===this.selectedRequest.type.key?this.visible=!0:"deactivate_company"===this.selectedRequest.type.key&&(this.visibleDeactivate=!0):this.requestsService.getRequestVerificationQuestion(t.id).subscribe({next:n=>{this.answeredQuestions=n.data||[],this.showVerificationQuestions=0===this.answeredQuestions.length,this.visibleVerification=!0},error:n=>{console.error("Error fetching verification answers:",n),this.showVerificationQuestions=!0,this.visibleVerification=!0}}):this.visibleDeactivateDelete=!0}onCancel(){this.visible=!1,this.selectedRequest=null,this.selectedChain=[],this.staffNotes=""}onCancelDeactivate(){this.visibleDeactivate=!1,this.selectedRequest=null,this.selectedChain=[],this.staffNotes=""}onCancelVerification(){this.visibleVerification=!1,this.selectedRequest=null,this.selectedChain=[],this.staffNotes="",this.verificationForm.reset(),this.showVerificationQuestions=!1}onActivate(t){if(this.selectedChain.length>0){const o=this.requestsService.activateCompanyRequest(this.selectedChain[this.selectedChain.length-1].id,this.staffNotes,t).subscribe({next:a=>{this.showSuccess("Success","approved"===t?"Company approved successfully.":"Company declined successfully."),this.loadData(),this.onCancel()},error:a=>{console.error("Error fetching data:",a),this.handleServerErrors(a),this.showError("Error","An unexpected error occurred.")}});this.unsubscribe.push(o)}}submitVerificationAnswers(){if(!this.verificationForm.valid||!this.selectedRequest)return void this.showError("Error","Please fill out all answers.");const t=this.verificationForm.value,s=Object.keys(t).map(o=>({verification_question_id:parseInt(o.replace("question_",""),10),answer:t[o]}));this.requestsService.sendVerificationAnswers(this.selectedRequest.id,s).subscribe({next:()=>{this.showSuccess("Success","Answers submitted."),this.visibleVerification=!1},error:o=>{console.error("Error sending verification answers:",o),this.handleServerErrors(o)}})}onDeactivate(t){if(this.selectedChain.length>0){const o=this.requestsService.deactivateCompanyRequest(this.selectedChain[this.selectedChain.length-1].id,this.staffNotes,t).subscribe({next:a=>{this.showSuccess("Success","approved"===t?"Company approved successfully.":"Company declined successfully."),this.loadData(),this.visibleDeactivate=!1,this.selectedRequest=null,this.selectedChain=[],this.staffNotes=""},error:a=>{console.error("Error fetching data:",a),this.handleServerErrors(a),this.showError("Error","An unexpected error occurred.")}});this.unsubscribe.push(o)}}onVerify(t){this.selectedRequest&&this.requestsService.verifyCompanyRequest(this.selectedRequest.id,this.staffNotes,t).subscribe({next:()=>{this.showSuccess("Success","approved"===t?"Company approved successfully.":"Company declined successfully."),this.loadData(),this.onCancelVerification()},error:n=>{console.error("Error verifying company:",n),this.handleServerErrors(n)}})}isFormValid(){return this.verificationForm&&this.verificationForm.valid}handleServerErrors(t){if(this.messages=[],t.error&&t.error.errors){const s=t.error.errors;for(const n in s)s.hasOwnProperty(n)&&this.messages.push({severity:"error",summary:"",detail:s[n].join(", ")})}else this.messages.push({severity:"error",summary:"Error",detail:"An unexpected error occurred."})}onDeactivateDelete(t){if(this.selectedChain.length>0){const o=this.requestsService.deactivateDeleteRequest(this.selectedChain[this.selectedChain.length-1].id,this.staffNotes,t).subscribe({next:a=>{this.showSuccess("Success","approved"===t?"Request approved successfully.":"Request declined successfully."),this.loadData(),this.visibleDeactivateDelete=!1,this.selectedRequest=null,this.selectedChain=[],this.staffNotes=""},error:a=>{console.error("Error processing request:",a),this.handleServerErrors(a),this.showError("Error","An unexpected error occurred.")}});this.unsubscribe.push(o)}}onCancelDeactivateDelete(){this.visibleDeactivateDelete=!1,this.selectedRequest=null,this.selectedChain=[],this.staffNotes=""}applyFilter(t){const s=t.target.value.toLowerCase();this.filteredRequests=s?this.requestsList.filter(n=>n.requestable?.legal_name?.toLowerCase().includes(s)||n.requestable?.name?.toLowerCase().includes(s)||n.type?.label?.toLowerCase().includes(s)||n.final_status?.toLowerCase().includes(s)):this.requestsList}onLazyLoad(t){this.currentPage=Math.floor(t.first/t.rows)+1,this.pageSize=t.rows,this.loadData()}getInitials(t){if(!t)return"";const n=t.last_name||"";return((t.first_name||t.name||"").charAt(0)+n.charAt(0)).toUpperCase()}static \u0275fac=function(s){return new(s||i)(e.rXU(e.zZn),e.rXU(Cc),e.rXU(e.gRc),e.rXU(c.ok))};static \u0275cmp=e.VBU({type:i,selectors:[["app-requests-list"]],features:[e.Vt3],decls:4,vars:6,consts:[["noWebsite",""],["noDocument",""],["dt",""],["initials",""],["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],["id","kt_app_toolbar",1,"app-toolbar","pt-10","px-10","pb-0","mb-0"],["id","kt_app_toolbar_container",1,"app-container","container-fluid","d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","flex-column","justify-content-center","gap-1","me-3"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],[1,"fw-semibold","fs-7","my-0","text-muted"],[1,"d-flex","align-items-center","position-relative"],[1,"pi","pi-search","position-absolute","ms-3",2,"font-size","14px","color","#6c757d"],["type","text","pInputText","","placeholder","Search",1,"form-control","ps-10",2,"width","240px","height","36px","border","1px solid #cbd5e1","box-shadow","0 0 #0000,0 0 #0000,0 1px 2px 0 rgba(18,18,23,0.05)","border-radius","6px",3,"input"],["id","kt_app_content",1,"app-content","px-10","pb-10","pt-5","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-fluid"],["appendTo","body",1,"position-relative",3,"visibleChange","modal","visible","dismissableMask","maximizable"],[1,"d-flex","flex-column","justify-content-center","align-items-center","py-5"],[1,"c-logo","mb-3"],[1,"img-fluid",2,"max-width","150px","max-height","150px","object-fit","contain",3,"src","alt"],[1,"text-center","fs-4","fw-bold",3,"ngClass"],[1,"badge","fs-5","my-3","text-uppercase",3,"ngClass"],[1,"row","mb-4"],[1,"col-sm-6","col-12"],[1,"card"],[1,"card-body"],[1,"card-title","mb-3"],[1,"row","mb-2"],[1,"col-md-4","text-muted"],[1,"col-md-8"],[4,"ngIf","ngIfElse"],[1,"card","mb-4"],["class","mb-4 border-bottom pb-3",4,"ngFor","ngForOf"],["class","mb-4",4,"ngIf"],["class","w-100",4,"ngIf"],[1,"text-center","fs-4","fw-bold"],[1,"text-uppercase",3,"ngClass"],["class","card mb-4",4,"ngIf"],[1,"row"],[1,"card","mb-4","w-100"],[1,"card-title"],["class","card mb-4 w-100",4,"ngIf"],[1,"timeline-container"],["class","timeline-item",4,"ngFor","ngForOf"],["responsiveLayout","scroll",3,"onLazyLoad","value","paginator","rows","totalRecords","lazy","loading","globalFilterFields","rowHover","tableStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","12%"],[2,"width","40%"],[2,"width","25%"],[2,"width","15%"],[1,"text-center",2,"width","8%"],[1,"text-gray-600","fw-semibold"],["class","d-flex align-items-center",4,"ngIf"],[1,"text-gray-700"],[1,"px-3","py-1","rounded","fw-semibold",2,"font-size","12px",3,"ngStyle"],[1,"text-center"],["pButton","","icon","pi pi-eye","pTooltip","View Details","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-sm",2,"width","32px","height","32px",3,"click"],[1,"d-flex","align-items-center"],["class","me-3",4,"ngIf"],[1,"d-flex","flex-column"],[1,"text-gray-800","fw-semibold"],["class","text-muted","style","font-size: 12px",4,"ngIf"],[1,"me-3"],["alt","Logo","width","32","height","32",1,"rounded",3,"src"],[1,"text-muted",2,"font-size","12px"],[1,"rounded-circle","bg-light-info","text-info","d-flex","align-items-center","justify-content-center","fw-bold",2,"width","32px","height","32px","font-size","12px"],["colspan","5"],[1,"d-flex","flex-column","align-items-center","justify-content-center","py-8"],[1,"pi","pi-inbox","text-gray-400","mb-2",2,"font-size","48px"],[1,"text-gray-500",2,"font-size","14px"],["target","_blank","rel","noopener noreferrer",3,"href"],["target","_blank","rel","noopener noreferrer",1,"text-blue",3,"href"],[1,"mb-4","border-bottom","pb-3"],[1,"badge",3,"ngClass"],[1,"mb-4"],[1,"mb-3"],[1,"form-label"],["rows","4","placeholder","Enter staff notes here...",1,"form-control",3,"ngModelChange","ngModel"],[1,"w-100"],[1,"d-flex","gap-2"],["type","button",1,"btn","btn-success","w-50",3,"click","disabled"],["type","button",1,"btn","btn-danger","w-50",3,"click","disabled"],[3,"formGroup"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mt-3","d-flex","gap-2"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[3,"ngSwitch"],["class","d-flex gap-2",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"form-check"],["type","radio","value","yes",1,"form-check-input",3,"formControlName","id"],[1,"form-check-label"],["type","radio","value","no",1,"form-check-input",3,"formControlName","id"],["type","text","placeholder","Enter your answer...",1,"form-control",3,"formControlName"],["class","border rounded p-3 mb-4",4,"ngIf"],[3,"value","enableService","valueChange",4,"ngIf"],[1,"border","rounded","p-3","mb-4"],["class","mb-3 border-bottom pb-2",4,"ngFor","ngForOf"],[1,"mb-3","border-bottom","pb-2"],[1,"fw-bold"],[1,"text-muted"],[3,"valueChange","value","enableService"],[1,"timeline-item"],[1,"timeline-marker",3,"ngClass"],[1,"timeline-content","p-3","border","rounded"],[1,"d-flex","justify-content-between","mb-2"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"col-12","mb-4"],["rows","3","placeholder","Enter staff notes...",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","col-sm-6"],["type","button",1,"btn","btn-success","w-100","flex-grow-1",3,"click","disabled"],[1,"col-6","col-sm-6"],["type","button",1,"btn","btn-danger","w-100","flex-grow-1",3,"click","disabled"],["target","_blank",1,"d-flex","align-items-center","justify-content-center",3,"href"],[1,"ki-duotone","ki-file-added","text-success","fs-2tx"],[1,"path1"],[1,"path2"],["class","img-fluid","style","max-width: 150px; max-height: 150px; object-fit: contain;",3,"src","alt",4,"ngIf"],["class","img-fluid rounded-circle","style","max-width: 150px; max-height: 150px; object-fit: cover; object-position: top;",3,"src","alt",4,"ngIf","ngIfElse"],[1,"img-fluid","rounded-circle",2,"max-width","150px","max-height","150px","object-fit","cover","object-position","top",3,"src","alt"],[1,"rounded-circle","bg-secondary","text-white","d-flex","align-items-center","justify-content-center",2,"width","150px","height","150px"],[1,"col-6"],["target","_blank",3,"href"],["rows","4","placeholder","Enter staff notes...",1,"form-control",3,"ngModelChange","ngModel"]],template:function(s,n){1&s&&(e.DNE(0,kc,1,3,"p-progressBar",4),e.nI1(1,"async"),e.DNE(2,Rd,247,128,"ng-container",5),e.nI1(3,"async")),2&s&&(e.Y8G("ngIf",e.bMT(1,2,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!e.bMT(3,4,n.isLoading$)))},dependencies:[u.YU,u.Sq,u.bT,u.B3,u.ux,u.e1,h.l,f.Ei,g._f,v.m,T.z,x.S,c.qT,c.me,c.Fm,c.BC,c.cb,c.vS,c.j4,c.JD,w.B,$.XI,u.Jj,u.PV,u.vh],styles:[".c-logo[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:10px;border:1px solid #DFDFDF;margin:auto;width:-moz-fit-content;width:fit-content}.c-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border-radius:5px}.pt-50[_ngcontent-%COMP%]{padding-top:20px}  .p-datatable{border:1px solid #dadddf;border-radius:.75rem;overflow:hidden}  .p-datatable .p-datatable-table{border:none}  .p-datatable .p-datatable-thead>tr>th{background:transparent;border-bottom:1px solid #e5e5e5;padding:.75rem 1rem;font-weight:700;color:#a1a5b7;font-size:.75rem;text-transform:uppercase;letter-spacing:.05em}  .p-datatable .p-datatable-tbody>tr>td{border-bottom:1px solid #dadddf;padding:1rem;font-size:.875rem;color:#5e6278;font-weight:600}  .p-datatable .p-datatable-tbody>tr:hover{background-color:#f8f9fa}  .p-datatable .p-datatable-tbody>tr:last-child>td{border-bottom:none}"]})}return i})();var wd=p(4496);const jd=()=>({width:"450px"});function Nd(i,r){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"ID"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Name"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Actions"),e.k0s()())}function Dd(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"a",30),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.showEditDialog(n))}),e.j41(7,"i",31),e.nrm(8,"span",32)(9,"span",33),e.k0s()(),e.j41(10,"a",34),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.deleteBlock(n))}),e.j41(11,"i",35),e.nrm(12,"span",32)(13,"span",33)(14,"span",36)(15,"span",37)(16,"span",38),e.k0s()()()()}if(2&i){const t=r.$implicit;e.R7$(2),e.JRh(t.id),e.R7$(2),e.JRh(t.name)}}function Gd(i,r){1&i&&(e.j41(0,"tr")(1,"td",39),e.EFF(2,"No economic blocks found."),e.k0s()())}function qd(i,r){if(1&i){const t=e.RV6();e.j41(0,"button",40),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.hideDialog())}),e.k0s(),e.j41(1,"button",41),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.saveBlock())}),e.k0s()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.blockForm.invalid)}}let $d=(()=>{class i{economicBlockService;messageService;fb;economicBlocks=[];filteredBlocks=[];displayDialog=!1;editMode=!1;selectedBlock=null;blockForm;loading=!1;searchTerm="";constructor(t,s,n){this.economicBlockService=t,this.messageService=s,this.fb=n,this.blockForm=this.fb.group({name:this.fb.group({en:["",c.k0.required],ar:["",c.k0.required]})})}ngOnInit(){this.loadEconomicBlocks()}loadEconomicBlocks(){this.loading=!0,this.economicBlockService.getAdminEconomicBlocs().subscribe({next:t=>{this.economicBlocks=t.data,this.filteredBlocks=[...this.economicBlocks],this.loading=!1},error:t=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load economic blocks"}),this.loading=!1}})}showAddDialog(){this.editMode=!1,this.selectedBlock=null,this.blockForm.reset(),this.displayDialog=!0}showEditDialog(t){this.editMode=!0,this.selectedBlock=t,this.blockForm.patchValue({name:{en:t.names.en,ar:t.names.ar}}),this.displayDialog=!0}hideDialog(){this.displayDialog=!1,this.blockForm.reset()}saveBlock(){if(this.blockForm.invalid)return;const t=this.blockForm.value;this.editMode&&this.selectedBlock?this.economicBlockService.updateEconomicBloc(this.selectedBlock.id,t).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Economic block updated successfully"}),this.loadEconomicBlocks(),this.hideDialog()},error:s=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to update economic block"})}}):this.economicBlockService.createEconomicBloc(t).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"Success",detail:"Economic block created successfully"}),this.loadEconomicBlocks(),this.hideDialog()},error:s=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to create economic block"})}})}deleteBlock(t){b().fire({title:"Are you sure?",text:"You will not be able to recover this economic block!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it",confirmButtonColor:"#d33",cancelButtonColor:"#3085d6"}).then(s=>{s.isConfirmed&&this.economicBlockService.deleteEconomicBloc(t.id).subscribe({next:()=>{b().fire("Deleted!","Economic block has been deleted.","success"),this.loadEconomicBlocks()},error:n=>{b().fire("Error!","Failed to delete economic block.","error")}})})}onSearch(t){const s=t.target.value.toLowerCase();this.searchTerm=s,this.filterBlocks()}filterBlocks(){this.filteredBlocks=this.searchTerm?this.economicBlocks.filter(t=>t.names.en.toLowerCase().includes(this.searchTerm)||t.names.ar.toLowerCase().includes(this.searchTerm)||t.id.toString().includes(this.searchTerm)):[...this.economicBlocks]}static \u0275fac=function(s){return new(s||i)(e.rXU(wd.o),e.rXU(f.bg),e.rXU(c.ok))};static \u0275cmp=e.VBU({type:i,selectors:[["app-economic-blocks"]],decls:37,vars:13,consts:[[1,"card"],["id","kt_app_toolbar",1,"app-toolbar","pt-10","mb-0"],["id","kt_app_toolbar_container",1,"app-container","container-fluid","d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","justify-content-between","gap-1","me-3","w-100"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],[1,"fw-semibold","fs-7","my-0","text-muted"],["id","kt_app_content",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-fluid"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"pi","pi-search","fs-3","position-absolute","ms-5"],["type","text","pInputText","","placeholder","Search Economic Blocks",1,"form-control","w-250px","ps-12",3,"input","value"],[1,"card-toolbar"],[1,"btn","btn-md","btn-flex","btn-primary",3,"click"],[1,"ki-outline","ki-plus","text-white","fs-4"],[1,"card-body","pt-0"],["responsiveLayout","scroll",3,"value","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["appendTo","body",3,"visibleChange","visible","header","modal","draggable","resizable"],[3,"formGroup"],["formGroupName","name",1,"field"],["for","nameEn"],["type","text","pInputText","","id","nameEn","formControlName","en",1,"w-100","mb-3"],["for","nameAr"],["type","text","pInputText","","id","nameAr","formControlName","ar",1,"w-100"],["pTemplate","footer"],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"ki-duotone","ki-pencil","fs-2"],[1,"path1"],[1,"path2"],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"ki-duotone","ki-trash","fs-2"],[1,"path3"],[1,"path4"],[1,"path5"],["colspan","4",1,"text-center"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click","disabled"]],template:function(s,n){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"h1",5),e.EFF(7," Economic Blocks "),e.k0s(),e.j41(8,"div",6),e.EFF(9),e.k0s()()()()()(),e.j41(10,"div",7)(11,"div",8)(12,"div",0)(13,"div",9)(14,"div",10)(15,"div",11),e.nrm(16,"i",12),e.j41(17,"input",13),e.bIt("input",function(a){return n.onSearch(a)}),e.k0s()()(),e.j41(18,"div",14)(19,"a",15),e.bIt("click",function(){return n.showAddDialog()}),e.nrm(20,"i",16),e.EFF(21," Create "),e.k0s()()(),e.j41(22,"div",17)(23,"p-table",18),e.DNE(24,Nd,7,0,"ng-template",19)(25,Dd,17,2,"ng-template",20)(26,Gd,3,0,"ng-template",21),e.k0s()()()()()(),e.j41(27,"p-dialog",22),e.mxI("visibleChange",function(a){return e.DH7(n.displayDialog,a)||(n.displayDialog=a),a}),e.j41(28,"form",23)(29,"div",24)(30,"label",25),e.EFF(31,"Name (English)"),e.k0s(),e.nrm(32,"input",26),e.j41(33,"label",27),e.EFF(34,"Name (Arabic)"),e.k0s(),e.nrm(35,"input",28),e.k0s()(),e.DNE(36,qd,2,1,"ng-template",29),e.k0s()),2&s&&(e.R7$(9),e.SpI("",n.economicBlocks.length," Blocks"),e.R7$(8),e.Y8G("value",n.searchTerm),e.R7$(6),e.Y8G("value",n.filteredBlocks)("loading",n.loading),e.R7$(4),e.Aen(e.lJ4(12,jd)),e.R50("visible",n.displayDialog),e.Y8G("header",n.editMode?"Edit Economic Block":"Add Economic Block")("modal",!0)("draggable",!1)("resizable",!1),e.R7$(),e.Y8G("formGroup",n.blockForm))},dependencies:[h.l,f.Ei,g._f,x.S,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,c.$R,$.XI],styles:[".card[_ngcontent-%COMP%]{margin:1rem}.card-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:-2.5rem}.field[_ngcontent-%COMP%]{margin-bottom:1rem}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}[_nghost-%COMP%]     .p-chip{margin-right:.5rem}[_nghost-%COMP%]     .p-button{margin-right:.5rem}[_nghost-%COMP%]     .p-button:last-child{margin-right:0}"]})}return i})(),Md=(()=>{class i{http;translationService;apiUrl="https://api.foresighta.co/api/common/setting/verification-question/list";createApi="https://api.foresighta.co/api/admin/setting/verification-question";updateDeleteApi="https://api.foresighta.co/api/admin/setting/verification-question";isLoadingSubject=new De.t(!1);isLoading$=this.isLoadingSubject.asObservable();currentLang="en";constructor(t,s){this.http=t,this.translationService=s,this.translationService.onLanguageChange().subscribe(n=>{this.currentLang=n||"en"})}setLoading(t){this.isLoadingSubject.next(t)}handleError(t){return(0,Ge.$)(t)}getQuestions(){const t=new S.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.get(this.apiUrl,{headers:t}).pipe((0,N.T)(s=>s.data),(0,D.W)(s=>this.handleError(s)),(0,G.j)(()=>this.setLoading(!1)))}createQuestion(t){const s=new S.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.post(this.createApi,t,{headers:s}).pipe((0,N.T)(n=>n),(0,D.W)(n=>this.handleError(n)),(0,G.j)(()=>this.setLoading(!1)))}updateQuestion(t,s){const n=new S.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.put(`${this.updateDeleteApi}/${t}`,s,{headers:n}).pipe((0,N.T)(o=>o),(0,D.W)(o=>this.handleError(o)),(0,G.j)(()=>this.setLoading(!1)))}deleteQuestion(t){const s=new S.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.delete(`${this.updateDeleteApi}/${t}`,{headers:s}).pipe((0,N.T)(n=>n),(0,D.W)(n=>this.handleError(n)),(0,G.j)(()=>this.setLoading(!1)))}static \u0275fac=function(s){return new(s||i)(e.KVO(S.Qq),e.KVO(qe.L))};static \u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Ld=["dt"],Ad=()=>["question","type","status"],Vd=()=>({"min-width":"50rem"}),Bd=()=>({width:"450px"}),Me=()=>({width:"100%"}),Yd=()=>({label:"Boolean",value:"boolean"}),Pd=()=>({label:"Text",value:"text"}),Le=(i,r)=>[i,r],Xd=()=>({label:"Active",value:"active"}),Od=()=>({label:"Inactive",value:"inactive"}),zd=()=>({height:"4px"}),Hd=(i,r)=>({"badge-light-success":i,"badge-light-danger":r});function Ud(i,r){1&i&&e.nrm(0,"p-progressBar",36),2&i&&e.Aen(e.lJ4(2,zd))}function Kd(i,r){if(1&i){const t=e.RV6();e.j41(0,"p-messages",37),e.mxI("valueChange",function(n){e.eBV(t);const o=e.XpG();return e.DH7(o.messages,n)||(o.messages=n),e.Njj(n)}),e.k0s()}if(2&i){const t=e.XpG();e.R50("value",t.messages),e.Y8G("enableService",!1)}}function Jd(i,r){1&i&&(e.j41(0,"tr")(1,"th"),e.EFF(2,"Question"),e.k0s(),e.j41(3,"th"),e.EFF(4,"Type"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Status"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Actions"),e.k0s()())}function Qd(i,r){if(1&i){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td")(6,"div",38),e.EFF(7),e.k0s()(),e.j41(8,"td")(9,"a",39),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.showDialog(n))}),e.j41(10,"i",40),e.nrm(11,"span",41)(12,"span",42),e.k0s()(),e.j41(13,"a",43),e.bIt("click",function(){const n=e.eBV(t).$implicit,o=e.XpG();return e.Njj(o.deleteQuestion(n))}),e.j41(14,"i",44),e.nrm(15,"span",41)(16,"span",42)(17,"span",45)(18,"span",46)(19,"span",47),e.k0s()()()()}if(2&i){const t=r.$implicit;e.R7$(2),e.JRh(t.question),e.R7$(2),e.JRh(t.type),e.R7$(2),e.Y8G("ngClass",e.l_i(4,Hd,"active"===t.status,"inactive"===t.status)),e.R7$(),e.SpI(" ",t.status," ")}}function Wd(i,r){1&i&&(e.qex(0),e.j41(1,"span",48),e.EFF(2,"Save"),e.k0s(),e.bVm())}function Zd(i,r){1&i&&(e.qex(0),e.j41(1,"span",49),e.EFF(2," Please wait "),e.nrm(3,"span",50),e.k0s(),e.bVm()),2&i&&(e.R7$(),e.xc7("display","block"))}let eu=(()=>{class i{questionsService;fb;questions=[];isLoading$;messages=[];displayDialog=!1;questionForm;isUpdate=!1;selectedQuestion=null;table;constructor(t,s){this.questionsService=t,this.fb=s,this.isLoading$=this.questionsService.isLoading$,this.initForm()}ngOnInit(){this.loadQuestions()}initForm(){this.questionForm=this.fb.group({question:["",c.k0.required],type:["",c.k0.required],status:["active",c.k0.required]})}loadQuestions(){this.questionsService.getQuestions().subscribe({next:t=>{this.questions=t},error:t=>{this.messages=[{severity:"error",summary:"Error",detail:"Failed to load questions"}]}})}showDialog(t){t?(this.isUpdate=!0,this.selectedQuestion=t,this.questionForm.patchValue({question:t.question,type:t.type,status:t.status||"active"})):(this.isUpdate=!1,this.selectedQuestion=null,this.questionForm.reset({status:"active"})),this.displayDialog=!0}submit(){if(this.questionForm.invalid)return;const t=this.questionForm.value;this.isUpdate&&this.selectedQuestion?this.questionsService.updateQuestion(this.selectedQuestion.id,t).subscribe({next:()=>{this.messages=[{severity:"success",summary:"Success",detail:"Question updated successfully"}],this.loadQuestions(),this.displayDialog=!1},error:s=>this.handleError(s)}):this.questionsService.createQuestion(t).subscribe({next:()=>{this.messages=[{severity:"success",summary:"Success",detail:"Question created successfully"}],this.loadQuestions(),this.displayDialog=!1},error:s=>this.handleError(s)})}deleteQuestion(t){b().fire({title:"Are you sure?",text:"Do you want to delete this question? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(s=>{s.isConfirmed&&this.questionsService.deleteQuestion(t.id).subscribe({next:()=>{this.messages=[{severity:"success",summary:"Success",detail:"Question deleted successfully"}],this.loadQuestions()},error:n=>this.handleError(n)})})}handleError(t){this.messages=[{severity:"error",summary:"Error",detail:t.error?.message||"An unexpected error occurred"}]}applyFilter(t){this.table.filterGlobal(t.target.value,"contains")}onCancel(){this.displayDialog=!1,this.questionForm.reset()}get hasErrorMessage(){return this.messages.some(t=>"error"===t.severity)}get hasSuccessMessage(){return this.messages.some(t=>"success"===t.severity)}static \u0275fac=function(s){return new(s||i)(e.rXU(Md),e.rXU(c.ok))};static \u0275cmp=e.VBU({type:i,selectors:[["app-verification-questions-list"]],viewQuery:function(s,n){if(1&s&&e.GBs(Ld,5),2&s){let o;e.mGM(o=e.lsd())&&(n.table=o.first)}},decls:52,vars:47,consts:[["dt",""],["mode","indeterminate",3,"style",4,"ngIf"],["id","kt_app_toolbar",1,"app-toolbar","pt-10","mb-0"],["id","kt_app_toolbar_container",1,"app-container","container-fluid","d-flex","align-items-stretch"],[1,"app-toolbar-wrapper","d-flex","flex-stack","flex-wrap","gap-4","w-100"],[1,"page-title","d-flex","flex-column","justify-content-center","gap-1","me-3"],[1,"page-heading","d-flex","flex-column","justify-content-center","text-gray-900","fw-bold","fs-3","m-0"],[1,"fw-semibold","fs-7","my-0","text-muted"],["id","kt_app_content",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-fluid"],[1,"card"],[1,"card-header","border-0","pt-6"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"pi","pi-search","fs-3","position-absolute","ms-5"],["type","text","pInputText","","placeholder","Search Questions",1,"form-control","w-250px","ps-12",3,"input"],[1,"card-toolbar"],[1,"d-flex","align-items-center","gap-2","gap-lg-3"],[1,"btn","btn-md","btn-flex","btn-primary",3,"click"],[1,"ki-outline","ki-plus","text-white","fs-4"],[1,"card-body","pt-0"],[3,"value","enableService","valueChange",4,"ngIf"],["styleClass","p-datatable-striped",3,"value","paginator","rows","globalFilterFields","tableStyle"],["pTemplate","header"],["pTemplate","body"],["appendTo","body",3,"visibleChange","header","visible","modal","closable"],[3,"formGroup"],[1,"mb-3"],[1,"form-label","required"],["type","text","formControlName","question",1,"form-control"],["appendTo","body","formControlName","type","placeholder","Select Type",3,"options"],["appendTo","body","formControlName","status","placeholder","Select Status",3,"options"],[1,"d-flex","justify-content-end","gap-2"],["type","submit",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[4,"ngIf"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],["mode","indeterminate"],[3,"valueChange","value","enableService"],[1,"badge",3,"ngClass"],["pTooltip","Edit Question","tooltipPosition","top",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"ki-duotone","ki-pencil","fs-2"],[1,"path1"],[1,"path2"],["pTooltip","Delete Question","tooltipPosition","top",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"ki-duotone","ki-trash","fs-2"],[1,"path3"],[1,"path4"],[1,"path5"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"]],template:function(s,n){if(1&s){const o=e.RV6();e.DNE(0,Ud,1,3,"p-progressBar",1),e.nI1(1,"async"),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),e.EFF(7," Verification Questions "),e.k0s(),e.j41(8,"div",7),e.EFF(9),e.k0s()()()()(),e.j41(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13),e.nrm(16,"i",14),e.j41(17,"input",15),e.bIt("input",function(l){return e.eBV(o),e.Njj(n.applyFilter(l))}),e.k0s()()(),e.j41(18,"div",16)(19,"div",17)(20,"a",18),e.bIt("click",function(){return e.eBV(o),e.Njj(n.showDialog())}),e.nrm(21,"i",19),e.EFF(22," Create "),e.k0s()()()(),e.j41(23,"div",20),e.DNE(24,Kd,1,2,"p-messages",21),e.j41(25,"p-table",22,0),e.DNE(27,Jd,9,0,"ng-template",23)(28,Qd,20,7,"ng-template",24),e.k0s()()()()(),e.j41(29,"p-dialog",25),e.mxI("visibleChange",function(l){return e.eBV(o),e.DH7(n.displayDialog,l)||(n.displayDialog=l),e.Njj(l)}),e.j41(30,"form",26)(31,"div",27)(32,"label",28),e.EFF(33,"Question"),e.k0s(),e.nrm(34,"input",29),e.k0s(),e.j41(35,"div",27)(36,"label",28),e.EFF(37,"Type"),e.k0s(),e.nrm(38,"p-dropdown",30),e.k0s(),e.j41(39,"div",27)(40,"label",28),e.EFF(41,"Status"),e.k0s(),e.nrm(42,"p-dropdown",31),e.k0s()(),e.j41(43,"div",32)(44,"button",33),e.nI1(45,"async"),e.bIt("click",function(){return e.eBV(o),e.Njj(n.submit())}),e.DNE(46,Wd,3,0,"ng-container",34),e.nI1(47,"async"),e.DNE(48,Zd,4,2,"ng-container",34),e.nI1(49,"async"),e.k0s(),e.j41(50,"button",35),e.bIt("click",function(){return e.eBV(o),e.Njj(n.onCancel())}),e.EFF(51," Cancel "),e.k0s()()()}2&s&&(e.Y8G("ngIf",e.bMT(1,24,n.isLoading$)),e.R7$(9),e.SpI(" ",n.questions.length," Questions "),e.R7$(15),e.Y8G("ngIf",n.hasSuccessMessage||n.hasErrorMessage),e.R7$(),e.Y8G("value",n.questions)("paginator",!0)("rows",10)("globalFilterFields",e.lJ4(32,Ad))("tableStyle",e.lJ4(33,Vd)),e.R7$(4),e.Aen(e.lJ4(34,Bd)),e.Y8G("header",n.isUpdate?"Edit Question":"Add Question"),e.R50("visible",n.displayDialog),e.Y8G("modal",!0)("closable",!0),e.R7$(),e.Y8G("formGroup",n.questionForm),e.R7$(8),e.Aen(e.lJ4(35,Me)),e.Y8G("options",e.l_i(38,Le,e.lJ4(36,Yd),e.lJ4(37,Pd))),e.R7$(4),e.Aen(e.lJ4(41,Me)),e.Y8G("options",e.l_i(44,Le,e.lJ4(42,Xd),e.lJ4(43,Od))),e.R7$(2),e.Y8G("disabled",n.questionForm.invalid||e.bMT(45,26,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",!1===e.bMT(47,28,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",e.bMT(49,30,n.isLoading$)))},dependencies:[u.YU,u.bT,h.l,f.Ei,v.m,T.z,V.ms,x.S,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,w.B,$.XI,u.Jj]})}return i})();var tu=p(8680),Ae=p(7515),nu=p(1531),iu=p(9636);function su(i,r){if(1&i&&(e.j41(0,"div",25),e.nrm(1,"p-progressSpinner",26),e.j41(2,"p",27),e.EFF(3),e.k0s()()),2&i){const t=e.XpG();e.R7$(3),e.JRh("ar"===t.lang?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...":"Loading...")}}function ou(i,r){if(1&i&&(e.j41(0,"div",25),e.nrm(1,"i",28),e.j41(2,"h4",29),e.EFF(3),e.k0s(),e.j41(4,"p",30),e.EFF(5),e.k0s()()),2&i){const t=e.XpG();e.R7$(3),e.SpI(" ","ar"===t.lang?"\u0644\u0627 \u062a\u0648\u062c\u062f \u0625\u0634\u0639\u0627\u0631\u0627\u062a":"No Notifications Found"," "),e.R7$(2),e.SpI(" ","ar"===t.lang?"\u0644\u0627 \u062a\u0648\u062c\u062f \u0625\u0634\u0639\u0627\u0631\u0627\u062a \u062a\u0637\u0627\u0628\u0642 \u0627\u0644\u0645\u0639\u0627\u064a\u064a\u0631 \u0627\u0644\u0645\u062d\u062f\u062f\u0629":"No notifications match the selected criteria"," ")}}function ru(i,r){if(1&i&&(e.j41(0,"span",48),e.EFF(1),e.nI1(2,"titlecase"),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.bMT(2,1,t.sub_type)," ")}}function au(i,r){if(1&i&&(e.j41(0,"span",49),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ","ar"===t.lang?"\u062c\u062f\u064a\u062f":"New"," ")}}function lu(i,r){if(1&i&&(e.j41(0,"span",50),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3);e.R7$(),e.SpI(" ","ar"===t.lang?"\u0645\u0642\u0631\u0648\u0621":"Read"," ")}}function cu(i,r){if(1&i&&(e.j41(0,"span",51),e.nrm(1,"i",52),e.EFF(2),e.k0s()),2&i){const t=e.XpG(3);e.R7$(2),e.SpI(" ","ar"===t.lang?"\u063a\u064a\u0631 \u0645\u0642\u0631\u0648\u0621":"Unread"," ")}}function du(i,r){if(1&i&&(e.j41(0,"small",55),e.nrm(1,"i",56),e.EFF(2),e.k0s()),2&i){const t=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ",t.category," ")}}function uu(i,r){if(1&i&&(e.j41(0,"small",30),e.nrm(1,"i",57),e.EFF(2),e.k0s()),2&i){const t=e.XpG(2).$implicit;e.R7$(2),e.SpI(" ID: ",t.param," ")}}function pu(i,r){if(1&i&&(e.j41(0,"div",7),e.DNE(1,du,3,1,"small",53)(2,uu,3,1,"small",54),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",t.category),e.R7$(),e.Y8G("ngIf",t.param)}}function mu(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",58)(1,"p-button",59),e.bIt("onClick",function(n){e.eBV(t);const o=e.XpG().$implicit;return e.XpG(2).markAsRead(o),e.Njj(n.stopPropagation())}),e.k0s()()}if(2&i){const t=e.XpG(3);e.R7$(),e.FS9("label","ar"===t.lang?"\u0648\u0636\u0639 \u0639\u0644\u0627\u0645\u0629 \u0643\u0645\u0642\u0631\u0648\u0621":"Mark as Read")}}function gu(i,r){1&i&&(e.j41(0,"div",50),e.nrm(1,"i",60),e.k0s())}function _u(i,r){1&i&&e.nrm(0,"div",61)}function hu(i,r){if(1&i){const t=e.RV6();e.j41(0,"div",32),e.bIt("click",function(n){const o=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.onNotificationClick(o,n))}),e.j41(1,"div",33)(2,"div",34)(3,"div",35)(4,"div"),e.nI1(5,"notificationsBg"),e.nrm(6,"span",36),e.nI1(7,"notificationsIcons"),e.nI1(8,"notificationsBg"),e.k0s()()(),e.j41(9,"div",37)(10,"div",38)(11,"div",39)(12,"span",40),e.EFF(13),e.nI1(14,"titlecase"),e.k0s(),e.DNE(15,ru,3,3,"span",41)(16,au,2,1,"span",42),e.k0s(),e.j41(17,"div",39)(18,"small",11),e.DNE(19,lu,2,1,"span",43)(20,cu,3,1,"ng-template",null,0,e.C5r),e.k0s()()(),e.j41(22,"p",44),e.EFF(23),e.k0s(),e.DNE(24,pu,3,2,"div",45)(25,mu,2,1,"div",46),e.k0s(),e.j41(26,"div",47),e.DNE(27,gu,2,0,"div",43)(28,_u,1,0,"ng-template",null,1,e.C5r),e.k0s()()()}if(2&i){const t=r.$implicit,s=e.sdS(21),n=e.sdS(29);e.AVh("bg-light-warning",!t.read_at),e.R7$(4),e.HbH("symbol-label bg-light-"+e.bMT(5,18,t.sub_type)),e.R7$(2),e.Y8G("inlineSVG","./assets/media/icons/"+e.bMT(7,20,t.sub_type))("ngClass","svg-icon-"+e.bMT(8,22,t.sub_type)),e.R7$(7),e.SpI(" ",e.bMT(14,24,t.type)," "),e.R7$(2),e.Y8G("ngIf",t.sub_type),e.R7$(),e.Y8G("ngIf",!t.read_at),e.R7$(3),e.Y8G("ngIf",t.read_at)("ngIfElse",s),e.R7$(3),e.AVh("fw-bold",!t.read_at),e.R7$(),e.SpI(" ",t.message," "),e.R7$(),e.Y8G("ngIf",t.param||t.category),e.R7$(),e.Y8G("ngIf",!t.read_at),e.R7$(2),e.Y8G("ngIf",t.read_at)("ngIfElse",n)}}function fu(i,r){if(1&i&&(e.j41(0,"div"),e.DNE(1,hu,30,26,"div",31),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.filteredNotifications)}}const bu=[{path:"",component:k,children:[{path:"main-dashboard/notifications",component:(()=>{class i extends Ne.${notificationsService;router;notifications=[];filteredNotifications=[];loading=!1;selectedFilter="all";searchValue="";filterOptions=[{label:"All Notifications",value:"all"},{label:"Unread",value:"unread"},{label:"Read",value:"read"},{label:"Requests",value:"requests"},{label:"Contact Us",value:"contact-us"},{label:"Knowledge",value:"knowledge"},{label:"Meetings",value:"meeting"},{label:"System",value:"system"}];subscriptions=[];constructor(t,s,n){super(t),this.notificationsService=s,this.router=n}ngOnInit(){this.loadNotifications()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}loadNotifications(){this.loading=!0;const t=this.notificationsService.getNotifications(this.lang).subscribe({next:s=>{this.notifications=s,this.applyFilters(),this.loading=!1},error:s=>{console.error("Error loading notifications:",s),this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u0641\u0634\u0644 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a":"Failed to load notifications"),this.loading=!1}});this.subscriptions.push(t)}onFilterChange(t){this.selectedFilter=t.value,this.applyFilters()}onSearchChange(){this.applyFilters()}applyFilters(){let t=[...this.notifications];if("unread"===this.selectedFilter?t=t.filter(s=>!s.read_at):"read"===this.selectedFilter?t=t.filter(s=>!!s.read_at):"all"!==this.selectedFilter&&(t=t.filter(s=>s.type===this.selectedFilter)),this.searchValue){const s=this.searchValue.toLowerCase();t=t.filter(n=>n.message.toLowerCase().includes(s)||n.type.toLowerCase().includes(s)||n.sub_type&&n.sub_type.toLowerCase().includes(s))}this.filteredNotifications=t.sort((s,n)=>!s.read_at&&n.read_at?-1:s.read_at&&!n.read_at?1:new Date(n.id).getTime()-new Date(s.id).getTime())}onNotificationClick(t,s){if(console.log("Notification clicked:",t),s&&s.preventDefault(),t.read_at)return console.log("Already read, navigating directly"),void this.navigateToNotification(t);console.log("Marking as read and then navigating"),this.markAsRead(t,()=>{console.log("Marked as read, now navigating"),this.navigateToNotification(t)})}navigateToNotification(t){console.log("Navigating notification:",t);let s="";"contact-us"===t.type?s="/admin-dashboard/admin/contact-messages/contact-list":"requests"===t.type&&(s="/admin-dashboard/admin/dashboard/main-dashboard/requests"),console.log("Target route:",s),s&&this.router.navigate([s]).then(n=>console.log("Navigation success:",n),n=>console.log("Navigation error:",n))}markAsRead(t,s){if(t.read_at)return;const n=this.notificationsService.markAsRead(t.id,this.lang).subscribe({next:()=>{t.read_at=(new Date).toISOString(),this.showSuccess("ar"===this.lang?"\u062a\u0645":"Success","ar"===this.lang?"\u062a\u0645 \u0648\u0636\u0639 \u0639\u0644\u0627\u0645\u0629 \u0643\u0645\u0642\u0631\u0648\u0621":"Marked as read"),this.applyFilters(),s&&s()},error:o=>{console.error("Error marking notification as read:",o),this.showError("ar"===this.lang?"\u062e\u0637\u0623":"Error","ar"===this.lang?"\u0641\u0634\u0644 \u0641\u064a \u0648\u0636\u0639 \u0639\u0644\u0627\u0645\u0629 \u0643\u0645\u0642\u0631\u0648\u0621":"Failed to mark as read")}});this.subscriptions.push(n)}markAllAsRead(){const t=this.notifications.filter(s=>!s.read_at);0!==t.length?t.forEach(s=>{this.markAsRead(s)}):this.showInfo("ar"===this.lang?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a":"Info","ar"===this.lang?"\u0644\u0627 \u062a\u0648\u062c\u062f \u0625\u0634\u0639\u0627\u0631\u0627\u062a \u063a\u064a\u0631 \u0645\u0642\u0631\u0648\u0621\u0629":"No unread notifications")}formatTimeAgo(t){if(!t)return"";const s=new Date(t),o=(new Date).getTime()-s.getTime(),a=Math.floor(o/6e4),l=Math.floor(a/60),d=Math.floor(l/24);return a<1?"ar"===this.lang?"\u0627\u0644\u0622\u0646":"Now":a<60?"ar"===this.lang?`\u0642\u0628\u0644 ${a} \u062f\u0642\u064a\u0642\u0629`:`${a}m ago`:l<24?"ar"===this.lang?`\u0642\u0628\u0644 ${l} \u0633\u0627\u0639\u0629`:`${l}h ago`:d<7?"ar"===this.lang?`\u0642\u0628\u0644 ${d} \u064a\u0648\u0645`:`${d}d ago`:s.toLocaleDateString("ar"===this.lang?"ar":"en")}get unreadCount(){return this.notifications.filter(t=>!t.read_at).length}get totalCount(){return this.notifications.length}static \u0275fac=function(s){return new(s||i)(e.rXU(e.zZn),e.rXU(tu.I),e.rXU(j.Ix))};static \u0275cmp=e.VBU({type:i,selectors:[["app-admin-notifications-page"]],features:[e.Vt3],decls:36,vars:18,consts:[["unreadText",""],["unreadDot",""],[1,"container-fluid","p-10"],[1,"d-flex","align-items-center","justify-content-between"],[1,"text-gray-900","fw-bold","fs-2x","mb-2"],[1,"ki-outline","ki-notification-bing","text-info","fs-1","me-3"],[1,"text-muted","fs-6","mb-0"],[1,"d-flex","align-items-center","gap-3"],[1,"d-flex","align-items-center","gap-4"],[1,"text-center"],[1,"text-info","fw-bold","fs-2x"],[1,"text-muted","fs-7"],[1,"text-warning","fw-bold","fs-2x"],["icon","ki-outline ki-check-circle","styleClass","p-button-outlined p-button-info",3,"onClick","label","disabled"],[1,"row","align-items-center"],[1,"col-md-4"],[1,"form-label","fs-6","fw-semibold","mb-2"],["styleClass","w-100",3,"ngModelChange","onChange","options","ngModel","placeholder"],[1,"col-md-8"],[1,"p-input-icon-left","w-100"],[1,"pi","pi-search"],["type","text","pInputText","",1,"w-100",3,"ngModelChange","input","placeholder","ngModel"],[1,"pt-10"],["class","text-center py-12",4,"ngIf"],[4,"ngIf"],[1,"text-center","py-12"],["strokeWidth","3","animationDuration","1s"],[1,"text-muted","mt-4"],[1,"ki-outline","ki-notification-off","text-muted",2,"font-size","4rem"],[1,"text-gray-800","fw-bold","mt-4"],[1,"text-muted"],["class","notification-item border-bottom border-light-gray hover-bg-light-primary p-4 cursor-pointer",3,"bg-light-warning","click",4,"ngFor","ngForOf"],[1,"notification-item","border-bottom","border-light-gray","hover-bg-light-primary","p-4","cursor-pointer",3,"click"],[1,"d-flex","align-items-start"],[1,"flex-shrink-0","me-4"],[1,"symbol","symbol-45px"],[1,"svg-icon","fs-2",3,"inlineSVG","ngClass"],[1,"flex-grow-1"],[1,"d-flex","align-items-center","justify-content-between","mb-2"],[1,"d-flex","align-items-center","gap-2"],[1,"badge","badge-light-info","fs-8"],["class","badge badge-light-secondary fs-8",4,"ngIf"],["class","badge badge-light-warning fs-8",4,"ngIf"],["class","text-success",4,"ngIf","ngIfElse"],[1,"text-gray-700","fs-6","mb-2"],["class","d-flex align-items-center gap-3",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"flex-shrink-0","ms-3"],[1,"badge","badge-light-secondary","fs-8"],[1,"badge","badge-light-warning","fs-8"],[1,"text-success"],[1,"text-warning"],[1,"ki-outline","ki-time","fs-6","me-1"],["class","text-info",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"text-info"],[1,"ki-outline","ki-tag","fs-7","me-1"],[1,"ki-outline","ki-information","fs-7","me-1"],[1,"mt-3"],["icon","ki-outline ki-check","size","small","styleClass","p-button-outlined p-button-success p-button-sm",3,"onClick","label"],[1,"ki-outline","ki-check-circle","fs-4"],[1,"w-10px","h-10px","rounded-circle","bg-warning"]],template:function(s,n){1&s&&(e.j41(0,"div",2)(1,"div",3)(2,"div")(3,"h1",4),e.nrm(4,"i",5),e.EFF(5),e.k0s(),e.j41(6,"p",6),e.EFF(7),e.k0s()(),e.j41(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10),e.EFF(12),e.k0s(),e.j41(13,"div",11),e.EFF(14),e.k0s()(),e.j41(15,"div",9)(16,"div",12),e.EFF(17),e.k0s(),e.j41(18,"div",11),e.EFF(19),e.k0s()()(),e.j41(20,"p-button",13),e.bIt("onClick",function(){return n.markAllAsRead()}),e.k0s()()(),e.j41(21,"div",14)(22,"div",15)(23,"label",16),e.EFF(24),e.k0s(),e.j41(25,"p-dropdown",17),e.mxI("ngModelChange",function(a){return e.DH7(n.selectedFilter,a)||(n.selectedFilter=a),a}),e.bIt("onChange",function(a){return n.onFilterChange(a)}),e.k0s()(),e.j41(26,"div",18)(27,"label",16),e.EFF(28),e.k0s(),e.j41(29,"span",19),e.nrm(30,"i",20),e.j41(31,"input",21),e.mxI("ngModelChange",function(a){return e.DH7(n.searchValue,a)||(n.searchValue=a),a}),e.bIt("input",function(){return n.onSearchChange()}),e.k0s()()()(),e.j41(32,"div",22),e.DNE(33,su,4,1,"div",23)(34,ou,6,2,"div",23)(35,fu,2,1,"div",24),e.k0s()()),2&s&&(e.R7$(5),e.SpI(" ","ar"===n.lang?"\u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a":"Notifications"," "),e.R7$(2),e.SpI(" ","ar"===n.lang?"\u0625\u062f\u0627\u0631\u0629 \u062c\u0645\u064a\u0639 \u0625\u0634\u0639\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645":"Manage all system notifications"," "),e.R7$(5),e.JRh(n.totalCount),e.R7$(2),e.JRh("ar"===n.lang?"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a":"Total"),e.R7$(3),e.JRh(n.unreadCount),e.R7$(2),e.JRh("ar"===n.lang?"\u063a\u064a\u0631 \u0645\u0642\u0631\u0648\u0621":"Unread"),e.R7$(),e.FS9("label","ar"===n.lang?"\u0642\u0631\u0627\u0621\u0629 \u0627\u0644\u0643\u0644":"Mark All Read"),e.Y8G("disabled",0===n.unreadCount),e.R7$(4),e.SpI(" ","ar"===n.lang?"\u062a\u0635\u0641\u064a\u0629 \u062d\u0633\u0628 \u0627\u0644\u0646\u0648\u0639":"Filter by Type"," "),e.R7$(),e.FS9("placeholder","ar"===n.lang?"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0625\u0634\u0639\u0627\u0631":"Select notification type"),e.Y8G("options",n.filterOptions),e.R50("ngModel",n.selectedFilter),e.R7$(3),e.SpI(" ","ar"===n.lang?"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a":"Search Notifications"," "),e.R7$(3),e.FS9("placeholder","ar"===n.lang?"\u0627\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0645\u062d\u062a\u0648\u0649...":"Search content..."),e.R50("ngModel",n.searchValue),e.R7$(2),e.Y8G("ngIf",n.loading),e.R7$(),e.Y8G("ngIf",!n.loading&&0===n.filteredNotifications.length),e.R7$(),e.Y8G("ngIf",!n.loading&&n.filteredNotifications.length>0))},dependencies:[u.YU,u.Sq,u.bT,g.$n,Q.ll,V.ms,x.S,c.me,c.BC,c.vS,Ae.p,u.PV,nu.d,iu.U],styles:[".notification-item[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.notification-item[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #00000014}.notification-item[_ngcontent-%COMP%]:last-child{border-bottom:none!important}.symbol-label[_ngcontent-%COMP%]{border:2px solid rgba(var(--bs-info-rgb),.2)}.bg-light-warning[_ngcontent-%COMP%]{background-color:rgba(var(--bs-warning-rgb),.05)!important;border-left:4px solid var(--bs-warning)}.badge[_ngcontent-%COMP%]{font-weight:500}p-progressSpinner[_ngcontent-%COMP%]{display:block}@media (max-width: 768px){.notification-item[_ngcontent-%COMP%]{padding:1rem!important}.notification-item[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start!important}.notification-item[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]   .flex-shrink-0[_ngcontent-%COMP%]{margin-bottom:.5rem;margin-right:0!important}.card-body[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%], .card-body[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-md-8[_ngcontent-%COMP%]{margin-bottom:1rem}}"]})}return i})()},{path:"main-dashboard/requests",component:Sd},{path:"main-dashboard/departments",component:ut},{path:"main-dashboard/verification-questions",component:eu},{path:"main-dashboard/positions",component:qt},{path:"main-dashboard/countries",component:jn},{path:"main-dashboard/regions",component:ei},{path:"main-dashboard/consulting-fields",component:tr},{path:"main-dashboard/ISIC-code",component:Dr},{path:"main-dashboard/industries",component:vc},{path:"main-dashboard/tags",component:ga},{path:"main-dashboard/hscode",component:Pa},{path:"main-dashboard/guidelines",component:sl},{path:"main-dashboard/economic-blocks",component:$d},{path:"",redirectTo:"main-dashboard/notifications",pathMatch:"full"}]},{path:"topics",component:Ol}];let vu=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275mod=e.$C({type:i});static \u0275inj=e.G2t({imports:[j.iI.forChild(bu),j.iI]})}return i})();var Cu=p(491),yu=p(5114),Tu=p(5033),Fu=p(4827),Eu=p(7697);let ku=(()=>{class i{static \u0275fac=function(s){return new(s||i)};static \u0275mod=e.$C({type:i});static \u0275inj=e.G2t({providers:[Tu.w],imports:[u.MD,h.P,g.tm,v.S,T.d,vu,Q.e1,V.kr,ke.sv,x.u,c.YN,X.VG,Fo,Eu.ft,c.X1,Cu.D,re.h6,q.MB,yu.u,w.h,$.bG,Fu.P,ae.bh,Ee.iV,Z.I,Ae.d]})}return i})()},8439:(H,A,p)=>{p.d(A,{R:()=>j});var u=p(4438),T=p(461);let j=(()=>{class e extends T.h{static \u0275fac=(()=>{let k;return function(b){return(k||(k=u.xGo(e)))(b||e)}})();static \u0275cmp=u.VBU({type:e,selectors:[["AngleDownIcon"]],standalone:!0,features:[u.Vt3,u.aNF],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3.58659 4.5007C3.68513 4.50023 3.78277 4.51945 3.87379 4.55723C3.9648 4.59501 4.04735 4.65058 4.11659 4.7207L7.11659 7.7207L10.1166 4.7207C10.2619 4.65055 10.4259 4.62911 10.5843 4.65956C10.7427 4.69002 10.8871 4.77074 10.996 4.88976C11.1049 5.00877 11.1726 5.15973 11.1889 5.32022C11.2052 5.48072 11.1693 5.6422 11.0866 5.7807L7.58659 9.2807C7.44597 9.42115 7.25534 9.50004 7.05659 9.50004C6.85784 9.50004 6.66722 9.42115 6.52659 9.2807L3.02659 5.7807C2.88614 5.64007 2.80725 5.44945 2.80725 5.2507C2.80725 5.05195 2.88614 4.86132 3.02659 4.7207C3.09932 4.64685 3.18675 4.58911 3.28322 4.55121C3.37969 4.51331 3.48305 4.4961 3.58659 4.5007Z","fill","currentColor"]],template:function(y,b){1&y&&(u.qSk(),u.j41(0,"svg",0),u.nrm(1,"path",1),u.k0s()),2&y&&(u.HbH(b.getClassNames()),u.BMQ("aria-label",b.ariaLabel)("aria-hidden",b.ariaHidden)("role",b.role))},encapsulation:2})}return e})()},8263:(H,A,p)=>{p.d(A,{D:()=>j});var u=p(4438),T=p(461);let j=(()=>{class e extends T.h{static \u0275fac=(()=>{let k;return function(b){return(k||(k=u.xGo(e)))(b||e)}})();static \u0275cmp=u.VBU({type:e,selectors:[["AngleRightIcon"]],standalone:!0,features:[u.Vt3,u.aNF],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5.25 11.1728C5.14929 11.1694 5.05033 11.1455 4.9592 11.1025C4.86806 11.0595 4.78666 10.9984 4.72 10.9228C4.57955 10.7822 4.50066 10.5916 4.50066 10.3928C4.50066 10.1941 4.57955 10.0035 4.72 9.86283L7.72 6.86283L4.72 3.86283C4.66067 3.71882 4.64765 3.55991 4.68275 3.40816C4.71785 3.25642 4.79932 3.11936 4.91585 3.01602C5.03238 2.91268 5.17819 2.84819 5.33305 2.83149C5.4879 2.81479 5.64411 2.84671 5.78 2.92283L9.28 6.42283C9.42045 6.56346 9.49934 6.75408 9.49934 6.95283C9.49934 7.15158 9.42045 7.34221 9.28 7.48283L5.78 10.9228C5.71333 10.9984 5.63193 11.0595 5.5408 11.1025C5.44966 11.1455 5.35071 11.1694 5.25 11.1728Z","fill","currentColor"]],template:function(y,b){1&y&&(u.qSk(),u.j41(0,"svg",0),u.nrm(1,"path",1),u.k0s()),2&y&&(u.HbH(b.getClassNames()),u.BMQ("aria-label",b.ariaLabel)("aria-hidden",b.ariaHidden)("role",b.role))},encapsulation:2})}return e})()},2242:(H,A,p)=>{p.d(A,{S:()=>q,u:()=>k});var u=p(4438),T=p(177),j=p(9417),e=p(5779);let q=(()=>{class y{el;ngModel;cd;config;variant="outlined";filled;constructor(c,R,f,h){this.el=c,this.ngModel=R,this.cd=f,this.config=h}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}static \u0275fac=function(R){return new(R||y)(u.rXU(u.aKT),u.rXU(j.vS,8),u.rXU(u.gRc),u.rXU(e.r1))};static \u0275dir=u.FsC({type:y,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(R,f){1&R&&u.bIt("input",function(g){return f.onInput(g)}),2&R&&u.AVh("p-filled",f.filled)("p-variant-filled","filled"===f.variant||"filled"===f.config.inputStyle())},inputs:{variant:"variant"}})}return y})(),k=(()=>{class y{static \u0275fac=function(R){return new(R||y)};static \u0275mod=u.$C({type:y});static \u0275inj=u.G2t({imports:[T.MD]})}return y})()}}]);