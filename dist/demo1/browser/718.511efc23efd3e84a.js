"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[718],{8948:(x,I,d)=>{d.d(I,{C:()=>y});var u=d(1626),t=d(4412),_=d(8810),p=d(6354),m=d(9437),g=d(980),f=d(4438),S=d(779);let y=(()=>{class A{http;translationService;insightaHost="https://api.foresighta.co";accountExistApi=`${this.insightaHost}/api/company/account/exist`;inviteInsighterApi=`${this.insightaHost}/api/company/insighter`;companyOrderKnowledgeStatisticsApi=`${this.insightaHost}/api/company/order/knowledge/statistics`;companyOrderMeetingStatisticsApi=`${this.insightaHost}/api/company/order/meeting/statistics`;dashboardStatisticsApi=`${this.insightaHost}/api/company/insighter/statistics`;isLoadingSubject=new t.t(!1);isLoading$=this.isLoadingSubject.asObservable();currentLang="en";constructor(i,s){this.http=i,this.translationService=s,this.translationService.onLanguageChange().subscribe(a=>{this.currentLang=a||"en"})}setLoading(i){this.isLoadingSubject.next(i)}handleError(i){return(0,_.$)(i)}checkAccountExist(i){const s=new u.Lr({Accept:"application/json","Content-Type":"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.post(this.accountExistApi,{email:i},{headers:s}).pipe((0,p.T)(a=>a),(0,m.W)(a=>this.handleError(a)),(0,g.j)(()=>this.setLoading(!1)))}getInsighters(i=1,s=10){const a=new u.Lr({Accept:"application/json","Accept-Language":this.currentLang});let o=(new u.Nl).set("page",i.toString()).set("per_page",s.toString());return this.setLoading(!0),this.http.get(this.inviteInsighterApi,{headers:a,params:o}).pipe((0,p.T)(l=>l),(0,m.W)(l=>this.handleError(l)),(0,g.j)(()=>this.setLoading(!1)))}inviteInsighter(i){const s=new u.Lr({Accept:"application/json","Accept-Language":this.currentLang}),a=new FormData;return a.append("email",i.email),a.append("first_name",i.first_name),a.append("last_name",i.last_name),i.country_id&&a.append("country_id",i.country_id.toString()),i.industries&&i.industries.length>0&&i.industries.forEach(o=>{a.append("industries[]",o)}),i.consulting_field&&i.consulting_field.length>0&&i.consulting_field.forEach(o=>{a.append("consulting_field[]",o)}),this.setLoading(!0),this.http.post(this.inviteInsighterApi,a,{headers:s}).pipe((0,p.T)(o=>o),(0,m.W)(o=>this.handleError(o)),(0,g.j)(()=>this.setLoading(!1)))}activateInsighter(i){const s=new u.Lr({Accept:"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.put(`${this.inviteInsighterApi}/activate/${i}`,{},{headers:s}).pipe((0,p.T)(a=>a),(0,m.W)(a=>this.handleError(a)),(0,g.j)(()=>this.setLoading(!1)))}deactivateInsighter(i){const s=new u.Lr({Accept:"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.put(`${this.inviteInsighterApi}/deactivate/${i}`,{},{headers:s}).pipe((0,p.T)(a=>a),(0,m.W)(a=>this.handleError(a)),(0,g.j)(()=>this.setLoading(!1)))}deleteInsighter(i){const s=new u.Lr({Accept:"application/json","Accept-Language":this.currentLang});return this.setLoading(!0),this.http.delete(`${this.inviteInsighterApi}/${i}`,{headers:s}).pipe((0,p.T)(a=>a),(0,m.W)(a=>this.handleError(a)),(0,g.j)(()=>this.setLoading(!1)))}getEmployeeStatusStatistics(){this.setLoading(!0);const i=new u.Lr({Accept:"application/json","Accept-Language":this.currentLang});return this.http.get(this.inviteInsighterApi,{headers:i}).pipe((0,p.T)(s=>{const a={active:0,pending:0,inactive:0};return s.data.forEach(o=>{const l=o.insighter_status;l in a&&a[l]++}),{data:[{type:"active",count:a.active},{type:"pending",count:a.pending},{type:"inactive",count:a.inactive}]}}),(0,m.W)(s=>this.handleError(s)),(0,g.j)(()=>this.setLoading(!1)))}getEmployeeKnowledgeStatistics(){this.setLoading(!0);const i=new u.Lr({Accept:"application/json","Accept-Language":this.currentLang});return this.http.get(this.inviteInsighterApi,{headers:i}).pipe((0,p.T)(s=>({data:s.data.filter(o=>o.knowledge_type_statistics).map(o=>{const l=o.knowledge_type_statistics||{},j=Object.values(l).reduce((B,v)=>B+("number"==typeof v?v:0),0);return{id:o.id,name:o.name,profile_photo_url:o.profile_photo_url,statistics:{report:l.report||0,data:l.data||0,insight:l.insight||0,manual:l.manual||0,course:l.course||0},totalKnowledge:j}}).sort((o,l)=>l.totalKnowledge-o.totalKnowledge).slice(0,10)})),(0,m.W)(s=>this.handleError(s)),(0,g.j)(()=>this.setLoading(!1)))}getCompanyOrderKnowledgeStatistics(){this.setLoading(!0);const i=new u.Lr({Accept:"application/json","Accept-Language":this.currentLang});return this.http.get(this.companyOrderKnowledgeStatisticsApi,{headers:i}).pipe((0,p.T)(s=>{const a=(s?.data?.insighters??[]).map(o=>({uuid:o?.uuid??"",insighter_name:o?.insighter_name??"",total_orders:o?.total_orders??0,total_amount:o?.total_amount??0,insighter_profit:o?.insighter_profit??0}));return{total_orders:s?.data?.total_orders??0,total_amount:s?.data?.total_amount??0,total_company_profit:s?.data?.total_company_profit??0,insighters:a}}),(0,m.W)(s=>this.handleError(s)),(0,g.j)(()=>this.setLoading(!1)))}getCompanyOrderMeetingStatistics(){this.setLoading(!0);const i=new u.Lr({Accept:"application/json","Accept-Language":this.currentLang});return this.http.get(this.companyOrderMeetingStatisticsApi,{headers:i}).pipe((0,p.T)(s=>{const a=(s?.data?.insighters??[]).map(o=>({uuid:o?.uuid??"",insighter_name:o?.insighter_name??"",total_orders:o?.total_orders??0,total_amount:o?.total_amount??0,insighter_profit:o?.insighter_profit??0}));return{total_orders:s?.data?.total_orders??0,total_amount:s?.data?.total_amount??0,total_company_profit:s?.data?.total_company_profit??0,insighters:a}}),(0,m.W)(s=>this.handleError(s)),(0,g.j)(()=>this.setLoading(!1)))}getDashboardStatistics(){this.setLoading(!0);const i=new u.Lr({Accept:"application/json","Accept-Language":this.currentLang});return this.http.get(this.dashboardStatisticsApi,{headers:i}).pipe((0,p.T)(s=>s.data),(0,m.W)(s=>this.handleError(s)),(0,g.j)(()=>this.setLoading(!1)))}static \u0275fac=function(s){return new(s||A)(f.KVO(u.Qq),f.KVO(S.L))};static \u0275prov=f.jDH({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})()},6661:(x,I,d)=>{d.d(I,{Q:()=>O,J:()=>F});var u=d(467),t=d(4438),_=d(177),p=d(6780);let g,m=1;const f={};function S(c){return c in f&&(delete f[c],!0)}const y={setImmediate(c){const r=m++;return f[r]=!0,g||(g=Promise.resolve()),g.then(()=>S(r)&&c()),r},clearImmediate(c){S(c)}},{setImmediate:w,clearImmediate:i}=y,s={setImmediate(...c){const{delegate:r}=s;return(r?.setImmediate||w)(...c)},clearImmediate(c){const{delegate:r}=s;return(r?.clearImmediate||i)(c)},delegate:void 0};var o=d(9687);const j=new class l extends o.q{flush(r){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let h;r=r||n.shift();do{if(h=r.execute(r.state,r.delay))break}while((r=n[0])&&r.id===e&&n.shift());if(this._active=!1,h){for(;(r=n[0])&&r.id===e&&n.shift();)r.unsubscribe();throw h}}}(class a extends p.R{constructor(r,e){super(r,e),this.scheduler=r,this.work=e}requestAsyncId(r,e,n=0){return null!==n&&n>0?super.requestAsyncId(r,e,n):(r.actions.push(this),r._scheduled||(r._scheduled=s.setImmediate(r.flush.bind(r,void 0))))}recycleAsyncId(r,e,n=0){var h;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(r,e,n);const{actions:L}=r;null!=e&&(null===(h=L[L.length-1])||void 0===h?void 0:h.id)!==e&&(s.clearImmediate(e),r._scheduled===e&&(r._scheduled=void 0))}}),v=["chart"];let O=(()=>{class c{constructor(){this.chart=(0,t.hFB)(),this.annotations=(0,t.hFB)(),this.colors=(0,t.hFB)(),this.dataLabels=(0,t.hFB)(),this.series=(0,t.hFB)(),this.stroke=(0,t.hFB)(),this.labels=(0,t.hFB)(),this.legend=(0,t.hFB)(),this.markers=(0,t.hFB)(),this.noData=(0,t.hFB)(),this.parsing=(0,t.hFB)(),this.fill=(0,t.hFB)(),this.tooltip=(0,t.hFB)(),this.plotOptions=(0,t.hFB)(),this.responsive=(0,t.hFB)(),this.xaxis=(0,t.hFB)(),this.yaxis=(0,t.hFB)(),this.forecastDataPoints=(0,t.hFB)(),this.grid=(0,t.hFB)(),this.states=(0,t.hFB)(),this.title=(0,t.hFB)(),this.subtitle=(0,t.hFB)(),this.theme=(0,t.hFB)(),this.autoUpdateSeries=(0,t.hFB)(!0),this.chartReady=(0,t.CGW)(),this.chartInstance=(0,t.vPA)(null),this.chartElement=t.ebz.required("chart"),this.ngZone=(0,t.WQX)(t.SKi),this.isBrowser=(0,_.UE)((0,t.WQX)(t.Agw))}ngOnChanges(e){this.isBrowser&&this.ngZone.runOutsideAngular(()=>{j.schedule(()=>this.hydrate(e))})}ngOnDestroy(){this.destroy()}hydrate(e){this.autoUpdateSeries()&&0===Object.keys(e).filter(h=>"series"!==h).length?this.updateSeries(this.series(),!0):this.createElement()}createElement(){var e=this;return(0,u.A)(function*(){const{default:n}=yield d.e(4550).then(d.t.bind(d,4550,19));window.ApexCharts||=n;const h={};["annotations","chart","colors","dataLabels","series","stroke","labels","legend","fill","tooltip","plotOptions","responsive","markers","noData","parsing","xaxis","yaxis","forecastDataPoints","grid","states","title","subtitle","theme"].forEach(M=>{const D=e[M]();D&&(h[M]=D)}),e.destroy();const E=e.ngZone.runOutsideAngular(()=>new n(e.chartElement().nativeElement,h));e.chartInstance.set(E),e.render(),e.chartReady.emit({chartObj:E})})()}render(){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.render())}updateOptions(e,n,h,L){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateOptions(e,n,h,L))}updateSeries(e,n){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateSeries(e,n))}appendSeries(e,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendSeries(e,n))}appendData(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendData(e))}highlightSeries(e){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.highlightSeries(e))}toggleSeries(e){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleSeries(e))}showSeries(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.showSeries(e))}hideSeries(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.hideSeries(e))}resetSeries(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.resetSeries())}zoomX(e,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.zoomX(e,n))}toggleDataPointSelection(e,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleDataPointSelection(e,n))}destroy(){this.chartInstance()?.destroy(),this.chartInstance.set(null)}setLocale(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.setLocale(e))}paper(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.paper())}addXaxisAnnotation(e,n,h){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addXaxisAnnotation(e,n,h))}addYaxisAnnotation(e,n,h){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addYaxisAnnotation(e,n,h))}addPointAnnotation(e,n,h){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addPointAnnotation(e,n,h))}removeAnnotation(e,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.removeAnnotation(e,n))}clearAnnotations(e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.clearAnnotations(e))}dataURI(e){return this.chartInstance()?.dataURI(e)}static{this.\u0275fac=function(n){return new(n||c)}}static{this.\u0275cmp=t.VBU({type:c,selectors:[["apx-chart"]],viewQuery:function(n,h){1&n&&t.wEZ(h.chartElement,v,5),2&n&&t.NyB()},inputs:{chart:[t.Mj6.SignalBased,"chart"],annotations:[t.Mj6.SignalBased,"annotations"],colors:[t.Mj6.SignalBased,"colors"],dataLabels:[t.Mj6.SignalBased,"dataLabels"],series:[t.Mj6.SignalBased,"series"],stroke:[t.Mj6.SignalBased,"stroke"],labels:[t.Mj6.SignalBased,"labels"],legend:[t.Mj6.SignalBased,"legend"],markers:[t.Mj6.SignalBased,"markers"],noData:[t.Mj6.SignalBased,"noData"],parsing:[t.Mj6.SignalBased,"parsing"],fill:[t.Mj6.SignalBased,"fill"],tooltip:[t.Mj6.SignalBased,"tooltip"],plotOptions:[t.Mj6.SignalBased,"plotOptions"],responsive:[t.Mj6.SignalBased,"responsive"],xaxis:[t.Mj6.SignalBased,"xaxis"],yaxis:[t.Mj6.SignalBased,"yaxis"],forecastDataPoints:[t.Mj6.SignalBased,"forecastDataPoints"],grid:[t.Mj6.SignalBased,"grid"],states:[t.Mj6.SignalBased,"states"],title:[t.Mj6.SignalBased,"title"],subtitle:[t.Mj6.SignalBased,"subtitle"],theme:[t.Mj6.SignalBased,"theme"],autoUpdateSeries:[t.Mj6.SignalBased,"autoUpdateSeries"]},outputs:{chartReady:"chartReady"},standalone:!0,features:[t.OA$,t.aNF],decls:2,vars:0,consts:[["chart",""]],template:function(n,h){1&n&&t.nrm(0,"div",null,0)},encapsulation:2,changeDetection:0})}}return c})(),F=(()=>{class c{static{this.\u0275fac=function(n){return new(n||c)}}static{this.\u0275mod=t.$C({type:c})}static{this.\u0275inj=t.G2t({})}}return c})()}}]);